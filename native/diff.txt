Only in libffi.old: .gitignore
Only in libffi.old: .svn
diff -rbw libffi.old/ChangeLog libffi/ChangeLog
0a1,369
> 2011-02-25  Anthony Green  <green@moxielogic.com>
> 
> 	* src/powerpc/ffi.c (ffi_prep_closure_loc): Allow for more
> 	32-bit ABIs.
> 
> 2011-02-15  Anthony Green  <green@moxielogic.com>
> 
> 	* m4/ax_cc_maxopt.m4: Don't -malign-double or use -ffast-math.
> 	* configure: Rebuilt.
> 
> 2011-02-13  Anthony Green  <green@moxielogic.com>
> 
> 	* include/ffi_common.h (UNLIKELY, LIKELY): Define.
> 	* src/x86/ffi64.c (UNLIKELY, LIKELY): Remove definition.
> 	* src/prep_cif.c (UNLIKELY, LIKELY): Remove definition.
> 
> 	* src/prep_cif.c (initialize_aggregate): Convert assertion into
> 	FFI_BAD_TYPEDEF return.  Initialize arg size and alignment to 0.
> 
> 	* src/pa/ffi.c (ffi_prep_closure_loc): Don't ASSERT ABI test,
> 	just return FFI_BAD_ABI when things are wrong.
> 	* src/arm/ffi.c (ffi_prep_closure_loc): Ditto.
> 	* src/powerpc/ffi.c (ffi_prep_closure_loc): Ditto.
> 	* src/mips/ffi.c (ffi_prep_closure_loc): Ditto.
> 	* src/ia64/ffi.c (ffi_prep_closure_loc): Ditto.
> 	* src/avr32/ffi.c (ffi_prep_closure_loc): Ditto.
> 
> 2011-02-11  Anthony Green  <green@moxielogic.com>
> 
> 	* libtool-version: Update.
> 	* Makefile.am (nodist_libffi_la_SOURCES): Add src/debug.c if
> 	FFI_DEBUG.
> 	(libffi_la_SOURCES): Remove src/debug.c
> 	(EXTRA_DIST): Add src/debug.c
> 	* Makefile.in: Rebuilt.
> 
> 2011-02-11  Anthony Green  <green@moxielogic.com>
> 
> 	* src/sparc/ffi.c (ffi_prep_closure_loc): Don't ASSERT ABI test,
> 	just return FFI_BAD_ABI when things are wrong.
> 
> 2011-02-09  Stuart Shelton  <srcshelton@gmail.com>
> 
> 	http://bugs.gentoo.org/show_bug.cgi?id=286911
> 	* src/mips/ffitarget.h: Clean up error messages.
> 	* src/java_raw_api.c (ffi_java_translate_args): Cast raw arg to
> 	ffi_raw*.
> 	* include/ffi.h.in: Add pragma for SGI compiler.
> 
> 2011-02-09  Anthony Green  <green@moxielogic.com>
> 
> 	* configure.ac: Add powerpc64-*-darwin* support.
> 
> 2011-02-09  Anthony Green <green@moxielogic.com>
> 
> 	* README: Mention Interix.
> 
> 2011-02-09  Jonathan Callen  <abcd@gentoo.org>
> 
> 	* configure.ac: Add Interix to win32/cygwin/mingw case.
> 	* configure: Ditto.
> 	* src/closures.c: Treat Interix like Cygwin, instead of as a
> 	generic win32.
> 
> 2011-02-09  Anthony Green <green@moxielogic.com>
> 
> 	* testsuite/libffi.call/err_bad_typedef.c: Remove xfail.
> 	* testsuite/libffi.call/err_bad_abi.c: Remove xfail.
> 	* src/x86/ffi64.c (UNLIKELY, LIKELY): Define.
> 	(ffi_prep_closure_loc): Check for bad ABI.
> 	* src/prep_cif.c (UNLIKELY, LIKELY): Define.
> 	(initialize_aggregate): Check for bad types.
> 
> 2011-02-09  Landon Fuller <landonf@plausible.coop>
> 
> 	* Makefile.am (EXTRA_DIST): Add build-ios.sh, src/arm/gentramp.sh,
> 	src/arm/trampoline.S.
> 	(nodist_libffi_la_SOURCES): Add src/arc/trampoline.S.
> 	* configure.ac (FFI_EXEC_TRAMPOLINE_TABLE): Define.
> 	* src/arm/ffi.c (ffi_trampoline_table)
> 	(ffi_closure_trampoline_table_page, ffi_trampoline_table_entry)
> 	(FFI_TRAMPOLINE_CODELOC_CONFIG, FFI_TRAMPOLINE_CONFIG_PAGE_OFFSET)
> 	(FFI_TRAMPOLINE_COUNT, ffi_trampoline_lock, ffi_trampoline_tables)
> 	(ffi_trampoline_table_alloc, ffi_closure_alloc, ffi_closure_free):
> 	Define for FFI_EXEC_TRAMPOLINE_TABLE case (iOS).
> 	(ffi_prep_closure_loc): Handl FFI_EXEC_TRAMPOLINE_TABLE case
> 	separately.
> 	* src/arm/sysv.S: Handle Apple iOS host.
> 	* src/closures.c: Handle FFI_EXEC_TRAMPOLINE_TABLE case.
> 	* build-ios.sh: New file.
> 	* fficonfig.h.in, configure, Makefile.in: Rebuilt.
> 	* README: Mention ARM iOS.
> 
> 2011-02-08  Oren Held  <orenhe@il.ibm.com>
> 
> 	* src/dlmalloc.c (_STRUCT_MALLINFO): Define in order to avoid
> 	redefinition of mallinfo on HP-UX.
> 
> 2011-02-08  Ginn Chen  <ginn.chen@oracle.com>
> 
> 	* src/sparc/ffi.c (ffi_call): Make compatible with Solaris Studio
> 	aggregate return ABI.
> 
> 2011-02-08  Ed  <ed@kdtc.net>
> 
> 	* src/powerpc/asm.h: Fix grammar nit in comment.
> 
> 2011-02-11  Anthony Green  <green@moxielogic.com>
> 
> 	From Tom Honermann <tom.honermann@oracle.com>:
> 	* src/powerpc/aix.S (ffi_call_AIX): Support for xlc toolchain on
> 	AIX.  Declare .ffi_prep_args.  Insert nops after branch
> 	instructions so that the AIX linker can insert TOC reload
> 	instructions.
> 	* src/powerpc/aix_closure.S: Declare .ffi_closure_helper_DARWIN.
> 
> 2011-02-08  Uli Link  <ul.mcamafia@linkitup.de>
> 
> 	* include/ffi.h.in (FFI_64_BIT_MAX): Define and use.
> 
> 2011-02-08  Rafael Avila de Espindola  <respindola@mozilla.com>
> 
> 	* configure.ac: Fix x86 test for pc related relocs.
> 	* confifure: Rebuilt.
> 
> 2011-02-07  Joel Sherrill <joel.sherrill@oarcorp.com>
> 
> 	* libffi/src/m68k/ffi.c: Add RTEMS support for cache flushing.
> 	Handle case when CPU variant does not have long double support.
> 	* libffi/src/m68k/sysv.S: Add support for mc68000, Coldfire,
> 	and cores with soft floating point.
> 
> 2011-02-07  Joel Sherrill <joel.sherrill@oarcorp.com>
> 
> 	* configure.ac: Add mips*-*-rtems* support.
> 	* configure: Regenerate.
> 	* src/mips/ffitarget.h: Ensure needed constants are available
> 	for targets which do not have sgidefs.h.
> 
> 2011-01-26  Dave Korn  <dave.korn.cygwin@gmail.com>
> 
> 	PR target/40125
> 	* configure.ac (AM_LTLDFLAGS): Add -bindir option for windows DLLs.
> 	* configure: Regenerate.
> 
> 2010-12-18  Iain Sandoe  <iains@gcc.gnu.org>
> 
> 	PR libffi/29152
> 	PR libffi/42378
> 	* src/powerpc/darwin_closure.S: Provide Darwin64 implementation,
> 	update comments.
> 	* src/powerpc/ffitarget.h (POWERPC_DARWIN64): New,
> 	(FFI_TRAMPOLINE_SIZE): Update for Darwin64.
> 	* src/powerpc/darwin.S: Provide Darwin64 implementation,
> 	update comments.
> 	* src/powerpc/ffi_darwin.c: Likewise.
> 
> 2010-12-06  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* configure.ac (libffi_cv_as_ascii_pseudo_op): Use double
> 	backslashes.
> 	(libffi_cv_as_string_pseudo_op): Likewise.
> 	* configure: Regenerate.
> 
> 2010-12-03  Chung-Lin Tang  <cltang@codesourcery.com>
> 
> 	* src/arm/sysv.S (ffi_closure_SYSV): Add UNWIND to .pad directive.
> 	(ffi_closure_VFP): Same.
> 	(ffi_call_VFP): Move down to before ffi_closure_VFP. Add '.fpu vfp'
> 	directive.
> 
> 2010-12-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* testsuite/libffi.call/ffitest.h [__sgi] (PRId64, PRIu64): Define.
> 	(PRIuPTR): Define.
> 
> 2010-11-29  Richard Henderson  <rth@redhat.com>
> 	    Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* src/x86/sysv.S (FDE_ENCODING, FDE_ENCODE): Define.
> 	(.eh_frame): Use FDE_ENCODING.
> 	(.LASFDE1, .LASFDE2, LASFDE3): Simplify with FDE_ENCODE.
> 
> 2010-11-22  Jacek Caban <jacek@codeweavers.com>
> 
> 	* configure.ac: Check for symbol underscores on mingw-w64.
> 	* configure: Rebuilt.
> 	* src/x86/win64.S: Correctly access extern symbols in respect to
> 	underscores.
> 
> 2010-11-15  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* testsuite/lib/libffi-dg.exp: Rename ...
> 	* testsuite/lib/libffi.exp: ... to this.
> 	* libffi/testsuite/libffi.call/call.exp: Don't load libffi-dg.exp.
> 	* libffi/testsuite/libffi.special/special.exp: Likewise.
> 
> 2010-10-28  Chung-Lin Tang  <cltang@codesourcery.com>
> 
> 	* src/arm/ffi.c (ffi_prep_args): Add VFP register argument handling
> 	code, new parameter, and return value. Update comments.
> 	(ffi_prep_cif_machdep): Add case for VFP struct return values. Add
> 	call to layout_vfp_args().
> 	(ffi_call_SYSV): Update declaration.
> 	(ffi_call_VFP): New declaration.
> 	(ffi_call): Add VFP struct return conditions. Call ffi_call_VFP()
> 	when ABI is FFI_VFP.
> 	(ffi_closure_VFP): New declaration.
> 	(ffi_closure_SYSV_inner): Add new vfp_args parameter, update call to
> 	ffi_prep_incoming_args_SYSV().
> 	(ffi_prep_incoming_args_SYSV): Update parameters. Add VFP argument
> 	case handling.
> 	(ffi_prep_closure_loc): Pass ffi_closure_VFP to trampoline
> 	construction under VFP hard-float.
> 	(rec_vfp_type_p): New function.
> 	(vfp_type_p): Same.
> 	(place_vfp_arg): Same.
> 	(layout_vfp_args): Same.
> 	* src/arm/ffitarget.h (ffi_abi): Add FFI_VFP. Define FFI_DEFAULT_ABI
> 	based on __ARM_PCS_VFP.
> 	(FFI_EXTRA_CIF_FIELDS): Define for adding VFP hard-float specific
> 	fields.
> 	(FFI_TYPE_STRUCT_VFP_FLOAT): Define internally used type code.
> 	(FFI_TYPE_STRUCT_VFP_DOUBLE): Same.
> 	* src/arm/sysv.S (ffi_call_SYSV): Change call of ffi_prep_args() to
> 	direct call. Move function pointer load upwards.
> 	(ffi_call_VFP): New function.
> 	(ffi_closure_VFP): Same.
> 
> 	* testsuite/lib/libffi-dg.exp (check-flags): New function.
> 	(dg-skip-if): New function.
> 	* testsuite/libffi.call/cls_double_va.c: Skip if target is arm*-*-*
> 	and compiler options include -mfloat-abi=hard.
> 	* testsuite/libffi.call/cls_longdouble_va.c: Same.
> 
> 2010-10-01  Jakub Jelinek  <jakub@redhat.com>
> 
> 	PR libffi/45677
> 	* src/x86/ffi64.c (ffi_prep_cif_machdep): Ensure cif->bytes is
> 	a multiple of 8.
> 	* testsuite/libffi.call/many2.c: New test.
> 
> 2010-08-20  Mark Wielaard  <mjw@redhat.com>
> 
> 	* src/closures.c (open_temp_exec_file_mnt): Check if getmntent_r
> 	returns NULL.
> 
> 2010-08-09  Andreas Tobler  <andreast@fgznet.ch>
> 
> 	* configure.ac: Add target powerpc64-*-freebsd*.
> 	* configure: Regenerate.
> 	* testsuite/libffi.call/cls_align_longdouble_split.c: Pass
> 	-mlong-double-128 only to linux targets.
> 	* testsuite/libffi.call/cls_align_longdouble_split2.c: Likewise.
> 	* testsuite/libffi.call/cls_longdouble.c: Likewise.
> 	* testsuite/libffi.call/huge_struct.c: Likewise.
> 
> 2010-08-05  Dan Witte  <dwitte@mozilla.com>
> 
>         * Makefile.am: Pass FFI_DEBUG define to msvcc.sh for linking to the
>         debug CRT when --enable-debug is given.
>         * configure.ac: Define it.
>         * msvcc.sh: Translate -g and -DFFI_DEBUG appropriately.
> 
> 2010-08-04  Dan Witte  <dwitte@mozilla.com>
> 
> 	* src/x86/ffitarget.h: Add X86_ANY define for all x86/x86_64
> 	platforms.
> 	* src/x86/ffi.c: Remove redundant ifdef checks.
> 	* src/prep_cif.c: Push stack space computation into src/x86/ffi.c
> 	for X86_ANY so return value space doesn't get added twice.
> 
> 2010-08-03  Neil Rashbrooke <neil@parkwaycc.co.uk>
> 
> 	* msvcc.sh: Don't pass -safeseh to ml64 because behavior is buggy.
> 
> 2010-07-22  Dan Witte  <dwitte@mozilla.com>
> 
> 	* src/*/ffitarget.h: Make FFI_LAST_ABI one past the last valid ABI.
> 	* src/prep_cif.c: Fix ABI assertion.
>         * src/cris/ffi.c: Ditto.
> 
> 2010-07-10  Evan Phoenix  <evan@fallingsnow.net>
> 
> 	* src/closures.c (selinux_enabled_check): Fix strncmp usage bug.
> 
> 2010-07-07  Dan Hor√°k <dan@danny.cz>
> 
> 	* include/ffi.h.in: Protect #define with #ifndef.
> 	* src/powerpc/ffitarget.h: Ditto.
> 	* src/s390/ffitarget.h: Ditto.
> 	* src/sparc/ffitarget.h: Ditto.
> 
> 2010-07-07   Neil Roberts <neil@linux.intel.com>
> 
> 	* src/x86/sysv.S (ffi_call_SYSV): Align the stack pointer to
> 	16-bytes.
> 
> 2010-07-02  Jakub Jelinek  <jakub@redhat.com>
> 
> 	* Makefile.am (AM_MAKEFLAGS): Pass also mandir to submakes.
> 	* Makefile.in: Regenerated.
> 
> 2010-05-19  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* configure.ac (libffi_cv_as_x86_pcrel): Check for illegal in as
> 	output, too.
> 	(libffi_cv_as_ascii_pseudo_op): Check for .ascii.
> 	(libffi_cv_as_string_pseudo_op): Check for .string.
> 	* configure: Regenerate.
> 	* fficonfig.h.in: Regenerate.
> 	* src/x86/sysv.S (.eh_frame): Use .ascii, .string or error.
> 
> 2010-05-11  Dan Witte  <dwitte@mozilla.com>
> 
> 	* doc/libffi.tex: Document previous change.
> 
> 2010-05-11  Makoto Kato <m_kato@ga2.so-net.ne.jp>
> 
> 	* src/x86/ffi.c (ffi_call): Don't copy structs passed by value.
> 
> 2010-05-05  Michael Kohler <michaelkohler@live.com>
> 
> 	* src/dlmalloc.c (dlfree): Fix spelling.
> 	* src/ia64/ffi.c (ffi_prep_cif_machdep): Ditto.
> 	* configure.ac: Ditto.
> 	* configure: Rebuilt.
> 
> 2010-04-13  Dan Witte  <dwitte@mozilla.com>
> 
> 	* msvcc.sh: Build with -W3 instead of -Wall.
> 	* src/powerpc/ffi_darwin.c: Remove build warnings.
> 	* src/x86/ffi.c: Ditto.
> 	* src/x86/ffitarget.h: Ditto.
> 
> 2010-04-12  Dan Witte  <dwitte@mozilla.com>
> 	    Walter Meinl <wuno@lsvw.de>
> 
> 	* configure.ac: Add OS/2 support.
> 	* configure: Rebuilt.
> 	* src/closures.c: Ditto.
> 	* src/dlmalloc.c: Ditto.
> 	* src/x86/win32.S: Ditto.
> 
> 2010-04-07  Jakub Jelinek  <jakub@redhat.com>
> 
> 	* testsuite/libffi.call/err_bad_abi.c: Remove unused args variable.
> 
> 2010-04-02  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>
> 
> 	* Makefile.in: Regenerate.
> 	* aclocal.m4: Regenerate.
> 	* include/Makefile.in: Regenerate.
> 	* man/Makefile.in: Regenerate.
> 	* testsuite/Makefile.in: Regenerate.
> 
> 2010-03-30  Dan Witte  <dwitte@mozilla.com>
> 
> 	* msvcc.sh: Disable build warnings.
> 	* README (tested): Clarify windows build procedure.
> 
> 2010-03-15  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* configure.ac (libffi_cv_as_x86_64_unwind_section_type): New test.
> 	* configure: Regenerate.
> 	* fficonfig.h.in: Regenerate.
> 	* libffi/src/x86/unix64.S (.eh_frame)
> 	[HAVE_AS_X86_64_UNWIND_SECTION_TYPE]: Use @unwind section type.
> 
5a375,416
> 2010-02-24  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
> 
> 	* doc/libffi.texi (The Closure API): Fix typo.
> 	* doc/libffi.info: Remove.
> 
> 2010-02-15  Matthias Klose  <doko@ubuntu.com>
> 
> 	* src/arm/sysv.S (__ARM_ARCH__): Define for processor
> 	__ARM_ARCH_7EM__.
> 
> 2010-01-15  Anthony Green  <green@redhat.com>
> 
> 	* README: Add notes on building with Microsoft Visual C++.
> 
> 2010-01-15  Daniel Witte  <dwitte@mozilla.com>
> 
> 	* msvcc.sh: New file.
> 
> 	* src/x86/win32.S: Port assembly routines to MSVC and #ifdef.
> 	* src/x86/ffi.c: Tweak function declaration and remove excess
> 	parens.
> 	* include/ffi.h.in: Add __declspec(align(8)) to typedef struct
> 	ffi_closure.
> 
> 	* src/x86/ffi.c: Merge ffi_call_SYSV and ffi_call_STDCALL into new
> 	function ffi_call_win32 on X86_WIN32.
> 	* src/x86/win32.S (ffi_call_SYSV): Rename to ffi_call_win32.
> 	(ffi_call_STDCALL): Remove.
> 
> 	* src/prep_cif.c (ffi_prep_cif): Move stack space allocation code
> 	to ffi_prep_cif_machdep for x86.
> 	* src/x86/ffi.c (ffi_prep_cif_machdep): To here.
> 
> 2010-01-15  Oliver Kiddle  <okiddle@yahoo.co.uk>
> 
> 	* src/x86/ffitarget.h (ffi_abi): Check for __i386 and __amd64 for
> 	Sun Studio compiler compatibility.
> 
> 2010-01-12  Conrad Irwin <conrad.irwin@gmail.com>
> 
> 	* doc/libffi.texi: Add closure example.
> 
diff -rbw libffi.old/ChangeLog.libffi libffi/ChangeLog.libffi
1c1
< 2010-01-15  Anthony Green  <green@redhat.com>
---
> 2011-02-08  Andreas Tobler  <andreast@fgznet.ch>
3,32c3
< 	* README: Add notes on building with Microsoft Visual C++.
< 
< 2010-01-15  Daniel Witte  <dwitte@mozilla.com>
< 
< 	* msvcc.sh: New file.
< 
< 	* src/x86/win32.S: Port assembly routines to MSVC and #ifdef.
< 	* src/x86/ffi.c: Tweak function declaration and remove excess
< 	parens.
< 	* include/ffi.h.in: Add __declspec(align(8)) to typedef struct
< 	ffi_closure.
< 
< 	* src/x86/ffi.c: Merge ffi_call_SYSV and ffi_call_STDCALL into new
< 	function ffi_call_win32 on X86_WIN32.
< 	* src/x86/win32.S (ffi_call_SYSV): Rename to ffi_call_win32.
< 	(ffi_call_STDCALL): Remove.
< 
< 	* src/prep_cif.c (ffi_prep_cif): Move stack space allocation code
< 	to ffi_prep_cif_machdep for x86.
< 	* src/x86/ffi.c (ffi_prep_cif_machdep): To here.
< 
< 2010-01-15  Oliver Kiddle  <okiddle@yahoo.co.uk>
< 
< 	* src/x86/ffitarget.h (ffi_abi): Check for __i386 and __amd64 for
< 	Sun Studio compiler compatibility. 
< 
< 2010-01-12  Conrad Irwin <conrad.irwin@gmail.com>
< 
< 	* doc/libffi.texi: Add closure example.
< 	* doc/libffi.info: Rebuilt.
---
> 	* testsuite/lib/libffi.exp: Tweak for stand-alone mode.
diff -rbw libffi.old/LICENSE libffi/LICENSE
1c1
< libffi - Copyright (c) 1996-2009  Anthony Green, Red Hat, Inc and others.  
---
> libffi - Copyright (c) 1996-2011  Anthony Green, Red Hat, Inc and others.
12,13c12,13
< The above copyright notice and this permission notice shall be included
< in all copies or substantial portions of the Software.
---
> The above copyright notice and this permission notice shall be
> included in all copies or substantial portions of the Software.
diff -rbw libffi.old/Makefile.am libffi/Makefile.am
9,15c9,14
< 	src/arm/ffi.c src/arm/sysv.S src/arm/ffitarget.h \
< 	src/avr32/ffi.c src/avr32/sysv.S src/avr32/ffitarget.h \
< 	src/cris/ffi.c src/cris/sysv.S src/cris/ffitarget.h \
< 	src/ia64/ffi.c src/ia64/ffitarget.h src/ia64/ia64_flags.h \
< 	src/ia64/unix.S \
< 	src/mips/ffi.c src/mips/n32.S src/mips/o32.S \
< 	src/mips/ffitarget.h \
---
> 	src/arm/ffi.c src/arm/sysv.S src/arm/trampoline.S		\
> 	src/arm/ffitarget.h src/avr32/ffi.c src/avr32/sysv.S		\
> 	src/avr32/ffitarget.h src/cris/ffi.c src/cris/sysv.S		\
> 	src/cris/ffitarget.h src/ia64/ffi.c src/ia64/ffitarget.h	\
> 	src/ia64/ia64_flags.h src/ia64/unix.S src/mips/ffi.c		\
> 	src/mips/n32.S src/mips/o32.S src/mips/ffitarget.h		\
18,21c17,19
< 	src/powerpc/ffi.c src/powerpc/sysv.S \
< 	src/powerpc/linux64.S src/powerpc/linux64_closure.S \
< 	src/powerpc/ppc_closure.S src/powerpc/asm.h \
< 	src/powerpc/aix.S src/powerpc/darwin.S \
---
> 	src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/linux64.S	\
> 	src/powerpc/linux64_closure.S src/powerpc/ppc_closure.S		\
> 	src/powerpc/asm.h src/powerpc/aix.S src/powerpc/darwin.S	\
25,35c23,35
< 	src/sh/ffi.c src/sh/sysv.S src/sh/ffitarget.h \
< 	src/sh64/ffi.c src/sh64/sysv.S src/sh64/ffitarget.h \
< 	src/sparc/v8.S src/sparc/v9.S src/sparc/ffitarget.h \
< 	src/sparc/ffi.c src/x86/darwin64.S \
< 	src/x86/ffi.c src/x86/sysv.S src/x86/win32.S src/x86/win64.S \
< 	src/x86/darwin.S src/x86/freebsd.S \
< 	src/x86/ffi64.c src/x86/unix64.S src/x86/ffitarget.h \
< 	src/pa/ffitarget.h src/pa/ffi.c src/pa/linux.S src/pa/hpux32.S \
< 	src/frv/ffi.c src/frv/eabi.S src/frv/ffitarget.h src/dlmalloc.c \
< 	libtool-version ChangeLog.libffi m4/libtool.m4 \
< 	m4/lt~obsolete.m4 m4/ltoptions.m4 m4/ltsugar.m4 m4/ltversion.m4
---
> 	src/sh/ffi.c src/sh/sysv.S src/sh/ffitarget.h src/sh64/ffi.c	\
> 	src/sh64/sysv.S src/sh64/ffitarget.h src/sparc/v8.S		\
> 	src/sparc/v9.S src/sparc/ffitarget.h src/sparc/ffi.c		\
> 	src/x86/darwin64.S src/x86/ffi.c src/x86/sysv.S			\
> 	src/x86/win32.S src/x86/win64.S src/x86/darwin.S		\
> 	src/x86/freebsd.S src/x86/ffi64.c src/x86/unix64.S		\
> 	src/x86/ffitarget.h src/pa/ffitarget.h src/pa/ffi.c		\
> 	src/pa/linux.S src/pa/hpux32.S src/frv/ffi.c src/frv/eabi.S	\
> 	src/frv/ffitarget.h src/dlmalloc.c src/moxie/ffi.c		\
> 	src/moxie/eabi.S libtool-version ChangeLog.libffi		\
> 	m4/libtool.m4 m4/lt~obsolete.m4 m4/ltoptions.m4 m4/ltsugar.m4	\
> 	m4/ltversion.m4 build-ios.sh src/arm/gentramp.sh src/debug.c    \
> 	msvcc.sh
71a72
> 	"mandir=$(mandir)" \
89c90
< libffi_la_SOURCES = src/debug.c src/prep_cif.c src/types.c \
---
> libffi_la_SOURCES = src/prep_cif.c src/types.c \
96a98,101
> if FFI_DEBUG
> nodist_libffi_la_SOURCES += src/debug.c
> endif
> 
143a149,151
> if FFI_EXEC_TRAMPOLINE_TABLE
> nodist_libffi_la_SOURCES += src/arm/trampoline.S
> endif
176c184,189
< AM_CFLAGS = -Wall -g -fexceptions
---
> AM_CFLAGS = -g
> if FFI_DEBUG
> # Build debug. Define FFI_DEBUG on the commandline so that, when building with
> # MSVC, it can link against the debug CRT.
> AM_CFLAGS += -DFFI_DEBUG
> endif
diff -rbw libffi.old/Makefile.in libffi/Makefile.in
39,63c39,68
< @MIPS_TRUE@am__append_1 = src/mips/ffi.c src/mips/o32.S src/mips/n32.S
< @X86_TRUE@am__append_2 = src/x86/ffi.c src/x86/sysv.S
< @X86_FREEBSD_TRUE@am__append_3 = src/x86/ffi.c src/x86/freebsd.S
< @X86_WIN32_TRUE@am__append_4 = src/x86/ffi.c src/x86/win32.S
< @X86_WIN64_TRUE@am__append_5 = src/x86/ffi.c src/x86/win64.S
< @X86_DARWIN_TRUE@am__append_6 = src/x86/ffi.c src/x86/darwin.S src/x86/ffi64.c src/x86/darwin64.S
< @SPARC_TRUE@am__append_7 = src/sparc/ffi.c src/sparc/v8.S src/sparc/v9.S
< @ALPHA_TRUE@am__append_8 = src/alpha/ffi.c src/alpha/osf.S
< @IA64_TRUE@am__append_9 = src/ia64/ffi.c src/ia64/unix.S
< @M32R_TRUE@am__append_10 = src/m32r/sysv.S src/m32r/ffi.c
< @M68K_TRUE@am__append_11 = src/m68k/ffi.c src/m68k/sysv.S
< @POWERPC_TRUE@am__append_12 = src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/ppc_closure.S src/powerpc/linux64.S src/powerpc/linux64_closure.S
< @POWERPC_AIX_TRUE@am__append_13 = src/powerpc/ffi_darwin.c src/powerpc/aix.S src/powerpc/aix_closure.S
< @POWERPC_DARWIN_TRUE@am__append_14 = src/powerpc/ffi_darwin.c src/powerpc/darwin.S src/powerpc/darwin_closure.S
< @POWERPC_FREEBSD_TRUE@am__append_15 = src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/ppc_closure.S
< @ARM_TRUE@am__append_16 = src/arm/sysv.S src/arm/ffi.c
< @AVR32_TRUE@am__append_17 = src/avr32/sysv.S src/avr32/ffi.c
< @LIBFFI_CRIS_TRUE@am__append_18 = src/cris/sysv.S src/cris/ffi.c
< @FRV_TRUE@am__append_19 = src/frv/eabi.S src/frv/ffi.c
< @S390_TRUE@am__append_20 = src/s390/sysv.S src/s390/ffi.c
< @X86_64_TRUE@am__append_21 = src/x86/ffi64.c src/x86/unix64.S src/x86/ffi.c src/x86/sysv.S
< @SH_TRUE@am__append_22 = src/sh/sysv.S src/sh/ffi.c
< @SH64_TRUE@am__append_23 = src/sh64/sysv.S src/sh64/ffi.c
< @PA_LINUX_TRUE@am__append_24 = src/pa/linux.S src/pa/ffi.c
< @PA_HPUX_TRUE@am__append_25 = src/pa/hpux32.S src/pa/ffi.c
---
> @FFI_DEBUG_TRUE@am__append_1 = src/debug.c
> @MIPS_TRUE@am__append_2 = src/mips/ffi.c src/mips/o32.S src/mips/n32.S
> @X86_TRUE@am__append_3 = src/x86/ffi.c src/x86/sysv.S
> @X86_FREEBSD_TRUE@am__append_4 = src/x86/ffi.c src/x86/freebsd.S
> @X86_WIN32_TRUE@am__append_5 = src/x86/ffi.c src/x86/win32.S
> @X86_WIN64_TRUE@am__append_6 = src/x86/ffi.c src/x86/win64.S
> @X86_DARWIN_TRUE@am__append_7 = src/x86/ffi.c src/x86/darwin.S src/x86/ffi64.c src/x86/darwin64.S
> @SPARC_TRUE@am__append_8 = src/sparc/ffi.c src/sparc/v8.S src/sparc/v9.S
> @ALPHA_TRUE@am__append_9 = src/alpha/ffi.c src/alpha/osf.S
> @IA64_TRUE@am__append_10 = src/ia64/ffi.c src/ia64/unix.S
> @M32R_TRUE@am__append_11 = src/m32r/sysv.S src/m32r/ffi.c
> @M68K_TRUE@am__append_12 = src/m68k/ffi.c src/m68k/sysv.S
> @POWERPC_TRUE@am__append_13 = src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/ppc_closure.S src/powerpc/linux64.S src/powerpc/linux64_closure.S
> @POWERPC_AIX_TRUE@am__append_14 = src/powerpc/ffi_darwin.c src/powerpc/aix.S src/powerpc/aix_closure.S
> @POWERPC_DARWIN_TRUE@am__append_15 = src/powerpc/ffi_darwin.c src/powerpc/darwin.S src/powerpc/darwin_closure.S
> @POWERPC_FREEBSD_TRUE@am__append_16 = src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/ppc_closure.S
> @ARM_TRUE@am__append_17 = src/arm/sysv.S src/arm/ffi.c
> @ARM_TRUE@@FFI_EXEC_TRAMPOLINE_TABLE_TRUE@am__append_18 = src/arm/trampoline.S
> @AVR32_TRUE@am__append_19 = src/avr32/sysv.S src/avr32/ffi.c
> @LIBFFI_CRIS_TRUE@am__append_20 = src/cris/sysv.S src/cris/ffi.c
> @FRV_TRUE@am__append_21 = src/frv/eabi.S src/frv/ffi.c
> @S390_TRUE@am__append_22 = src/s390/sysv.S src/s390/ffi.c
> @X86_64_TRUE@am__append_23 = src/x86/ffi64.c src/x86/unix64.S src/x86/ffi.c src/x86/sysv.S
> @SH_TRUE@am__append_24 = src/sh/sysv.S src/sh/ffi.c
> @SH64_TRUE@am__append_25 = src/sh64/sysv.S src/sh64/ffi.c
> @PA_LINUX_TRUE@am__append_26 = src/pa/linux.S src/pa/ffi.c
> @PA_HPUX_TRUE@am__append_27 = src/pa/hpux32.S src/pa/ffi.c
> # Build debug. Define FFI_DEBUG on the commandline so that, when building with
> # MSVC, it can link against the debug CRT.
> @FFI_DEBUG_TRUE@am__append_28 = -DFFI_DEBUG
72c77,87
< am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
---
> am__aclocal_m4_deps = $(top_srcdir)/m4/ax_cc_maxopt.m4 \
> 	$(top_srcdir)/m4/ax_cflags_warn_all.m4 \
> 	$(top_srcdir)/m4/ax_check_compiler_flags.m4 \
> 	$(top_srcdir)/m4/ax_compiler_vendor.m4 \
> 	$(top_srcdir)/m4/ax_configure_args.m4 \
> 	$(top_srcdir)/m4/ax_enable_builddir.m4 \
> 	$(top_srcdir)/m4/ax_gcc_archflag.m4 \
> 	$(top_srcdir)/m4/ax_gcc_x86_cpuid.m4 \
> 	$(top_srcdir)/m4/libtool.m4 $(top_srcdir)/m4/ltoptions.m4 \
> 	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
> 	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/acinclude.m4 \
108,110c123,126
< am_libffi_la_OBJECTS = src/debug.lo src/prep_cif.lo src/types.lo \
< 	src/raw_api.lo src/java_raw_api.lo src/closures.lo
< @MIPS_TRUE@am__objects_1 = src/mips/ffi.lo src/mips/o32.lo \
---
> am_libffi_la_OBJECTS = src/prep_cif.lo src/types.lo src/raw_api.lo \
> 	src/java_raw_api.lo src/closures.lo
> @FFI_DEBUG_TRUE@am__objects_1 = src/debug.lo
> @MIPS_TRUE@am__objects_2 = src/mips/ffi.lo src/mips/o32.lo \
112,116c128,132
< @X86_TRUE@am__objects_2 = src/x86/ffi.lo src/x86/sysv.lo
< @X86_FREEBSD_TRUE@am__objects_3 = src/x86/ffi.lo src/x86/freebsd.lo
< @X86_WIN32_TRUE@am__objects_4 = src/x86/ffi.lo src/x86/win32.lo
< @X86_WIN64_TRUE@am__objects_5 = src/x86/ffi.lo src/x86/win64.lo
< @X86_DARWIN_TRUE@am__objects_6 = src/x86/ffi.lo src/x86/darwin.lo \
---
> @X86_TRUE@am__objects_3 = src/x86/ffi.lo src/x86/sysv.lo
> @X86_FREEBSD_TRUE@am__objects_4 = src/x86/ffi.lo src/x86/freebsd.lo
> @X86_WIN32_TRUE@am__objects_5 = src/x86/ffi.lo src/x86/win32.lo
> @X86_WIN64_TRUE@am__objects_6 = src/x86/ffi.lo src/x86/win64.lo
> @X86_DARWIN_TRUE@am__objects_7 = src/x86/ffi.lo src/x86/darwin.lo \
118c134
< @SPARC_TRUE@am__objects_7 = src/sparc/ffi.lo src/sparc/v8.lo \
---
> @SPARC_TRUE@am__objects_8 = src/sparc/ffi.lo src/sparc/v8.lo \
120,124c136,140
< @ALPHA_TRUE@am__objects_8 = src/alpha/ffi.lo src/alpha/osf.lo
< @IA64_TRUE@am__objects_9 = src/ia64/ffi.lo src/ia64/unix.lo
< @M32R_TRUE@am__objects_10 = src/m32r/sysv.lo src/m32r/ffi.lo
< @M68K_TRUE@am__objects_11 = src/m68k/ffi.lo src/m68k/sysv.lo
< @POWERPC_TRUE@am__objects_12 = src/powerpc/ffi.lo src/powerpc/sysv.lo \
---
> @ALPHA_TRUE@am__objects_9 = src/alpha/ffi.lo src/alpha/osf.lo
> @IA64_TRUE@am__objects_10 = src/ia64/ffi.lo src/ia64/unix.lo
> @M32R_TRUE@am__objects_11 = src/m32r/sysv.lo src/m32r/ffi.lo
> @M68K_TRUE@am__objects_12 = src/m68k/ffi.lo src/m68k/sysv.lo
> @POWERPC_TRUE@am__objects_13 = src/powerpc/ffi.lo src/powerpc/sysv.lo \
128c144
< @POWERPC_AIX_TRUE@am__objects_13 = src/powerpc/ffi_darwin.lo \
---
> @POWERPC_AIX_TRUE@am__objects_14 = src/powerpc/ffi_darwin.lo \
131c147
< @POWERPC_DARWIN_TRUE@am__objects_14 = src/powerpc/ffi_darwin.lo \
---
> @POWERPC_DARWIN_TRUE@am__objects_15 = src/powerpc/ffi_darwin.lo \
134c150
< @POWERPC_FREEBSD_TRUE@am__objects_15 = src/powerpc/ffi.lo \
---
> @POWERPC_FREEBSD_TRUE@am__objects_16 = src/powerpc/ffi.lo \
137,142c153,159
< @ARM_TRUE@am__objects_16 = src/arm/sysv.lo src/arm/ffi.lo
< @AVR32_TRUE@am__objects_17 = src/avr32/sysv.lo src/avr32/ffi.lo
< @LIBFFI_CRIS_TRUE@am__objects_18 = src/cris/sysv.lo src/cris/ffi.lo
< @FRV_TRUE@am__objects_19 = src/frv/eabi.lo src/frv/ffi.lo
< @S390_TRUE@am__objects_20 = src/s390/sysv.lo src/s390/ffi.lo
< @X86_64_TRUE@am__objects_21 = src/x86/ffi64.lo src/x86/unix64.lo \
---
> @ARM_TRUE@am__objects_17 = src/arm/sysv.lo src/arm/ffi.lo
> @ARM_TRUE@@FFI_EXEC_TRAMPOLINE_TABLE_TRUE@am__objects_18 = src/arm/trampoline.lo
> @AVR32_TRUE@am__objects_19 = src/avr32/sysv.lo src/avr32/ffi.lo
> @LIBFFI_CRIS_TRUE@am__objects_20 = src/cris/sysv.lo src/cris/ffi.lo
> @FRV_TRUE@am__objects_21 = src/frv/eabi.lo src/frv/ffi.lo
> @S390_TRUE@am__objects_22 = src/s390/sysv.lo src/s390/ffi.lo
> @X86_64_TRUE@am__objects_23 = src/x86/ffi64.lo src/x86/unix64.lo \
144,147c161,164
< @SH_TRUE@am__objects_22 = src/sh/sysv.lo src/sh/ffi.lo
< @SH64_TRUE@am__objects_23 = src/sh64/sysv.lo src/sh64/ffi.lo
< @PA_LINUX_TRUE@am__objects_24 = src/pa/linux.lo src/pa/ffi.lo
< @PA_HPUX_TRUE@am__objects_25 = src/pa/hpux32.lo src/pa/ffi.lo
---
> @SH_TRUE@am__objects_24 = src/sh/sysv.lo src/sh/ffi.lo
> @SH64_TRUE@am__objects_25 = src/sh64/sysv.lo src/sh64/ffi.lo
> @PA_LINUX_TRUE@am__objects_26 = src/pa/linux.lo src/pa/ffi.lo
> @PA_HPUX_TRUE@am__objects_27 = src/pa/hpux32.lo src/pa/ffi.lo
156c173,174
< 	$(am__objects_24) $(am__objects_25)
---
> 	$(am__objects_24) $(am__objects_25) $(am__objects_26) \
> 	$(am__objects_27)
163,166c181,184
< am__objects_26 = src/debug.lo src/prep_cif.lo src/types.lo \
< 	src/raw_api.lo src/java_raw_api.lo src/closures.lo
< am_libffi_convenience_la_OBJECTS = $(am__objects_26)
< am__objects_27 = $(am__objects_1) $(am__objects_2) $(am__objects_3) \
---
> am__objects_28 = src/prep_cif.lo src/types.lo src/raw_api.lo \
> 	src/java_raw_api.lo src/closures.lo
> am_libffi_convenience_la_OBJECTS = $(am__objects_28)
> am__objects_29 = $(am__objects_1) $(am__objects_2) $(am__objects_3) \
174,175c192,193
< 	$(am__objects_25)
< nodist_libffi_convenience_la_OBJECTS = $(am__objects_27)
---
> 	$(am__objects_25) $(am__objects_26) $(am__objects_27)
> nodist_libffi_convenience_la_OBJECTS = $(am__objects_29)
284a303
> DLLTOOL = @DLLTOOL@
291a311
> FFI_EXEC_TRAMPOLINE_TABLE = @FFI_EXEC_TRAMPOLINE_TABLE@
309a330
> MANIFEST_TOOL = @MANIFEST_TOOL@
321a343
> PACKAGE_URL = @PACKAGE_URL@
323a346
> PRTDIAG = @PRTDIAG@
335a359
> ac_ct_AR = @ac_ct_AR@
342a367
> ax_enable_builddir_sed = @ax_enable_builddir_sed@
368d392
< lt_ECHO = @lt_ECHO@
378a403
> sys_symbol_underscore = @sys_symbol_underscore@
394,400c419,424
< 	src/arm/ffi.c src/arm/sysv.S src/arm/ffitarget.h \
< 	src/avr32/ffi.c src/avr32/sysv.S src/avr32/ffitarget.h \
< 	src/cris/ffi.c src/cris/sysv.S src/cris/ffitarget.h \
< 	src/ia64/ffi.c src/ia64/ffitarget.h src/ia64/ia64_flags.h \
< 	src/ia64/unix.S \
< 	src/mips/ffi.c src/mips/n32.S src/mips/o32.S \
< 	src/mips/ffitarget.h \
---
> 	src/arm/ffi.c src/arm/sysv.S src/arm/trampoline.S		\
> 	src/arm/ffitarget.h src/avr32/ffi.c src/avr32/sysv.S		\
> 	src/avr32/ffitarget.h src/cris/ffi.c src/cris/sysv.S		\
> 	src/cris/ffitarget.h src/ia64/ffi.c src/ia64/ffitarget.h	\
> 	src/ia64/ia64_flags.h src/ia64/unix.S src/mips/ffi.c		\
> 	src/mips/n32.S src/mips/o32.S src/mips/ffitarget.h		\
403,406c427,429
< 	src/powerpc/ffi.c src/powerpc/sysv.S \
< 	src/powerpc/linux64.S src/powerpc/linux64_closure.S \
< 	src/powerpc/ppc_closure.S src/powerpc/asm.h \
< 	src/powerpc/aix.S src/powerpc/darwin.S \
---
> 	src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/linux64.S	\
> 	src/powerpc/linux64_closure.S src/powerpc/ppc_closure.S		\
> 	src/powerpc/asm.h src/powerpc/aix.S src/powerpc/darwin.S	\
410,420c433,445
< 	src/sh/ffi.c src/sh/sysv.S src/sh/ffitarget.h \
< 	src/sh64/ffi.c src/sh64/sysv.S src/sh64/ffitarget.h \
< 	src/sparc/v8.S src/sparc/v9.S src/sparc/ffitarget.h \
< 	src/sparc/ffi.c src/x86/darwin64.S \
< 	src/x86/ffi.c src/x86/sysv.S src/x86/win32.S src/x86/win64.S \
< 	src/x86/darwin.S src/x86/freebsd.S \
< 	src/x86/ffi64.c src/x86/unix64.S src/x86/ffitarget.h \
< 	src/pa/ffitarget.h src/pa/ffi.c src/pa/linux.S src/pa/hpux32.S \
< 	src/frv/ffi.c src/frv/eabi.S src/frv/ffitarget.h src/dlmalloc.c \
< 	libtool-version ChangeLog.libffi m4/libtool.m4 \
< 	m4/lt~obsolete.m4 m4/ltoptions.m4 m4/ltsugar.m4 m4/ltversion.m4
---
> 	src/sh/ffi.c src/sh/sysv.S src/sh/ffitarget.h src/sh64/ffi.c	\
> 	src/sh64/sysv.S src/sh64/ffitarget.h src/sparc/v8.S		\
> 	src/sparc/v9.S src/sparc/ffitarget.h src/sparc/ffi.c		\
> 	src/x86/darwin64.S src/x86/ffi.c src/x86/sysv.S			\
> 	src/x86/win32.S src/x86/win64.S src/x86/darwin.S		\
> 	src/x86/freebsd.S src/x86/ffi64.c src/x86/unix64.S		\
> 	src/x86/ffitarget.h src/pa/ffitarget.h src/pa/ffi.c		\
> 	src/pa/linux.S src/pa/hpux32.S src/frv/ffi.c src/frv/eabi.S	\
> 	src/frv/ffitarget.h src/dlmalloc.c src/moxie/ffi.c		\
> 	src/moxie/eabi.S libtool-version ChangeLog.libffi		\
> 	m4/libtool.m4 m4/lt~obsolete.m4 m4/ltoptions.m4 m4/ltsugar.m4	\
> 	m4/ltversion.m4 build-ios.sh src/arm/gentramp.sh src/debug.c    \
> 	msvcc.sh
450a476
> 	"mandir=$(mandir)" \
465c491
< libffi_la_SOURCES = src/debug.c src/prep_cif.c src/types.c \
---
> libffi_la_SOURCES = src/prep_cif.c src/types.c \
478c504,505
< 	$(am__append_24) $(am__append_25)
---
> 	$(am__append_24) $(am__append_25) $(am__append_26) \
> 	$(am__append_27)
481c508
< AM_CFLAGS = -Wall -g -fexceptions
---
> AM_CFLAGS = -g $(am__append_28)
589d615
< src/debug.lo: src/$(am__dirstamp) src/$(DEPDIR)/$(am__dirstamp)
594a621
> src/debug.lo: src/$(am__dirstamp) src/$(DEPDIR)/$(am__dirstamp)
716a744,745
> src/arm/trampoline.lo: src/arm/$(am__dirstamp) \
> 	src/arm/$(DEPDIR)/$(am__dirstamp)
803a833,834
> 	-rm -f src/arm/trampoline.$(OBJEXT)
> 	-rm -f src/arm/trampoline.lo
921a953
> @AMDEP_TRUE@@am__include@ @am__quote@src/arm/$(DEPDIR)/trampoline.Plo@am__quote@
diff -rbw libffi.old/README libffi/README
4c4
< libffi-3.0.10 was released on XXXXXXXXXX, 2010. Check the libffi web
---
> libffi-3.0.10 was released on XXXXXXXXXX, 2011. Check the libffi web
56a57
> | ARM          | iOS              |
59a61
> | M68K         | RTEMS            |
61a64
> | MIPS         | RTEMS            |
73a77
> | X86          | Interix          |
77a82
> | X86          | OS/2             |
116,118c121,129
< path/to/configure --enable-shared --enable-static \
< 	CC=path/to/msvcc.sh LD=link \
< 	CPP=\"cl -nologo -EP\"
---
> path/to/configure CC=path/to/msvcc.sh LD=link CPP=\"cl -nologo -EP\"
> 
> For 64-bit Windows builds, use CC="path/to/msvcc.sh -m64".
> You may also need to specify --build appropriately. When building with MSVC
> under a MingW environment, you may need to remove the line in configure
> that sets 'fix_srcfile_path' to a 'cygpath' command. ('cygpath' is not
> present in MingW, and is not required when using MingW-style paths.)
> 
> For iOS builds, refer to the build-ios.sh script for guidance.
136a148,150
>         Add support for Apple's iOS.
> 	Add support for ARM VFP ABI.
>         Add RTEMS support for MIPS and M68K.
138d151
< 	Testsuite fixes for Tru64 Unix.
140c153,156
< 	Enable x86 builds with Sun's compiler.
---
> 	Enable x86 builds with Oracle's Solaris compiler.
> 	Fix support for calling code compiled with Oracle's Sparc
> 	  Solaris compiler.
> 	Testsuite fixes for Tru64 Unix.
321,322c337,339
< If you have a problem, or have found a bug, please send a note to
< green@redhat.com.
---
> If you have a problem, or have found a bug, please send a note to the
> author at green@moxielogic.com, or the project mailing list at
> libffi-discuss@sourceware.org.
Only in libffi.old: README.jna
diff -rbw libffi.old/aclocal.m4 libffi/aclocal.m4
16,17c16,17
< m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.63],,
< [m4_warning([this file was generated for autoconf 2.63.
---
> m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.68],,
> [m4_warning([this file was generated for autoconf 2.68.
22c22
< # libtool.m4 - Configure libtool for the host system. -*-Autoconf-*-
---
> # ltdl.m4 - Configure ltdl for the target system. -*-Autoconf-*-
24,26c24,25
< #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,
< #                 2006, 2007, 2008 Free Software Foundation, Inc.
< #   Written by Gordon Matzigkeit, 1996
---
> #   Copyright (C) 1999-2006, 2007, 2008 Free Software Foundation, Inc.
> #   Written by Thomas Tanner, 1999
32,61c31
< m4_define([_LT_COPYING], [dnl
< #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,
< #                 2006, 2007, 2008 Free Software Foundation, Inc.
< #   Written by Gordon Matzigkeit, 1996
< #
< #   This file is part of GNU Libtool.
< #
< # GNU Libtool is free software; you can redistribute it and/or
< # modify it under the terms of the GNU General Public License as
< # published by the Free Software Foundation; either version 2 of
< # the License, or (at your option) any later version.
< #
< # As a special exception to the GNU General Public License,
< # if you distribute this file as part of a program or library that
< # is built using GNU Libtool, you may include this file under the
< # same distribution terms that you use for the rest of that program.
< #
< # GNU Libtool is distributed in the hope that it will be useful,
< # but WITHOUT ANY WARRANTY; without even the implied warranty of
< # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
< # GNU General Public License for more details.
< #
< # You should have received a copy of the GNU General Public License
< # along with GNU Libtool; see the file COPYING.  If not, a copy
< # can be downloaded from http://www.gnu.org/licenses/gpl.html, or
< # obtained by writing to the Free Software Foundation, Inc.,
< # 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
< ])
< 
< # serial 56 LT_INIT
---
> # serial 18 LTDL_INIT
62a33,57
> # LT_CONFIG_LTDL_DIR(DIRECTORY, [LTDL-MODE])
> # ------------------------------------------
> # DIRECTORY contains the libltdl sources.  It is okay to call this
> # function multiple times, as long as the same DIRECTORY is always given.
> AC_DEFUN([LT_CONFIG_LTDL_DIR],
> [AC_BEFORE([$0], [LTDL_INIT])
> _$0($*)
> ])# LT_CONFIG_LTDL_DIR
> 
> # We break this out into a separate macro, so that we can call it safely
> # internally without being caught accidentally by the sed scan in libtoolize.
> m4_defun([_LT_CONFIG_LTDL_DIR],
> [dnl remove trailing slashes
> m4_pushdef([_ARG_DIR], m4_bpatsubst([$1], [/*$]))
> m4_case(_LTDL_DIR,
> 	[], [dnl only set lt_ltdl_dir if _ARG_DIR is not simply `.'
> 	     m4_if(_ARG_DIR, [.],
> 	             [],
> 		 [m4_define([_LTDL_DIR], _ARG_DIR)
> 	          _LT_SHELL_INIT([lt_ltdl_dir=']_ARG_DIR['])])],
>     [m4_if(_ARG_DIR, _LTDL_DIR,
> 	    [],
> 	[m4_fatal([multiple libltdl directories: `]_LTDL_DIR[', `]_ARG_DIR['])])])
> m4_popdef([_ARG_DIR])
> ])# _LT_CONFIG_LTDL_DIR
64,72c59,60
< # LT_PREREQ(VERSION)
< # ------------------
< # Complain and exit if this libtool version is less that VERSION.
< m4_defun([LT_PREREQ],
< [m4_if(m4_version_compare(m4_defn([LT_PACKAGE_VERSION]), [$1]), -1,
<        [m4_default([$3],
< 		   [m4_fatal([Libtool version $1 or higher is required],
< 		             63)])],
<        [$2])])
---
> # Initialise:
> m4_define([_LTDL_DIR], [])
75,82c63,74
< # _LT_CHECK_BUILDDIR
< # ------------------
< # Complain if the absolute build directory name contains unusual characters
< m4_defun([_LT_CHECK_BUILDDIR],
< [case `pwd` in
<   *\ * | *\	*)
<     AC_MSG_WARN([Libtool does not cope well with whitespace in `pwd`]) ;;
< esac
---
> # _LT_BUILD_PREFIX
> # ----------------
> # If Autoconf is new enough, expand to `${top_build_prefix}', otherwise
> # to `${top_builddir}/'.
> m4_define([_LT_BUILD_PREFIX],
> [m4_ifdef([AC_AUTOCONF_VERSION],
>    [m4_if(m4_version_compare(m4_defn([AC_AUTOCONF_VERSION]), [2.62]),
> 	  [-1], [m4_ifdef([_AC_HAVE_TOP_BUILD_PREFIX],
> 			  [${top_build_prefix}],
> 			  [${top_builddir}/])],
> 	  [${top_build_prefix}])],
>    [${top_builddir}/])[]dnl
86,104c78,104
< # LT_INIT([OPTIONS])
< # ------------------
< AC_DEFUN([LT_INIT],
< [AC_PREREQ([2.58])dnl We use AC_INCLUDES_DEFAULT
< AC_BEFORE([$0], [LT_LANG])dnl
< AC_BEFORE([$0], [LT_OUTPUT])dnl
< AC_BEFORE([$0], [LTDL_INIT])dnl
< m4_require([_LT_CHECK_BUILDDIR])dnl
< 
< dnl Autoconf doesn't catch unexpanded LT_ macros by default:
< m4_pattern_forbid([^_?LT_[A-Z_]+$])dnl
< m4_pattern_allow([^(_LT_EOF|LT_DLGLOBAL|LT_DLLAZY_OR_NOW|LT_MULTI_MODULE)$])dnl
< dnl aclocal doesn't pull ltoptions.m4, ltsugar.m4, or ltversion.m4
< dnl unless we require an AC_DEFUNed macro:
< AC_REQUIRE([LTOPTIONS_VERSION])dnl
< AC_REQUIRE([LTSUGAR_VERSION])dnl
< AC_REQUIRE([LTVERSION_VERSION])dnl
< AC_REQUIRE([LTOBSOLETE_VERSION])dnl
< m4_require([_LT_PROG_LTMAIN])dnl
---
> # LTDL_CONVENIENCE
> # ----------------
> # sets LIBLTDL to the link flags for the libltdl convenience library and
> # LTDLINCL to the include flags for the libltdl header and adds
> # --enable-ltdl-convenience to the configure arguments.  Note that
> # AC_CONFIG_SUBDIRS is not called here.  LIBLTDL will be prefixed with
> # '${top_build_prefix}' if available, otherwise with '${top_builddir}/',
> # and LTDLINCL will be prefixed with '${top_srcdir}/' (note the single
> # quotes!).  If your package is not flat and you're not using automake,
> # define top_build_prefix, top_builddir, and top_srcdir appropriately
> # in your Makefiles.
> AC_DEFUN([LTDL_CONVENIENCE],
> [AC_BEFORE([$0], [LTDL_INIT])dnl
> dnl Although the argument is deprecated and no longer documented,
> dnl LTDL_CONVENIENCE used to take a DIRECTORY orgument, if we have one
> dnl here make sure it is the same as any other declaration of libltdl's
> dnl location!  This also ensures lt_ltdl_dir is set when configure.ac is
> dnl not yet using an explicit LT_CONFIG_LTDL_DIR.
> m4_ifval([$1], [_LT_CONFIG_LTDL_DIR([$1])])dnl
> _$0()
> ])# LTDL_CONVENIENCE
> 
> # AC_LIBLTDL_CONVENIENCE accepted a directory argument in older libtools,
> # now we have LT_CONFIG_LTDL_DIR:
> AU_DEFUN([AC_LIBLTDL_CONVENIENCE],
> [_LT_CONFIG_LTDL_DIR([m4_default([$1], [libltdl])])
> _LTDL_CONVENIENCE])
106,107c106,107
< dnl Parse OPTIONS
< _LT_SET_OPTIONS([$0], [$1])
---
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LIBLTDL_CONVENIENCE], [])
109,110d108
< # This can be used to rebuild libtool when needed
< LIBTOOL_DEPS="$ltmain"
112,114c110,130
< # Always use our own libtool.
< LIBTOOL='$(SHELL) $(top_builddir)/libtool'
< AC_SUBST(LIBTOOL)dnl
---
> # _LTDL_CONVENIENCE
> # -----------------
> # Code shared by LTDL_CONVENIENCE and LTDL_INIT([convenience]).
> m4_defun([_LTDL_CONVENIENCE],
> [case $enable_ltdl_convenience in
>   no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;
>   "") enable_ltdl_convenience=yes
>       ac_configure_args="$ac_configure_args --enable-ltdl-convenience" ;;
> esac
> LIBLTDL='_LT_BUILD_PREFIX'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdlc.la"
> LTDLDEPS=$LIBLTDL
> LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
> 
> AC_SUBST([LIBLTDL])
> AC_SUBST([LTDLDEPS])
> AC_SUBST([LTDLINCL])
> 
> # For backwards non-gettext consistent compatibility...
> INCLTDL="$LTDLINCL"
> AC_SUBST([INCLTDL])
> ])# _LTDL_CONVENIENCE
116d131
< _LT_SETUP
118,120c133,160
< # Only expand once:
< m4_define([LT_INIT])
< ])# LT_INIT
---
> # LTDL_INSTALLABLE
> # ----------------
> # sets LIBLTDL to the link flags for the libltdl installable library
> # and LTDLINCL to the include flags for the libltdl header and adds
> # --enable-ltdl-install to the configure arguments.  Note that
> # AC_CONFIG_SUBDIRS is not called from here.  If an installed libltdl
> # is not found, LIBLTDL will be prefixed with '${top_build_prefix}' if
> # available, otherwise with '${top_builddir}/', and LTDLINCL will be
> # prefixed with '${top_srcdir}/' (note the single quotes!).  If your
> # package is not flat and you're not using automake, define top_build_prefix,
> # top_builddir, and top_srcdir appropriately in your Makefiles.
> # In the future, this macro may have to be called after LT_INIT.
> AC_DEFUN([LTDL_INSTALLABLE],
> [AC_BEFORE([$0], [LTDL_INIT])dnl
> dnl Although the argument is deprecated and no longer documented,
> dnl LTDL_INSTALLABLE used to take a DIRECTORY orgument, if we have one
> dnl here make sure it is the same as any other declaration of libltdl's
> dnl location!  This also ensures lt_ltdl_dir is set when configure.ac is
> dnl not yet using an explicit LT_CONFIG_LTDL_DIR.
> m4_ifval([$1], [_LT_CONFIG_LTDL_DIR([$1])])dnl
> _$0()
> ])# LTDL_INSTALLABLE
> 
> # AC_LIBLTDL_INSTALLABLE accepted a directory argument in older libtools,
> # now we have LT_CONFIG_LTDL_DIR:
> AU_DEFUN([AC_LIBLTDL_INSTALLABLE],
> [_LT_CONFIG_LTDL_DIR([m4_default([$1], [libltdl])])
> _LTDL_INSTALLABLE])
122,124d161
< # Old names:
< AU_ALIAS([AC_PROG_LIBTOOL], [LT_INIT])
< AU_ALIAS([AM_PROG_LIBTOOL], [LT_INIT])
126,154c163
< dnl AC_DEFUN([AC_PROG_LIBTOOL], [])
< dnl AC_DEFUN([AM_PROG_LIBTOOL], [])
< 
< 
< # _LT_CC_BASENAME(CC)
< # -------------------
< # Calculate cc_basename.  Skip known compiler wrappers and cross-prefix.
< m4_defun([_LT_CC_BASENAME],
< [for cc_temp in $1""; do
<   case $cc_temp in
<     compile | *[[\\/]]compile | ccache | *[[\\/]]ccache ) ;;
<     distcc | *[[\\/]]distcc | purify | *[[\\/]]purify ) ;;
<     \-*) ;;
<     *) break;;
<   esac
< done
< cc_basename=`$ECHO "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`
< ])
< 
< 
< # _LT_FILEUTILS_DEFAULTS
< # ----------------------
< # It is okay to use these file commands and assume they have been set
< # sensibly after `m4_require([_LT_FILEUTILS_DEFAULTS])'.
< m4_defun([_LT_FILEUTILS_DEFAULTS],
< [: ${CP="cp -f"}
< : ${MV="mv -f"}
< : ${RM="rm -f"}
< ])# _LT_FILEUTILS_DEFAULTS
---
> dnl AC_DEFUN([AC_LIBLTDL_INSTALLABLE], [])
157,197c166,182
< # _LT_SETUP
< # ---------
< m4_defun([_LT_SETUP],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< AC_REQUIRE([AC_CANONICAL_BUILD])dnl
< _LT_DECL([], [host_alias], [0], [The host system])dnl
< _LT_DECL([], [host], [0])dnl
< _LT_DECL([], [host_os], [0])dnl
< dnl
< _LT_DECL([], [build_alias], [0], [The build system])dnl
< _LT_DECL([], [build], [0])dnl
< _LT_DECL([], [build_os], [0])dnl
< dnl
< AC_REQUIRE([AC_PROG_CC])dnl
< AC_REQUIRE([LT_PATH_LD])dnl
< AC_REQUIRE([LT_PATH_NM])dnl
< dnl
< AC_REQUIRE([AC_PROG_LN_S])dnl
< test -z "$LN_S" && LN_S="ln -s"
< _LT_DECL([], [LN_S], [1], [Whether we need soft or hard links])dnl
< dnl
< AC_REQUIRE([LT_CMD_MAX_LEN])dnl
< _LT_DECL([objext], [ac_objext], [0], [Object file suffix (normally "o")])dnl
< _LT_DECL([], [exeext], [0], [Executable file suffix (normally "")])dnl
< dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_CHECK_SHELL_FEATURES])dnl
< m4_require([_LT_CMD_RELOAD])dnl
< m4_require([_LT_CHECK_MAGIC_METHOD])dnl
< m4_require([_LT_CMD_OLD_ARCHIVE])dnl
< m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
< 
< _LT_CONFIG_LIBTOOL_INIT([
< # See if we are running on zsh, and set the options which allow our
< # commands through without removal of \ escapes INIT.
< if test -n "\${ZSH_VERSION+set}" ; then
<    setopt NO_GLOB_SUBST
< fi
< ])
< if test -n "${ZSH_VERSION+set}" ; then
<    setopt NO_GLOB_SUBST
---
> # _LTDL_INSTALLABLE
> # -----------------
> # Code shared by LTDL_INSTALLABLE and LTDL_INIT([installable]).
> m4_defun([_LTDL_INSTALLABLE],
> [if test -f $prefix/lib/libltdl.la; then
>   lt_save_LDFLAGS="$LDFLAGS"
>   LDFLAGS="-L$prefix/lib $LDFLAGS"
>   AC_CHECK_LIB([ltdl], [lt_dlinit], [lt_lib_ltdl=yes])
>   LDFLAGS="$lt_save_LDFLAGS"
>   if test x"${lt_lib_ltdl-no}" = xyes; then
>     if test x"$enable_ltdl_install" != xyes; then
>       # Don't overwrite $prefix/lib/libltdl.la without --enable-ltdl-install
>       AC_MSG_WARN([not overwriting libltdl at $prefix, force with `--enable-ltdl-install'])
>       enable_ltdl_install=no
>     fi
>   elif test x"$enable_ltdl_install" = xno; then
>     AC_MSG_WARN([libltdl not installed, but installation disabled])
199,212d183
< 
< _LT_CHECK_OBJDIR
< 
< m4_require([_LT_TAG_COMPILER])dnl
< _LT_PROG_ECHO_BACKSLASH
< 
< case $host_os in
< aix3*)
<   # AIX sometimes has problems with the GCC collect2 program.  For some
<   # reason, if we set the COLLECT_NAMES environment variable, the problems
<   # vanish in a puff of smoke.
<   if test "X${COLLECT_NAMES+set}" != Xset; then
<     COLLECT_NAMES=
<     export COLLECT_NAMES
214,215d184
<   ;;
< esac
217,262c186,198
< # Sed substitution that helps us do robust quoting.  It backslashifies
< # metacharacters that are still active within double-quoted strings.
< sed_quote_subst='s/\([["`$\\]]\)/\\\1/g'
< 
< # Same as above, but do not quote variable references.
< double_quote_subst='s/\([["`\\]]\)/\\\1/g'
< 
< # Sed substitution to delay expansion of an escaped shell variable in a
< # double_quote_subst'ed string.
< delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
< 
< # Sed substitution to delay expansion of an escaped single quote.
< delay_single_quote_subst='s/'\''/'\'\\\\\\\'\''/g'
< 
< # Sed substitution to avoid accidental globbing in evaled expressions
< no_glob_subst='s/\*/\\\*/g'
< 
< # Global variables:
< ofile=libtool
< can_build_shared=yes
< 
< # All known linkers require a `.a' archive for static linking (except MSVC,
< # which needs '.lib').
< libext=a
< 
< with_gnu_ld="$lt_cv_prog_gnu_ld"
< 
< old_CC="$CC"
< old_CFLAGS="$CFLAGS"
< 
< # Set sane defaults for various variables
< test -z "$CC" && CC=cc
< test -z "$LTCC" && LTCC=$CC
< test -z "$LTCFLAGS" && LTCFLAGS=$CFLAGS
< test -z "$LD" && LD=ld
< test -z "$ac_objext" && ac_objext=o
< 
< _LT_CC_BASENAME([$compiler])
< 
< # Only perform the check for file, if the check method requires it
< test -z "$MAGIC_CMD" && MAGIC_CMD=file
< case $deplibs_check_method in
< file_magic*)
<   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
<     _LT_PATH_MAGIC
<   fi
---
> # If configure.ac declared an installable ltdl, and the user didn't override
> # with --disable-ltdl-install, we will install the shipped libltdl.
> case $enable_ltdl_install in
>   no) ac_configure_args="$ac_configure_args --enable-ltdl-install=no"
>       LIBLTDL="-lltdl"
>       LTDLDEPS=
>       LTDLINCL=
>       ;;
>   *)  enable_ltdl_install=yes
>       ac_configure_args="$ac_configure_args --enable-ltdl-install"
>       LIBLTDL='_LT_BUILD_PREFIX'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdl.la"
>       LTDLDEPS=$LIBLTDL
>       LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
266,286c202,209
< # Use C for the default configuration in the libtool script
< LT_SUPPORTED_TAG([CC])
< _LT_LANG_C_CONFIG
< _LT_LANG_DEFAULT_CONFIG
< _LT_CONFIG_COMMANDS
< ])# _LT_SETUP
< 
< 
< # _LT_PROG_LTMAIN
< # ---------------
< # Note that this code is called both from `configure', and `config.status'
< # now that we use AC_CONFIG_COMMANDS to generate libtool.  Notably,
< # `config.status' has no value for ac_aux_dir unless we are using Automake,
< # so we pass a copy along to make sure it has a sensible value anyway.
< m4_defun([_LT_PROG_LTMAIN],
< [m4_ifdef([AC_REQUIRE_AUX_FILE], [AC_REQUIRE_AUX_FILE([ltmain.sh])])dnl
< _LT_CONFIG_LIBTOOL_INIT([ac_aux_dir='$ac_aux_dir'])
< ltmain="$ac_aux_dir/ltmain.sh"
< ])# _LT_PROG_LTMAIN
< 
< 
---
> AC_SUBST([LIBLTDL])
> AC_SUBST([LTDLDEPS])
> AC_SUBST([LTDLINCL])
> 
> # For backwards non-gettext consistent compatibility...
> INCLTDL="$LTDLINCL"
> AC_SUBST([INCLTDL])
> ])# LTDL_INSTALLABLE
288,301d210
< # So that we can recreate a full libtool script including additional
< # tags, we accumulate the chunks of code to send to AC_CONFIG_COMMANDS
< # in macros and then make a single call at the end using the `libtool'
< # label.
< 
< 
< # _LT_CONFIG_LIBTOOL_INIT([INIT-COMMANDS])
< # ----------------------------------------
< # Register INIT-COMMANDS to be passed to AC_CONFIG_COMMANDS later.
< m4_define([_LT_CONFIG_LIBTOOL_INIT],
< [m4_ifval([$1],
<           [m4_append([_LT_OUTPUT_LIBTOOL_INIT],
<                      [$1
< ])])])
303,336c212,227
< # Initialize.
< m4_define([_LT_OUTPUT_LIBTOOL_INIT])
< 
< 
< # _LT_CONFIG_LIBTOOL([COMMANDS])
< # ------------------------------
< # Register COMMANDS to be passed to AC_CONFIG_COMMANDS later.
< m4_define([_LT_CONFIG_LIBTOOL],
< [m4_ifval([$1],
<           [m4_append([_LT_OUTPUT_LIBTOOL_COMMANDS],
<                      [$1
< ])])])
< 
< # Initialize.
< m4_define([_LT_OUTPUT_LIBTOOL_COMMANDS])
< 
< 
< # _LT_CONFIG_SAVE_COMMANDS([COMMANDS], [INIT_COMMANDS])
< # -----------------------------------------------------
< m4_defun([_LT_CONFIG_SAVE_COMMANDS],
< [_LT_CONFIG_LIBTOOL([$1])
< _LT_CONFIG_LIBTOOL_INIT([$2])
< ])
< 
< 
< # _LT_FORMAT_COMMENT([COMMENT])
< # -----------------------------
< # Add leading comment marks to the start of each line, and a trailing
< # full-stop to the whole comment if one is not present already.
< m4_define([_LT_FORMAT_COMMENT],
< [m4_ifval([$1], [
< m4_bpatsubst([m4_bpatsubst([$1], [^ *], [# ])],
<               [['`$\]], [\\\&])]m4_bmatch([$1], [[!?.]$], [], [.])
< )])
---
> # _LTDL_MODE_DISPATCH
> # -------------------
> m4_define([_LTDL_MODE_DISPATCH],
> [dnl If _LTDL_DIR is `.', then we are configuring libltdl itself:
> m4_if(_LTDL_DIR, [],
> 	[],
>     dnl if _LTDL_MODE was not set already, the default value is `subproject':
>     [m4_case(m4_default(_LTDL_MODE, [subproject]),
> 	  [subproject], [AC_CONFIG_SUBDIRS(_LTDL_DIR)
> 			  _LT_SHELL_INIT([lt_dlopen_dir="$lt_ltdl_dir"])],
> 	  [nonrecursive], [_LT_SHELL_INIT([lt_dlopen_dir="$lt_ltdl_dir"; lt_libobj_prefix="$lt_ltdl_dir/"])],
> 	  [recursive], [],
> 	[m4_fatal([unknown libltdl mode: ]_LTDL_MODE)])])dnl
> dnl Be careful not to expand twice:
> m4_define([$0], [])
> ])# _LTDL_MODE_DISPATCH
338a230,237
> # _LT_LIBOBJ(MODULE_NAME)
> # -----------------------
> # Like AC_LIBOBJ, except that MODULE_NAME goes into _LT_LIBOBJS instead
> # of into LIBOBJS.
> AC_DEFUN([_LT_LIBOBJ], [
>   m4_pattern_allow([^_LT_LIBOBJS$])
>   _LT_LIBOBJS="$_LT_LIBOBJS $1.$ac_objext"
> ])# _LT_LIBOBJS
340a240,249
> # LTDL_INIT([OPTIONS])
> # --------------------
> # Clients of libltdl can use this macro to allow the installer to
> # choose between a shipped copy of the ltdl sources or a preinstalled
> # version of the library.  If the shipped ltdl sources are not in a
> # subdirectory named libltdl, the directory name must be given by
> # LT_CONFIG_LTDL_DIR.
> AC_DEFUN([LTDL_INIT],
> [dnl Parse OPTIONS
> _LT_SET_OPTIONS([$0], [$1])
342,357c251,281
< # _LT_DECL([CONFIGNAME], VARNAME, VALUE, [DESCRIPTION], [IS-TAGGED?])
< # -------------------------------------------------------------------
< # CONFIGNAME is the name given to the value in the libtool script.
< # VARNAME is the (base) name used in the configure script.
< # VALUE may be 0, 1 or 2 for a computed quote escaped value based on
< # VARNAME.  Any other value will be used directly.
< m4_define([_LT_DECL],
< [lt_if_append_uniq([lt_decl_varnames], [$2], [, ],
<     [lt_dict_add_subkey([lt_decl_dict], [$2], [libtool_name],
< 	[m4_ifval([$1], [$1], [$2])])
<     lt_dict_add_subkey([lt_decl_dict], [$2], [value], [$3])
<     m4_ifval([$4],
< 	[lt_dict_add_subkey([lt_decl_dict], [$2], [description], [$4])])
<     lt_dict_add_subkey([lt_decl_dict], [$2],
< 	[tagged?], [m4_ifval([$5], [yes], [no])])])
< ])
---
> dnl We need to keep our own list of libobjs separate from our parent project,
> dnl and the easiest way to do that is redefine the AC_LIBOBJs macro while
> dnl we look for our own LIBOBJs.
> m4_pushdef([AC_LIBOBJ], m4_defn([_LT_LIBOBJ]))
> m4_pushdef([AC_LIBSOURCES])
> 
> dnl If not otherwise defined, default to the 1.5.x compatible subproject mode:
> m4_if(_LTDL_MODE, [],
>         [m4_define([_LTDL_MODE], m4_default([$2], [subproject]))
>         m4_if([-1], [m4_bregexp(_LTDL_MODE, [\(subproject\|\(non\)?recursive\)])],
>                 [m4_fatal([unknown libltdl mode: ]_LTDL_MODE)])])
> 
> AC_ARG_WITH([included_ltdl],
>     [AS_HELP_STRING([--with-included-ltdl],
>                     [use the GNU ltdl sources included here])])
> 
> if test "x$with_included_ltdl" != xyes; then
>   # We are not being forced to use the included libltdl sources, so
>   # decide whether there is a useful installed version we can use.
>   AC_CHECK_HEADER([ltdl.h],
>       [AC_CHECK_DECL([lt_dlinterface_register],
> 	   [AC_CHECK_LIB([ltdl], [lt_dladvise_preload],
> 	       [with_included_ltdl=no],
> 	       [with_included_ltdl=yes])],
> 	   [with_included_ltdl=yes],
> 	   [AC_INCLUDES_DEFAULT
> 	    #include <ltdl.h>])],
>       [with_included_ltdl=yes],
>       [AC_INCLUDES_DEFAULT]
>   )
> fi
358a283,286
> dnl If neither LT_CONFIG_LTDL_DIR, LTDL_CONVENIENCE nor LTDL_INSTALLABLE
> dnl was called yet, then for old times' sake, we assume libltdl is in an
> dnl eponymous directory:
> AC_PROVIDE_IFELSE([LT_CONFIG_LTDL_DIR], [], [_LT_CONFIG_LTDL_DIR([libltdl])])
360,380c288,290
< # _LT_TAGDECL([CONFIGNAME], VARNAME, VALUE, [DESCRIPTION])
< # --------------------------------------------------------
< m4_define([_LT_TAGDECL], [_LT_DECL([$1], [$2], [$3], [$4], [yes])])
< 
< 
< # lt_decl_tag_varnames([SEPARATOR], [VARNAME1...])
< # ------------------------------------------------
< m4_define([lt_decl_tag_varnames],
< [_lt_decl_filter([tagged?], [yes], $@)])
< 
< 
< # _lt_decl_filter(SUBKEY, VALUE, [SEPARATOR], [VARNAME1..])
< # ---------------------------------------------------------
< m4_define([_lt_decl_filter],
< [m4_case([$#],
<   [0], [m4_fatal([$0: too few arguments: $#])],
<   [1], [m4_fatal([$0: too few arguments: $#: $1])],
<   [2], [lt_dict_filter([lt_decl_dict], [$1], [$2], [], lt_decl_varnames)],
<   [3], [lt_dict_filter([lt_decl_dict], [$1], [$2], [$3], lt_decl_varnames)],
<   [lt_dict_filter([lt_decl_dict], $@)])[]dnl
< ])
---
> AC_ARG_WITH([ltdl_include],
>     [AS_HELP_STRING([--with-ltdl-include=DIR],
>                     [use the ltdl headers installed in DIR])])
381a292,299
> if test -n "$with_ltdl_include"; then
>   if test -f "$with_ltdl_include/ltdl.h"; then :
>   else
>     AC_MSG_ERROR([invalid ltdl include directory: `$with_ltdl_include'])
>   fi
> else
>   with_ltdl_include=no
> fi
383,417c301,303
< # lt_decl_quote_varnames([SEPARATOR], [VARNAME1...])
< # --------------------------------------------------
< m4_define([lt_decl_quote_varnames],
< [_lt_decl_filter([value], [1], $@)])
< 
< 
< # lt_decl_dquote_varnames([SEPARATOR], [VARNAME1...])
< # ---------------------------------------------------
< m4_define([lt_decl_dquote_varnames],
< [_lt_decl_filter([value], [2], $@)])
< 
< 
< # lt_decl_varnames_tagged([SEPARATOR], [VARNAME1...])
< # ---------------------------------------------------
< m4_define([lt_decl_varnames_tagged],
< [m4_assert([$# <= 2])dnl
< _$0(m4_quote(m4_default([$1], [[, ]])),
<     m4_ifval([$2], [[$2]], [m4_dquote(lt_decl_tag_varnames)]),
<     m4_split(m4_normalize(m4_quote(_LT_TAGS)), [ ]))])
< m4_define([_lt_decl_varnames_tagged],
< [m4_ifval([$3], [lt_combine([$1], [$2], [_], $3)])])
< 
< 
< # lt_decl_all_varnames([SEPARATOR], [VARNAME1...])
< # ------------------------------------------------
< m4_define([lt_decl_all_varnames],
< [_$0(m4_quote(m4_default([$1], [[, ]])),
<      m4_if([$2], [],
< 	   m4_quote(lt_decl_varnames),
< 	m4_quote(m4_shift($@))))[]dnl
< ])
< m4_define([_lt_decl_all_varnames],
< [lt_join($@, lt_decl_varnames_tagged([$1],
< 			lt_decl_tag_varnames([[, ]], m4_shift($@))))dnl
< ])
---
> AC_ARG_WITH([ltdl_lib],
>     [AS_HELP_STRING([--with-ltdl-lib=DIR],
>                     [use the libltdl.la installed in DIR])])
418a305,312
> if test -n "$with_ltdl_lib"; then
>   if test -f "$with_ltdl_lib/libltdl.la"; then :
>   else
>     AC_MSG_ERROR([invalid ltdl library directory: `$with_ltdl_lib'])
>   fi
> else
>   with_ltdl_lib=no
> fi
420,426c314,339
< # _LT_CONFIG_STATUS_DECLARE([VARNAME])
< # ------------------------------------
< # Quote a variable value, and forward it to `config.status' so that its
< # declaration there will have the same value as in `configure'.  VARNAME
< # must have a single quote delimited value for this to work.
< m4_define([_LT_CONFIG_STATUS_DECLARE],
< [$1='`$ECHO "X$][$1" | $Xsed -e "$delay_single_quote_subst"`'])
---
> case ,$with_included_ltdl,$with_ltdl_include,$with_ltdl_lib, in
>   ,yes,no,no,)
> 	m4_case(m4_default(_LTDL_TYPE, [convenience]),
> 	    [convenience], [_LTDL_CONVENIENCE],
> 	    [installable], [_LTDL_INSTALLABLE],
> 	  [m4_fatal([unknown libltdl build type: ]_LTDL_TYPE)])
> 	;;
>   ,no,no,no,)
> 	# If the included ltdl is not to be used, then use the
> 	# preinstalled libltdl we found.
> 	AC_DEFINE([HAVE_LTDL], [1],
> 	  [Define this if a modern libltdl is already installed])
> 	LIBLTDL=-lltdl
> 	LTDLDEPS=
> 	LTDLINCL=
> 	;;
>   ,no*,no,*)
> 	AC_MSG_ERROR([`--with-ltdl-include' and `--with-ltdl-lib' options must be used together])
> 	;;
>   *)	with_included_ltdl=no
> 	LIBLTDL="-L$with_ltdl_lib -lltdl"
> 	LTDLDEPS=
> 	LTDLINCL="-I$with_ltdl_include"
> 	;;
> esac
> INCLTDL="$LTDLINCL"
427a341,345
> # Report our decision...
> AC_MSG_CHECKING([where to find libltdl headers])
> AC_MSG_RESULT([$LTDLINCL])
> AC_MSG_CHECKING([where to find libltdl library])
> AC_MSG_RESULT([$LIBLTDL])
429,439c347
< # _LT_CONFIG_STATUS_DECLARATIONS
< # ------------------------------
< # We delimit libtool config variables with single quotes, so when
< # we write them to config.status, we have to be sure to quote all
< # embedded single quotes properly.  In configure, this macro expands
< # each variable declared with _LT_DECL (and _LT_TAGDECL) into:
< #
< #    <var>='`$ECHO "X$<var>" | $Xsed -e "$delay_single_quote_subst"`'
< m4_defun([_LT_CONFIG_STATUS_DECLARATIONS],
< [m4_foreach([_lt_var], m4_quote(lt_decl_all_varnames),
<     [m4_n([_LT_CONFIG_STATUS_DECLARE(_lt_var)])])])
---
> _LTDL_SETUP
440a349,351
> dnl restore autoconf definition.
> m4_popdef([AC_LIBOBJ])
> m4_popdef([AC_LIBSOURCES])
442,447c353,365
< # _LT_LIBTOOL_TAGS
< # ----------------
< # Output comment and list of tags supported by the script
< m4_defun([_LT_LIBTOOL_TAGS],
< [_LT_FORMAT_COMMENT([The names of the tagged configurations supported by this script])dnl
< available_tags="_LT_TAGS"dnl
---
> AC_CONFIG_COMMANDS_PRE([
>     _ltdl_libobjs=
>     _ltdl_ltlibobjs=
>     if test -n "$_LT_LIBOBJS"; then
>       # Remove the extension.
>       _lt_sed_drop_objext='s/\.o$//;s/\.obj$//'
>       for i in `for i in $_LT_LIBOBJS; do echo "$i"; done | sed "$_lt_sed_drop_objext" | sort -u`; do
>         _ltdl_libobjs="$_ltdl_libobjs $lt_libobj_prefix$i.$ac_objext"
>         _ltdl_ltlibobjs="$_ltdl_ltlibobjs $lt_libobj_prefix$i.lo"
>       done
>     fi
>     AC_SUBST([ltdl_LIBOBJS], [$_ltdl_libobjs])
>     AC_SUBST([ltdl_LTLIBOBJS], [$_ltdl_ltlibobjs])
449a368,370
> # Only expand once:
> m4_define([LTDL_INIT])
> ])# LTDL_INIT
451,469c372,379
< # _LT_LIBTOOL_DECLARE(VARNAME, [TAG])
< # -----------------------------------
< # Extract the dictionary values for VARNAME (optionally with TAG) and
< # expand to a commented shell variable setting:
< #
< #    # Some comment about what VAR is for.
< #    visible_name=$lt_internal_name
< m4_define([_LT_LIBTOOL_DECLARE],
< [_LT_FORMAT_COMMENT(m4_quote(lt_dict_fetch([lt_decl_dict], [$1],
< 					   [description])))[]dnl
< m4_pushdef([_libtool_name],
<     m4_quote(lt_dict_fetch([lt_decl_dict], [$1], [libtool_name])))[]dnl
< m4_case(m4_quote(lt_dict_fetch([lt_decl_dict], [$1], [value])),
<     [0], [_libtool_name=[$]$1],
<     [1], [_libtool_name=$lt_[]$1],
<     [2], [_libtool_name=$lt_[]$1],
<     [_libtool_name=lt_dict_fetch([lt_decl_dict], [$1], [value])])[]dnl
< m4_ifval([$2], [_$2])[]m4_popdef([_libtool_name])[]dnl
< ])
---
> # Old names:
> AU_DEFUN([AC_LIB_LTDL], [LTDL_INIT($@)])
> AU_DEFUN([AC_WITH_LTDL], [LTDL_INIT($@)])
> AU_DEFUN([LT_WITH_LTDL], [LTDL_INIT($@)])
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LIB_LTDL], [])
> dnl AC_DEFUN([AC_WITH_LTDL], [])
> dnl AC_DEFUN([LT_WITH_LTDL], [])
472,488c382,402
< # _LT_LIBTOOL_CONFIG_VARS
< # -----------------------
< # Produce commented declarations of non-tagged libtool config variables
< # suitable for insertion in the LIBTOOL CONFIG section of the `libtool'
< # script.  Tagged libtool config variables (even for the LIBTOOL CONFIG
< # section) are produced by _LT_LIBTOOL_TAG_VARS.
< m4_defun([_LT_LIBTOOL_CONFIG_VARS],
< [m4_foreach([_lt_var],
<     m4_quote(_lt_decl_filter([tagged?], [no], [], lt_decl_varnames)),
<     [m4_n([_LT_LIBTOOL_DECLARE(_lt_var)])])])
< 
< 
< # _LT_LIBTOOL_TAG_VARS(TAG)
< # -------------------------
< m4_define([_LT_LIBTOOL_TAG_VARS],
< [m4_foreach([_lt_var], m4_quote(lt_decl_tag_varnames),
<     [m4_n([_LT_LIBTOOL_DECLARE(_lt_var, [$1])])])])
---
> # _LTDL_SETUP
> # -----------
> # Perform all the checks necessary for compilation of the ltdl objects
> #  -- including compiler checks and header checks.  This is a public
> # interface  mainly for the benefit of libltdl's own configure.ac, most
> # other users should call LTDL_INIT instead.
> AC_DEFUN([_LTDL_SETUP],
> [AC_REQUIRE([AC_PROG_CC])dnl
> AC_REQUIRE([LT_SYS_MODULE_EXT])dnl
> AC_REQUIRE([LT_SYS_MODULE_PATH])dnl
> AC_REQUIRE([LT_SYS_DLSEARCH_PATH])dnl
> AC_REQUIRE([LT_LIB_DLLOAD])dnl
> AC_REQUIRE([LT_SYS_SYMBOL_USCORE])dnl
> AC_REQUIRE([LT_FUNC_DLSYM_USCORE])dnl
> AC_REQUIRE([LT_SYS_DLOPEN_DEPLIBS])dnl
> AC_REQUIRE([gl_FUNC_ARGZ])dnl
> 
> m4_require([_LT_CHECK_OBJDIR])dnl
> m4_require([_LT_HEADER_DLFCN])dnl
> m4_require([_LT_CHECK_DLPREOPEN])dnl
> m4_require([_LT_DECL_SED])dnl
489a404,442
> dnl Don't require this, or it will be expanded earlier than the code
> dnl that sets the variables it relies on:
> _LT_ENABLE_INSTALL
> 
> dnl _LTDL_MODE specific code must be called at least once:
> _LTDL_MODE_DISPATCH
> 
> # In order that ltdl.c can compile, find out the first AC_CONFIG_HEADERS
> # the user used.  This is so that ltdl.h can pick up the parent projects
> # config.h file, The first file in AC_CONFIG_HEADERS must contain the
> # definitions required by ltdl.c.
> # FIXME: Remove use of undocumented AC_LIST_HEADERS (2.59 compatibility).
> AC_CONFIG_COMMANDS_PRE([dnl
> m4_pattern_allow([^LT_CONFIG_H$])dnl
> m4_ifset([AH_HEADER],
>     [LT_CONFIG_H=AH_HEADER],
>     [m4_ifset([AC_LIST_HEADERS],
> 	    [LT_CONFIG_H=`echo "AC_LIST_HEADERS" | $SED 's,^[[      ]]*,,;s,[[ :]].*$,,'`],
> 	[])])])
> AC_SUBST([LT_CONFIG_H])
> 
> AC_CHECK_HEADERS([unistd.h dl.h sys/dl.h dld.h mach-o/dyld.h dirent.h],
> 	[], [], [AC_INCLUDES_DEFAULT])
> 
> AC_CHECK_FUNCS([closedir opendir readdir], [], [AC_LIBOBJ([lt__dirent])])
> AC_CHECK_FUNCS([strlcat strlcpy], [], [AC_LIBOBJ([lt__strl])])
> 
> m4_pattern_allow([LT_LIBEXT])dnl
> AC_DEFINE_UNQUOTED([LT_LIBEXT],["$libext"],[The archive extension])
> 
> name=
> eval "lt_libprefix=\"$libname_spec\""
> m4_pattern_allow([LT_LIBPREFIX])dnl
> AC_DEFINE_UNQUOTED([LT_LIBPREFIX],["$lt_libprefix"],[The archive prefix])
> 
> name=ltdl
> eval "LTDLOPEN=\"$libname_spec\""
> AC_SUBST([LTDLOPEN])
> ])# _LTDL_SETUP
491,493d443
< # _LT_TAGVAR(VARNAME, [TAGNAME])
< # ------------------------------
< m4_define([_LT_TAGVAR], [m4_ifval([$2], [$1_$2], [$1])])
494a445,449
> # _LT_ENABLE_INSTALL
> # ------------------
> m4_define([_LT_ENABLE_INSTALL],
> [AC_ARG_ENABLE([ltdl-install],
>     [AS_HELP_STRING([--enable-ltdl-install], [install libltdl])])
496,516c451,454
< # _LT_CONFIG_COMMANDS
< # -------------------
< # Send accumulated output to $CONFIG_STATUS.  Thanks to the lists of
< # variables for single and double quote escaping we saved from calls
< # to _LT_DECL, we can put quote escaped variables declarations
< # into `config.status', and then the shell code to quote escape them in
< # for loops in `config.status'.  Finally, any additional code accumulated
< # from calls to _LT_CONFIG_LIBTOOL_INIT is expanded.
< m4_defun([_LT_CONFIG_COMMANDS],
< [AC_PROVIDE_IFELSE([LT_OUTPUT],
< 	dnl If the libtool generation code has been placed in $CONFIG_LT,
< 	dnl instead of duplicating it all over again into config.status,
< 	dnl then we will have config.status run $CONFIG_LT later, so it
< 	dnl needs to know what name is stored there:
<         [AC_CONFIG_COMMANDS([libtool],
<             [$SHELL $CONFIG_LT || AS_EXIT(1)], [CONFIG_LT='$CONFIG_LT'])],
<     dnl If the libtool generation code is destined for config.status,
<     dnl expand the accumulated commands and init code now:
<     [AC_CONFIG_COMMANDS([libtool],
<         [_LT_OUTPUT_LIBTOOL_COMMANDS], [_LT_OUTPUT_LIBTOOL_COMMANDS_INIT])])
< ])#_LT_CONFIG_COMMANDS
---
> case ,${enable_ltdl_install},${enable_ltdl_convenience} in
>   *yes*) ;;
>   *) enable_ltdl_convenience=yes ;;
> esac
517a456,459
> m4_ifdef([AM_CONDITIONAL],
> [AM_CONDITIONAL(INSTALL_LTDL, test x"${enable_ltdl_install-no}" != xno)
>  AM_CONDITIONAL(CONVENIENCE_LTDL, test x"${enable_ltdl_convenience-no}" != xno)])
> ])# _LT_ENABLE_INSTALL
519,521d460
< # Initialize.
< m4_define([_LT_OUTPUT_LIBTOOL_COMMANDS_INIT],
< [
523,540c462,477
< # The HP-UX ksh and POSIX shell print the target directory to stdout
< # if CDPATH is set.
< (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
< 
< sed_quote_subst='$sed_quote_subst'
< double_quote_subst='$double_quote_subst'
< delay_variable_subst='$delay_variable_subst'
< _LT_CONFIG_STATUS_DECLARATIONS
< LTCC='$LTCC'
< LTCFLAGS='$LTCFLAGS'
< compiler='$compiler_DEFAULT'
< 
< # Quote evaled strings.
< for var in lt_decl_all_varnames([[ \
< ]], lt_decl_quote_varnames); do
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
<     *[[\\\\\\\`\\"\\\$]]*)
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$sed_quote_subst\\"\\\`\\\\\\""
---
> # LT_SYS_DLOPEN_DEPLIBS
> # ---------------------
> AC_DEFUN([LT_SYS_DLOPEN_DEPLIBS],
> [AC_REQUIRE([AC_CANONICAL_HOST])dnl
> AC_CACHE_CHECK([whether deplibs are loaded by dlopen],
>   [lt_cv_sys_dlopen_deplibs],
>   [# PORTME does your system automatically load deplibs for dlopen?
>   # or its logical equivalent (e.g. shl_load for HP-UX < 11)
>   # For now, we just catch OSes we know something about -- in the
>   # future, we'll try test this programmatically.
>   lt_cv_sys_dlopen_deplibs=unknown
>   case $host_os in
>   aix3*|aix4.1.*|aix4.2.*)
>     # Unknown whether this is true for these versions of AIX, but
>     # we want this `case' here to explicitly catch those versions.
>     lt_cv_sys_dlopen_deplibs=unknown
542,543c479,485
<     *)
<       eval "lt_\$var=\\\\\\"\\\$\$var\\\\\\""
---
>   aix[[4-9]]*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   amigaos*)
>     case $host_cpu in
>     powerpc)
>       lt_cv_sys_dlopen_deplibs=no
546,553d487
< done
< 
< # Double-quote double-evaled strings.
< for var in lt_decl_all_varnames([[ \
< ]], lt_decl_dquote_varnames); do
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
<     *[[\\\\\\\`\\"\\\$]]*)
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$double_quote_subst\\" -e \\"\\\$sed_quote_subst\\" -e \\"\\\$delay_variable_subst\\"\\\`\\\\\\""
555,556c489,492
<     *)
<       eval "lt_\$var=\\\\\\"\\\$\$var\\\\\\""
---
>   darwin*)
>     # Assuming the user has installed a libdl from somewhere, this is true
>     # If you are looking for one http://www.opendarwin.org/projects/dlcompat
>     lt_cv_sys_dlopen_deplibs=yes
558,564c494,552
<     esac
< done
< 
< # Fix-up fallback echo if it was mangled by the above quoting rules.
< case \$lt_ECHO in
< *'\\\[$]0 --fallback-echo"')dnl "
<   lt_ECHO=\`\$ECHO "X\$lt_ECHO" | \$Xsed -e 's/\\\\\\\\\\\\\\\[$]0 --fallback-echo"\[$]/\[$]0 --fallback-echo"/'\`
---
>   freebsd* | dragonfly*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   gnu* | linux* | k*bsd*-gnu | kopensolaris*-gnu)
>     # GNU and its variants, using gnu ld.so (Glibc)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   hpux10*|hpux11*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   interix*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   irix[[12345]]*|irix6.[[01]]*)
>     # Catch all versions of IRIX before 6.2, and indicate that we don't
>     # know how it worked for any of those versions.
>     lt_cv_sys_dlopen_deplibs=unknown
>     ;;
>   irix*)
>     # The case above catches anything before 6.2, and it's known that
>     # at 6.2 and later dlopen does load deplibs.
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   netbsd*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   openbsd*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   osf[[1234]]*)
>     # dlopen did load deplibs (at least at 4.x), but until the 5.x series,
>     # it did *not* use an RPATH in a shared library to find objects the
>     # library depends on, so we explicitly say `no'.
>     lt_cv_sys_dlopen_deplibs=no
>     ;;
>   osf5.0|osf5.0a|osf5.1)
>     # dlopen *does* load deplibs and with the right loader patch applied
>     # it even uses RPATH in a shared library to search for shared objects
>     # that the library depends on, but there's no easy way to know if that
>     # patch is installed.  Since this is the case, all we can really
>     # say is unknown -- it depends on the patch being installed.  If
>     # it is, this changes to `yes'.  Without it, it would be `no'.
>     lt_cv_sys_dlopen_deplibs=unknown
>     ;;
>   osf*)
>     # the two cases above should catch all versions of osf <= 5.1.  Read
>     # the comments above for what we know about them.
>     # At > 5.1, deplibs are loaded *and* any RPATH in a shared library
>     # is used to find them so we can finally say `yes'.
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   qnx*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   solaris*)
>     lt_cv_sys_dlopen_deplibs=yes
>     ;;
>   sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
>     libltdl_cv_sys_dlopen_deplibs=yes
567,568d554
< 
< _LT_OUTPUT_LIBTOOL_INIT
570,671c556,558
< 
< 
< # LT_OUTPUT
< # ---------
< # This macro allows early generation of the libtool script (before
< # AC_OUTPUT is called), incase it is used in configure for compilation
< # tests.
< AC_DEFUN([LT_OUTPUT],
< [: ${CONFIG_LT=./config.lt}
< AC_MSG_NOTICE([creating $CONFIG_LT])
< cat >"$CONFIG_LT" <<_LTEOF
< #! $SHELL
< # Generated by $as_me.
< # Run this file to recreate a libtool stub with the current configuration.
< 
< lt_cl_silent=false
< SHELL=\${CONFIG_SHELL-$SHELL}
< _LTEOF
< 
< cat >>"$CONFIG_LT" <<\_LTEOF
< AS_SHELL_SANITIZE
< _AS_PREPARE
< 
< exec AS_MESSAGE_FD>&1
< exec AS_MESSAGE_LOG_FD>>config.log
< {
<   echo
<   AS_BOX([Running $as_me.])
< } >&AS_MESSAGE_LOG_FD
< 
< lt_cl_help="\
< \`$as_me' creates a local libtool stub from the current configuration,
< for use in further configure time tests before the real libtool is
< generated.
< 
< Usage: $[0] [[OPTIONS]]
< 
<   -h, --help      print this help, then exit
<   -V, --version   print version number, then exit
<   -q, --quiet     do not print progress messages
<   -d, --debug     don't remove temporary files
< 
< Report bugs to <bug-libtool@gnu.org>."
< 
< lt_cl_version="\
< m4_ifset([AC_PACKAGE_NAME], [AC_PACKAGE_NAME ])config.lt[]dnl
< m4_ifset([AC_PACKAGE_VERSION], [ AC_PACKAGE_VERSION])
< configured by $[0], generated by m4_PACKAGE_STRING.
< 
< Copyright (C) 2008 Free Software Foundation, Inc.
< This config.lt script is free software; the Free Software Foundation
< gives unlimited permision to copy, distribute and modify it."
< 
< while test $[#] != 0
< do
<   case $[1] in
<     --version | --v* | -V )
<       echo "$lt_cl_version"; exit 0 ;;
<     --help | --h* | -h )
<       echo "$lt_cl_help"; exit 0 ;;
<     --debug | --d* | -d )
<       debug=: ;;
<     --quiet | --q* | --silent | --s* | -q )
<       lt_cl_silent=: ;;
< 
<     -*) AC_MSG_ERROR([unrecognized option: $[1]
< Try \`$[0] --help' for more information.]) ;;
< 
<     *) AC_MSG_ERROR([unrecognized argument: $[1]
< Try \`$[0] --help' for more information.]) ;;
<   esac
<   shift
< done
< 
< if $lt_cl_silent; then
<   exec AS_MESSAGE_FD>/dev/null
< fi
< _LTEOF
< 
< cat >>"$CONFIG_LT" <<_LTEOF
< _LT_OUTPUT_LIBTOOL_COMMANDS_INIT
< _LTEOF
< 
< cat >>"$CONFIG_LT" <<\_LTEOF
< AC_MSG_NOTICE([creating $ofile])
< _LT_OUTPUT_LIBTOOL_COMMANDS
< AS_EXIT(0)
< _LTEOF
< chmod +x "$CONFIG_LT"
< 
< # configure is writing to config.log, but config.lt does its own redirection,
< # appending to config.log, which fails on DOS, as config.log is still kept
< # open by configure.  Here we exec the FD to /dev/null, effectively closing
< # config.log, so it can be properly (re)opened and appended to by config.lt.
< if test "$no_create" != yes; then
<   lt_cl_success=:
<   test "$silent" = yes &&
<     lt_config_lt_args="$lt_config_lt_args --quiet"
<   exec AS_MESSAGE_LOG_FD>/dev/null
<   $SHELL "$CONFIG_LT" $lt_config_lt_args || lt_cl_success=false
<   exec AS_MESSAGE_LOG_FD>>config.log
<   $lt_cl_success || AS_EXIT(1)
---
> if test "$lt_cv_sys_dlopen_deplibs" != yes; then
>  AC_DEFINE([LTDL_DLOPEN_DEPLIBS], [1],
>     [Define if the OS needs help to load dependent libraries for dlopen().])
673,706c560
< ])# LT_OUTPUT
< 
< 
< # _LT_CONFIG(TAG)
< # ---------------
< # If TAG is the built-in tag, create an initial libtool script with a
< # default configuration from the untagged config vars.  Otherwise add code
< # to config.status for appending the configuration named by TAG from the
< # matching tagged config vars.
< m4_defun([_LT_CONFIG],
< [m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< _LT_CONFIG_SAVE_COMMANDS([
<   m4_define([_LT_TAG], m4_if([$1], [], [C], [$1]))dnl
<   m4_if(_LT_TAG, [C], [
<     # See if we are running on zsh, and set the options which allow our
<     # commands through without removal of \ escapes.
<     if test -n "${ZSH_VERSION+set}" ; then
<       setopt NO_GLOB_SUBST
<     fi
< 
<     cfgfile="${ofile}T"
<     trap "$RM \"$cfgfile\"; exit 1" 1 2 15
<     $RM "$cfgfile"
< 
<     cat <<_LT_EOF >> "$cfgfile"
< #! $SHELL
< 
< # `$ECHO "$ofile" | sed 's%^.*/%%'` - Provide generalized library-building support services.
< # Generated automatically by $as_me ($PACKAGE$TIMESTAMP) $VERSION
< # Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
< # NOTE: Changes made to this file will be lost: look at ltmain.sh.
< #
< _LT_COPYING
< _LT_LIBTOOL_TAGS
---
> ])# LT_SYS_DLOPEN_DEPLIBS
708,711c562,565
< # ### BEGIN LIBTOOL CONFIG
< _LT_LIBTOOL_CONFIG_VARS
< _LT_LIBTOOL_TAG_VARS
< # ### END LIBTOOL CONFIG
---
> # Old name:
> AU_ALIAS([AC_LTDL_SYS_DLOPEN_DEPLIBS], [LT_SYS_DLOPEN_DEPLIBS])
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LTDL_SYS_DLOPEN_DEPLIBS], [])
713d566
< _LT_EOF
715,723c568,581
<   case $host_os in
<   aix3*)
<     cat <<\_LT_EOF >> "$cfgfile"
< # AIX sometimes has problems with the GCC collect2 program.  For some
< # reason, if we set the COLLECT_NAMES environment variable, the problems
< # vanish in a puff of smoke.
< if test "X${COLLECT_NAMES+set}" != Xset; then
<   COLLECT_NAMES=
<   export COLLECT_NAMES
---
> # LT_SYS_MODULE_EXT
> # -----------------
> AC_DEFUN([LT_SYS_MODULE_EXT],
> [m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
> AC_CACHE_CHECK([which extension is used for runtime loadable modules],
>   [libltdl_cv_shlibext],
> [
> module=yes
> eval libltdl_cv_shlibext=$shrext_cmds
>   ])
> if test -n "$libltdl_cv_shlibext"; then
>   m4_pattern_allow([LT_MODULE_EXT])dnl
>   AC_DEFINE_UNQUOTED([LT_MODULE_EXT], ["$libltdl_cv_shlibext"],
>     [Define to the extension used for runtime loadable modules, say, ".so".])
725,729c583
< _LT_EOF
<     ;;
<   esac
< 
<   _LT_PROG_LTMAIN
---
> ])# LT_SYS_MODULE_EXT
731,795c585,588
<   # We use sed instead of cat because bash on DJGPP gets confused if
<   # if finds mixed CR/LF and LF-only lines.  Since sed operates in
<   # text mode, it properly converts lines to CR/LF.  This bash problem
<   # is reportedly fixed, but why not run on old versions too?
<   sed '/^# Generated shell functions inserted here/q' "$ltmain" >> "$cfgfile" \
<     || (rm -f "$cfgfile"; exit 1)
< 
<   _LT_PROG_XSI_SHELLFNS
< 
<   sed -n '/^# Generated shell functions inserted here/,$p' "$ltmain" >> "$cfgfile" \
<     || (rm -f "$cfgfile"; exit 1)
< 
<   mv -f "$cfgfile" "$ofile" ||
<     (rm -f "$ofile" && cp "$cfgfile" "$ofile" && rm -f "$cfgfile")
<   chmod +x "$ofile"
< ],
< [cat <<_LT_EOF >> "$ofile"
< 
< dnl Unfortunately we have to use $1 here, since _LT_TAG is not expanded
< dnl in a comment (ie after a #).
< # ### BEGIN LIBTOOL TAG CONFIG: $1
< _LT_LIBTOOL_TAG_VARS(_LT_TAG)
< # ### END LIBTOOL TAG CONFIG: $1
< _LT_EOF
< ])dnl /m4_if
< ],
< [m4_if([$1], [], [
<     PACKAGE='$PACKAGE'
<     VERSION='$VERSION'
<     TIMESTAMP='$TIMESTAMP'
<     RM='$RM'
<     ofile='$ofile'], [])
< ])dnl /_LT_CONFIG_SAVE_COMMANDS
< ])# _LT_CONFIG
< 
< 
< # LT_SUPPORTED_TAG(TAG)
< # ---------------------
< # Trace this macro to discover what tags are supported by the libtool
< # --tag option, using:
< #    autoconf --trace 'LT_SUPPORTED_TAG:$1'
< AC_DEFUN([LT_SUPPORTED_TAG], [])
< 
< 
< # C support is built-in for now
< m4_define([_LT_LANG_C_enabled], [])
< m4_define([_LT_TAGS], [])
< 
< 
< # LT_LANG(LANG)
< # -------------
< # Enable libtool support for the given language if not already enabled.
< AC_DEFUN([LT_LANG],
< [AC_BEFORE([$0], [LT_OUTPUT])dnl
< m4_case([$1],
<   [C],			[_LT_LANG(C)],
<   [C++],		[_LT_LANG(CXX)],
<   [Java],		[_LT_LANG(GCJ)],
<   [Fortran 77],		[_LT_LANG(F77)],
<   [Fortran],		[_LT_LANG(FC)],
<   [Windows Resource],	[_LT_LANG(RC)],
<   [m4_ifdef([_LT_LANG_]$1[_CONFIG],
<     [_LT_LANG($1)],
<     [m4_fatal([$0: unsupported language: "$1"])])])dnl
< ])# LT_LANG
---
> # Old name:
> AU_ALIAS([AC_LTDL_SHLIBEXT], [LT_SYS_MODULE_EXT])
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LTDL_SHLIBEXT], [])
798c591
< # _LT_LANG(LANGNAME)
---
> # LT_SYS_MODULE_PATH
800,807c593,602
< m4_defun([_LT_LANG],
< [m4_ifdef([_LT_LANG_]$1[_enabled], [],
<   [LT_SUPPORTED_TAG([$1])dnl
<   m4_append([_LT_TAGS], [$1 ])dnl
<   m4_define([_LT_LANG_]$1[_enabled], [])dnl
<   _LT_LANG_$1_CONFIG($1)])dnl
< ])# _LT_LANG
< 
---
> AC_DEFUN([LT_SYS_MODULE_PATH],
> [m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
> AC_CACHE_CHECK([which variable specifies run-time module search path],
>   [lt_cv_module_path_var], [lt_cv_module_path_var="$shlibpath_var"])
> if test -n "$lt_cv_module_path_var"; then
>   m4_pattern_allow([LT_MODULE_PATH_VAR])dnl
>   AC_DEFINE_UNQUOTED([LT_MODULE_PATH_VAR], ["$lt_cv_module_path_var"],
>     [Define to the name of the environment variable that determines the run-time module search path.])
> fi
> ])# LT_SYS_MODULE_PATH
809,848c604,605
< # _LT_LANG_DEFAULT_CONFIG
< # -----------------------
< m4_defun([_LT_LANG_DEFAULT_CONFIG],
< [AC_PROVIDE_IFELSE([AC_PROG_CXX],
<   [LT_LANG(CXX)],
<   [m4_define([AC_PROG_CXX], defn([AC_PROG_CXX])[LT_LANG(CXX)])])
< 
< AC_PROVIDE_IFELSE([AC_PROG_F77],
<   [LT_LANG(F77)],
<   [m4_define([AC_PROG_F77], defn([AC_PROG_F77])[LT_LANG(F77)])])
< 
< AC_PROVIDE_IFELSE([AC_PROG_FC],
<   [LT_LANG(FC)],
<   [m4_define([AC_PROG_FC], defn([AC_PROG_FC])[LT_LANG(FC)])])
< 
< dnl The call to [A][M_PROG_GCJ] is quoted like that to stop aclocal
< dnl pulling things in needlessly.
< AC_PROVIDE_IFELSE([AC_PROG_GCJ],
<   [LT_LANG(GCJ)],
<   [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],
<     [LT_LANG(GCJ)],
<     [AC_PROVIDE_IFELSE([LT_PROG_GCJ],
<       [LT_LANG(GCJ)],
<       [m4_ifdef([AC_PROG_GCJ],
< 	[m4_define([AC_PROG_GCJ], defn([AC_PROG_GCJ])[LT_LANG(GCJ)])])
<        m4_ifdef([A][M_PROG_GCJ],
< 	[m4_define([A][M_PROG_GCJ], defn([A][M_PROG_GCJ])[LT_LANG(GCJ)])])
<        m4_ifdef([LT_PROG_GCJ],
< 	[m4_define([LT_PROG_GCJ], defn([LT_PROG_GCJ])[LT_LANG(GCJ)])])])])])
< 
< AC_PROVIDE_IFELSE([LT_PROG_RC],
<   [LT_LANG(RC)],
<   [m4_define([LT_PROG_RC], defn([LT_PROG_RC])[LT_LANG(RC)])])
< ])# _LT_LANG_DEFAULT_CONFIG
< 
< # Obsolete macros:
< AU_DEFUN([AC_LIBTOOL_CXX], [LT_LANG(C++)])
< AU_DEFUN([AC_LIBTOOL_F77], [LT_LANG(Fortran 77)])
< AU_DEFUN([AC_LIBTOOL_FC], [LT_LANG(Fortran)])
< AU_DEFUN([AC_LIBTOOL_GCJ], [LT_LANG(Java)])
---
> # Old name:
> AU_ALIAS([AC_LTDL_SHLIBPATH], [LT_SYS_MODULE_PATH])
850,853c607
< dnl AC_DEFUN([AC_LIBTOOL_CXX], [])
< dnl AC_DEFUN([AC_LIBTOOL_F77], [])
< dnl AC_DEFUN([AC_LIBTOOL_FC], [])
< dnl AC_DEFUN([AC_LIBTOOL_GCJ], [])
---
> dnl AC_DEFUN([AC_LTDL_SHLIBPATH], [])
856,859c610,630
< # _LT_TAG_COMPILER
< # ----------------
< m4_defun([_LT_TAG_COMPILER],
< [AC_REQUIRE([AC_PROG_CC])dnl
---
> # LT_SYS_DLSEARCH_PATH
> # --------------------
> AC_DEFUN([LT_SYS_DLSEARCH_PATH],
> [m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
> AC_CACHE_CHECK([for the default library search path],
>   [lt_cv_sys_dlsearch_path],
>   [lt_cv_sys_dlsearch_path="$sys_lib_dlsearch_path_spec"])
> if test -n "$lt_cv_sys_dlsearch_path"; then
>   sys_dlsearch_path=
>   for dir in $lt_cv_sys_dlsearch_path; do
>     if test -z "$sys_dlsearch_path"; then
>       sys_dlsearch_path="$dir"
>     else
>       sys_dlsearch_path="$sys_dlsearch_path$PATH_SEPARATOR$dir"
>     fi
>   done
>   m4_pattern_allow([LT_DLSEARCH_PATH])dnl
>   AC_DEFINE_UNQUOTED([LT_DLSEARCH_PATH], ["$sys_dlsearch_path"],
>     [Define to the system default library search path.])
> fi
> ])# LT_SYS_DLSEARCH_PATH
861,888c632,635
< _LT_DECL([LTCC], [CC], [1], [A C compiler])dnl
< _LT_DECL([LTCFLAGS], [CFLAGS], [1], [LTCC compiler flags])dnl
< _LT_TAGDECL([CC], [compiler], [1], [A language specific compiler])dnl
< _LT_TAGDECL([with_gcc], [GCC], [0], [Is the compiler the GNU compiler?])dnl
< 
< # If no C compiler was specified, use CC.
< LTCC=${LTCC-"$CC"}
< 
< # If no C compiler flags were specified, use CFLAGS.
< LTCFLAGS=${LTCFLAGS-"$CFLAGS"}
< 
< # Allow CC to be a program name with arguments.
< compiler=$CC
< ])# _LT_TAG_COMPILER
< 
< 
< # _LT_COMPILER_BOILERPLATE
< # ------------------------
< # Check for compiler boilerplate output or warnings with
< # the simple compiler test code.
< m4_defun([_LT_COMPILER_BOILERPLATE],
< [m4_require([_LT_DECL_SED])dnl
< ac_outfile=conftest.$ac_objext
< echo "$lt_simple_compile_test_code" >conftest.$ac_ext
< eval "$ac_compile" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
< _lt_compiler_boilerplate=`cat conftest.err`
< $RM conftest*
< ])# _LT_COMPILER_BOILERPLATE
---
> # Old name:
> AU_ALIAS([AC_LTDL_SYSSEARCHPATH], [LT_SYS_DLSEARCH_PATH])
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LTDL_SYSSEARCHPATH], [])
891,940c638,645
< # _LT_LINKER_BOILERPLATE
< # ----------------------
< # Check for linker boilerplate output or warnings with
< # the simple link test code.
< m4_defun([_LT_LINKER_BOILERPLATE],
< [m4_require([_LT_DECL_SED])dnl
< ac_outfile=conftest.$ac_objext
< echo "$lt_simple_link_test_code" >conftest.$ac_ext
< eval "$ac_link" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
< _lt_linker_boilerplate=`cat conftest.err`
< $RM -r conftest*
< ])# _LT_LINKER_BOILERPLATE
< 
< # _LT_REQUIRED_DARWIN_CHECKS
< # -------------------------
< m4_defun_once([_LT_REQUIRED_DARWIN_CHECKS],[
<   case $host_os in
<     rhapsody* | darwin*)
<     AC_CHECK_TOOL([DSYMUTIL], [dsymutil], [:])
<     AC_CHECK_TOOL([NMEDIT], [nmedit], [:])
<     AC_CHECK_TOOL([LIPO], [lipo], [:])
<     AC_CHECK_TOOL([OTOOL], [otool], [:])
<     AC_CHECK_TOOL([OTOOL64], [otool64], [:])
<     _LT_DECL([], [DSYMUTIL], [1],
<       [Tool to manipulate archived DWARF debug symbol files on Mac OS X])
<     _LT_DECL([], [NMEDIT], [1],
<       [Tool to change global to local symbols on Mac OS X])
<     _LT_DECL([], [LIPO], [1],
<       [Tool to manipulate fat objects and archives on Mac OS X])
<     _LT_DECL([], [OTOOL], [1],
<       [ldd/readelf like tool for Mach-O binaries on Mac OS X])
<     _LT_DECL([], [OTOOL64], [1],
<       [ldd/readelf like tool for 64 bit Mach-O binaries on Mac OS X 10.4])
< 
<     AC_CACHE_CHECK([for -single_module linker flag],[lt_cv_apple_cc_single_mod],
<       [lt_cv_apple_cc_single_mod=no
<       if test -z "${LT_MULTI_MODULE}"; then
< 	# By default we will add the -single_module flag. You can override
< 	# by either setting the environment variable LT_MULTI_MODULE
< 	# non-empty at configure time, or by adding -multi_module to the
< 	# link flags.
< 	rm -rf libconftest.dylib*
< 	echo "int foo(void){return 1;}" > conftest.c
< 	echo "$LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \
< -dynamiclib -Wl,-single_module conftest.c" >&AS_MESSAGE_LOG_FD
< 	$LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \
< 	  -dynamiclib -Wl,-single_module conftest.c 2>conftest.err
<         _lt_result=$?
< 	if test -f libconftest.dylib && test ! -s conftest.err && test $_lt_result = 0; then
< 	  lt_cv_apple_cc_single_mod=yes
---
> # _LT_CHECK_DLPREOPEN
> # -------------------
> m4_defun([_LT_CHECK_DLPREOPEN],
> [m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
> AC_CACHE_CHECK([whether libtool supports -dlopen/-dlpreopen],
>   [libltdl_cv_preloaded_symbols],
>   [if test -n "$lt_cv_sys_global_symbol_pipe"; then
>     libltdl_cv_preloaded_symbols=yes
942c647
< 	  cat conftest.err >&AS_MESSAGE_LOG_FD
---
>     libltdl_cv_preloaded_symbols=no
944,956d648
< 	rm -rf libconftest.dylib*
< 	rm -f conftest.*
<       fi])
<     AC_CACHE_CHECK([for -exported_symbols_list linker flag],
<       [lt_cv_ld_exported_symbols_list],
<       [lt_cv_ld_exported_symbols_list=no
<       save_LDFLAGS=$LDFLAGS
<       echo "_main" > conftest.sym
<       LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
<       AC_LINK_IFELSE([AC_LANG_PROGRAM([],[])],
< 	[lt_cv_ld_exported_symbols_list=yes],
< 	[lt_cv_ld_exported_symbols_list=no])
< 	LDFLAGS="$save_LDFLAGS"
958,988c650,652
<     case $host_os in
<     rhapsody* | darwin1.[[012]])
<       _lt_dar_allow_undefined='${wl}-undefined ${wl}suppress' ;;
<     darwin1.*)
<       _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
<     darwin*) # darwin 5.x on
<       # if running on 10.5 or later, the deployment target defaults
<       # to the OS version, if on x86, and 10.4, the deployment
<       # target defaults to 10.4. Don't you love it?
<       case ${MACOSX_DEPLOYMENT_TARGET-10.0},$host in
< 	10.0,*86*-darwin8*|10.0,*-darwin[[91]]*)
< 	  _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
< 	10.[[012]]*)
< 	  _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
< 	10.*)
< 	  _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
<       esac
<     ;;
<   esac
<     if test "$lt_cv_apple_cc_single_mod" = "yes"; then
<       _lt_dar_single_mod='$single_module'
<     fi
<     if test "$lt_cv_ld_exported_symbols_list" = "yes"; then
<       _lt_dar_export_syms=' ${wl}-exported_symbols_list,$output_objdir/${libname}-symbols.expsym'
<     else
<       _lt_dar_export_syms='~$NMEDIT -s $output_objdir/${libname}-symbols.expsym ${lib}'
<     fi
<     if test "$DSYMUTIL" != ":"; then
<       _lt_dsymutil='~$DSYMUTIL $lib || :'
<     else
<       _lt_dsymutil=
---
> if test x"$libltdl_cv_preloaded_symbols" = xyes; then
>   AC_DEFINE([HAVE_PRELOADED_SYMBOLS], [1],
>     [Define if libtool can extract symbol lists from object files.])
990,992c654
<     ;;
<   esac
< ])
---
> ])# _LT_CHECK_DLPREOPEN
995,1025c657,693
< # _LT_DARWIN_LINKER_FEATURES
< # --------------------------
< # Checks for linker and compiler features on darwin
< m4_defun([_LT_DARWIN_LINKER_FEATURES],
< [
<   m4_require([_LT_REQUIRED_DARWIN_CHECKS])
<   _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<   _LT_TAGVAR(hardcode_direct, $1)=no
<   _LT_TAGVAR(hardcode_automatic, $1)=yes
<   _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
<   _LT_TAGVAR(whole_archive_flag_spec, $1)=''
<   _LT_TAGVAR(link_all_deplibs, $1)=yes
<   _LT_TAGVAR(allow_undefined_flag, $1)="$_lt_dar_allow_undefined"
<   case $cc_basename in
<      ifort*) _lt_dar_can_shared=yes ;;
<      *) _lt_dar_can_shared=$GCC ;;
<   esac
<   if test "$_lt_dar_can_shared" = "yes"; then
<     output_verbose_link_cmd=echo
<     _LT_TAGVAR(archive_cmds, $1)="\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring $_lt_dar_single_mod${_lt_dsymutil}"
<     _LT_TAGVAR(module_cmds, $1)="\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dsymutil}"
<     _LT_TAGVAR(archive_expsym_cmds, $1)="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring ${_lt_dar_single_mod}${_lt_dar_export_syms}${_lt_dsymutil}"
<     _LT_TAGVAR(module_expsym_cmds, $1)="sed -e 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dar_export_syms}${_lt_dsymutil}"
<     m4_if([$1], [CXX],
< [   if test "$lt_cv_apple_cc_single_mod" != "yes"; then
<       _LT_TAGVAR(archive_cmds, $1)="\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dsymutil}"
<       _LT_TAGVAR(archive_expsym_cmds, $1)="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dar_export_syms}${_lt_dsymutil}"
<     fi
< ],[])
<   else
<   _LT_TAGVAR(ld_shlibs, $1)=no
---
> # LT_LIB_DLLOAD
> # -------------
> AC_DEFUN([LT_LIB_DLLOAD],
> [m4_pattern_allow([^LT_DLLOADERS$])
> LT_DLLOADERS=
> AC_SUBST([LT_DLLOADERS])
> 
> AC_LANG_PUSH([C])
> 
> LIBADD_DLOPEN=
> AC_SEARCH_LIBS([dlopen], [dl],
> 	[AC_DEFINE([HAVE_LIBDL], [1],
> 		   [Define if you have the libdl library or equivalent.])
> 	if test "$ac_cv_search_dlopen" != "none required" ; then
> 	  LIBADD_DLOPEN="-ldl"
> 	fi
> 	libltdl_cv_lib_dl_dlopen="yes"
> 	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"],
>     [AC_LINK_IFELSE([AC_LANG_PROGRAM([[#if HAVE_DLFCN_H
> #  include <dlfcn.h>
> #endif
>     ]], [[dlopen(0, 0);]])],
> 	    [AC_DEFINE([HAVE_LIBDL], [1],
> 		       [Define if you have the libdl library or equivalent.])
> 	    libltdl_cv_func_dlopen="yes"
> 	    LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"],
> 	[AC_CHECK_LIB([svld], [dlopen],
> 		[AC_DEFINE([HAVE_LIBDL], [1],
> 			 [Define if you have the libdl library or equivalent.])
> 	        LIBADD_DLOPEN="-lsvld" libltdl_cv_func_dlopen="yes"
> 		LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"])])])
> if test x"$libltdl_cv_func_dlopen" = xyes || test x"$libltdl_cv_lib_dl_dlopen" = xyes
> then
>   lt_save_LIBS="$LIBS"
>   LIBS="$LIBS $LIBADD_DLOPEN"
>   AC_CHECK_FUNCS([dlerror])
>   LIBS="$lt_save_LIBS"
1027,1064c695
< ])
< 
< # _LT_SYS_MODULE_PATH_AIX
< # -----------------------
< # Links a minimal program and checks the executable
< # for the system default hardcoded library path. In most cases,
< # this is /usr/lib:/lib, but when the MPI compilers are used
< # the location of the communication and MPI libs are included too.
< # If we don't find anything, use the default library path according
< # to the aix ld manual.
< m4_defun([_LT_SYS_MODULE_PATH_AIX],
< [m4_require([_LT_DECL_SED])dnl
< AC_LINK_IFELSE(AC_LANG_PROGRAM,[
< lt_aix_libpath_sed='
<     /Import File Strings/,/^$/ {
< 	/^0/ {
< 	    s/^0  *\(.*\)$/\1/
< 	    p
< 	}
<     }'
< aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
< # Check for a 64-bit object if we didn't find anything.
< if test -z "$aix_libpath"; then
<   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
< fi],[])
< if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
< ])# _LT_SYS_MODULE_PATH_AIX
< 
< 
< # _LT_SHELL_INIT(ARG)
< # -------------------
< m4_define([_LT_SHELL_INIT],
< [ifdef([AC_DIVERSION_NOTICE],
< 	     [AC_DIVERT_PUSH(AC_DIVERSION_NOTICE)],
< 	 [AC_DIVERT_PUSH(NOTICE)])
< $1
< AC_DIVERT_POP
< ])# _LT_SHELL_INIT
---
> AC_SUBST([LIBADD_DLOPEN])
1065a697,707
> LIBADD_SHL_LOAD=
> AC_CHECK_FUNC([shl_load],
> 	[AC_DEFINE([HAVE_SHL_LOAD], [1],
> 		   [Define if you have the shl_load function.])
> 	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}shl_load.la"],
>     [AC_CHECK_LIB([dld], [shl_load],
> 	    [AC_DEFINE([HAVE_SHL_LOAD], [1],
> 		       [Define if you have the shl_load function.])
> 	    LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}shl_load.la"
> 	    LIBADD_SHL_LOAD="-ldld"])])
> AC_SUBST([LIBADD_SHL_LOAD])
1067,1079c709,722
< # _LT_PROG_ECHO_BACKSLASH
< # -----------------------
< # Add some code to the start of the generated configure script which
< # will find an echo command which doesn't interpret backslashes.
< m4_defun([_LT_PROG_ECHO_BACKSLASH],
< [_LT_SHELL_INIT([
< # Check that we are running under the correct shell.
< SHELL=${CONFIG_SHELL-/bin/sh}
< 
< case X$lt_ECHO in
< X*--fallback-echo)
<   # Remove one level of quotation (which was required for Make).
<   ECHO=`echo "$lt_ECHO" | sed 's,\\\\\[$]\\[$]0,'[$]0','`
---
> case $host_os in
> darwin[[1567]].*)
> # We only want this for pre-Mac OS X 10.4.
>   AC_CHECK_FUNC([_dyld_func_lookup],
> 	[AC_DEFINE([HAVE_DYLD], [1],
> 		   [Define if you have the _dyld_func_lookup function.])
> 	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dyld.la"])
>   ;;
> beos*)
>   LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}load_add_on.la"
>   ;;
> cygwin* | mingw* | os2* | pw32*)
>   AC_CHECK_DECLS([cygwin_conv_path], [], [], [[#include <sys/cygwin.h>]])
>   LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}loadlibrary.la"
1083,1105c726,730
< ECHO=${lt_ECHO-echo}
< if test "X[$]1" = X--no-reexec; then
<   # Discard the --no-reexec flag, and continue.
<   shift
< elif test "X[$]1" = X--fallback-echo; then
<   # Avoid inline document here, it may be left over
<   :
< elif test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' ; then
<   # Yippee, $ECHO works!
<   :
< else
<   # Restart under the correct shell.
<   exec $SHELL "[$]0" --no-reexec ${1+"[$]@"}
< fi
< 
< if test "X[$]1" = X--fallback-echo; then
<   # used as fallback echo
<   shift
<   cat <<_LT_EOF
< [$]*
< _LT_EOF
<   exit 0
< fi
---
> AC_CHECK_LIB([dld], [dld_link],
> 	[AC_DEFINE([HAVE_DLD], [1],
> 		   [Define if you have the GNU dld library.])
> 		LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dld_link.la"])
> AC_SUBST([LIBADD_DLD_LINK])
1107,1117c732,734
< # The HP-UX ksh and POSIX shell print the target directory to stdout
< # if CDPATH is set.
< (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
< 
< if test -z "$lt_ECHO"; then
<   if test "X${echo_test_string+set}" != Xset; then
<     # find a string as large as possible, as long as the shell can cope with it
<     for cmd in 'sed 50q "[$]0"' 'sed 20q "[$]0"' 'sed 10q "[$]0"' 'sed 2q "[$]0"' 'echo test'; do
<       # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
<       if { echo_test_string=`eval $cmd`; } 2>/dev/null &&
< 	 { test "X$echo_test_string" = "X$echo_test_string"; } 2>/dev/null
---
> m4_pattern_allow([^LT_DLPREOPEN$])
> LT_DLPREOPEN=
> if test -n "$LT_DLLOADERS"
1119,1120c736,737
<         break
<       fi
---
>   for lt_loader in $LT_DLLOADERS; do
>     LT_DLPREOPEN="$LT_DLPREOPEN-dlpreopen $lt_loader "
1121a739,740
>   AC_DEFINE([HAVE_LIBDLLOADER], [1],
>             [Define if libdlloader will be built on this platform])
1122a742
> AC_SUBST([LT_DLPREOPEN])
1124,1133c744,746
<   if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
<      echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
<      test "X$echo_testing_string" = "X$echo_test_string"; then
<     :
<   else
<     # The Solaris, AIX, and Digital Unix default echo programs unquote
<     # backslashes.  This makes it impossible to quote backslashes using
<     #   echo "$something" | sed 's/\\/\\\\/g'
<     #
<     # So, first we look for a working echo in the user's PATH.
---
> dnl This isn't used anymore, but set it for backwards compatibility
> LIBADD_DL="$LIBADD_DLOPEN $LIBADD_SHL_LOAD"
> AC_SUBST([LIBADD_DL])
1135,1146c748,749
<     lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
<     for dir in $PATH /usr/ucb; do
<       IFS="$lt_save_ifs"
<       if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
<          test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         ECHO="$dir/echo"
<         break
<       fi
<     done
<     IFS="$lt_save_ifs"
---
> AC_LANG_POP
> ])# LT_LIB_DLLOAD
1148,1187c751,754
<     if test "X$ECHO" = Xecho; then
<       # We didn't find a better echo, so look for alternatives.
<       if test "X`{ print -r '\t'; } 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`{ print -r "$echo_test_string"; } 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         # This shell has a builtin print -r that does the trick.
<         ECHO='print -r'
<       elif { test -f /bin/ksh || test -f /bin/ksh$ac_exeext; } &&
< 	   test "X$CONFIG_SHELL" != X/bin/ksh; then
<         # If we have ksh, try running configure again with it.
<         ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
<         export ORIGINAL_CONFIG_SHELL
<         CONFIG_SHELL=/bin/ksh
<         export CONFIG_SHELL
<         exec $CONFIG_SHELL "[$]0" --no-reexec ${1+"[$]@"}
<       else
<         # Try using printf.
<         ECHO='printf %s\n'
<         if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
< 	   echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
< 	   test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  # Cool, printf works
< 	  :
<         elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "[$]0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($ORIGINAL_CONFIG_SHELL "[$]0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
< 	  export CONFIG_SHELL
< 	  SHELL="$CONFIG_SHELL"
< 	  export SHELL
< 	  ECHO="$CONFIG_SHELL [$]0 --fallback-echo"
<         elif echo_testing_string=`($CONFIG_SHELL "[$]0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($CONFIG_SHELL "[$]0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  ECHO="$CONFIG_SHELL [$]0 --fallback-echo"
<         else
< 	  # maybe with a smaller string...
< 	  prev=:
---
> # Old name:
> AU_ALIAS([AC_LTDL_DLLIB], [LT_LIB_DLLOAD])
> dnl aclocal-1.4 backwards compatibility:
> dnl AC_DEFUN([AC_LTDL_DLLIB], [])
1189,1195d755
< 	  for cmd in 'echo test' 'sed 2q "[$]0"' 'sed 10q "[$]0"' 'sed 20q "[$]0"' 'sed 50q "[$]0"'; do
< 	    if { test "X$echo_test_string" = "X`eval $cmd`"; } 2>/dev/null
< 	    then
< 	      break
< 	    fi
< 	    prev="$cmd"
< 	  done
1197,1200c757,775
< 	  if test "$prev" != 'sed 50q "[$]0"'; then
< 	    echo_test_string=`eval $prev`
< 	    export echo_test_string
< 	    exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "[$]0" ${1+"[$]@"}
---
> # LT_SYS_SYMBOL_USCORE
> # --------------------
> # does the compiler prefix global symbols with an underscore?
> AC_DEFUN([LT_SYS_SYMBOL_USCORE],
> [m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
> AC_CACHE_CHECK([for _ prefix in compiled symbols],
>   [lt_cv_sys_symbol_underscore],
>   [lt_cv_sys_symbol_underscore=no
>   cat > conftest.$ac_ext <<_LT_EOF
> void nm_test_func(){}
> int main(){nm_test_func;return 0;}
> _LT_EOF
>   if AC_TRY_EVAL(ac_compile); then
>     # Now try to grab the symbols.
>     ac_nlist=conftest.nm
>     if AC_TRY_EVAL(NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $ac_nlist) && test -s "$ac_nlist"; then
>       # See whether the symbols have a leading underscore.
>       if grep '^. _nm_test_func' "$ac_nlist" >/dev/null; then
>         lt_cv_sys_symbol_underscore=yes
1202,1203c777,780
< 	    # Oops.  We lost completely, so just stick with echo.
< 	    ECHO=echo
---
>         if grep '^. nm_test_func ' "$ac_nlist" >/dev/null; then
> 	  :
>         else
> 	  echo "configure: cannot find nm_test_func in $ac_nlist" >&AS_MESSAGE_LOG_FD
1205a783,784
>     else
>       echo "configure: cannot run $lt_cv_sys_global_symbol_pipe" >&AS_MESSAGE_LOG_FD
1207,1329c786,788
<     fi
<   fi
< fi
< 
< # Copy echo and quote the copy suitably for passing to libtool from
< # the Makefile, instead of quoting the original, which is used later.
< lt_ECHO=$ECHO
< if test "X$lt_ECHO" = "X$CONFIG_SHELL [$]0 --fallback-echo"; then
<    lt_ECHO="$CONFIG_SHELL \\\$\[$]0 --fallback-echo"
< fi
< 
< AC_SUBST(lt_ECHO)
< ])
< _LT_DECL([], [SHELL], [1], [Shell to use when invoking shell scripts])
< _LT_DECL([], [ECHO], [1],
<     [An echo program that does not interpret backslashes])
< ])# _LT_PROG_ECHO_BACKSLASH
< 
< 
< # _LT_ENABLE_LOCK
< # ---------------
< m4_defun([_LT_ENABLE_LOCK],
< [AC_ARG_ENABLE([libtool-lock],
<   [AS_HELP_STRING([--disable-libtool-lock],
<     [avoid locking (might break parallel builds)])])
< test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes
< 
< # Some flags need to be propagated to the compiler or linker for good
< # libtool support.
< case $host in
< ia64-*-hpux*)
<   # Find out which ABI we are using.
<   echo 'int i;' > conftest.$ac_ext
<   if AC_TRY_EVAL(ac_compile); then
<     case `/usr/bin/file conftest.$ac_objext` in
<       *ELF-32*)
< 	HPUX_IA64_MODE="32"
< 	;;
<       *ELF-64*)
< 	HPUX_IA64_MODE="64"
< 	;;
<     esac
<   fi
<   rm -rf conftest*
<   ;;
< *-*-irix6*)
<   # Find out which ABI we are using.
<   echo '[#]line __oline__ "configure"' > conftest.$ac_ext
<   if AC_TRY_EVAL(ac_compile); then
<     if test "$lt_cv_prog_gnu_ld" = yes; then
<       case `/usr/bin/file conftest.$ac_objext` in
< 	*32-bit*)
< 	  LD="${LD-ld} -melf32bsmip"
< 	  ;;
< 	*N32*)
< 	  LD="${LD-ld} -melf32bmipn32"
< 	  ;;
< 	*64-bit*)
< 	  LD="${LD-ld} -melf64bmip"
< 	;;
<       esac
<     else
<       case `/usr/bin/file conftest.$ac_objext` in
< 	*32-bit*)
< 	  LD="${LD-ld} -32"
< 	  ;;
< 	*N32*)
< 	  LD="${LD-ld} -n32"
< 	  ;;
< 	*64-bit*)
< 	  LD="${LD-ld} -64"
< 	  ;;
<       esac
<     fi
<   fi
<   rm -rf conftest*
<   ;;
< 
< x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*| \
< s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
<   # Find out which ABI we are using.
<   echo 'int i;' > conftest.$ac_ext
<   if AC_TRY_EVAL(ac_compile); then
<     case `/usr/bin/file conftest.o` in
<       *32-bit*)
< 	case $host in
< 	  x86_64-*kfreebsd*-gnu)
< 	    LD="${LD-ld} -m elf_i386_fbsd"
< 	    ;;
< 	  x86_64-*linux*)
< 	    LD="${LD-ld} -m elf_i386"
< 	    ;;
< 	  ppc64-*linux*|powerpc64-*linux*)
< 	    LD="${LD-ld} -m elf32ppclinux"
< 	    ;;
< 	  s390x-*linux*)
< 	    LD="${LD-ld} -m elf_s390"
< 	    ;;
< 	  sparc64-*linux*)
< 	    LD="${LD-ld} -m elf32_sparc"
< 	    ;;
< 	esac
< 	;;
<       *64-bit*)
< 	case $host in
< 	  x86_64-*kfreebsd*-gnu)
< 	    LD="${LD-ld} -m elf_x86_64_fbsd"
< 	    ;;
< 	  x86_64-*linux*)
< 	    LD="${LD-ld} -m elf_x86_64"
< 	    ;;
< 	  ppc*-*linux*|powerpc*-*linux*)
< 	    LD="${LD-ld} -m elf64ppc"
< 	    ;;
< 	  s390*-*linux*|s390*-*tpf*)
< 	    LD="${LD-ld} -m elf64_s390"
< 	    ;;
< 	  sparc*-*linux*)
< 	    LD="${LD-ld} -m elf64_sparc"
< 	    ;;
< 	esac
< 	;;
<     esac
---
>   else
>     echo "configure: failed program was:" >&AS_MESSAGE_LOG_FD
>     cat conftest.c >&AS_MESSAGE_LOG_FD
1332,1625d790
<   ;;
< 
< *-*-sco3.2v5*)
<   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
<   SAVE_CFLAGS="$CFLAGS"
<   CFLAGS="$CFLAGS -belf"
<   AC_CACHE_CHECK([whether the C compiler needs -belf], lt_cv_cc_needs_belf,
<     [AC_LANG_PUSH(C)
<      AC_LINK_IFELSE([AC_LANG_PROGRAM([[]],[[]])],[lt_cv_cc_needs_belf=yes],[lt_cv_cc_needs_belf=no])
<      AC_LANG_POP])
<   if test x"$lt_cv_cc_needs_belf" != x"yes"; then
<     # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
<     CFLAGS="$SAVE_CFLAGS"
<   fi
<   ;;
< sparc*-*solaris*)
<   # Find out which ABI we are using.
<   echo 'int i;' > conftest.$ac_ext
<   if AC_TRY_EVAL(ac_compile); then
<     case `/usr/bin/file conftest.o` in
<     *64-bit*)
<       case $lt_cv_prog_gnu_ld in
<       yes*) LD="${LD-ld} -m elf64_sparc" ;;
<       *)
< 	if ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then
< 	  LD="${LD-ld} -64"
< 	fi
< 	;;
<       esac
<       ;;
<     esac
<   fi
<   rm -rf conftest*
<   ;;
< esac
< 
< need_locks="$enable_libtool_lock"
< ])# _LT_ENABLE_LOCK
< 
< 
< # _LT_CMD_OLD_ARCHIVE
< # -------------------
< m4_defun([_LT_CMD_OLD_ARCHIVE],
< [AC_CHECK_TOOL(AR, ar, false)
< test -z "$AR" && AR=ar
< test -z "$AR_FLAGS" && AR_FLAGS=cru
< _LT_DECL([], [AR], [1], [The archiver])
< _LT_DECL([], [AR_FLAGS], [1])
< 
< AC_CHECK_TOOL(STRIP, strip, :)
< test -z "$STRIP" && STRIP=:
< _LT_DECL([], [STRIP], [1], [A symbol stripping program])
< 
< AC_CHECK_TOOL(RANLIB, ranlib, :)
< test -z "$RANLIB" && RANLIB=:
< _LT_DECL([], [RANLIB], [1],
<     [Commands used to install an old-style archive])
< 
< # Determine commands to create old-style static archives.
< old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs'
< old_postinstall_cmds='chmod 644 $oldlib'
< old_postuninstall_cmds=
< 
< if test -n "$RANLIB"; then
<   case $host_os in
<   openbsd*)
<     old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$oldlib"
<     ;;
<   *)
<     old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$oldlib"
<     ;;
<   esac
<   old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
< fi
< _LT_DECL([], [old_postinstall_cmds], [2])
< _LT_DECL([], [old_postuninstall_cmds], [2])
< _LT_TAGDECL([], [old_archive_cmds], [2],
<     [Commands used to build an old-style archive])
< ])# _LT_CMD_OLD_ARCHIVE
< 
< 
< # _LT_COMPILER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
< #		[OUTPUT-FILE], [ACTION-SUCCESS], [ACTION-FAILURE])
< # ----------------------------------------------------------------
< # Check whether the given compiler option works
< AC_DEFUN([_LT_COMPILER_OPTION],
< [m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_DECL_SED])dnl
< AC_CACHE_CHECK([$1], [$2],
<   [$2=no
<    m4_if([$4], , [ac_outfile=conftest.$ac_objext], [ac_outfile=$4])
<    echo "$lt_simple_compile_test_code" > conftest.$ac_ext
<    lt_compiler_flag="$3"
<    # Insert the option either (1) after the last *FLAGS variable, or
<    # (2) before a word containing "conftest.", or (3) at the end.
<    # Note that $ac_compile itself does not contain backslashes and begins
<    # with a dollar sign (not a hyphen), so the echo should work correctly.
<    # The option is referenced via a variable to avoid confusing sed.
<    lt_compile=`echo "$ac_compile" | $SED \
<    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
<    -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&:; t' \
<    -e 's:$: $lt_compiler_flag:'`
<    (eval echo "\"\$as_me:__oline__: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
<    (eval "$lt_compile" 2>conftest.err)
<    ac_status=$?
<    cat conftest.err >&AS_MESSAGE_LOG_FD
<    echo "$as_me:__oline__: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
<    if (exit $ac_status) && test -s "$ac_outfile"; then
<      # The compiler can only warn and ignore the option if not recognized
<      # So say no if there are warnings other than the usual output.
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
<      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
<      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
<        $2=yes
<      fi
<    fi
<    $RM conftest*
< ])
< 
< if test x"[$]$2" = xyes; then
<     m4_if([$5], , :, [$5])
< else
<     m4_if([$6], , :, [$6])
< fi
< ])# _LT_COMPILER_OPTION
< 
< # Old name:
< AU_ALIAS([AC_LIBTOOL_COMPILER_OPTION], [_LT_COMPILER_OPTION])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_LIBTOOL_COMPILER_OPTION], [])
< 
< 
< # _LT_LINKER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
< #                  [ACTION-SUCCESS], [ACTION-FAILURE])
< # ----------------------------------------------------
< # Check whether the given linker option works
< AC_DEFUN([_LT_LINKER_OPTION],
< [m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_DECL_SED])dnl
< AC_CACHE_CHECK([$1], [$2],
<   [$2=no
<    save_LDFLAGS="$LDFLAGS"
<    LDFLAGS="$LDFLAGS $3"
<    echo "$lt_simple_link_test_code" > conftest.$ac_ext
<    if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
<      # The linker can only warn and ignore the option if not recognized
<      # So say no if there are warnings
<      if test -s conftest.err; then
<        # Append any errors to the config.log.
<        cat conftest.err 1>&AS_MESSAGE_LOG_FD
<        $ECHO "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
<        $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
<        if diff conftest.exp conftest.er2 >/dev/null; then
<          $2=yes
<        fi
<      else
<        $2=yes
<      fi
<    fi
<    $RM -r conftest*
<    LDFLAGS="$save_LDFLAGS"
< ])
< 
< if test x"[$]$2" = xyes; then
<     m4_if([$4], , :, [$4])
< else
<     m4_if([$5], , :, [$5])
< fi
< ])# _LT_LINKER_OPTION
< 
< # Old name:
< AU_ALIAS([AC_LIBTOOL_LINKER_OPTION], [_LT_LINKER_OPTION])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_LIBTOOL_LINKER_OPTION], [])
< 
< 
< # LT_CMD_MAX_LEN
< #---------------
< AC_DEFUN([LT_CMD_MAX_LEN],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< # find the maximum length of command line arguments
< AC_MSG_CHECKING([the maximum length of command line arguments])
< AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl
<   i=0
<   teststring="ABCD"
< 
<   case $build_os in
<   msdosdjgpp*)
<     # On DJGPP, this test can blow up pretty badly due to problems in libc
<     # (any single argument exceeding 2000 bytes causes a buffer overrun
<     # during glob expansion).  Even if it were fixed, the result of this
<     # check would be larger than it should be.
<     lt_cv_sys_max_cmd_len=12288;    # 12K is about right
<     ;;
< 
<   gnu*)
<     # Under GNU Hurd, this test is not required because there is
<     # no limit to the length of command line arguments.
<     # Libtool will interpret -1 as no limit whatsoever
<     lt_cv_sys_max_cmd_len=-1;
<     ;;
< 
<   cygwin* | mingw* | cegcc*)
<     # On Win9x/ME, this test blows up -- it succeeds, but takes
<     # about 5 minutes as the teststring grows exponentially.
<     # Worse, since 9x/ME are not pre-emptively multitasking,
<     # you end up with a "frozen" computer, even though with patience
<     # the test eventually succeeds (with a max line length of 256k).
<     # Instead, let's just punt: use the minimum linelength reported by
<     # all of the supported platforms: 8192 (on NT/2K/XP).
<     lt_cv_sys_max_cmd_len=8192;
<     ;;
< 
<   amigaos*)
<     # On AmigaOS with pdksh, this test takes hours, literally.
<     # So we just punt and use a minimum line length of 8192.
<     lt_cv_sys_max_cmd_len=8192;
<     ;;
< 
<   netbsd* | freebsd* | openbsd* | darwin* | dragonfly*)
<     # This has been around since 386BSD, at least.  Likely further.
<     if test -x /sbin/sysctl; then
<       lt_cv_sys_max_cmd_len=`/sbin/sysctl -n kern.argmax`
<     elif test -x /usr/sbin/sysctl; then
<       lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
<     else
<       lt_cv_sys_max_cmd_len=65536	# usable default for all BSDs
<     fi
<     # And add a safety zone
<     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
<     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
<     ;;
< 
<   interix*)
<     # We know the value 262144 and hardcode it with a safety zone (like BSD)
<     lt_cv_sys_max_cmd_len=196608
<     ;;
< 
<   osf*)
<     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
<     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
<     # nice to cause kernel panics so lets avoid the loop below.
<     # First set a reasonable default.
<     lt_cv_sys_max_cmd_len=16384
<     #
<     if test -x /sbin/sysconfig; then
<       case `/sbin/sysconfig -q proc exec_disable_arg_limit` in
<         *1*) lt_cv_sys_max_cmd_len=-1 ;;
<       esac
<     fi
<     ;;
<   sco3.2v5*)
<     lt_cv_sys_max_cmd_len=102400
<     ;;
<   sysv5* | sco5v6* | sysv4.2uw2*)
<     kargmax=`grep ARG_MAX /etc/conf/cf.d/stune 2>/dev/null`
<     if test -n "$kargmax"; then
<       lt_cv_sys_max_cmd_len=`echo $kargmax | sed 's/.*[[	 ]]//'`
<     else
<       lt_cv_sys_max_cmd_len=32768
<     fi
<     ;;
<   *)
<     lt_cv_sys_max_cmd_len=`(getconf ARG_MAX) 2> /dev/null`
<     if test -n "$lt_cv_sys_max_cmd_len"; then
<       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
<       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
<     else
<       # Make teststring a little bigger before we do anything with it.
<       # a 1K string should be a reasonable start.
<       for i in 1 2 3 4 5 6 7 8 ; do
<         teststring=$teststring$teststring
<       done
<       SHELL=${SHELL-${CONFIG_SHELL-/bin/sh}}
<       # If test is not a shell built-in, we'll probably end up computing a
<       # maximum length that is only half of the actual maximum length, but
<       # we can't tell.
<       while { test "X"`$SHELL [$]0 --fallback-echo "X$teststring$teststring" 2>/dev/null` \
< 	         = "XX$teststring$teststring"; } >/dev/null 2>&1 &&
< 	      test $i != 17 # 1/2 MB should be enough
<       do
<         i=`expr $i + 1`
<         teststring=$teststring$teststring
<       done
<       # Only check the string length outside the loop.
<       lt_cv_sys_max_cmd_len=`expr "X$teststring" : ".*" 2>&1`
<       teststring=
<       # Add a significant safety factor because C++ compilers can tack on
<       # massive amounts of additional arguments before passing them to the
<       # linker.  It appears as though 1/2 is a usable value.
<       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 2`
<     fi
<     ;;
<   esac
1627,1635c792,794
< if test -n $lt_cv_sys_max_cmd_len ; then
<   AC_MSG_RESULT($lt_cv_sys_max_cmd_len)
< else
<   AC_MSG_RESULT(none)
< fi
< max_cmd_len=$lt_cv_sys_max_cmd_len
< _LT_DECL([], [max_cmd_len], [0],
<     [What is the maximum length of a command?])
< ])# LT_CMD_MAX_LEN
---
>   sys_symbol_underscore=$lt_cv_sys_symbol_underscore
>   AC_SUBST([sys_symbol_underscore])
> ])# LT_SYS_SYMBOL_USCORE
1638c797
< AU_ALIAS([AC_LIBTOOL_SYS_MAX_CMD_LEN], [LT_CMD_MAX_LEN])
---
> AU_ALIAS([AC_LTDL_SYMBOL_USCORE], [LT_SYS_SYMBOL_USCORE])
1640,1806c799
< dnl AC_DEFUN([AC_LIBTOOL_SYS_MAX_CMD_LEN], [])
< 
< 
< # _LT_HEADER_DLFCN
< # ----------------
< m4_defun([_LT_HEADER_DLFCN],
< [AC_CHECK_HEADERS([dlfcn.h], [], [], [AC_INCLUDES_DEFAULT])dnl
< ])# _LT_HEADER_DLFCN
< 
< 
< # _LT_TRY_DLOPEN_SELF (ACTION-IF-TRUE, ACTION-IF-TRUE-W-USCORE,
< #                      ACTION-IF-FALSE, ACTION-IF-CROSS-COMPILING)
< # ----------------------------------------------------------------
< m4_defun([_LT_TRY_DLOPEN_SELF],
< [m4_require([_LT_HEADER_DLFCN])dnl
< if test "$cross_compiling" = yes; then :
<   [$4]
< else
<   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
<   lt_status=$lt_dlunknown
<   cat > conftest.$ac_ext <<_LT_EOF
< [#line __oline__ "configure"
< #include "confdefs.h"
< 
< #if HAVE_DLFCN_H
< #include <dlfcn.h>
< #endif
< 
< #include <stdio.h>
< 
< #ifdef RTLD_GLOBAL
< #  define LT_DLGLOBAL		RTLD_GLOBAL
< #else
< #  ifdef DL_GLOBAL
< #    define LT_DLGLOBAL		DL_GLOBAL
< #  else
< #    define LT_DLGLOBAL		0
< #  endif
< #endif
< 
< /* We may have to define LT_DLLAZY_OR_NOW in the command line if we
<    find out it does not work in some platform. */
< #ifndef LT_DLLAZY_OR_NOW
< #  ifdef RTLD_LAZY
< #    define LT_DLLAZY_OR_NOW		RTLD_LAZY
< #  else
< #    ifdef DL_LAZY
< #      define LT_DLLAZY_OR_NOW		DL_LAZY
< #    else
< #      ifdef RTLD_NOW
< #        define LT_DLLAZY_OR_NOW	RTLD_NOW
< #      else
< #        ifdef DL_NOW
< #          define LT_DLLAZY_OR_NOW	DL_NOW
< #        else
< #          define LT_DLLAZY_OR_NOW	0
< #        endif
< #      endif
< #    endif
< #  endif
< #endif
< 
< void fnord() { int i=42;}
< int main ()
< {
<   void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
<   int status = $lt_dlunknown;
< 
<   if (self)
<     {
<       if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
<       else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
<       /* dlclose (self); */
<     }
<   else
<     puts (dlerror ());
< 
<   return status;
< }]
< _LT_EOF
<   if AC_TRY_EVAL(ac_link) && test -s conftest${ac_exeext} 2>/dev/null; then
<     (./conftest; exit; ) >&AS_MESSAGE_LOG_FD 2>/dev/null
<     lt_status=$?
<     case x$lt_status in
<       x$lt_dlno_uscore) $1 ;;
<       x$lt_dlneed_uscore) $2 ;;
<       x$lt_dlunknown|x*) $3 ;;
<     esac
<   else :
<     # compilation failed
<     $3
<   fi
< fi
< rm -fr conftest*
< ])# _LT_TRY_DLOPEN_SELF
< 
< 
< # LT_SYS_DLOPEN_SELF
< # ------------------
< AC_DEFUN([LT_SYS_DLOPEN_SELF],
< [m4_require([_LT_HEADER_DLFCN])dnl
< if test "x$enable_dlopen" != xyes; then
<   enable_dlopen=unknown
<   enable_dlopen_self=unknown
<   enable_dlopen_self_static=unknown
< else
<   lt_cv_dlopen=no
<   lt_cv_dlopen_libs=
< 
<   case $host_os in
<   beos*)
<     lt_cv_dlopen="load_add_on"
<     lt_cv_dlopen_libs=
<     lt_cv_dlopen_self=yes
<     ;;
< 
<   mingw* | pw32* | cegcc*)
<     lt_cv_dlopen="LoadLibrary"
<     lt_cv_dlopen_libs=
<     ;;
< 
<   cygwin*)
<     lt_cv_dlopen="dlopen"
<     lt_cv_dlopen_libs=
<     ;;
< 
<   darwin*)
<   # if libdl is installed we need to link against it
<     AC_CHECK_LIB([dl], [dlopen],
< 		[lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"],[
<     lt_cv_dlopen="dyld"
<     lt_cv_dlopen_libs=
<     lt_cv_dlopen_self=yes
<     ])
<     ;;
< 
<   *)
<     AC_CHECK_FUNC([shl_load],
< 	  [lt_cv_dlopen="shl_load"],
<       [AC_CHECK_LIB([dld], [shl_load],
< 	    [lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"],
< 	[AC_CHECK_FUNC([dlopen],
< 	      [lt_cv_dlopen="dlopen"],
< 	  [AC_CHECK_LIB([dl], [dlopen],
< 		[lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"],
< 	    [AC_CHECK_LIB([svld], [dlopen],
< 		  [lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"],
< 	      [AC_CHECK_LIB([dld], [dld_link],
< 		    [lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"])
< 	      ])
< 	    ])
< 	  ])
< 	])
<       ])
<     ;;
<   esac
< 
<   if test "x$lt_cv_dlopen" != xno; then
<     enable_dlopen=yes
<   else
<     enable_dlopen=no
<   fi
< 
<   case $lt_cv_dlopen in
<   dlopen)
<     save_CPPFLAGS="$CPPFLAGS"
<     test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"
---
> dnl AC_DEFUN([AC_LTDL_SYMBOL_USCORE], [])
1808,1809d800
<     save_LDFLAGS="$LDFLAGS"
<     wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"
1810a802,811
> # LT_FUNC_DLSYM_USCORE
> # --------------------
> AC_DEFUN([LT_FUNC_DLSYM_USCORE],
> [AC_REQUIRE([LT_SYS_SYMBOL_USCORE])dnl
> if test x"$lt_cv_sys_symbol_underscore" = xyes; then
>   if test x"$libltdl_cv_func_dlopen" = xyes ||
>      test x"$libltdl_cv_lib_dl_dlopen" = xyes ; then
> 	AC_CACHE_CHECK([whether we have to add an underscore for dlsym],
> 	  [libltdl_cv_need_uscore],
> 	  [libltdl_cv_need_uscore=unknown
1812,1824c813
<     LIBS="$lt_cv_dlopen_libs $LIBS"
< 
<     AC_CACHE_CHECK([whether a program can dlopen itself],
< 	  lt_cv_dlopen_self, [dnl
< 	  _LT_TRY_DLOPEN_SELF(
< 	    lt_cv_dlopen_self=yes, lt_cv_dlopen_self=yes,
< 	    lt_cv_dlopen_self=no, lt_cv_dlopen_self=cross)
<     ])
< 
<     if test "x$lt_cv_dlopen_self" = xyes; then
<       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
<       AC_CACHE_CHECK([whether a statically linked program can dlopen itself],
< 	  lt_cv_dlopen_self_static, [dnl
---
>           LIBS="$LIBS $LIBADD_DLOPEN"
1826,1832c815,816
< 	    lt_cv_dlopen_self_static=yes, lt_cv_dlopen_self_static=yes,
< 	    lt_cv_dlopen_self_static=no,  lt_cv_dlopen_self_static=cross)
<       ])
<     fi
< 
<     CPPFLAGS="$save_CPPFLAGS"
<     LDFLAGS="$save_LDFLAGS"
---
> 	    [libltdl_cv_need_uscore=no], [libltdl_cv_need_uscore=yes],
> 	    [],				 [libltdl_cv_need_uscore=cross])
1834,1910d817
<     ;;
<   esac
< 
<   case $lt_cv_dlopen_self in
<   yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
<   *) enable_dlopen_self=unknown ;;
<   esac
< 
<   case $lt_cv_dlopen_self_static in
<   yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
<   *) enable_dlopen_self_static=unknown ;;
<   esac
< fi
< _LT_DECL([dlopen_support], [enable_dlopen], [0],
< 	 [Whether dlopen is supported])
< _LT_DECL([dlopen_self], [enable_dlopen_self], [0],
< 	 [Whether dlopen of programs is supported])
< _LT_DECL([dlopen_self_static], [enable_dlopen_self_static], [0],
< 	 [Whether dlopen of statically linked programs is supported])
< ])# LT_SYS_DLOPEN_SELF
< 
< # Old name:
< AU_ALIAS([AC_LIBTOOL_DLOPEN_SELF], [LT_SYS_DLOPEN_SELF])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_LIBTOOL_DLOPEN_SELF], [])
< 
< 
< # _LT_COMPILER_C_O([TAGNAME])
< # ---------------------------
< # Check to see if options -c and -o are simultaneously supported by compiler.
< # This macro does not hard code the compiler like AC_PROG_CC_C_O.
< m4_defun([_LT_COMPILER_C_O],
< [m4_require([_LT_DECL_SED])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_TAG_COMPILER])dnl
< AC_CACHE_CHECK([if $compiler supports -c -o file.$ac_objext],
<   [_LT_TAGVAR(lt_cv_prog_compiler_c_o, $1)],
<   [_LT_TAGVAR(lt_cv_prog_compiler_c_o, $1)=no
<    $RM -r conftest 2>/dev/null
<    mkdir conftest
<    cd conftest
<    mkdir out
<    echo "$lt_simple_compile_test_code" > conftest.$ac_ext
< 
<    lt_compiler_flag="-o out/conftest2.$ac_objext"
<    # Insert the option either (1) after the last *FLAGS variable, or
<    # (2) before a word containing "conftest.", or (3) at the end.
<    # Note that $ac_compile itself does not contain backslashes and begins
<    # with a dollar sign (not a hyphen), so the echo should work correctly.
<    lt_compile=`echo "$ac_compile" | $SED \
<    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
<    -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&:; t' \
<    -e 's:$: $lt_compiler_flag:'`
<    (eval echo "\"\$as_me:__oline__: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
<    (eval "$lt_compile" 2>out/conftest.err)
<    ac_status=$?
<    cat out/conftest.err >&AS_MESSAGE_LOG_FD
<    echo "$as_me:__oline__: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
<    if (exit $ac_status) && test -s out/conftest2.$ac_objext
<    then
<      # The compiler can only warn and ignore the option if not recognized
<      # So say no if there are warnings
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
<      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
<      if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 >/dev/null; then
<        _LT_TAGVAR(lt_cv_prog_compiler_c_o, $1)=yes
<      fi
<    fi
<    chmod u+w . 2>&AS_MESSAGE_LOG_FD
<    $RM conftest*
<    # SGI C++ compiler will create directory out/ii_files/ for
<    # template instantiation
<    test -d out/ii_files && $RM out/ii_files/* && rmdir out/ii_files
<    $RM out/* && rmdir out
<    cd ..
<    $RM -r conftest
<    $RM conftest*
1912,1957d818
< _LT_TAGDECL([compiler_c_o], [lt_cv_prog_compiler_c_o], [1],
< 	[Does compiler simultaneously support -c and -o options?])
< ])# _LT_COMPILER_C_O
< 
< 
< # _LT_COMPILER_FILE_LOCKS([TAGNAME])
< # ----------------------------------
< # Check to see if we can do hard links to lock some files if needed
< m4_defun([_LT_COMPILER_FILE_LOCKS],
< [m4_require([_LT_ENABLE_LOCK])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< _LT_COMPILER_C_O([$1])
< 
< hard_links="nottested"
< if test "$_LT_TAGVAR(lt_cv_prog_compiler_c_o, $1)" = no && test "$need_locks" != no; then
<   # do not overwrite the value of need_locks provided by the user
<   AC_MSG_CHECKING([if we can lock with hard links])
<   hard_links=yes
<   $RM conftest*
<   ln conftest.a conftest.b 2>/dev/null && hard_links=no
<   touch conftest.a
<   ln conftest.a conftest.b 2>&5 || hard_links=no
<   ln conftest.a conftest.b 2>/dev/null && hard_links=no
<   AC_MSG_RESULT([$hard_links])
<   if test "$hard_links" = no; then
<     AC_MSG_WARN([`$CC' does not support `-c -o', so `make -j' may be unsafe])
<     need_locks=warn
<   fi
< else
<   need_locks=no
< fi
< _LT_DECL([], [need_locks], [1], [Must we lock files when doing compilation?])
< ])# _LT_COMPILER_FILE_LOCKS
< 
< 
< # _LT_CHECK_OBJDIR
< # ----------------
< m4_defun([_LT_CHECK_OBJDIR],
< [AC_CACHE_CHECK([for objdir], [lt_cv_objdir],
< [rm -f .libs 2>/dev/null
< mkdir .libs 2>/dev/null
< if test -d .libs; then
<   lt_cv_objdir=.libs
< else
<   # MS-DOS does not allow filenames that begin with a dot.
<   lt_cv_objdir=_libs
1959,1990d819
< rmdir .libs 2>/dev/null])
< objdir=$lt_cv_objdir
< _LT_DECL([], [objdir], [0],
<          [The name of the directory that contains temporary libtool files])dnl
< m4_pattern_allow([LT_OBJDIR])dnl
< AC_DEFINE_UNQUOTED(LT_OBJDIR, "$lt_cv_objdir/",
<   [Define to the sub-directory in which libtool stores uninstalled libraries.])
< ])# _LT_CHECK_OBJDIR
< 
< 
< # _LT_LINKER_HARDCODE_LIBPATH([TAGNAME])
< # --------------------------------------
< # Check hardcoding attributes.
< m4_defun([_LT_LINKER_HARDCODE_LIBPATH],
< [AC_MSG_CHECKING([how to hardcode library paths into programs])
< _LT_TAGVAR(hardcode_action, $1)=
< if test -n "$_LT_TAGVAR(hardcode_libdir_flag_spec, $1)" ||
<    test -n "$_LT_TAGVAR(runpath_var, $1)" ||
<    test "X$_LT_TAGVAR(hardcode_automatic, $1)" = "Xyes" ; then
< 
<   # We can hardcode non-existent directories.
<   if test "$_LT_TAGVAR(hardcode_direct, $1)" != no &&
<      # If the only mechanism to avoid hardcoding is shlibpath_var, we
<      # have to relink, otherwise we might link with an installed library
<      # when we should be linking with a yet-to-be-installed one
<      ## test "$_LT_TAGVAR(hardcode_shlibpath_var, $1)" != no &&
<      test "$_LT_TAGVAR(hardcode_minus_L, $1)" != no; then
<     # Linking always hardcodes the temporary library directory.
<     _LT_TAGVAR(hardcode_action, $1)=relink
<   else
<     # We can link without hardcoding, and we can hardcode nonexisting dirs.
<     _LT_TAGVAR(hardcode_action, $1)=immediate
1992,2011d820
< else
<   # We cannot hardcode anything, or else we can only hardcode existing
<   # directories.
<   _LT_TAGVAR(hardcode_action, $1)=unsupported
< fi
< AC_MSG_RESULT([$_LT_TAGVAR(hardcode_action, $1)])
< 
< if test "$_LT_TAGVAR(hardcode_action, $1)" = relink ||
<    test "$_LT_TAGVAR(inherit_rpath, $1)" = yes; then
<   # Fast installation is not supported
<   enable_fast_install=no
< elif test "$shlibpath_overrides_runpath" = yes ||
<      test "$enable_shared" = no; then
<   # Fast installation is not necessary
<   enable_fast_install=needless
< fi
< _LT_TAGDECL([], [hardcode_action], [0],
<     [How to hardcode a shared library path into an executable])
< ])# _LT_LINKER_HARDCODE_LIBPATH
< 
2013,2039c822,824
< # _LT_CMD_STRIPLIB
< # ----------------
< m4_defun([_LT_CMD_STRIPLIB],
< [m4_require([_LT_DECL_EGREP])
< striplib=
< old_striplib=
< AC_MSG_CHECKING([whether stripping libraries is possible])
< if test -n "$STRIP" && $STRIP -V 2>&1 | $GREP "GNU strip" >/dev/null; then
<   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
<   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
<   AC_MSG_RESULT([yes])
< else
< # FIXME - insert some real tests, host_os isn't really good enough
<   case $host_os in
<   darwin*)
<     if test -n "$STRIP" ; then
<       striplib="$STRIP -x"
<       old_striplib="$STRIP -S"
<       AC_MSG_RESULT([yes])
<     else
<       AC_MSG_RESULT([no])
<     fi
<     ;;
<   *)
<     AC_MSG_RESULT([no])
<     ;;
<   esac
---
> if test x"$libltdl_cv_need_uscore" = xyes; then
>   AC_DEFINE([NEED_USCORE], [1],
>     [Define if dlsym() requires a leading underscore in symbol names.])
2041,7702c826
< _LT_DECL([], [old_striplib], [1], [Commands to strip libraries])
< _LT_DECL([], [striplib], [1])
< ])# _LT_CMD_STRIPLIB
< 
< 
< # _LT_SYS_DYNAMIC_LINKER([TAG])
< # -----------------------------
< # PORTME Fill in your ld.so characteristics
< m4_defun([_LT_SYS_DYNAMIC_LINKER],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< m4_require([_LT_DECL_EGREP])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_DECL_OBJDUMP])dnl
< m4_require([_LT_DECL_SED])dnl
< AC_MSG_CHECKING([dynamic linker characteristics])
< m4_if([$1],
< 	[], [
< if test "$GCC" = yes; then
<   case $host_os in
<     darwin*) lt_awk_arg="/^libraries:/,/LR/" ;;
<     *) lt_awk_arg="/^libraries:/" ;;
<   esac
<   lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e "s,=/,/,g"`
<   if $ECHO "$lt_search_path_spec" | $GREP ';' >/dev/null ; then
<     # if the path contains ";" then we assume it to be the separator
<     # otherwise default to the standard path separator (i.e. ":") - it is
<     # assumed that no part of a normal pathname contains ";" but that should
<     # okay in the real world where ";" in dirpaths is itself problematic.
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED -e 's/;/ /g'`
<   else
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
<   fi
<   # Ok, now we have the path, separated by spaces, we can step through it
<   # and add multilib dir if necessary.
<   lt_tmp_lt_search_path_spec=
<   lt_multi_os_dir=`$CC $CPPFLAGS $CFLAGS $LDFLAGS -print-multi-os-directory 2>/dev/null`
<   for lt_sys_path in $lt_search_path_spec; do
<     if test -d "$lt_sys_path/$lt_multi_os_dir"; then
<       lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path/$lt_multi_os_dir"
<     else
<       test -d "$lt_sys_path" && \
< 	lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path"
<     fi
<   done
<   lt_search_path_spec=`$ECHO $lt_tmp_lt_search_path_spec | awk '
< BEGIN {RS=" "; FS="/|\n";} {
<   lt_foo="";
<   lt_count=0;
<   for (lt_i = NF; lt_i > 0; lt_i--) {
<     if ($lt_i != "" && $lt_i != ".") {
<       if ($lt_i == "..") {
<         lt_count++;
<       } else {
<         if (lt_count == 0) {
<           lt_foo="/" $lt_i lt_foo;
<         } else {
<           lt_count--;
<         }
<       }
<     }
<   }
<   if (lt_foo != "") { lt_freq[[lt_foo]]++; }
<   if (lt_freq[[lt_foo]] == 1) { print lt_foo; }
< }'`
<   sys_lib_search_path_spec=`$ECHO $lt_search_path_spec`
< else
<   sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"
< fi])
< library_names_spec=
< libname_spec='lib$name'
< soname_spec=
< shrext_cmds=".so"
< postinstall_cmds=
< postuninstall_cmds=
< finish_cmds=
< finish_eval=
< shlibpath_var=
< shlibpath_overrides_runpath=unknown
< version_type=none
< dynamic_linker="$host_os ld.so"
< sys_lib_dlsearch_path_spec="/lib /usr/lib"
< need_lib_prefix=unknown
< hardcode_into_libs=no
< 
< # when you set need_version to no, make sure it does not cause -set_version
< # flags to be left without arguments
< need_version=unknown
< 
< case $host_os in
< aix3*)
<   version_type=linux
<   library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
<   shlibpath_var=LIBPATH
< 
<   # AIX 3 has no versioning support, so we append a major version to the name.
<   soname_spec='${libname}${release}${shared_ext}$major'
<   ;;
< 
< aix[[4-9]]*)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   hardcode_into_libs=yes
<   if test "$host_cpu" = ia64; then
<     # AIX 5 supports IA64
<     library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
<     shlibpath_var=LD_LIBRARY_PATH
<   else
<     # With GCC up to 2.95.x, collect2 would create an import file
<     # for dependence libraries.  The import file would start with
<     # the line `#! .'.  This would cause the generated library to
<     # depend on `.', always an invalid library.  This was fixed in
<     # development snapshots of GCC prior to 3.0.
<     case $host_os in
<       aix4 | aix4.[[01]] | aix4.[[01]].*)
<       if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
< 	   echo ' yes '
< 	   echo '#endif'; } | ${CC} -E - | $GREP yes > /dev/null; then
< 	:
<       else
< 	can_build_shared=no
<       fi
<       ;;
<     esac
<     # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
<     # soname into executable. Probably we can add versioning support to
<     # collect2, so additional links can be useful in future.
<     if test "$aix_use_runtimelinking" = yes; then
<       # If using run time linking (on AIX 4.2 or later) use lib<name>.so
<       # instead of lib<name>.a to let people know that these are not
<       # typical AIX shared libraries.
<       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<     else
<       # We preserve .a as extension for shared libraries through AIX4.2
<       # and later when we are not doing run time linking.
<       library_names_spec='${libname}${release}.a $libname.a'
<       soname_spec='${libname}${release}${shared_ext}$major'
<     fi
<     shlibpath_var=LIBPATH
<   fi
<   ;;
< 
< amigaos*)
<   case $host_cpu in
<   powerpc)
<     # Since July 2007 AmigaOS4 officially supports .so libraries.
<     # When compiling the executable, add -use-dynld -Lsobjs: to the compileline.
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<     ;;
<   m68k)
<     library_names_spec='$libname.ixlibrary $libname.a'
<     # Create ${libname}_ixlibrary.a entries in /sys/libs.
<     finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$ECHO "X$lib" | $Xsed -e '\''s%^.*/\([[^/]]*\)\.ixlibrary$%\1%'\''`; test $RM /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
<     ;;
<   esac
<   ;;
< 
< beos*)
<   library_names_spec='${libname}${shared_ext}'
<   dynamic_linker="$host_os ld.so"
<   shlibpath_var=LIBRARY_PATH
<   ;;
< 
< bsdi[[45]]*)
<   version_type=linux
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
<   shlibpath_var=LD_LIBRARY_PATH
<   sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
<   sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
<   # the default ld.so.conf also contains /usr/contrib/lib and
<   # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
<   # libtool to hard-code these into programs
<   ;;
< 
< cygwin* | mingw* | pw32* | cegcc*)
<   version_type=windows
<   shrext_cmds=".dll"
<   need_version=no
<   need_lib_prefix=no
< 
<   case $GCC,$host_os in
<   yes,cygwin* | yes,mingw* | yes,pw32* | yes,cegcc*)
<     library_names_spec='$libname.dll.a'
<     # DLL is installed to $(libdir)/../bin by postinstall_cmds
<     postinstall_cmds='base_file=`basename \${file}`~
<       dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i; echo \$dlname'\''`~
<       dldir=$destdir/`dirname \$dlpath`~
<       test -d \$dldir || mkdir -p \$dldir~
<       $install_prog $dir/$dlname \$dldir/$dlname~
<       chmod a+x \$dldir/$dlname~
<       if test -n '\''$stripme'\'' && test -n '\''$striplib'\''; then
<         eval '\''$striplib \$dldir/$dlname'\'' || exit \$?;
<       fi'
<     postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
<       dlpath=$dir/\$dldll~
<        $RM \$dlpath'
<     shlibpath_overrides_runpath=yes
< 
<     case $host_os in
<     cygwin*)
<       # Cygwin DLLs use 'cyg' prefix rather than 'lib'
<       soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
<       sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
<       ;;
<     mingw* | cegcc*)
<       # MinGW DLLs use traditional 'lib' prefix
<       soname_spec='${libname}`echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
<       sys_lib_search_path_spec=`$CC -print-search-dirs | $GREP "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
<       if $ECHO "$sys_lib_search_path_spec" | [$GREP ';[c-zC-Z]:/' >/dev/null]; then
<         # It is most probably a Windows format PATH printed by
<         # mingw gcc, but we are running on Cygwin. Gcc prints its search
<         # path with ; separators, and with drive letters. We can handle the
<         # drive letters (cygwin fileutils understands them), so leave them,
<         # especially as we might pass files found there to a mingw objdump,
<         # which wouldn't understand a cygwinified path. Ahh.
<         sys_lib_search_path_spec=`$ECHO "$sys_lib_search_path_spec" | $SED -e 's/;/ /g'`
<       else
<         sys_lib_search_path_spec=`$ECHO "$sys_lib_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
<       fi
<       ;;
<     pw32*)
<       # pw32 DLLs use 'pw' prefix rather than 'lib'
<       library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
<       ;;
<     esac
<     ;;
< 
<   *)
<     library_names_spec='${libname}`echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext} $libname.lib'
<     ;;
<   esac
<   dynamic_linker='Win32 ld.exe'
<   # FIXME: first we should search . and the directory the executable is in
<   shlibpath_var=PATH
<   ;;
< 
< darwin* | rhapsody*)
<   dynamic_linker="$host_os dyld"
<   version_type=darwin
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${major}$shared_ext ${libname}$shared_ext'
<   soname_spec='${libname}${release}${major}$shared_ext'
<   shlibpath_overrides_runpath=yes
<   shlibpath_var=DYLD_LIBRARY_PATH
<   shrext_cmds='`test .$module = .yes && echo .so || echo .dylib`'
< m4_if([$1], [],[
<   sys_lib_search_path_spec="$sys_lib_search_path_spec /usr/local/lib"])
<   sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
<   ;;
< 
< dgux*)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   ;;
< 
< freebsd1*)
<   dynamic_linker=no
<   ;;
< 
< freebsd* | dragonfly*)
<   # DragonFly does not have aout.  When/if they implement a new
<   # versioning mechanism, adjust this.
<   if test -x /usr/bin/objformat; then
<     objformat=`/usr/bin/objformat`
<   else
<     case $host_os in
<     freebsd[[123]]*) objformat=aout ;;
<     *) objformat=elf ;;
<     esac
<   fi
<   version_type=freebsd-$objformat
<   case $version_type in
<     freebsd-elf*)
<       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
<       need_version=no
<       need_lib_prefix=no
<       ;;
<     freebsd-*)
<       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
<       need_version=yes
<       ;;
<   esac
<   shlibpath_var=LD_LIBRARY_PATH
<   case $host_os in
<   freebsd2*)
<     shlibpath_overrides_runpath=yes
<     ;;
<   freebsd3.[[01]]* | freebsdelf3.[[01]]*)
<     shlibpath_overrides_runpath=yes
<     hardcode_into_libs=yes
<     ;;
<   freebsd3.[[2-9]]* | freebsdelf3.[[2-9]]* | \
<   freebsd4.[[0-5]] | freebsdelf4.[[0-5]] | freebsd4.1.1 | freebsdelf4.1.1)
<     shlibpath_overrides_runpath=no
<     hardcode_into_libs=yes
<     ;;
<   *) # from 4.6 on, and DragonFly
<     shlibpath_overrides_runpath=yes
<     hardcode_into_libs=yes
<     ;;
<   esac
<   ;;
< 
< gnu*)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   hardcode_into_libs=yes
<   ;;
< 
< hpux9* | hpux10* | hpux11*)
<   # Give a soname corresponding to the major version so that dld.sl refuses to
<   # link against other versions.
<   version_type=sunos
<   need_lib_prefix=no
<   need_version=no
<   case $host_cpu in
<   ia64*)
<     shrext_cmds='.so'
<     hardcode_into_libs=yes
<     dynamic_linker="$host_os dld.so"
<     shlibpath_var=LD_LIBRARY_PATH
<     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<     soname_spec='${libname}${release}${shared_ext}$major'
<     if test "X$HPUX_IA64_MODE" = X32; then
<       sys_lib_search_path_spec="/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib"
<     else
<       sys_lib_search_path_spec="/usr/lib/hpux64 /usr/local/lib/hpux64"
<     fi
<     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
<     ;;
<   hppa*64*)
<     shrext_cmds='.sl'
<     hardcode_into_libs=yes
<     dynamic_linker="$host_os dld.sl"
<     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
<     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<     soname_spec='${libname}${release}${shared_ext}$major'
<     sys_lib_search_path_spec="/usr/lib/pa20_64 /usr/ccs/lib/pa20_64"
<     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
<     ;;
<   *)
<     shrext_cmds='.sl'
<     dynamic_linker="$host_os dld.sl"
<     shlibpath_var=SHLIB_PATH
<     shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<     soname_spec='${libname}${release}${shared_ext}$major'
<     ;;
<   esac
<   # HP-UX runs *really* slowly unless shared libraries are mode 555.
<   postinstall_cmds='chmod 555 $lib'
<   ;;
< 
< interix[[3-9]]*)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=no
<   hardcode_into_libs=yes
<   ;;
< 
< irix5* | irix6* | nonstopux*)
<   case $host_os in
<     nonstopux*) version_type=nonstopux ;;
<     *)
< 	if test "$lt_cv_prog_gnu_ld" = yes; then
< 		version_type=linux
< 	else
< 		version_type=irix
< 	fi ;;
<   esac
<   need_lib_prefix=no
<   need_version=no
<   soname_spec='${libname}${release}${shared_ext}$major'
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
<   case $host_os in
<   irix5* | nonstopux*)
<     libsuff= shlibsuff=
<     ;;
<   *)
<     case $LD in # libtool.m4 will add one of these switches to LD
<     *-32|*"-32 "|*-melf32bsmip|*"-melf32bsmip ")
<       libsuff= shlibsuff= libmagic=32-bit;;
<     *-n32|*"-n32 "|*-melf32bmipn32|*"-melf32bmipn32 ")
<       libsuff=32 shlibsuff=N32 libmagic=N32;;
<     *-64|*"-64 "|*-melf64bmip|*"-melf64bmip ")
<       libsuff=64 shlibsuff=64 libmagic=64-bit;;
<     *) libsuff= shlibsuff= libmagic=never-match;;
<     esac
<     ;;
<   esac
<   shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
<   shlibpath_overrides_runpath=no
<   sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
<   sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
<   hardcode_into_libs=yes
<   ;;
< 
< # No shared lib support for Linux oldld, aout, or coff.
< linux*oldld* | linux*aout* | linux*coff*)
<   dynamic_linker=no
<   ;;
< 
< # This must be Linux ELF.
< linux* | k*bsd*-gnu)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=no
<   # Some binutils ld are patched to set DT_RUNPATH
<   save_LDFLAGS=$LDFLAGS
<   save_libdir=$libdir
<   eval "libdir=/foo; wl=\"$_LT_TAGVAR(lt_prog_compiler_wl, $1)\"; \
<        LDFLAGS=\"\$LDFLAGS $_LT_TAGVAR(hardcode_libdir_flag_spec, $1)\""
<   AC_LINK_IFELSE([AC_LANG_PROGRAM([],[])],
<     [AS_IF([ ($OBJDUMP -p conftest$ac_exeext) 2>/dev/null | grep "RUNPATH.*$libdir" >/dev/null],
<        [shlibpath_overrides_runpath=yes])])
<   LDFLAGS=$save_LDFLAGS
<   libdir=$save_libdir
< 
<   # This implies no fast_install, which is unacceptable.
<   # Some rework will be needed to allow for fast_install
<   # before this can be enabled.
<   hardcode_into_libs=yes
< 
<   # Add ABI-specific directories to the system library path.
<   sys_lib_dlsearch_path_spec="/lib64 /usr/lib64 /lib /usr/lib"
< 
<   # Append ld.so.conf contents to the search path
<   if test -f /etc/ld.so.conf; then
<     lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \[$]2)); skip = 1; } { if (!skip) print \[$]0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[	 ]*hwcap[	 ]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
<     sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec $lt_ld_extra"
<   fi
< 
<   # We used to test for /lib/ld.so.1 and disable shared libraries on
<   # powerpc, because MkLinux only supported shared libraries with the
<   # GNU dynamic linker.  Since this was broken with cross compilers,
<   # most powerpc-linux boxes support dynamic linking these days and
<   # people can always --disable-shared, the test was removed, and we
<   # assume the GNU/Linux dynamic linker is in use.
<   dynamic_linker='GNU/Linux ld.so'
<   ;;
< 
< netbsd*)
<   version_type=sunos
<   need_lib_prefix=no
<   need_version=no
<   if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
<     finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
<     dynamic_linker='NetBSD (a.out) ld.so'
<   else
<     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
<     soname_spec='${libname}${release}${shared_ext}$major'
<     dynamic_linker='NetBSD ld.elf_so'
<   fi
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=yes
<   hardcode_into_libs=yes
<   ;;
< 
< newsos6)
<   version_type=linux
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=yes
<   ;;
< 
< *nto* | *qnx*)
<   version_type=qnx
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=no
<   hardcode_into_libs=yes
<   dynamic_linker='ldqnx.so'
<   ;;
< 
< openbsd*)
<   version_type=sunos
<   sys_lib_dlsearch_path_spec="/usr/lib"
<   need_lib_prefix=no
<   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
<   case $host_os in
<     openbsd3.3 | openbsd3.3.*)	need_version=yes ;;
<     *)				need_version=no  ;;
<   esac
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
<   finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
<   shlibpath_var=LD_LIBRARY_PATH
<   if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
<     case $host_os in
<       openbsd2.[[89]] | openbsd2.[[89]].*)
< 	shlibpath_overrides_runpath=no
< 	;;
<       *)
< 	shlibpath_overrides_runpath=yes
< 	;;
<       esac
<   else
<     shlibpath_overrides_runpath=yes
<   fi
<   ;;
< 
< os2*)
<   libname_spec='$name'
<   shrext_cmds=".dll"
<   need_lib_prefix=no
<   library_names_spec='$libname${shared_ext} $libname.a'
<   dynamic_linker='OS/2 ld.exe'
<   shlibpath_var=LIBPATH
<   ;;
< 
< osf3* | osf4* | osf5*)
<   version_type=osf
<   need_lib_prefix=no
<   need_version=no
<   soname_spec='${libname}${release}${shared_ext}$major'
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   shlibpath_var=LD_LIBRARY_PATH
<   sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
<   sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
<   ;;
< 
< rdos*)
<   dynamic_linker=no
<   ;;
< 
< solaris*)
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=yes
<   hardcode_into_libs=yes
<   # ldd complains unless libraries are executable
<   postinstall_cmds='chmod +x $lib'
<   ;;
< 
< sunos4*)
<   version_type=sunos
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
<   finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=yes
<   if test "$with_gnu_ld" = yes; then
<     need_lib_prefix=no
<   fi
<   need_version=yes
<   ;;
< 
< sysv4 | sysv4.3*)
<   version_type=linux
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   case $host_vendor in
<     sni)
<       shlibpath_overrides_runpath=no
<       need_lib_prefix=no
<       runpath_var=LD_RUN_PATH
<       ;;
<     siemens)
<       need_lib_prefix=no
<       ;;
<     motorola)
<       need_lib_prefix=no
<       need_version=no
<       shlibpath_overrides_runpath=no
<       sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
<       ;;
<   esac
<   ;;
< 
< sysv4*MP*)
<   if test -d /usr/nec ;then
<     version_type=linux
<     library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
<     soname_spec='$libname${shared_ext}.$major'
<     shlibpath_var=LD_LIBRARY_PATH
<   fi
<   ;;
< 
< sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
<   version_type=freebsd-elf
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=yes
<   hardcode_into_libs=yes
<   if test "$with_gnu_ld" = yes; then
<     sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
<   else
<     sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
<     case $host_os in
<       sco3.2v5*)
<         sys_lib_search_path_spec="$sys_lib_search_path_spec /lib"
< 	;;
<     esac
<   fi
<   sys_lib_dlsearch_path_spec='/usr/lib'
<   ;;
< 
< tpf*)
<   # TPF is a cross-target only.  Preferred cross-host = GNU/Linux.
<   version_type=linux
<   need_lib_prefix=no
<   need_version=no
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   shlibpath_var=LD_LIBRARY_PATH
<   shlibpath_overrides_runpath=no
<   hardcode_into_libs=yes
<   ;;
< 
< uts4*)
<   version_type=linux
<   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
<   soname_spec='${libname}${release}${shared_ext}$major'
<   shlibpath_var=LD_LIBRARY_PATH
<   ;;
< 
< *)
<   dynamic_linker=no
<   ;;
< esac
< AC_MSG_RESULT([$dynamic_linker])
< test "$dynamic_linker" = no && can_build_shared=no
< 
< variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
< if test "$GCC" = yes; then
<   variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
< fi
< 
< if test "${lt_cv_sys_lib_search_path_spec+set}" = set; then
<   sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
< fi
< if test "${lt_cv_sys_lib_dlsearch_path_spec+set}" = set; then
<   sys_lib_dlsearch_path_spec="$lt_cv_sys_lib_dlsearch_path_spec"
< fi
< 
< _LT_DECL([], [variables_saved_for_relink], [1],
<     [Variables whose values should be saved in libtool wrapper scripts and
<     restored at link time])
< _LT_DECL([], [need_lib_prefix], [0],
<     [Do we need the "lib" prefix for modules?])
< _LT_DECL([], [need_version], [0], [Do we need a version for libraries?])
< _LT_DECL([], [version_type], [0], [Library versioning type])
< _LT_DECL([], [runpath_var], [0],  [Shared library runtime path variable])
< _LT_DECL([], [shlibpath_var], [0],[Shared library path variable])
< _LT_DECL([], [shlibpath_overrides_runpath], [0],
<     [Is shlibpath searched before the hard-coded library search path?])
< _LT_DECL([], [libname_spec], [1], [Format of library name prefix])
< _LT_DECL([], [library_names_spec], [1],
<     [[List of archive names.  First name is the real one, the rest are links.
<     The last name is the one that the linker finds with -lNAME]])
< _LT_DECL([], [soname_spec], [1],
<     [[The coded name of the library, if different from the real name]])
< _LT_DECL([], [postinstall_cmds], [2],
<     [Command to use after installation of a shared archive])
< _LT_DECL([], [postuninstall_cmds], [2],
<     [Command to use after uninstallation of a shared archive])
< _LT_DECL([], [finish_cmds], [2],
<     [Commands used to finish a libtool library installation in a directory])
< _LT_DECL([], [finish_eval], [1],
<     [[As "finish_cmds", except a single script fragment to be evaled but
<     not shown]])
< _LT_DECL([], [hardcode_into_libs], [0],
<     [Whether we should hardcode library paths into libraries])
< _LT_DECL([], [sys_lib_search_path_spec], [2],
<     [Compile-time system search path for libraries])
< _LT_DECL([], [sys_lib_dlsearch_path_spec], [2],
<     [Run-time system search path for libraries])
< ])# _LT_SYS_DYNAMIC_LINKER
< 
< 
< # _LT_PATH_TOOL_PREFIX(TOOL)
< # --------------------------
< # find a file program which can recognize shared library
< AC_DEFUN([_LT_PATH_TOOL_PREFIX],
< [m4_require([_LT_DECL_EGREP])dnl
< AC_MSG_CHECKING([for $1])
< AC_CACHE_VAL(lt_cv_path_MAGIC_CMD,
< [case $MAGIC_CMD in
< [[\\/*] |  ?:[\\/]*])
<   lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
<   ;;
< *)
<   lt_save_MAGIC_CMD="$MAGIC_CMD"
<   lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
< dnl $ac_dummy forces splitting on constant user-supplied paths.
< dnl POSIX.2 word splitting is done only on the output of word expansions,
< dnl not every word.  This closes a longstanding sh security hole.
<   ac_dummy="m4_if([$2], , $PATH, [$2])"
<   for ac_dir in $ac_dummy; do
<     IFS="$lt_save_ifs"
<     test -z "$ac_dir" && ac_dir=.
<     if test -f $ac_dir/$1; then
<       lt_cv_path_MAGIC_CMD="$ac_dir/$1"
<       if test -n "$file_magic_test_file"; then
< 	case $deplibs_check_method in
< 	"file_magic "*)
< 	  file_magic_regex=`expr "$deplibs_check_method" : "file_magic \(.*\)"`
< 	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
< 	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
< 	    $EGREP "$file_magic_regex" > /dev/null; then
< 	    :
< 	  else
< 	    cat <<_LT_EOF 1>&2
< 
< *** Warning: the command libtool uses to detect shared libraries,
< *** $file_magic_cmd, produces output that libtool cannot recognize.
< *** The result is that libtool may fail to recognize shared libraries
< *** as such.  This will affect the creation of libtool libraries that
< *** depend on shared libraries, but programs linked with such libtool
< *** libraries will work regardless of this problem.  Nevertheless, you
< *** may want to report the problem to your system manager and/or to
< *** bug-libtool@gnu.org
< 
< _LT_EOF
< 	  fi ;;
< 	esac
<       fi
<       break
<     fi
<   done
<   IFS="$lt_save_ifs"
<   MAGIC_CMD="$lt_save_MAGIC_CMD"
<   ;;
< esac])
< MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
< if test -n "$MAGIC_CMD"; then
<   AC_MSG_RESULT($MAGIC_CMD)
< else
<   AC_MSG_RESULT(no)
< fi
< _LT_DECL([], [MAGIC_CMD], [0],
< 	 [Used to examine libraries when file_magic_cmd begins with "file"])dnl
< ])# _LT_PATH_TOOL_PREFIX
< 
< # Old name:
< AU_ALIAS([AC_PATH_TOOL_PREFIX], [_LT_PATH_TOOL_PREFIX])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_PATH_TOOL_PREFIX], [])
< 
< 
< # _LT_PATH_MAGIC
< # --------------
< # find a file program which can recognize a shared library
< m4_defun([_LT_PATH_MAGIC],
< [_LT_PATH_TOOL_PREFIX(${ac_tool_prefix}file, /usr/bin$PATH_SEPARATOR$PATH)
< if test -z "$lt_cv_path_MAGIC_CMD"; then
<   if test -n "$ac_tool_prefix"; then
<     _LT_PATH_TOOL_PREFIX(file, /usr/bin$PATH_SEPARATOR$PATH)
<   else
<     MAGIC_CMD=:
<   fi
< fi
< ])# _LT_PATH_MAGIC
< 
< 
< # LT_PATH_LD
< # ----------
< # find the pathname to the GNU or non-GNU linker
< AC_DEFUN([LT_PATH_LD],
< [AC_REQUIRE([AC_PROG_CC])dnl
< AC_REQUIRE([AC_CANONICAL_HOST])dnl
< AC_REQUIRE([AC_CANONICAL_BUILD])dnl
< m4_require([_LT_DECL_SED])dnl
< m4_require([_LT_DECL_EGREP])dnl
< 
< AC_ARG_WITH([gnu-ld],
<     [AS_HELP_STRING([--with-gnu-ld],
< 	[assume the C compiler uses GNU ld @<:@default=no@:>@])],
<     [test "$withval" = no || with_gnu_ld=yes],
<     [with_gnu_ld=no])dnl
< 
< ac_prog=ld
< if test "$GCC" = yes; then
<   # Check if gcc -print-prog-name=ld gives a path.
<   AC_MSG_CHECKING([for ld used by $CC])
<   case $host in
<   *-*-mingw*)
<     # gcc leaves a trailing carriage return which upsets mingw
<     ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
<   *)
<     ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
<   esac
<   case $ac_prog in
<     # Accept absolute paths.
<     [[\\/]]* | ?:[[\\/]]*)
<       re_direlt='/[[^/]][[^/]]*/\.\./'
<       # Canonicalize the pathname of ld
<       ac_prog=`$ECHO "$ac_prog"| $SED 's%\\\\%/%g'`
<       while $ECHO "$ac_prog" | $GREP "$re_direlt" > /dev/null 2>&1; do
< 	ac_prog=`$ECHO $ac_prog| $SED "s%$re_direlt%/%"`
<       done
<       test -z "$LD" && LD="$ac_prog"
<       ;;
<   "")
<     # If it fails, then pretend we aren't using GCC.
<     ac_prog=ld
<     ;;
<   *)
<     # If it is relative, then search for the first ld in PATH.
<     with_gnu_ld=unknown
<     ;;
<   esac
< elif test "$with_gnu_ld" = yes; then
<   AC_MSG_CHECKING([for GNU ld])
< else
<   AC_MSG_CHECKING([for non-GNU ld])
< fi
< AC_CACHE_VAL(lt_cv_path_LD,
< [if test -z "$LD"; then
<   lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
<   for ac_dir in $PATH; do
<     IFS="$lt_save_ifs"
<     test -z "$ac_dir" && ac_dir=.
<     if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
<       lt_cv_path_LD="$ac_dir/$ac_prog"
<       # Check to see if the program is GNU ld.  I'd rather use --version,
<       # but apparently some variants of GNU ld only accept -v.
<       # Break only if it was the GNU/non-GNU ld that we prefer.
<       case `"$lt_cv_path_LD" -v 2>&1 </dev/null` in
<       *GNU* | *'with BFD'*)
< 	test "$with_gnu_ld" != no && break
< 	;;
<       *)
< 	test "$with_gnu_ld" != yes && break
< 	;;
<       esac
<     fi
<   done
<   IFS="$lt_save_ifs"
< else
<   lt_cv_path_LD="$LD" # Let the user override the test with a path.
< fi])
< LD="$lt_cv_path_LD"
< if test -n "$LD"; then
<   AC_MSG_RESULT($LD)
< else
<   AC_MSG_RESULT(no)
< fi
< test -z "$LD" && AC_MSG_ERROR([no acceptable ld found in \$PATH])
< _LT_PATH_LD_GNU
< AC_SUBST([LD])
< 
< _LT_TAGDECL([], [LD], [1], [The linker used to build libraries])
< ])# LT_PATH_LD
< 
< # Old names:
< AU_ALIAS([AM_PROG_LD], [LT_PATH_LD])
< AU_ALIAS([AC_PROG_LD], [LT_PATH_LD])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AM_PROG_LD], [])
< dnl AC_DEFUN([AC_PROG_LD], [])
< 
< 
< # _LT_PATH_LD_GNU
< #- --------------
< m4_defun([_LT_PATH_LD_GNU],
< [AC_CACHE_CHECK([if the linker ($LD) is GNU ld], lt_cv_prog_gnu_ld,
< [# I'd rather use --version here, but apparently some GNU lds only accept -v.
< case `$LD -v 2>&1 </dev/null` in
< *GNU* | *'with BFD'*)
<   lt_cv_prog_gnu_ld=yes
<   ;;
< *)
<   lt_cv_prog_gnu_ld=no
<   ;;
< esac])
< with_gnu_ld=$lt_cv_prog_gnu_ld
< ])# _LT_PATH_LD_GNU
< 
< 
< # _LT_CMD_RELOAD
< # --------------
< # find reload flag for linker
< #   -- PORTME Some linkers may need a different reload flag.
< m4_defun([_LT_CMD_RELOAD],
< [AC_CACHE_CHECK([for $LD option to reload object files],
<   lt_cv_ld_reload_flag,
<   [lt_cv_ld_reload_flag='-r'])
< reload_flag=$lt_cv_ld_reload_flag
< case $reload_flag in
< "" | " "*) ;;
< *) reload_flag=" $reload_flag" ;;
< esac
< reload_cmds='$LD$reload_flag -o $output$reload_objs'
< case $host_os in
<   darwin*)
<     if test "$GCC" = yes; then
<       reload_cmds='$LTCC $LTCFLAGS -nostdlib ${wl}-r -o $output$reload_objs'
<     else
<       reload_cmds='$LD$reload_flag -o $output$reload_objs'
<     fi
<     ;;
< esac
< _LT_DECL([], [reload_flag], [1], [How to create reloadable object files])dnl
< _LT_DECL([], [reload_cmds], [2])dnl
< ])# _LT_CMD_RELOAD
< 
< 
< # _LT_CHECK_MAGIC_METHOD
< # ----------------------
< # how to check for library dependencies
< #  -- PORTME fill in with the dynamic library characteristics
< m4_defun([_LT_CHECK_MAGIC_METHOD],
< [m4_require([_LT_DECL_EGREP])
< m4_require([_LT_DECL_OBJDUMP])
< AC_CACHE_CHECK([how to recognize dependent libraries],
< lt_cv_deplibs_check_method,
< [lt_cv_file_magic_cmd='$MAGIC_CMD'
< lt_cv_file_magic_test_file=
< lt_cv_deplibs_check_method='unknown'
< # Need to set the preceding variable on all platforms that support
< # interlibrary dependencies.
< # 'none' -- dependencies not supported.
< # `unknown' -- same as none, but documents that we really don't know.
< # 'pass_all' -- all dependencies passed with no checks.
< # 'test_compile' -- check by making test program.
< # 'file_magic [[regex]]' -- check by looking for files in library path
< # which responds to the $file_magic_cmd with a given extended regex.
< # If you have `file' or equivalent on your system and you're not sure
< # whether `pass_all' will *always* work, you probably want this one.
< 
< case $host_os in
< aix[[4-9]]*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< beos*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< bsdi[[45]]*)
<   lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib)'
<   lt_cv_file_magic_cmd='/usr/bin/file -L'
<   lt_cv_file_magic_test_file=/shlib/libc.so
<   ;;
< 
< cygwin*)
<   # func_win32_libid is a shell function defined in ltmain.sh
<   lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
<   lt_cv_file_magic_cmd='func_win32_libid'
<   ;;
< 
< mingw* | pw32*)
<   # Base MSYS/MinGW do not provide the 'file' command needed by
<   # func_win32_libid shell function, so use a weaker test based on 'objdump',
<   # unless we find 'file', for example because we are cross-compiling.
<   if ( file / ) >/dev/null 2>&1; then
<     lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
<     lt_cv_file_magic_cmd='func_win32_libid'
<   else
<     lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
<     lt_cv_file_magic_cmd='$OBJDUMP -f'
<   fi
<   ;;
< 
< cegcc)
<   # use the weaker test based on 'objdump'. See mingw*.
<   lt_cv_deplibs_check_method='file_magic file format pe-arm-.*little(.*architecture: arm)?'
<   lt_cv_file_magic_cmd='$OBJDUMP -f'
<   ;;
< 
< darwin* | rhapsody*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< freebsd* | dragonfly*)
<   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then
<     case $host_cpu in
<     i*86 )
<       # Not sure whether the presence of OpenBSD here was a mistake.
<       # Let's accept both of them until this is cleared up.
<       lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD|DragonFly)/i[[3-9]]86 (compact )?demand paged shared library'
<       lt_cv_file_magic_cmd=/usr/bin/file
<       lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
<       ;;
<     esac
<   else
<     lt_cv_deplibs_check_method=pass_all
<   fi
<   ;;
< 
< gnu*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< hpux10.20* | hpux11*)
<   lt_cv_file_magic_cmd=/usr/bin/file
<   case $host_cpu in
<   ia64*)
<     lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|ELF-[[0-9]][[0-9]]) shared object file - IA64'
<     lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
<     ;;
<   hppa*64*)
<     [lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]']
<     lt_cv_file_magic_test_file=/usr/lib/pa20_64/libc.sl
<     ;;
<   *)
<     lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|PA-RISC[[0-9]].[[0-9]]) shared library'
<     lt_cv_file_magic_test_file=/usr/lib/libc.sl
<     ;;
<   esac
<   ;;
< 
< interix[[3-9]]*)
<   # PIC code is broken on Interix 3.x, that's why |\.a not |_pic\.a here
<   lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so|\.a)$'
<   ;;
< 
< irix5* | irix6* | nonstopux*)
<   case $LD in
<   *-32|*"-32 ") libmagic=32-bit;;
<   *-n32|*"-n32 ") libmagic=N32;;
<   *-64|*"-64 ") libmagic=64-bit;;
<   *) libmagic=never-match;;
<   esac
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< # This must be Linux ELF.
< linux* | k*bsd*-gnu)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< netbsd*)
<   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then
<     lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so\.[[0-9]]+\.[[0-9]]+|_pic\.a)$'
<   else
<     lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so|_pic\.a)$'
<   fi
<   ;;
< 
< newos6*)
<   lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (executable|dynamic lib)'
<   lt_cv_file_magic_cmd=/usr/bin/file
<   lt_cv_file_magic_test_file=/usr/lib/libnls.so
<   ;;
< 
< *nto* | *qnx*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< openbsd*)
<   if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
<     lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so\.[[0-9]]+\.[[0-9]]+|\.so|_pic\.a)$'
<   else
<     lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so\.[[0-9]]+\.[[0-9]]+|_pic\.a)$'
<   fi
<   ;;
< 
< osf3* | osf4* | osf5*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< rdos*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< solaris*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< 
< sysv4 | sysv4.3*)
<   case $host_vendor in
<   motorola)
<     lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib) M[[0-9]][[0-9]]* Version [[0-9]]'
<     lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
<     ;;
<   ncr)
<     lt_cv_deplibs_check_method=pass_all
<     ;;
<   sequent)
<     lt_cv_file_magic_cmd='/bin/file'
<     lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic lib )'
<     ;;
<   sni)
<     lt_cv_file_magic_cmd='/bin/file'
<     lt_cv_deplibs_check_method="file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB dynamic lib"
<     lt_cv_file_magic_test_file=/lib/libc.so
<     ;;
<   siemens)
<     lt_cv_deplibs_check_method=pass_all
<     ;;
<   pc)
<     lt_cv_deplibs_check_method=pass_all
<     ;;
<   esac
<   ;;
< 
< tpf*)
<   lt_cv_deplibs_check_method=pass_all
<   ;;
< esac
< ])
< file_magic_cmd=$lt_cv_file_magic_cmd
< deplibs_check_method=$lt_cv_deplibs_check_method
< test -z "$deplibs_check_method" && deplibs_check_method=unknown
< 
< _LT_DECL([], [deplibs_check_method], [1],
<     [Method to check whether dependent libraries are shared objects])
< _LT_DECL([], [file_magic_cmd], [1],
<     [Command to use when deplibs_check_method == "file_magic"])
< ])# _LT_CHECK_MAGIC_METHOD
< 
< 
< # LT_PATH_NM
< # ----------
< # find the pathname to a BSD- or MS-compatible name lister
< AC_DEFUN([LT_PATH_NM],
< [AC_REQUIRE([AC_PROG_CC])dnl
< AC_CACHE_CHECK([for BSD- or MS-compatible name lister (nm)], lt_cv_path_NM,
< [if test -n "$NM"; then
<   # Let the user override the test.
<   lt_cv_path_NM="$NM"
< else
<   lt_nm_to_check="${ac_tool_prefix}nm"
<   if test -n "$ac_tool_prefix" && test "$build" = "$host"; then
<     lt_nm_to_check="$lt_nm_to_check nm"
<   fi
<   for lt_tmp_nm in $lt_nm_to_check; do
<     lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
<     for ac_dir in $PATH /usr/ccs/bin/elf /usr/ccs/bin /usr/ucb /bin; do
<       IFS="$lt_save_ifs"
<       test -z "$ac_dir" && ac_dir=.
<       tmp_nm="$ac_dir/$lt_tmp_nm"
<       if test -f "$tmp_nm" || test -f "$tmp_nm$ac_exeext" ; then
< 	# Check to see if the nm accepts a BSD-compat flag.
< 	# Adding the `sed 1q' prevents false positives on HP-UX, which says:
< 	#   nm: unknown option "B" ignored
< 	# Tru64's nm complains that /dev/null is an invalid object file
< 	case `"$tmp_nm" -B /dev/null 2>&1 | sed '1q'` in
< 	*/dev/null* | *'Invalid file or object type'*)
< 	  lt_cv_path_NM="$tmp_nm -B"
< 	  break
< 	  ;;
< 	*)
< 	  case `"$tmp_nm" -p /dev/null 2>&1 | sed '1q'` in
< 	  */dev/null*)
< 	    lt_cv_path_NM="$tmp_nm -p"
< 	    break
< 	    ;;
< 	  *)
< 	    lt_cv_path_NM=${lt_cv_path_NM="$tmp_nm"} # keep the first match, but
< 	    continue # so that we can try to find one that supports BSD flags
< 	    ;;
< 	  esac
< 	  ;;
< 	esac
<       fi
<     done
<     IFS="$lt_save_ifs"
<   done
<   : ${lt_cv_path_NM=no}
< fi])
< if test "$lt_cv_path_NM" != "no"; then
<   NM="$lt_cv_path_NM"
< else
<   # Didn't find any BSD compatible name lister, look for dumpbin.
<   AC_CHECK_TOOLS(DUMPBIN, ["dumpbin -symbols" "link -dump -symbols"], :)
<   AC_SUBST([DUMPBIN])
<   if test "$DUMPBIN" != ":"; then
<     NM="$DUMPBIN"
<   fi
< fi
< test -z "$NM" && NM=nm
< AC_SUBST([NM])
< _LT_DECL([], [NM], [1], [A BSD- or MS-compatible name lister])dnl
< 
< AC_CACHE_CHECK([the name lister ($NM) interface], [lt_cv_nm_interface],
<   [lt_cv_nm_interface="BSD nm"
<   echo "int some_variable = 0;" > conftest.$ac_ext
<   (eval echo "\"\$as_me:__oline__: $ac_compile\"" >&AS_MESSAGE_LOG_FD)
<   (eval "$ac_compile" 2>conftest.err)
<   cat conftest.err >&AS_MESSAGE_LOG_FD
<   (eval echo "\"\$as_me:__oline__: $NM \\\"conftest.$ac_objext\\\"\"" >&AS_MESSAGE_LOG_FD)
<   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
<   cat conftest.err >&AS_MESSAGE_LOG_FD
<   (eval echo "\"\$as_me:__oline__: output\"" >&AS_MESSAGE_LOG_FD)
<   cat conftest.out >&AS_MESSAGE_LOG_FD
<   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
<     lt_cv_nm_interface="MS dumpbin"
<   fi
<   rm -f conftest*])
< ])# LT_PATH_NM
< 
< # Old names:
< AU_ALIAS([AM_PROG_NM], [LT_PATH_NM])
< AU_ALIAS([AC_PROG_NM], [LT_PATH_NM])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AM_PROG_NM], [])
< dnl AC_DEFUN([AC_PROG_NM], [])
< 
< 
< # LT_LIB_M
< # --------
< # check for math library
< AC_DEFUN([LT_LIB_M],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< LIBM=
< case $host in
< *-*-beos* | *-*-cygwin* | *-*-pw32* | *-*-darwin*)
<   # These system don't have libm, or don't need it
<   ;;
< *-ncr-sysv4.3*)
<   AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM="-lmw")
<   AC_CHECK_LIB(m, cos, LIBM="$LIBM -lm")
<   ;;
< *)
<   AC_CHECK_LIB(m, cos, LIBM="-lm")
<   ;;
< esac
< AC_SUBST([LIBM])
< ])# LT_LIB_M
< 
< # Old name:
< AU_ALIAS([AC_CHECK_LIBM], [LT_LIB_M])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_CHECK_LIBM], [])
< 
< 
< # _LT_COMPILER_NO_RTTI([TAGNAME])
< # -------------------------------
< m4_defun([_LT_COMPILER_NO_RTTI],
< [m4_require([_LT_TAG_COMPILER])dnl
< 
< _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=
< 
< if test "$GCC" = yes; then
<   _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin'
< 
<   _LT_COMPILER_OPTION([if $compiler supports -fno-rtti -fno-exceptions],
<     lt_cv_prog_compiler_rtti_exceptions,
<     [-fno-rtti -fno-exceptions], [],
<     [_LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)="$_LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1) -fno-rtti -fno-exceptions"])
< fi
< _LT_TAGDECL([no_builtin_flag], [lt_prog_compiler_no_builtin_flag], [1],
< 	[Compiler flag to turn off builtin functions])
< ])# _LT_COMPILER_NO_RTTI
< 
< 
< # _LT_CMD_GLOBAL_SYMBOLS
< # ----------------------
< m4_defun([_LT_CMD_GLOBAL_SYMBOLS],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< AC_REQUIRE([AC_PROG_CC])dnl
< AC_REQUIRE([LT_PATH_NM])dnl
< AC_REQUIRE([LT_PATH_LD])dnl
< m4_require([_LT_DECL_SED])dnl
< m4_require([_LT_DECL_EGREP])dnl
< m4_require([_LT_TAG_COMPILER])dnl
< 
< # Check for command to grab the raw symbol name followed by C symbol from nm.
< AC_MSG_CHECKING([command to parse $NM output from $compiler object])
< AC_CACHE_VAL([lt_cv_sys_global_symbol_pipe],
< [
< # These are sane defaults that work on at least a few old systems.
< # [They come from Ultrix.  What could be older than Ultrix?!! ;)]
< 
< # Character class describing NM global symbol codes.
< symcode='[[BCDEGRST]]'
< 
< # Regexp to match symbols that can be accessed directly from C.
< sympat='\([[_A-Za-z]][[_A-Za-z0-9]]*\)'
< 
< # Define system-specific variables.
< case $host_os in
< aix*)
<   symcode='[[BCDT]]'
<   ;;
< cygwin* | mingw* | pw32* | cegcc*)
<   symcode='[[ABCDGISTW]]'
<   ;;
< hpux*)
<   if test "$host_cpu" = ia64; then
<     symcode='[[ABCDEGRST]]'
<   fi
<   ;;
< irix* | nonstopux*)
<   symcode='[[BCDEGRST]]'
<   ;;
< osf*)
<   symcode='[[BCDEGQRST]]'
<   ;;
< solaris*)
<   symcode='[[BDRT]]'
<   ;;
< sco3.2v5*)
<   symcode='[[DT]]'
<   ;;
< sysv4.2uw2*)
<   symcode='[[DT]]'
<   ;;
< sysv5* | sco5v6* | unixware* | OpenUNIX*)
<   symcode='[[ABDT]]'
<   ;;
< sysv4)
<   symcode='[[DFNSTU]]'
<   ;;
< esac
< 
< # If we're using GNU nm, then use its standard symbol codes.
< case `$NM -V 2>&1` in
< *GNU* | *'with BFD'*)
<   symcode='[[ABCDGIRSTW]]' ;;
< esac
< 
< # Transform an extracted symbol line into a proper C declaration.
< # Some systems (esp. on ia64) link data and code symbols differently,
< # so use this general approach.
< lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
< 
< # Transform an extracted symbol line into symbol name and symbol address
< lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([[^ ]]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p'"
< lt_cv_sys_global_symbol_to_c_name_address_lib_prefix="sed -n -e 's/^: \([[^ ]]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \(lib[[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"lib\2\", (void *) \&\2},/p'"
< 
< # Handle CRLF in mingw tool chain
< opt_cr=
< case $build_os in
< mingw*)
<   opt_cr=`$ECHO 'x\{0,1\}' | tr x '\015'` # option cr in regexp
<   ;;
< esac
< 
< # Try without a prefix underscore, then with it.
< for ac_symprfx in "" "_"; do
< 
<   # Transform symcode, sympat, and symprfx into a raw symbol and a C symbol.
<   symxfrm="\\1 $ac_symprfx\\2 \\2"
< 
<   # Write the raw and C identifiers.
<   if test "$lt_cv_nm_interface" = "MS dumpbin"; then
<     # Fake it for dumpbin and say T for any non-static function
<     # and D for any global variable.
<     # Also find C++ and __fastcall symbols from MSVC++,
<     # which start with @ or ?.
<     lt_cv_sys_global_symbol_pipe="$AWK ['"\
< "     {last_section=section; section=\$ 3};"\
< "     /Section length .*#relocs.*(pick any)/{hide[last_section]=1};"\
< "     \$ 0!~/External *\|/{next};"\
< "     / 0+ UNDEF /{next}; / UNDEF \([^|]\)*()/{next};"\
< "     {if(hide[section]) next};"\
< "     {f=0}; \$ 0~/\(\).*\|/{f=1}; {printf f ? \"T \" : \"D \"};"\
< "     {split(\$ 0, a, /\||\r/); split(a[2], s)};"\
< "     s[1]~/^[@?]/{print s[1], s[1]; next};"\
< "     s[1]~prfx {split(s[1],t,\"@\"); print t[1], substr(t[1],length(prfx))}"\
< "     ' prfx=^$ac_symprfx]"
<   else
<     lt_cv_sys_global_symbol_pipe="sed -n -e 's/^.*[[	 ]]\($symcode$symcode*\)[[	 ]][[	 ]]*$ac_symprfx$sympat$opt_cr$/$symxfrm/p'"
<   fi
< 
<   # Check to see that the pipe works correctly.
<   pipe_works=no
< 
<   rm -f conftest*
<   cat > conftest.$ac_ext <<_LT_EOF
< #ifdef __cplusplus
< extern "C" {
< #endif
< char nm_test_var;
< void nm_test_func(void);
< void nm_test_func(void){}
< #ifdef __cplusplus
< }
< #endif
< int main(){nm_test_var='a';nm_test_func();return(0);}
< _LT_EOF
< 
<   if AC_TRY_EVAL(ac_compile); then
<     # Now try to grab the symbols.
<     nlist=conftest.nm
<     if AC_TRY_EVAL(NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) && test -s "$nlist"; then
<       # Try sorting and uniquifying the output.
<       if sort "$nlist" | uniq > "$nlist"T; then
< 	mv -f "$nlist"T "$nlist"
<       else
< 	rm -f "$nlist"T
<       fi
< 
<       # Make sure that we snagged all the symbols we need.
<       if $GREP ' nm_test_var$' "$nlist" >/dev/null; then
< 	if $GREP ' nm_test_func$' "$nlist" >/dev/null; then
< 	  cat <<_LT_EOF > conftest.$ac_ext
< #ifdef __cplusplus
< extern "C" {
< #endif
< 
< _LT_EOF
< 	  # Now generate the symbol file.
< 	  eval "$lt_cv_sys_global_symbol_to_cdecl"' < "$nlist" | $GREP -v main >> conftest.$ac_ext'
< 
< 	  cat <<_LT_EOF >> conftest.$ac_ext
< 
< /* The mapping between symbol names and symbols.  */
< const struct {
<   const char *name;
<   void       *address;
< }
< lt__PROGRAM__LTX_preloaded_symbols[[]] =
< {
<   { "@PROGRAM@", (void *) 0 },
< _LT_EOF
< 	  $SED "s/^$symcode$symcode* \(.*\) \(.*\)$/  {\"\2\", (void *) \&\2},/" < "$nlist" | $GREP -v main >> conftest.$ac_ext
< 	  cat <<\_LT_EOF >> conftest.$ac_ext
<   {0, (void *) 0}
< };
< 
< /* This works around a problem in FreeBSD linker */
< #ifdef FREEBSD_WORKAROUND
< static const void *lt_preloaded_setup() {
<   return lt__PROGRAM__LTX_preloaded_symbols;
< }
< #endif
< 
< #ifdef __cplusplus
< }
< #endif
< _LT_EOF
< 	  # Now try linking the two files.
< 	  mv conftest.$ac_objext conftstm.$ac_objext
< 	  lt_save_LIBS="$LIBS"
< 	  lt_save_CFLAGS="$CFLAGS"
< 	  LIBS="conftstm.$ac_objext"
< 	  CFLAGS="$CFLAGS$_LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)"
< 	  if AC_TRY_EVAL(ac_link) && test -s conftest${ac_exeext}; then
< 	    pipe_works=yes
< 	  fi
< 	  LIBS="$lt_save_LIBS"
< 	  CFLAGS="$lt_save_CFLAGS"
< 	else
< 	  echo "cannot find nm_test_func in $nlist" >&AS_MESSAGE_LOG_FD
< 	fi
<       else
< 	echo "cannot find nm_test_var in $nlist" >&AS_MESSAGE_LOG_FD
<       fi
<     else
<       echo "cannot run $lt_cv_sys_global_symbol_pipe" >&AS_MESSAGE_LOG_FD
<     fi
<   else
<     echo "$progname: failed program was:" >&AS_MESSAGE_LOG_FD
<     cat conftest.$ac_ext >&5
<   fi
<   rm -rf conftest* conftst*
< 
<   # Do not use the global_symbol_pipe unless it works.
<   if test "$pipe_works" = yes; then
<     break
<   else
<     lt_cv_sys_global_symbol_pipe=
<   fi
< done
< ])
< if test -z "$lt_cv_sys_global_symbol_pipe"; then
<   lt_cv_sys_global_symbol_to_cdecl=
< fi
< if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
<   AC_MSG_RESULT(failed)
< else
<   AC_MSG_RESULT(ok)
< fi
< 
< _LT_DECL([global_symbol_pipe], [lt_cv_sys_global_symbol_pipe], [1],
<     [Take the output of nm and produce a listing of raw symbols and C names])
< _LT_DECL([global_symbol_to_cdecl], [lt_cv_sys_global_symbol_to_cdecl], [1],
<     [Transform the output of nm in a proper C declaration])
< _LT_DECL([global_symbol_to_c_name_address],
<     [lt_cv_sys_global_symbol_to_c_name_address], [1],
<     [Transform the output of nm in a C name address pair])
< _LT_DECL([global_symbol_to_c_name_address_lib_prefix],
<     [lt_cv_sys_global_symbol_to_c_name_address_lib_prefix], [1],
<     [Transform the output of nm in a C name address pair when lib prefix is needed])
< ]) # _LT_CMD_GLOBAL_SYMBOLS
< 
< 
< # _LT_COMPILER_PIC([TAGNAME])
< # ---------------------------
< m4_defun([_LT_COMPILER_PIC],
< [m4_require([_LT_TAG_COMPILER])dnl
< _LT_TAGVAR(lt_prog_compiler_wl, $1)=
< _LT_TAGVAR(lt_prog_compiler_pic, $1)=
< _LT_TAGVAR(lt_prog_compiler_static, $1)=
< 
< AC_MSG_CHECKING([for $compiler option to produce PIC])
< m4_if([$1], [CXX], [
<   # C++ specific cases for pic, static, wl, etc.
<   if test "$GXX" = yes; then
<     _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<     _LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
< 
<     case $host_os in
<     aix*)
<       # All AIX code is PIC.
<       if test "$host_cpu" = ia64; then
< 	# AIX 5 now supports IA64 processor
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       fi
<       ;;
< 
<     amigaos*)
<       case $host_cpu in
<       powerpc)
<             # see comment about AmigaOS4 .so support
<             _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
<         ;;
<       m68k)
<             # FIXME: we need at least 68020 code to build shared libraries, but
<             # adding the `-m68020' flag to GCC prevents building anything better,
<             # like `-m68040'.
<             _LT_TAGVAR(lt_prog_compiler_pic, $1)='-m68020 -resident32 -malways-restore-a4'
<         ;;
<       esac
<       ;;
< 
<     beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
<       # PIC is the default for these OSes.
<       ;;
<     mingw* | cygwin* | os2* | pw32* | cegcc*)
<       # This hack is so that the source file can tell whether it is being
<       # built for inclusion in a dll (and should export symbols for example).
<       # Although the cygwin gcc ignores -fPIC, still need this for old-style
<       # (--disable-auto-import) libraries
<       m4_if([$1], [GCJ], [],
< 	[_LT_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'])
<       ;;
<     darwin* | rhapsody*)
<       # PIC is the default on this platform
<       # Common symbols not allowed in MH_DYLIB files
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fno-common'
<       ;;
<     *djgpp*)
<       # DJGPP does not support shared libraries at all
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)=
<       ;;
<     interix[[3-9]]*)
<       # Interix 3.x gcc -fpic/-fPIC options generate broken code.
<       # Instead, we relocate shared libraries at runtime.
<       ;;
<     sysv4*MP*)
<       if test -d /usr/nec; then
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)=-Kconform_pic
<       fi
<       ;;
<     hpux*)
<       # PIC is the default for 64-bit PA HP-UX, but not for 32-bit
<       # PA HP-UX.  On IA64 HP-UX, PIC is the default but the pic flag
<       # sets the default TLS model and affects inlining.
<       case $host_cpu in
<       hppa*64*)
< 	;;
<       *)
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
< 	;;
<       esac
<       ;;
<     *qnx* | *nto*)
<       # QNX uses GNU C++, but need to define -shared option too, otherwise
<       # it will coredump.
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC -shared'
<       ;;
<     *)
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
<       ;;
<     esac
<   else
<     case $host_os in
<       aix[[4-9]]*)
< 	# All AIX code is PIC.
< 	if test "$host_cpu" = ia64; then
< 	  # AIX 5 now supports IA64 processor
< 	  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	else
< 	  _LT_TAGVAR(lt_prog_compiler_static, $1)='-bnso -bI:/lib/syscalls.exp'
< 	fi
< 	;;
<       chorus*)
< 	case $cc_basename in
< 	cxch68*)
< 	  # Green Hills C++ Compiler
< 	  # _LT_TAGVAR(lt_prog_compiler_static, $1)="--no_auto_instantiation -u __main -u __premain -u _abort -r $COOL_DIR/lib/libOrb.a $MVME_DIR/lib/CC/libC.a $MVME_DIR/lib/classix/libcx.s.a"
< 	  ;;
< 	esac
< 	;;
<       dgux*)
< 	case $cc_basename in
< 	  ec++*)
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	    ;;
< 	  ghcx*)
< 	    # Green Hills C++ Compiler
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       freebsd* | dragonfly*)
< 	# FreeBSD uses GNU C++
< 	;;
<       hpux9* | hpux10* | hpux11*)
< 	case $cc_basename in
< 	  CC*)
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
< 	    if test "$host_cpu" != ia64; then
< 	      _LT_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
< 	    fi
< 	    ;;
< 	  aCC*)
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
< 	    case $host_cpu in
< 	    hppa*64*|ia64*)
< 	      # +Z the default
< 	      ;;
< 	    *)
< 	      _LT_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
< 	      ;;
< 	    esac
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       interix*)
< 	# This is c89, which is MS Visual C++ (no shared libs)
< 	# Anyone wants to do a port?
< 	;;
<       irix5* | irix6* | nonstopux*)
< 	case $cc_basename in
< 	  CC*)
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
< 	    # CC pic flag -KPIC is the default.
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       linux* | k*bsd*-gnu)
< 	case $cc_basename in
< 	  KCC*)
< 	    # KAI C++ Compiler
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='--backend -Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
< 	    ;;
< 	  ecpc* )
< 	    # old Intel C++ for x86_64 which still supported -KPIC.
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
< 	    ;;
< 	  icpc* )
< 	    # Intel C++, used to be incompatible with GCC.
< 	    # ICC 10 doesn't accept -KPIC any more.
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
< 	    ;;
< 	  pgCC* | pgcpp*)
< 	    # Portland Group C++ compiler
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fpic'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	    ;;
< 	  cxx*)
< 	    # Compaq C++
< 	    # Make sure the PIC flag is empty.  It appears that all Alpha
< 	    # Linux and Compaq Tru64 Unix objects are PIC.
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)=
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
< 	    ;;
< 	  xlc* | xlC*)
< 	    # IBM XL 8.0 on PPC
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-qpic'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-qstaticlink'
< 	    ;;
< 	  *)
< 	    case `$CC -V 2>&1 | sed 5q` in
< 	    *Sun\ C*)
< 	      # Sun C++ 5.9
< 	      _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	      _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	      _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '
< 	      ;;
< 	    esac
< 	    ;;
< 	esac
< 	;;
<       lynxos*)
< 	;;
<       m88k*)
< 	;;
<       mvs*)
< 	case $cc_basename in
< 	  cxx*)
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-W c,exportall'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       netbsd*)
< 	;;
<       *qnx* | *nto*)
<         # QNX uses GNU C++, but need to define -shared option too, otherwise
<         # it will coredump.
<         _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC -shared'
<         ;;
<       osf3* | osf4* | osf5*)
< 	case $cc_basename in
< 	  KCC*)
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='--backend -Wl,'
< 	    ;;
< 	  RCC*)
< 	    # Rational C++ 2.4.1
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
< 	    ;;
< 	  cxx*)
< 	    # Digital/Compaq C++
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    # Make sure the PIC flag is empty.  It appears that all Alpha
< 	    # Linux and Compaq Tru64 Unix objects are PIC.
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)=
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       psos*)
< 	;;
<       solaris*)
< 	case $cc_basename in
< 	  CC*)
< 	    # Sun C++ 4.2, 5.x and Centerline C++
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '
< 	    ;;
< 	  gcx*)
< 	    # Green Hills C++ Compiler
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-PIC'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       sunos4*)
< 	case $cc_basename in
< 	  CC*)
< 	    # Sun C++ 4.x
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	    ;;
< 	  lcc*)
< 	    # Lucid
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
< 	case $cc_basename in
< 	  CC*)
< 	    _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	    _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	    ;;
< 	esac
< 	;;
<       tandem*)
< 	case $cc_basename in
< 	  NCC*)
< 	    # NonStop-UX NCC 3.20
< 	    _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	    ;;
< 	  *)
< 	    ;;
< 	esac
< 	;;
<       vxworks*)
< 	;;
<       *)
< 	_LT_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
< 	;;
<     esac
<   fi
< ],
< [
<   if test "$GCC" = yes; then
<     _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<     _LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
< 
<     case $host_os in
<       aix*)
<       # All AIX code is PIC.
<       if test "$host_cpu" = ia64; then
< 	# AIX 5 now supports IA64 processor
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       fi
<       ;;
< 
<     amigaos*)
<       case $host_cpu in
<       powerpc)
<             # see comment about AmigaOS4 .so support
<             _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
<         ;;
<       m68k)
<             # FIXME: we need at least 68020 code to build shared libraries, but
<             # adding the `-m68020' flag to GCC prevents building anything better,
<             # like `-m68040'.
<             _LT_TAGVAR(lt_prog_compiler_pic, $1)='-m68020 -resident32 -malways-restore-a4'
<         ;;
<       esac
<       ;;
< 
<     beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
<       # PIC is the default for these OSes.
<       ;;
< 
<     mingw* | cygwin* | pw32* | os2* | cegcc*)
<       # This hack is so that the source file can tell whether it is being
<       # built for inclusion in a dll (and should export symbols for example).
<       # Although the cygwin gcc ignores -fPIC, still need this for old-style
<       # (--disable-auto-import) libraries
<       m4_if([$1], [GCJ], [],
< 	[_LT_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'])
<       ;;
< 
<     darwin* | rhapsody*)
<       # PIC is the default on this platform
<       # Common symbols not allowed in MH_DYLIB files
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fno-common'
<       ;;
< 
<     hpux*)
<       # PIC is the default for 64-bit PA HP-UX, but not for 32-bit
<       # PA HP-UX.  On IA64 HP-UX, PIC is the default but the pic flag
<       # sets the default TLS model and affects inlining.
<       case $host_cpu in
<       hppa*64*)
< 	# +Z the default
< 	;;
<       *)
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
< 	;;
<       esac
<       ;;
< 
<     interix[[3-9]]*)
<       # Interix 3.x gcc -fpic/-fPIC options generate broken code.
<       # Instead, we relocate shared libraries at runtime.
<       ;;
< 
<     msdosdjgpp*)
<       # Just because we use GCC doesn't mean we suddenly get shared libraries
<       # on systems that don't support them.
<       _LT_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
<       enable_shared=no
<       ;;
< 
<     *nto* | *qnx*)
<       # QNX uses GNU C++, but need to define -shared option too, otherwise
<       # it will coredump.
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC -shared'
<       ;;
< 
<     sysv4*MP*)
<       if test -d /usr/nec; then
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)=-Kconform_pic
<       fi
<       ;;
< 
<     *)
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
<       ;;
<     esac
<   else
<     # PORTME Check for flag to pass linker flags through the system compiler.
<     case $host_os in
<     aix*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       if test "$host_cpu" = ia64; then
< 	# AIX 5 now supports IA64 processor
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       else
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-bnso -bI:/lib/syscalls.exp'
<       fi
<       ;;
< 
<     mingw* | cygwin* | pw32* | os2* | cegcc*)
<       # This hack is so that the source file can tell whether it is being
<       # built for inclusion in a dll (and should export symbols for example).
<       m4_if([$1], [GCJ], [],
< 	[_LT_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'])
<       ;;
< 
<     hpux9* | hpux10* | hpux11*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
<       # not for PA HP-UX.
<       case $host_cpu in
<       hppa*64*|ia64*)
< 	# +Z the default
< 	;;
<       *)
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
< 	;;
<       esac
<       # Is there a better lt_prog_compiler_static that works with the bundled CC?
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
<       ;;
< 
<     irix5* | irix6* | nonstopux*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       # PIC (with -KPIC) is the default.
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
<       ;;
< 
<     linux* | k*bsd*-gnu)
<       case $cc_basename in
<       # old Intel for x86_64 which still supported -KPIC.
<       ecc*)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
<         ;;
<       # icc used to be incompatible with GCC.
<       # ICC 10 doesn't accept -KPIC any more.
<       icc* | ifort*)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-static'
<         ;;
<       # Lahey Fortran 8.1.
<       lf95*)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='--shared'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='--static'
< 	;;
<       pgcc* | pgf77* | pgf90* | pgf95*)
<         # Portland Group compilers (*not* the Pentium gcc compiler,
< 	# which looks to be a dead project)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-fpic'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<         ;;
<       ccc*)
<         _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<         # All Alpha code is PIC.
<         _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
<         ;;
<       xl*)
< 	# IBM XL C 8.0/Fortran 10.1 on PPC
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-qpic'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-qstaticlink'
< 	;;
<       *)
< 	case `$CC -V 2>&1 | sed 5q` in
< 	*Sun\ C*)
< 	  # Sun C 5.9
< 	  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
< 	  ;;
< 	*Sun\ F*)
< 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
< 	  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
< 	  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
< 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)=''
< 	  ;;
< 	esac
< 	;;
<       esac
<       ;;
< 
<     newsos6)
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       ;;
< 
<     *nto* | *qnx*)
<       # QNX uses GNU C++, but need to define -shared option too, otherwise
<       # it will coredump.
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC -shared'
<       ;;
< 
<     osf3* | osf4* | osf5*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       # All OSF/1 code is PIC.
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
<       ;;
< 
<     rdos*)
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
<       ;;
< 
<     solaris*)
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       case $cc_basename in
<       f77* | f90* | f95*)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld ';;
<       *)
< 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,';;
<       esac
<       ;;
< 
<     sunos4*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-PIC'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       ;;
< 
<     sysv4 | sysv4.2uw2* | sysv4.3*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       ;;
< 
<     sysv4*MP*)
<       if test -d /usr/nec ;then
< 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-Kconform_pic'
< 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       fi
<       ;;
< 
<     sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       ;;
< 
<     unicos*)
<       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
<       _LT_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
<       ;;
< 
<     uts4*)
<       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
<       _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
<       ;;
< 
<     *)
<       _LT_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
<       ;;
<     esac
<   fi
< ])
< case $host_os in
<   # For platforms which do not support PIC, -DPIC is meaningless:
<   *djgpp*)
<     _LT_TAGVAR(lt_prog_compiler_pic, $1)=
<     ;;
<   *)
<     _LT_TAGVAR(lt_prog_compiler_pic, $1)="$_LT_TAGVAR(lt_prog_compiler_pic, $1)@&t@m4_if([$1],[],[ -DPIC],[m4_if([$1],[CXX],[ -DPIC],[])])"
<     ;;
< esac
< AC_MSG_RESULT([$_LT_TAGVAR(lt_prog_compiler_pic, $1)])
< _LT_TAGDECL([wl], [lt_prog_compiler_wl], [1],
< 	[How to pass a linker flag through the compiler])
< 
< #
< # Check to make sure the PIC flag actually works.
< #
< if test -n "$_LT_TAGVAR(lt_prog_compiler_pic, $1)"; then
<   _LT_COMPILER_OPTION([if $compiler PIC flag $_LT_TAGVAR(lt_prog_compiler_pic, $1) works],
<     [_LT_TAGVAR(lt_cv_prog_compiler_pic_works, $1)],
<     [$_LT_TAGVAR(lt_prog_compiler_pic, $1)@&t@m4_if([$1],[],[ -DPIC],[m4_if([$1],[CXX],[ -DPIC],[])])], [],
<     [case $_LT_TAGVAR(lt_prog_compiler_pic, $1) in
<      "" | " "*) ;;
<      *) _LT_TAGVAR(lt_prog_compiler_pic, $1)=" $_LT_TAGVAR(lt_prog_compiler_pic, $1)" ;;
<      esac],
<     [_LT_TAGVAR(lt_prog_compiler_pic, $1)=
<      _LT_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no])
< fi
< _LT_TAGDECL([pic_flag], [lt_prog_compiler_pic], [1],
< 	[Additional compiler flags for building library objects])
< 
< #
< # Check to make sure the static flag actually works.
< #
< wl=$_LT_TAGVAR(lt_prog_compiler_wl, $1) eval lt_tmp_static_flag=\"$_LT_TAGVAR(lt_prog_compiler_static, $1)\"
< _LT_LINKER_OPTION([if $compiler static flag $lt_tmp_static_flag works],
<   _LT_TAGVAR(lt_cv_prog_compiler_static_works, $1),
<   $lt_tmp_static_flag,
<   [],
<   [_LT_TAGVAR(lt_prog_compiler_static, $1)=])
< _LT_TAGDECL([link_static_flag], [lt_prog_compiler_static], [1],
< 	[Compiler flag to prevent dynamic linking])
< ])# _LT_COMPILER_PIC
< 
< 
< # _LT_LINKER_SHLIBS([TAGNAME])
< # ----------------------------
< # See if the linker supports building shared libraries.
< m4_defun([_LT_LINKER_SHLIBS],
< [AC_REQUIRE([LT_PATH_LD])dnl
< AC_REQUIRE([LT_PATH_NM])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_DECL_EGREP])dnl
< m4_require([_LT_DECL_SED])dnl
< m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
< m4_require([_LT_TAG_COMPILER])dnl
< AC_MSG_CHECKING([whether the $compiler linker ($LD) supports shared libraries])
< m4_if([$1], [CXX], [
<   _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
<   case $host_os in
<   aix[[4-9]]*)
<     # If we're using GNU nm, then we don't want the "-C" option.
<     # -C means demangle to AIX nm, but means don't demangle with GNU nm
<     if $NM -V 2>&1 | $GREP 'GNU' > /dev/null; then
<       _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
<     else
<       _LT_TAGVAR(export_symbols_cmds, $1)='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
<     fi
<     ;;
<   pw32*)
<     _LT_TAGVAR(export_symbols_cmds, $1)="$ltdll_cmds"
<   ;;
<   cygwin* | mingw* | cegcc*)
<     _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/;/^.*[[ ]]__nm__/s/^.*[[ ]]__nm__\([[^ ]]*\)[[ ]][[^ ]]*/\1 DATA/;/^I[[ ]]/d;/^[[AITW]][[ ]]/s/.* //'\'' | sort | uniq > $export_symbols'
<   ;;
<   *)
<     _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
<   ;;
<   esac
<   _LT_TAGVAR(exclude_expsyms, $1)=['_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*']
< ], [
<   runpath_var=
<   _LT_TAGVAR(allow_undefined_flag, $1)=
<   _LT_TAGVAR(always_export_symbols, $1)=no
<   _LT_TAGVAR(archive_cmds, $1)=
<   _LT_TAGVAR(archive_expsym_cmds, $1)=
<   _LT_TAGVAR(compiler_needs_object, $1)=no
<   _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=no
<   _LT_TAGVAR(export_dynamic_flag_spec, $1)=
<   _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
<   _LT_TAGVAR(hardcode_automatic, $1)=no
<   _LT_TAGVAR(hardcode_direct, $1)=no
<   _LT_TAGVAR(hardcode_direct_absolute, $1)=no
<   _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
<   _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
<   _LT_TAGVAR(hardcode_libdir_separator, $1)=
<   _LT_TAGVAR(hardcode_minus_L, $1)=no
<   _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
<   _LT_TAGVAR(inherit_rpath, $1)=no
<   _LT_TAGVAR(link_all_deplibs, $1)=unknown
<   _LT_TAGVAR(module_cmds, $1)=
<   _LT_TAGVAR(module_expsym_cmds, $1)=
<   _LT_TAGVAR(old_archive_from_new_cmds, $1)=
<   _LT_TAGVAR(old_archive_from_expsyms_cmds, $1)=
<   _LT_TAGVAR(thread_safe_flag_spec, $1)=
<   _LT_TAGVAR(whole_archive_flag_spec, $1)=
<   # include_expsyms should be a list of space-separated symbols to be *always*
<   # included in the symbol list
<   _LT_TAGVAR(include_expsyms, $1)=
<   # exclude_expsyms can be an extended regexp of symbols to exclude
<   # it will be wrapped by ` (' and `)$', so one must not match beginning or
<   # end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',
<   # as well as any symbol that contains `d'.
<   _LT_TAGVAR(exclude_expsyms, $1)=['_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*']
<   # Although _GLOBAL_OFFSET_TABLE_ is a valid symbol C name, most a.out
<   # platforms (ab)use it in PIC code, but their linkers get confused if
<   # the symbol is explicitly referenced.  Since portable code cannot
<   # rely on this symbol name, it's probably fine to never include it in
<   # preloaded symbol tables.
<   # Exclude shared library initialization/finalization symbols.
< dnl Note also adjust exclude_expsyms for C++ above.
<   extract_expsyms_cmds=
< 
<   case $host_os in
<   cygwin* | mingw* | pw32* | cegcc*)
<     # FIXME: the MSVC++ port hasn't been tested in a loooong time
<     # When not using gcc, we currently assume that we are using
<     # Microsoft Visual C++.
<     if test "$GCC" != yes; then
<       with_gnu_ld=no
<     fi
<     ;;
<   interix*)
<     # we just hope/assume this is gcc and not c89 (= MSVC++)
<     with_gnu_ld=yes
<     ;;
<   openbsd*)
<     with_gnu_ld=no
<     ;;
<   esac
< 
<   _LT_TAGVAR(ld_shlibs, $1)=yes
<   if test "$with_gnu_ld" = yes; then
<     # If archive_cmds runs LD, not CC, wlarc should be empty
<     wlarc='${wl}'
< 
<     # Set some defaults for GNU ld with shared library support. These
<     # are reset later if shared libraries are not supported. Putting them
<     # here allows them to be overridden if necessary.
<     runpath_var=LD_RUN_PATH
<     _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<     _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
<     # ancient GNU ld didn't support --whole-archive et. al.
<     if $LD --help 2>&1 | $GREP 'no-whole-archive' > /dev/null; then
<       _LT_TAGVAR(whole_archive_flag_spec, $1)="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
<     else
<       _LT_TAGVAR(whole_archive_flag_spec, $1)=
<     fi
<     supports_anon_versioning=no
<     case `$LD -v 2>&1` in
<       *\ [[01]].* | *\ 2.[[0-9]].* | *\ 2.10.*) ;; # catch versions < 2.11
<       *\ 2.11.93.0.2\ *) supports_anon_versioning=yes ;; # RH7.3 ...
<       *\ 2.11.92.0.12\ *) supports_anon_versioning=yes ;; # Mandrake 8.2 ...
<       *\ 2.11.*) ;; # other 2.11 versions
<       *) supports_anon_versioning=yes ;;
<     esac
< 
<     # See if GNU ld supports shared libraries.
<     case $host_os in
<     aix[[3-9]]*)
<       # On AIX/PPC, the GNU linker is very broken
<       if test "$host_cpu" != ia64; then
< 	_LT_TAGVAR(ld_shlibs, $1)=no
< 	cat <<_LT_EOF 1>&2
< 
< *** Warning: the GNU linker, at least up to release 2.9.1, is reported
< *** to be unable to reliably create shared libraries on AIX.
< *** Therefore, libtool is disabling shared libraries support.  If you
< *** really care for shared libraries, you may want to modify your PATH
< *** so that a non-GNU linker is found, and then restart.
< 
< _LT_EOF
<       fi
<       ;;
< 
<     amigaos*)
<       case $host_cpu in
<       powerpc)
<             # see comment about AmigaOS4 .so support
<             _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
<             _LT_TAGVAR(archive_expsym_cmds, $1)=''
<         ;;
<       m68k)
<             _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/a2ixlibrary.data~$ECHO "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$ECHO "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$ECHO "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$ECHO "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
<             _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<             _LT_TAGVAR(hardcode_minus_L, $1)=yes
<         ;;
<       esac
<       ;;
< 
<     beos*)
<       if $LD --help 2>&1 | $GREP ': supported targets:.* elf' > /dev/null; then
< 	_LT_TAGVAR(allow_undefined_flag, $1)=unsupported
< 	# Joseph Beckenbach <jrb3@best.com> says some releases of gcc
< 	# support --undefined.  This deserves some investigation.  FIXME
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
<       else
< 	_LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
< 
<     cygwin* | mingw* | pw32* | cegcc*)
<       # _LT_TAGVAR(hardcode_libdir_flag_spec, $1) is actually meaningless,
<       # as there is no search path for DLLs.
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<       _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
<       _LT_TAGVAR(always_export_symbols, $1)=no
<       _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
<       _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/'\'' | $SED -e '\''/^[[AITW]][[ ]]/s/.*[[ ]]//'\'' | sort | uniq > $export_symbols'
< 
<       if $LD --help 2>&1 | $GREP 'auto-import' > /dev/null; then
<         _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
< 	# If the export-symbols file already is a .def file (1st line
< 	# is EXPORTS), use it as is; otherwise, prepend...
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
< 	  cp $export_symbols $output_objdir/$soname.def;
< 	else
< 	  echo EXPORTS > $output_objdir/$soname.def;
< 	  cat $export_symbols >> $output_objdir/$soname.def;
< 	fi~
< 	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
<       else
< 	_LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
< 
<     interix[[3-9]]*)
<       _LT_TAGVAR(hardcode_direct, $1)=no
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
<       # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
<       # Instead, shared libraries are loaded at an image base (0x10000000 by
<       # default) and relocated if they conflict, which is a slow very memory
<       # consuming and fragmenting process.  To avoid this, we pick a random,
<       # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
<       # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
<       _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
<       _LT_TAGVAR(archive_expsym_cmds, $1)='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
<       ;;
< 
<     gnu* | linux* | tpf* | k*bsd*-gnu)
<       tmp_diet=no
<       if test "$host_os" = linux-dietlibc; then
< 	case $cc_basename in
< 	  diet\ *) tmp_diet=yes;;	# linux-dietlibc with static linking (!diet-dyn)
< 	esac
<       fi
<       if $LD --help 2>&1 | $EGREP ': supported targets:.* elf' > /dev/null \
< 	 && test "$tmp_diet" = no
<       then
< 	tmp_addflag=
< 	tmp_sharedflag='-shared'
< 	case $cc_basename,$host_cpu in
<         pgcc*)				# Portland Group C compiler
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
< 	  tmp_addflag=' $pic_flag'
< 	  ;;
< 	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
< 	  tmp_addflag=' $pic_flag -Mnomain' ;;
< 	ecc*,ia64* | icc*,ia64*)	# Intel C compiler on ia64
< 	  tmp_addflag=' -i_dynamic' ;;
< 	efc*,ia64* | ifort*,ia64*)	# Intel Fortran compiler on ia64
< 	  tmp_addflag=' -i_dynamic -nofor_main' ;;
< 	ifc* | ifort*)			# Intel Fortran compiler
< 	  tmp_addflag=' -nofor_main' ;;
< 	lf95*)				# Lahey Fortran 8.1
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)=
< 	  tmp_sharedflag='--shared' ;;
< 	xl[[cC]]*)			# IBM XL C 8.0 on PPC (deal with xlf below)
< 	  tmp_sharedflag='-qmkshrobj'
< 	  tmp_addflag= ;;
< 	esac
< 	case `$CC -V 2>&1 | sed 5q` in
< 	*Sun\ C*)			# Sun C 5.9
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
< 	  _LT_TAGVAR(compiler_needs_object, $1)=yes
< 	  tmp_sharedflag='-G' ;;
< 	*Sun\ F*)			# Sun Fortran 8.3
< 	  tmp_sharedflag='-G' ;;
< 	esac
< 	_LT_TAGVAR(archive_cmds, $1)='$CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 
<         if test "x$supports_anon_versioning" = xyes; then
<           _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $output_objdir/$libname.ver~
< 	    cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
< 	    echo "local: *; };" >> $output_objdir/$libname.ver~
< 	    $CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
<         fi
< 
< 	case $cc_basename in
< 	xlf*)
< 	  # IBM XL Fortran 10.1 on PPC cannot create shared libs itself
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='--whole-archive$convenience --no-whole-archive'
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='-rpath $libdir'
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -shared $libobjs $deplibs $compiler_flags -soname $soname -o $lib'
< 	  if test "x$supports_anon_versioning" = xyes; then
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $output_objdir/$libname.ver~
< 	      cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
< 	      echo "local: *; };" >> $output_objdir/$libname.ver~
< 	      $LD -shared $libobjs $deplibs $compiler_flags -soname $soname -version-script $output_objdir/$libname.ver -o $lib'
< 	  fi
< 	  ;;
< 	esac
<       else
<         _LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
< 
<     netbsd*)
<       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
< 	wlarc=
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
<       fi
<       ;;
< 
<     solaris*)
<       if $LD -v 2>&1 | $GREP 'BFD 2\.8' > /dev/null; then
< 	_LT_TAGVAR(ld_shlibs, $1)=no
< 	cat <<_LT_EOF 1>&2
< 
< *** Warning: The releases 2.8.* of the GNU linker cannot reliably
< *** create shared libraries on Solaris systems.  Therefore, libtool
< *** is disabling shared libraries support.  We urge you to upgrade GNU
< *** binutils to release 2.9.1 or newer.  Another option is to modify
< *** your PATH or compiler configuration so that the native linker is
< *** used, and then restart.
< 
< _LT_EOF
<       elif $LD --help 2>&1 | $GREP ': supported targets:.* elf' > /dev/null; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
<       else
< 	_LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
< 
<     sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
<       case `$LD -v 2>&1` in
<         *\ [[01]].* | *\ 2.[[0-9]].* | *\ 2.1[[0-5]].*)
< 	_LT_TAGVAR(ld_shlibs, $1)=no
< 	cat <<_LT_EOF 1>&2
< 
< *** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
< *** reliably create shared libraries on SCO systems.  Therefore, libtool
< *** is disabling shared libraries support.  We urge you to upgrade GNU
< *** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
< *** your PATH or compiler configuration so that the native linker is
< *** used, and then restart.
< 
< _LT_EOF
< 	;;
< 	*)
< 	  # For security reasons, it is highly recommended that you always
< 	  # use absolute paths for naming shared libraries, and exclude the
< 	  # DT_RUNPATH tag from executables and libraries.  But doing so
< 	  # requires that you compile everything twice, which is a pain.
< 	  if $LD --help 2>&1 | $GREP ': supported targets:.* elf' > /dev/null; then
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
< 	  else
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	  fi
< 	;;
<       esac
<       ;;
< 
<     sunos4*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
<       wlarc=
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     *)
<       if $LD --help 2>&1 | $GREP ': supported targets:.* elf' > /dev/null; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
<       else
< 	_LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
<     esac
< 
<     if test "$_LT_TAGVAR(ld_shlibs, $1)" = no; then
<       runpath_var=
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)=
<       _LT_TAGVAR(whole_archive_flag_spec, $1)=
<     fi
<   else
<     # PORTME fill in a description of your system's linker (not GNU ld)
<     case $host_os in
<     aix3*)
<       _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
<       _LT_TAGVAR(always_export_symbols, $1)=yes
<       _LT_TAGVAR(archive_expsym_cmds, $1)='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'
<       # Note: this linker hardcodes the directories in LIBPATH if there
<       # are no directories specified by -L.
<       _LT_TAGVAR(hardcode_minus_L, $1)=yes
<       if test "$GCC" = yes && test -z "$lt_prog_compiler_static"; then
< 	# Neither direct hardcoding nor static linking is supported with a
< 	# broken collect2.
< 	_LT_TAGVAR(hardcode_direct, $1)=unsupported
<       fi
<       ;;
< 
<     aix[[4-9]]*)
<       if test "$host_cpu" = ia64; then
< 	# On IA64, the linker does run time linking by default, so we don't
< 	# have to do anything special.
< 	aix_use_runtimelinking=no
< 	exp_sym_flag='-Bexport'
< 	no_entry_flag=""
<       else
< 	# If we're using GNU nm, then we don't want the "-C" option.
< 	# -C means demangle to AIX nm, but means don't demangle with GNU nm
< 	if $NM -V 2>&1 | $GREP 'GNU' > /dev/null; then
< 	  _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
< 	else
< 	  _LT_TAGVAR(export_symbols_cmds, $1)='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
< 	fi
< 	aix_use_runtimelinking=no
< 
< 	# Test if we are trying to use run time linking or normal
< 	# AIX style linking. If -brtl is somewhere in LDFLAGS, we
< 	# need to do runtime linking.
< 	case $host_os in aix4.[[23]]|aix4.[[23]].*|aix[[5-9]]*)
< 	  for ld_flag in $LDFLAGS; do
< 	  if (test $ld_flag = "-brtl" || test $ld_flag = "-Wl,-brtl"); then
< 	    aix_use_runtimelinking=yes
< 	    break
< 	  fi
< 	  done
< 	  ;;
< 	esac
< 
< 	exp_sym_flag='-bexport'
< 	no_entry_flag='-bnoentry'
<       fi
< 
<       # When large executables or shared objects are built, AIX ld can
<       # have problems creating the table of contents.  If linking a library
<       # or program results in "error TOC overflow" add -mminimal-toc to
<       # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
<       # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.
< 
<       _LT_TAGVAR(archive_cmds, $1)=''
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_direct_absolute, $1)=yes
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=':'
<       _LT_TAGVAR(link_all_deplibs, $1)=yes
<       _LT_TAGVAR(file_list_spec, $1)='${wl}-f,'
< 
<       if test "$GCC" = yes; then
< 	case $host_os in aix4.[[012]]|aix4.[[012]].*)
< 	# We only want to do this on AIX 4.2 and lower, the check
< 	# below for broken collect2 doesn't work under 4.3+
< 	  collect2name=`${CC} -print-prog-name=collect2`
< 	  if test -f "$collect2name" &&
< 	   strings "$collect2name" | $GREP resolve_lib_name >/dev/null
< 	  then
< 	  # We have reworked collect2
< 	  :
< 	  else
< 	  # We have old collect2
< 	  _LT_TAGVAR(hardcode_direct, $1)=unsupported
< 	  # It fails to find uninstalled libraries when the uninstalled
< 	  # path is not listed in the libpath.  Setting hardcode_minus_L
< 	  # to unsupported forces relinking
< 	  _LT_TAGVAR(hardcode_minus_L, $1)=yes
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
< 	  _LT_TAGVAR(hardcode_libdir_separator, $1)=
< 	  fi
< 	  ;;
< 	esac
< 	shared_flag='-shared'
< 	if test "$aix_use_runtimelinking" = yes; then
< 	  shared_flag="$shared_flag "'${wl}-G'
< 	fi
<       else
< 	# not using gcc
< 	if test "$host_cpu" = ia64; then
< 	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
< 	# chokes on -Wl,-G. The following line is correct:
< 	  shared_flag='-G'
< 	else
< 	  if test "$aix_use_runtimelinking" = yes; then
< 	    shared_flag='${wl}-G'
< 	  else
< 	    shared_flag='${wl}-bM:SRE'
< 	  fi
< 	fi
<       fi
< 
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-bexpall'
<       # It seems that -bexpall does not export symbols beginning with
<       # underscore (_), so it is better to generate a list of symbols to export.
<       _LT_TAGVAR(always_export_symbols, $1)=yes
<       if test "$aix_use_runtimelinking" = yes; then
< 	# Warning - without using the other runtime loading flags (-brtl),
< 	# -berok will link without error, but may produce a broken library.
< 	_LT_TAGVAR(allow_undefined_flag, $1)='-berok'
<         # Determine the default libpath from the value encoded in an
<         # empty executable.
<         _LT_SYS_MODULE_PATH_AIX
<         _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'"$aix_libpath"
<         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then $ECHO "X${wl}${allow_undefined_flag}" | $Xsed; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
<       else
< 	if test "$host_cpu" = ia64; then
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
< 	  _LT_TAGVAR(allow_undefined_flag, $1)="-z nodefs"
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
< 	else
< 	 # Determine the default libpath from the value encoded in an
< 	 # empty executable.
< 	 _LT_SYS_MODULE_PATH_AIX
< 	 _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'"$aix_libpath"
< 	  # Warning - without using the other run time loading flags,
< 	  # -berok will link without error, but may produce a broken library.
< 	  _LT_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
< 	  _LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
< 	  # Exported symbols can be pulled into shared objects from archives
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='$convenience'
< 	  _LT_TAGVAR(archive_cmds_need_lc, $1)=yes
< 	  # This is similar to how AIX traditionally builds its shared libraries.
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
< 	fi
<       fi
<       ;;
< 
<     amigaos*)
<       case $host_cpu in
<       powerpc)
<             # see comment about AmigaOS4 .so support
<             _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
<             _LT_TAGVAR(archive_expsym_cmds, $1)=''
<         ;;
<       m68k)
<             _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/a2ixlibrary.data~$ECHO "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$ECHO "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$ECHO "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$ECHO "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
<             _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<             _LT_TAGVAR(hardcode_minus_L, $1)=yes
<         ;;
<       esac
<       ;;
< 
<     bsdi[[45]]*)
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)=-rdynamic
<       ;;
< 
<     cygwin* | mingw* | pw32* | cegcc*)
<       # When not using gcc, we currently assume that we are using
<       # Microsoft Visual C++.
<       # hardcode_libdir_flag_spec is actually meaningless, as there is
<       # no search path for DLLs.
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=' '
<       _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
<       # Tell ltmain to make .lib files, not .a files.
<       libext=lib
<       # Tell ltmain to make .dll files, not .so files.
<       shrext_cmds=".dll"
<       # FIXME: Setting linknames here is a bad hack.
<       _LT_TAGVAR(archive_cmds, $1)='$CC -o $lib $libobjs $compiler_flags `$ECHO "X$deplibs" | $Xsed -e '\''s/ -lc$//'\''` -link -dll~linknames='
<       # The linker will automatically build a .lib file if we build a DLL.
<       _LT_TAGVAR(old_archive_from_new_cmds, $1)='true'
<       # FIXME: Should let the user specify the lib program.
<       _LT_TAGVAR(old_archive_cmds, $1)='lib -OUT:$oldlib$oldobjs$old_deplibs'
<       _LT_TAGVAR(fix_srcfile_path, $1)='`cygpath -w "$srcfile"`'
<       _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
<       ;;
< 
<     darwin* | rhapsody*)
<       _LT_DARWIN_LINKER_FEATURES($1)
<       ;;
< 
<     dgux*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     freebsd1*)
<       _LT_TAGVAR(ld_shlibs, $1)=no
<       ;;
< 
<     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
<     # support.  Future versions do this automatically, but an explicit c++rt0.o
<     # does not break anything, and helps significantly (at the cost of a little
<     # extra space).
<     freebsd2.2*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     # Unfortunately, older versions of FreeBSD 2 do not have this feature.
<     freebsd2*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_minus_L, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
<     freebsd* | dragonfly*)
<       _LT_TAGVAR(archive_cmds, $1)='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     hpux9*)
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
<       fi
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<       _LT_TAGVAR(hardcode_direct, $1)=yes
< 
<       # hardcode_minus_L: Not really in the search PATH,
<       # but as the default location of the library.
<       _LT_TAGVAR(hardcode_minus_L, $1)=yes
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
<       ;;
< 
<     hpux10*)
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
<       fi
<       if test "$with_gnu_ld" = no; then
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
< 	_LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'
< 	_LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 	_LT_TAGVAR(hardcode_direct, $1)=yes
< 	_LT_TAGVAR(hardcode_direct_absolute, $1)=yes
< 	_LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
< 	# hardcode_minus_L: Not really in the search PATH,
< 	# but as the default location of the library.
< 	_LT_TAGVAR(hardcode_minus_L, $1)=yes
<       fi
<       ;;
< 
<     hpux11*)
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
< 	case $host_cpu in
< 	hppa*64*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	ia64*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	esac
<       else
< 	case $host_cpu in
< 	hppa*64*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	ia64*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	esac
<       fi
<       if test "$with_gnu_ld" = no; then
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
< 	_LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
< 	case $host_cpu in
< 	hppa*64*|ia64*)
< 	  _LT_TAGVAR(hardcode_direct, $1)=no
< 	  _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	  ;;
< 	*)
< 	  _LT_TAGVAR(hardcode_direct, $1)=yes
< 	  _LT_TAGVAR(hardcode_direct_absolute, $1)=yes
< 	  _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
< 
< 	  # hardcode_minus_L: Not really in the search PATH,
< 	  # but as the default location of the library.
< 	  _LT_TAGVAR(hardcode_minus_L, $1)=yes
< 	  ;;
< 	esac
<       fi
<       ;;
< 
<     irix5* | irix6* | nonstopux*)
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
< 	# Try to use the -exported_symbol ld option, if it does not
< 	# work, assume that -exports_file does not work either and
< 	# implicitly export all symbols.
<         save_LDFLAGS="$LDFLAGS"
<         LDFLAGS="$LDFLAGS -shared ${wl}-exported_symbol ${wl}foo ${wl}-update_registry ${wl}/dev/null"
<         AC_LINK_IFELSE(int foo(void) {},
<           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
<         )
<         LDFLAGS="$save_LDFLAGS"
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -exports_file $export_symbols -o $lib'
<       fi
<       _LT_TAGVAR(archive_cmds_need_lc, $1)='no'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<       _LT_TAGVAR(inherit_rpath, $1)=yes
<       _LT_TAGVAR(link_all_deplibs, $1)=yes
<       ;;
< 
<     netbsd*)
<       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF
<       fi
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     newsos6)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     *nto* | *qnx*)
<       ;;
< 
<     openbsd*)
<       if test -f /usr/libexec/ld.so; then
< 	_LT_TAGVAR(hardcode_direct, $1)=yes
< 	_LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	_LT_TAGVAR(hardcode_direct_absolute, $1)=yes
< 	if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	  _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
< 	else
< 	  case $host_os in
< 	   openbsd[[01]].* | openbsd2.[[0-7]] | openbsd2.[[0-7]].*)
< 	     _LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
< 	     _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
< 	     ;;
< 	   *)
< 	     _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
< 	     _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	     ;;
< 	  esac
< 	fi
<       else
< 	_LT_TAGVAR(ld_shlibs, $1)=no
<       fi
<       ;;
< 
<     os2*)
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<       _LT_TAGVAR(hardcode_minus_L, $1)=yes
<       _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
<       _LT_TAGVAR(archive_cmds, $1)='$ECHO "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$ECHO "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$ECHO DATA >> $output_objdir/$libname.def~$ECHO " SINGLE NONSHARED" >> $output_objdir/$libname.def~$ECHO EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
<       _LT_TAGVAR(old_archive_from_new_cmds, $1)='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
<       ;;
< 
<     osf3*)
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
<       else
< 	_LT_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
<       fi
<       _LT_TAGVAR(archive_cmds_need_lc, $1)='no'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<       ;;
< 
<     osf4* | osf5*)	# as osf3* with the addition of -msym flag
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<       else
< 	_LT_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -msym -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done; printf "%s\\n" "-hidden">> $lib.exp~
< 	$CC -shared${allow_undefined_flag} ${wl}-input ${wl}$lib.exp $compiler_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib~$RM $lib.exp'
< 
< 	# Both c and cxx compiler support -rpath directly
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
<       fi
<       _LT_TAGVAR(archive_cmds_need_lc, $1)='no'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<       ;;
< 
<     solaris*)
<       _LT_TAGVAR(no_undefined_flag, $1)=' -z defs'
<       if test "$GCC" = yes; then
< 	wlarc='${wl}'
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-z ${wl}text ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 	  $CC -shared ${wl}-z ${wl}text ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
<       else
< 	case `$CC -V 2>&1` in
< 	*"Compilers 5.0"*)
< 	  wlarc=''
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 	  $LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$RM $lib.exp'
< 	  ;;
< 	*)
< 	  wlarc='${wl}'
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 	  $CC -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
< 	  ;;
< 	esac
<       fi
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       case $host_os in
<       solaris2.[[0-5]] | solaris2.[[0-5]].*) ;;
<       *)
< 	# The compiler driver will combine and reorder linker options,
< 	# but understands `-z linker_flag'.  GCC discards it without `$wl',
< 	# but is careful enough not to reorder.
< 	# Supported since Solaris 2.6 (maybe 2.5.1?)
< 	if test "$GCC" = yes; then
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
< 	else
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='-z allextract$convenience -z defaultextract'
< 	fi
< 	;;
<       esac
<       _LT_TAGVAR(link_all_deplibs, $1)=yes
<       ;;
< 
<     sunos4*)
<       if test "x$host_vendor" = xsequent; then
< 	# Use $CC to link under sequent, because it throws in some extra .o
< 	# files that make .init and .fini sections work.
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h $soname -o $lib $libobjs $deplibs $compiler_flags'
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'
<       fi
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<       _LT_TAGVAR(hardcode_direct, $1)=yes
<       _LT_TAGVAR(hardcode_minus_L, $1)=yes
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     sysv4)
<       case $host_vendor in
< 	sni)
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
< 	  _LT_TAGVAR(hardcode_direct, $1)=yes # is this really true???
< 	;;
< 	siemens)
< 	  ## LD is ld it makes a PLAMLIB
< 	  ## CC just makes a GrossModule.
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -G -o $lib $libobjs $deplibs $linker_flags'
< 	  _LT_TAGVAR(reload_cmds, $1)='$CC -r -o $output$reload_objs'
< 	  _LT_TAGVAR(hardcode_direct, $1)=no
<         ;;
< 	motorola)
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
< 	  _LT_TAGVAR(hardcode_direct, $1)=no #Motorola manual says yes, but my tests say they lie
< 	;;
<       esac
<       runpath_var='LD_RUN_PATH'
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     sysv4.3*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)='-Bexport'
<       ;;
< 
<     sysv4*MP*)
<       if test -d /usr/nec; then
< 	_LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
< 	_LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	runpath_var=LD_RUN_PATH
< 	hardcode_runpath_var=yes
< 	_LT_TAGVAR(ld_shlibs, $1)=yes
<       fi
<       ;;
< 
<     sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[[01]].[[10]]* | unixware7* | sco3.2v5.0.[[024]]*)
<       _LT_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
<       _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       runpath_var='LD_RUN_PATH'
< 
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
<       fi
<       ;;
< 
<     sysv5* | sco3.2v5* | sco5v6*)
<       # Note: We can NOT use -z defs as we might desire, because we do not
<       # link with -lc, and that would cause any symbols used from libc to
<       # always be unresolved, which means just about no library would
<       # ever link correctly.  If we're not using GNU ld we use -z text
<       # though, which does catch some bad symbols but isn't as heavy-handed
<       # as -z defs.
<       _LT_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
<       _LT_TAGVAR(allow_undefined_flag, $1)='${wl}-z,nodefs'
<       _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R,$libdir'
<       _LT_TAGVAR(hardcode_libdir_separator, $1)=':'
<       _LT_TAGVAR(link_all_deplibs, $1)=yes
<       _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
<       runpath_var='LD_RUN_PATH'
< 
<       if test "$GCC" = yes; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
<       else
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
<       fi
<       ;;
< 
<     uts4*)
<       _LT_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
<       _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       ;;
< 
<     *)
<       _LT_TAGVAR(ld_shlibs, $1)=no
<       ;;
<     esac
< 
<     if test x$host_vendor = xsni; then
<       case $host in
<       sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
< 	_LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Blargedynsym'
< 	;;
<       esac
<     fi
<   fi
< ])
< AC_MSG_RESULT([$_LT_TAGVAR(ld_shlibs, $1)])
< test "$_LT_TAGVAR(ld_shlibs, $1)" = no && can_build_shared=no
< 
< _LT_TAGVAR(with_gnu_ld, $1)=$with_gnu_ld
< 
< _LT_DECL([], [libext], [0], [Old archive suffix (normally "a")])dnl
< _LT_DECL([], [shrext_cmds], [1], [Shared library suffix (normally ".so")])dnl
< _LT_DECL([], [extract_expsyms_cmds], [2],
<     [The commands to extract the exported symbol list from a shared archive])
< 
< #
< # Do we need to explicitly link libc?
< #
< case "x$_LT_TAGVAR(archive_cmds_need_lc, $1)" in
< x|xyes)
<   # Assume -lc should be added
<   _LT_TAGVAR(archive_cmds_need_lc, $1)=yes
< 
<   if test "$enable_shared" = yes && test "$GCC" = yes; then
<     case $_LT_TAGVAR(archive_cmds, $1) in
<     *'~'*)
<       # FIXME: we may have to deal with multi-command sequences.
<       ;;
<     '$CC '*)
<       # Test whether the compiler implicitly links with -lc since on some
<       # systems, -lgcc has to come before -lc. If gcc already passes -lc
<       # to ld, don't add -lc before -lgcc.
<       AC_MSG_CHECKING([whether -lc should be explicitly linked in])
<       $RM conftest*
<       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
< 
<       if AC_TRY_EVAL(ac_compile) 2>conftest.err; then
<         soname=conftest
<         lib=conftest
<         libobjs=conftest.$ac_objext
<         deplibs=
<         wl=$_LT_TAGVAR(lt_prog_compiler_wl, $1)
< 	pic_flag=$_LT_TAGVAR(lt_prog_compiler_pic, $1)
<         compiler_flags=-v
<         linker_flags=-v
<         verstring=
<         output_objdir=.
<         libname=conftest
<         lt_save_allow_undefined_flag=$_LT_TAGVAR(allow_undefined_flag, $1)
<         _LT_TAGVAR(allow_undefined_flag, $1)=
<         if AC_TRY_EVAL(_LT_TAGVAR(archive_cmds, $1) 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1)
<         then
< 	  _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<         else
< 	  _LT_TAGVAR(archive_cmds_need_lc, $1)=yes
<         fi
<         _LT_TAGVAR(allow_undefined_flag, $1)=$lt_save_allow_undefined_flag
<       else
<         cat conftest.err 1>&5
<       fi
<       $RM conftest*
<       AC_MSG_RESULT([$_LT_TAGVAR(archive_cmds_need_lc, $1)])
<       ;;
<     esac
<   fi
<   ;;
< esac
< 
< _LT_TAGDECL([build_libtool_need_lc], [archive_cmds_need_lc], [0],
<     [Whether or not to add -lc for building shared libraries])
< _LT_TAGDECL([allow_libtool_libs_with_static_runtimes],
<     [enable_shared_with_static_runtimes], [0],
<     [Whether or not to disallow shared libs when runtime libs are static])
< _LT_TAGDECL([], [export_dynamic_flag_spec], [1],
<     [Compiler flag to allow reflexive dlopens])
< _LT_TAGDECL([], [whole_archive_flag_spec], [1],
<     [Compiler flag to generate shared objects directly from archives])
< _LT_TAGDECL([], [compiler_needs_object], [1],
<     [Whether the compiler copes with passing no objects directly])
< _LT_TAGDECL([], [old_archive_from_new_cmds], [2],
<     [Create an old-style archive from a shared archive])
< _LT_TAGDECL([], [old_archive_from_expsyms_cmds], [2],
<     [Create a temporary old-style archive to link instead of a shared archive])
< _LT_TAGDECL([], [archive_cmds], [2], [Commands used to build a shared archive])
< _LT_TAGDECL([], [archive_expsym_cmds], [2])
< _LT_TAGDECL([], [module_cmds], [2],
<     [Commands used to build a loadable module if different from building
<     a shared archive.])
< _LT_TAGDECL([], [module_expsym_cmds], [2])
< _LT_TAGDECL([], [with_gnu_ld], [1],
<     [Whether we are building with GNU ld or not])
< _LT_TAGDECL([], [allow_undefined_flag], [1],
<     [Flag that allows shared libraries with undefined symbols to be built])
< _LT_TAGDECL([], [no_undefined_flag], [1],
<     [Flag that enforces no undefined symbols])
< _LT_TAGDECL([], [hardcode_libdir_flag_spec], [1],
<     [Flag to hardcode $libdir into a binary during linking.
<     This must work even if $libdir does not exist])
< _LT_TAGDECL([], [hardcode_libdir_flag_spec_ld], [1],
<     [[If ld is used when linking, flag to hardcode $libdir into a binary
<     during linking.  This must work even if $libdir does not exist]])
< _LT_TAGDECL([], [hardcode_libdir_separator], [1],
<     [Whether we need a single "-rpath" flag with a separated argument])
< _LT_TAGDECL([], [hardcode_direct], [0],
<     [Set to "yes" if using DIR/libNAME${shared_ext} during linking hardcodes
<     DIR into the resulting binary])
< _LT_TAGDECL([], [hardcode_direct_absolute], [0],
<     [Set to "yes" if using DIR/libNAME${shared_ext} during linking hardcodes
<     DIR into the resulting binary and the resulting library dependency is
<     "absolute", i.e impossible to change by setting ${shlibpath_var} if the
<     library is relocated])
< _LT_TAGDECL([], [hardcode_minus_L], [0],
<     [Set to "yes" if using the -LDIR flag during linking hardcodes DIR
<     into the resulting binary])
< _LT_TAGDECL([], [hardcode_shlibpath_var], [0],
<     [Set to "yes" if using SHLIBPATH_VAR=DIR during linking hardcodes DIR
<     into the resulting binary])
< _LT_TAGDECL([], [hardcode_automatic], [0],
<     [Set to "yes" if building a shared library automatically hardcodes DIR
<     into the library and all subsequent libraries and executables linked
<     against it])
< _LT_TAGDECL([], [inherit_rpath], [0],
<     [Set to yes if linker adds runtime paths of dependent libraries
<     to runtime path list])
< _LT_TAGDECL([], [link_all_deplibs], [0],
<     [Whether libtool must link a program against all its dependency libraries])
< _LT_TAGDECL([], [fix_srcfile_path], [1],
<     [Fix the shell variable $srcfile for the compiler])
< _LT_TAGDECL([], [always_export_symbols], [0],
<     [Set to "yes" if exported symbols are required])
< _LT_TAGDECL([], [export_symbols_cmds], [2],
<     [The commands to list exported symbols])
< _LT_TAGDECL([], [exclude_expsyms], [1],
<     [Symbols that should not be listed in the preloaded symbols])
< _LT_TAGDECL([], [include_expsyms], [1],
<     [Symbols that must always be exported])
< _LT_TAGDECL([], [prelink_cmds], [2],
<     [Commands necessary for linking programs (against libraries) with templates])
< _LT_TAGDECL([], [file_list_spec], [1],
<     [Specify filename containing input files])
< dnl FIXME: Not yet implemented
< dnl _LT_TAGDECL([], [thread_safe_flag_spec], [1],
< dnl    [Compiler flag to generate thread safe objects])
< ])# _LT_LINKER_SHLIBS
< 
< 
< # _LT_LANG_C_CONFIG([TAG])
< # ------------------------
< # Ensure that the configuration variables for a C compiler are suitably
< # defined.  These variables are subsequently used by _LT_CONFIG to write
< # the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_C_CONFIG],
< [m4_require([_LT_DECL_EGREP])dnl
< lt_save_CC="$CC"
< AC_LANG_PUSH(C)
< 
< # Source file extension for C test sources.
< ac_ext=c
< 
< # Object file extension for compiled C test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # Code to be used in simple compile tests
< lt_simple_compile_test_code="int some_variable = 0;"
< 
< # Code to be used in simple link tests
< lt_simple_link_test_code='int main(){return(0);}'
< 
< _LT_TAG_COMPILER
< # Save the default compiler, since it gets overwritten when the other
< # tags are being tested, and _LT_TAGVAR(compiler, []) is a NOP.
< compiler_DEFAULT=$CC
< 
< # save warnings/boilerplate of simple test code
< _LT_COMPILER_BOILERPLATE
< _LT_LINKER_BOILERPLATE
< 
< if test -n "$compiler"; then
<   _LT_COMPILER_NO_RTTI($1)
<   _LT_COMPILER_PIC($1)
<   _LT_COMPILER_C_O($1)
<   _LT_COMPILER_FILE_LOCKS($1)
<   _LT_LINKER_SHLIBS($1)
<   _LT_SYS_DYNAMIC_LINKER($1)
<   _LT_LINKER_HARDCODE_LIBPATH($1)
<   LT_SYS_DLOPEN_SELF
<   _LT_CMD_STRIPLIB
< 
<   # Report which library types will actually be built
<   AC_MSG_CHECKING([if libtool supports shared libraries])
<   AC_MSG_RESULT([$can_build_shared])
< 
<   AC_MSG_CHECKING([whether to build shared libraries])
<   test "$can_build_shared" = "no" && enable_shared=no
< 
<   # On AIX, shared libraries and static libraries use the same namespace, and
<   # are all built from PIC.
<   case $host_os in
<   aix3*)
<     test "$enable_shared" = yes && enable_static=no
<     if test -n "$RANLIB"; then
<       archive_cmds="$archive_cmds~\$RANLIB \$lib"
<       postinstall_cmds='$RANLIB $lib'
<     fi
<     ;;
< 
<   aix[[4-9]]*)
<     if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
<       test "$enable_shared" = yes && enable_static=no
<     fi
<     ;;
<   esac
<   AC_MSG_RESULT([$enable_shared])
< 
<   AC_MSG_CHECKING([whether to build static libraries])
<   # Make sure either enable_shared or enable_static is yes.
<   test "$enable_shared" = yes || enable_static=yes
<   AC_MSG_RESULT([$enable_static])
< 
<   _LT_CONFIG($1)
< fi
< AC_LANG_POP
< CC="$lt_save_CC"
< ])# _LT_LANG_C_CONFIG
< 
< 
< # _LT_PROG_CXX
< # ------------
< # Since AC_PROG_CXX is broken, in that it returns g++ if there is no c++
< # compiler, we have our own version here.
< m4_defun([_LT_PROG_CXX],
< [
< pushdef([AC_MSG_ERROR], [_lt_caught_CXX_error=yes])
< AC_PROG_CXX
< if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
<     ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
<     (test "X$CXX" != "Xg++"))) ; then
<   AC_PROG_CXXCPP
< else
<   _lt_caught_CXX_error=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_CXX
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_CXX], [])
< 
< 
< # _LT_LANG_CXX_CONFIG([TAG])
< # --------------------------
< # Ensure that the configuration variables for a C++ compiler are suitably
< # defined.  These variables are subsequently used by _LT_CONFIG to write
< # the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_CXX_CONFIG],
< [AC_REQUIRE([_LT_PROG_CXX])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< m4_require([_LT_DECL_EGREP])dnl
< 
< AC_LANG_PUSH(C++)
< _LT_TAGVAR(archive_cmds_need_lc, $1)=no
< _LT_TAGVAR(allow_undefined_flag, $1)=
< _LT_TAGVAR(always_export_symbols, $1)=no
< _LT_TAGVAR(archive_expsym_cmds, $1)=
< _LT_TAGVAR(compiler_needs_object, $1)=no
< _LT_TAGVAR(export_dynamic_flag_spec, $1)=
< _LT_TAGVAR(hardcode_direct, $1)=no
< _LT_TAGVAR(hardcode_direct_absolute, $1)=no
< _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
< _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
< _LT_TAGVAR(hardcode_libdir_separator, $1)=
< _LT_TAGVAR(hardcode_minus_L, $1)=no
< _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
< _LT_TAGVAR(hardcode_automatic, $1)=no
< _LT_TAGVAR(inherit_rpath, $1)=no
< _LT_TAGVAR(module_cmds, $1)=
< _LT_TAGVAR(module_expsym_cmds, $1)=
< _LT_TAGVAR(link_all_deplibs, $1)=unknown
< _LT_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
< _LT_TAGVAR(no_undefined_flag, $1)=
< _LT_TAGVAR(whole_archive_flag_spec, $1)=
< _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=no
< 
< # Source file extension for C++ test sources.
< ac_ext=cpp
< 
< # Object file extension for compiled C++ test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # No sense in running all these tests if we already determined that
< # the CXX compiler isn't working.  Some variables (like enable_shared)
< # are currently assumed to apply to all compilers on this platform,
< # and will be corrupted by setting them based on a non-working compiler.
< if test "$_lt_caught_CXX_error" != yes; then
<   # Code to be used in simple compile tests
<   lt_simple_compile_test_code="int some_variable = 0;"
< 
<   # Code to be used in simple link tests
<   lt_simple_link_test_code='int main(int, char *[[]]) { return(0); }'
< 
<   # ltmain only uses $CC for tagged configurations so make sure $CC is set.
<   _LT_TAG_COMPILER
< 
<   # save warnings/boilerplate of simple test code
<   _LT_COMPILER_BOILERPLATE
<   _LT_LINKER_BOILERPLATE
< 
<   # Allow CC to be a program name with arguments.
<   lt_save_CC=$CC
<   lt_save_LD=$LD
<   lt_save_GCC=$GCC
<   GCC=$GXX
<   lt_save_with_gnu_ld=$with_gnu_ld
<   lt_save_path_LD=$lt_cv_path_LD
<   if test -n "${lt_cv_prog_gnu_ldcxx+set}"; then
<     lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
<   else
<     $as_unset lt_cv_prog_gnu_ld
<   fi
<   if test -n "${lt_cv_path_LDCXX+set}"; then
<     lt_cv_path_LD=$lt_cv_path_LDCXX
<   else
<     $as_unset lt_cv_path_LD
<   fi
<   test -z "${LDCXX+set}" || LD=$LDCXX
<   CC=${CXX-"c++"}
<   compiler=$CC
<   _LT_TAGVAR(compiler, $1)=$CC
<   _LT_CC_BASENAME([$compiler])
< 
<   if test -n "$compiler"; then
<     # We don't want -fno-exception when compiling C++ code, so set the
<     # no_builtin_flag separately
<     if test "$GXX" = yes; then
<       _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin'
<     else
<       _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=
<     fi
< 
<     if test "$GXX" = yes; then
<       # Set up default GNU C++ configuration
< 
<       LT_PATH_LD
< 
<       # Check if GNU C++ uses GNU ld as the underlying linker, since the
<       # archiving commands below assume that GNU ld is being used.
<       if test "$with_gnu_ld" = yes; then
<         _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
<         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
< 
<         _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<         _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
< 
<         # If archive_cmds runs LD, not CC, wlarc should be empty
<         # XXX I think wlarc can be eliminated in ltcf-cxx, but I need to
<         #     investigate it a little bit more. (MM)
<         wlarc='${wl}'
< 
<         # ancient GNU ld didn't support --whole-archive et. al.
<         if eval "`$CC -print-prog-name=ld` --help 2>&1" |
< 	  $GREP 'no-whole-archive' > /dev/null; then
<           _LT_TAGVAR(whole_archive_flag_spec, $1)="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
<         else
<           _LT_TAGVAR(whole_archive_flag_spec, $1)=
<         fi
<       else
<         with_gnu_ld=no
<         wlarc=
< 
<         # A generic and very simple default shared library creation
<         # command for GNU C++ for the case where it uses the native
<         # linker, instead of GNU ld.  If possible, this setting should
<         # overridden to take advantage of the native linker features on
<         # the platform it is being used on.
<         _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
<       fi
< 
<       # Commands to make compiler produce verbose output that lists
<       # what "hidden" libraries, object files and flags are used when
<       # linking a shared library.
<       output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
< 
<     else
<       GXX=no
<       with_gnu_ld=no
<       wlarc=
<     fi
< 
<     # PORTME: fill in a description of your system's C++ link characteristics
<     AC_MSG_CHECKING([whether the $compiler linker ($LD) supports shared libraries])
<     _LT_TAGVAR(ld_shlibs, $1)=yes
<     case $host_os in
<       aix3*)
<         # FIXME: insert proper C++ library support
<         _LT_TAGVAR(ld_shlibs, $1)=no
<         ;;
<       aix[[4-9]]*)
<         if test "$host_cpu" = ia64; then
<           # On IA64, the linker does run time linking by default, so we don't
<           # have to do anything special.
<           aix_use_runtimelinking=no
<           exp_sym_flag='-Bexport'
<           no_entry_flag=""
<         else
<           aix_use_runtimelinking=no
< 
<           # Test if we are trying to use run time linking or normal
<           # AIX style linking. If -brtl is somewhere in LDFLAGS, we
<           # need to do runtime linking.
<           case $host_os in aix4.[[23]]|aix4.[[23]].*|aix[[5-9]]*)
< 	    for ld_flag in $LDFLAGS; do
< 	      case $ld_flag in
< 	      *-brtl*)
< 	        aix_use_runtimelinking=yes
< 	        break
< 	        ;;
< 	      esac
< 	    done
< 	    ;;
<           esac
< 
<           exp_sym_flag='-bexport'
<           no_entry_flag='-bnoentry'
<         fi
< 
<         # When large executables or shared objects are built, AIX ld can
<         # have problems creating the table of contents.  If linking a library
<         # or program results in "error TOC overflow" add -mminimal-toc to
<         # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
<         # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.
< 
<         _LT_TAGVAR(archive_cmds, $1)=''
<         _LT_TAGVAR(hardcode_direct, $1)=yes
<         _LT_TAGVAR(hardcode_direct_absolute, $1)=yes
<         _LT_TAGVAR(hardcode_libdir_separator, $1)=':'
<         _LT_TAGVAR(link_all_deplibs, $1)=yes
<         _LT_TAGVAR(file_list_spec, $1)='${wl}-f,'
< 
<         if test "$GXX" = yes; then
<           case $host_os in aix4.[[012]]|aix4.[[012]].*)
<           # We only want to do this on AIX 4.2 and lower, the check
<           # below for broken collect2 doesn't work under 4.3+
< 	  collect2name=`${CC} -print-prog-name=collect2`
< 	  if test -f "$collect2name" &&
< 	     strings "$collect2name" | $GREP resolve_lib_name >/dev/null
< 	  then
< 	    # We have reworked collect2
< 	    :
< 	  else
< 	    # We have old collect2
< 	    _LT_TAGVAR(hardcode_direct, $1)=unsupported
< 	    # It fails to find uninstalled libraries when the uninstalled
< 	    # path is not listed in the libpath.  Setting hardcode_minus_L
< 	    # to unsupported forces relinking
< 	    _LT_TAGVAR(hardcode_minus_L, $1)=yes
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
< 	    _LT_TAGVAR(hardcode_libdir_separator, $1)=
< 	  fi
<           esac
<           shared_flag='-shared'
< 	  if test "$aix_use_runtimelinking" = yes; then
< 	    shared_flag="$shared_flag "'${wl}-G'
< 	  fi
<         else
<           # not using gcc
<           if test "$host_cpu" = ia64; then
< 	  # VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
< 	  # chokes on -Wl,-G. The following line is correct:
< 	  shared_flag='-G'
<           else
< 	    if test "$aix_use_runtimelinking" = yes; then
< 	      shared_flag='${wl}-G'
< 	    else
< 	      shared_flag='${wl}-bM:SRE'
< 	    fi
<           fi
<         fi
< 
<         _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-bexpall'
<         # It seems that -bexpall does not export symbols beginning with
<         # underscore (_), so it is better to generate a list of symbols to
< 	# export.
<         _LT_TAGVAR(always_export_symbols, $1)=yes
<         if test "$aix_use_runtimelinking" = yes; then
<           # Warning - without using the other runtime loading flags (-brtl),
<           # -berok will link without error, but may produce a broken library.
<           _LT_TAGVAR(allow_undefined_flag, $1)='-berok'
<           # Determine the default libpath from the value encoded in an empty
<           # executable.
<           _LT_SYS_MODULE_PATH_AIX
<           _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'"$aix_libpath"
< 
<           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then $ECHO "X${wl}${allow_undefined_flag}" | $Xsed; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
<         else
<           if test "$host_cpu" = ia64; then
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
< 	    _LT_TAGVAR(allow_undefined_flag, $1)="-z nodefs"
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
<           else
< 	    # Determine the default libpath from the value encoded in an
< 	    # empty executable.
< 	    _LT_SYS_MODULE_PATH_AIX
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'"$aix_libpath"
< 	    # Warning - without using the other run time loading flags,
< 	    # -berok will link without error, but may produce a broken library.
< 	    _LT_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
< 	    _LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
< 	    # Exported symbols can be pulled into shared objects from archives
< 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='$convenience'
< 	    _LT_TAGVAR(archive_cmds_need_lc, $1)=yes
< 	    # This is similar to how AIX traditionally builds its shared
< 	    # libraries.
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
<           fi
<         fi
<         ;;
< 
<       beos*)
< 	if $LD --help 2>&1 | $GREP ': supported targets:.* elf' > /dev/null; then
< 	  _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
< 	  # Joseph Beckenbach <jrb3@best.com> says some releases of gcc
< 	  # support --undefined.  This deserves some investigation.  FIXME
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	else
< 	  _LT_TAGVAR(ld_shlibs, $1)=no
< 	fi
< 	;;
< 
<       chorus*)
<         case $cc_basename in
<           *)
< 	  # FIXME: insert proper C++ library support
< 	  _LT_TAGVAR(ld_shlibs, $1)=no
< 	  ;;
<         esac
<         ;;
< 
<       cygwin* | mingw* | pw32* | cegcc*)
<         # _LT_TAGVAR(hardcode_libdir_flag_spec, $1) is actually meaningless,
<         # as there is no search path for DLLs.
<         _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
<         _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
<         _LT_TAGVAR(always_export_symbols, $1)=no
<         _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
< 
<         if $LD --help 2>&1 | $GREP 'auto-import' > /dev/null; then
<           _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
<           # If the export-symbols file already is a .def file (1st line
<           # is EXPORTS), use it as is; otherwise, prepend...
<           _LT_TAGVAR(archive_expsym_cmds, $1)='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
< 	    cp $export_symbols $output_objdir/$soname.def;
<           else
< 	    echo EXPORTS > $output_objdir/$soname.def;
< 	    cat $export_symbols >> $output_objdir/$soname.def;
<           fi~
<           $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
<         else
<           _LT_TAGVAR(ld_shlibs, $1)=no
<         fi
<         ;;
<       darwin* | rhapsody*)
<         _LT_DARWIN_LINKER_FEATURES($1)
< 	;;
< 
<       dgux*)
<         case $cc_basename in
<           ec++*)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           ghcx*)
< 	    # Green Hills C++ Compiler
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           *)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<         esac
<         ;;
< 
<       freebsd[[12]]*)
<         # C++ shared libraries reported to be fairly broken before
< 	# switch to ELF
<         _LT_TAGVAR(ld_shlibs, $1)=no
<         ;;
< 
<       freebsd-elf*)
<         _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<         ;;
< 
<       freebsd* | dragonfly*)
<         # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
<         # conventions
<         _LT_TAGVAR(ld_shlibs, $1)=yes
<         ;;
< 
<       gnu*)
<         ;;
< 
<       hpux9*)
<         _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
<         _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<         _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
<         _LT_TAGVAR(hardcode_direct, $1)=yes
<         _LT_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
< 				             # but as the default
< 				             # location of the library.
< 
<         case $cc_basename in
<           CC*)
<             # FIXME: insert proper C++ library support
<             _LT_TAGVAR(ld_shlibs, $1)=no
<             ;;
<           aCC*)
<             _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -b ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
<             # Commands to make compiler produce verbose output that lists
<             # what "hidden" libraries, object files and flags are used when
<             # linking a shared library.
<             #
<             # There doesn't appear to be a way to prevent this compiler from
<             # explicitly linking system object files so we need to strip them
<             # from the output so that they don't get included in the library
<             # dependencies.
<             output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $EGREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
<             ;;
<           *)
<             if test "$GXX" = yes; then
<               _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared -nostdlib -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
<             else
<               # FIXME: insert proper C++ library support
<               _LT_TAGVAR(ld_shlibs, $1)=no
<             fi
<             ;;
<         esac
<         ;;
< 
<       hpux10*|hpux11*)
<         if test $with_gnu_ld = no; then
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
< 	  _LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
<           case $host_cpu in
<             hppa*64*|ia64*)
<               ;;
<             *)
< 	      _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
<               ;;
<           esac
<         fi
<         case $host_cpu in
<           hppa*64*|ia64*)
<             _LT_TAGVAR(hardcode_direct, $1)=no
<             _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<             ;;
<           *)
<             _LT_TAGVAR(hardcode_direct, $1)=yes
<             _LT_TAGVAR(hardcode_direct_absolute, $1)=yes
<             _LT_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
< 					         # but as the default
< 					         # location of the library.
<             ;;
<         esac
< 
<         case $cc_basename in
<           CC*)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           aCC*)
< 	    case $host_cpu in
< 	      hppa*64*)
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	        ;;
< 	      ia64*)
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	        ;;
< 	      *)
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	        ;;
< 	    esac
< 	    # Commands to make compiler produce verbose output that lists
< 	    # what "hidden" libraries, object files and flags are used when
< 	    # linking a shared library.
< 	    #
< 	    # There doesn't appear to be a way to prevent this compiler from
< 	    # explicitly linking system object files so we need to strip them
< 	    # from the output so that they don't get included in the library
< 	    # dependencies.
< 	    output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $GREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
< 	    ;;
<           *)
< 	    if test "$GXX" = yes; then
< 	      if test $with_gnu_ld = no; then
< 	        case $host_cpu in
< 	          hppa*64*)
< 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	            ;;
< 	          ia64*)
< 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	            ;;
< 	          *)
< 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	            ;;
< 	        esac
< 	      fi
< 	    else
< 	      # FIXME: insert proper C++ library support
< 	      _LT_TAGVAR(ld_shlibs, $1)=no
< 	    fi
< 	    ;;
<         esac
<         ;;
< 
<       interix[[3-9]]*)
< 	_LT_TAGVAR(hardcode_direct, $1)=no
< 	_LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	_LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
< 	# Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
< 	# Instead, shared libraries are loaded at an image base (0x10000000 by
< 	# default) and relocated if they conflict, which is a slow very memory
< 	# consuming and fragmenting process.  To avoid this, we pick a random,
< 	# 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
< 	# time.  Moving up from 0x10000000 also allows more sbrk(2) space.
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
< 	;;
<       irix5* | irix6*)
<         case $cc_basename in
<           CC*)
< 	    # SGI C++
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 
< 	    # Archives containing C++ object files must be created using
< 	    # "CC -ar", where "CC" is the IRIX C++ compiler.  This is
< 	    # necessary to make sure instantiated templates are included
< 	    # in the archive.
< 	    _LT_TAGVAR(old_archive_cmds, $1)='$CC -ar -WR,-u -o $oldlib $oldobjs'
< 	    ;;
<           *)
< 	    if test "$GXX" = yes; then
< 	      if test "$with_gnu_ld" = no; then
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
< 	      else
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` -o $lib'
< 	      fi
< 	    fi
< 	    _LT_TAGVAR(link_all_deplibs, $1)=yes
< 	    ;;
<         esac
<         _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
<         _LT_TAGVAR(hardcode_libdir_separator, $1)=:
<         _LT_TAGVAR(inherit_rpath, $1)=yes
<         ;;
< 
<       linux* | k*bsd*-gnu)
<         case $cc_basename in
<           KCC*)
< 	    # Kuck and Associates, Inc. (KAI) C++ Compiler
< 
< 	    # KCC will only create a shared library if the output file
< 	    # ends with ".so" (or ".sl" for HP-UX), so rename the library
< 	    # to its proper name (with version) after linking.
< 	    _LT_TAGVAR(archive_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib ${wl}-retain-symbols-file,$export_symbols; mv \$templib $lib'
< 	    # Commands to make compiler produce verbose output that lists
< 	    # what "hidden" libraries, object files and flags are used when
< 	    # linking a shared library.
< 	    #
< 	    # There doesn't appear to be a way to prevent this compiler from
< 	    # explicitly linking system object files so we need to strip them
< 	    # from the output so that they don't get included in the library
< 	    # dependencies.
< 	    output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1 | $GREP "ld"`; rm -f libconftest$shared_ext; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
< 
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	    _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
< 
< 	    # Archives containing C++ object files must be created using
< 	    # "CC -Bstatic", where "CC" is the KAI C++ compiler.
< 	    _LT_TAGVAR(old_archive_cmds, $1)='$CC -Bstatic -o $oldlib $oldobjs'
< 	    ;;
< 	  icpc* | ecpc* )
< 	    # Intel C++
< 	    with_gnu_ld=yes
< 	    # version 8.0 and above of icpc choke on multiply defined symbols
< 	    # if we add $predep_objects and $postdep_objects, however 7.1 and
< 	    # earlier do not add the objects themselves.
< 	    case `$CC -V 2>&1` in
< 	      *"Version 7."*)
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 		_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
< 		;;
< 	      *)  # Version 8.0 or newer
< 	        tmp_idyn=
< 	        case $host_cpu in
< 		  ia64*) tmp_idyn=' -i_dynamic';;
< 		esac
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 		_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
< 		;;
< 	    esac
< 	    _LT_TAGVAR(archive_cmds_need_lc, $1)=no
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	    _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
< 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
< 	    ;;
<           pgCC* | pgcpp*)
<             # Portland Group C++ compiler
< 	    case `$CC -V` in
< 	    *pgCC\ [[1-5]]* | *pgcpp\ [[1-5]]*)
< 	      _LT_TAGVAR(prelink_cmds, $1)='tpldir=Template.dir~
< 		rm -rf $tpldir~
< 		$CC --prelink_objects --instantiation_dir $tpldir $objs $libobjs $compile_deplibs~
< 		compile_command="$compile_command `find $tpldir -name \*.o | $NL2SP`"'
< 	      _LT_TAGVAR(old_archive_cmds, $1)='tpldir=Template.dir~
< 		rm -rf $tpldir~
< 		$CC --prelink_objects --instantiation_dir $tpldir $oldobjs$old_deplibs~
< 		$AR $AR_FLAGS $oldlib$oldobjs$old_deplibs `find $tpldir -name \*.o | $NL2SP`~
< 		$RANLIB $oldlib'
< 	      _LT_TAGVAR(archive_cmds, $1)='tpldir=Template.dir~
< 		rm -rf $tpldir~
< 		$CC --prelink_objects --instantiation_dir $tpldir $predep_objects $libobjs $deplibs $convenience $postdep_objects~
< 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
< 	      _LT_TAGVAR(archive_expsym_cmds, $1)='tpldir=Template.dir~
< 		rm -rf $tpldir~
< 		$CC --prelink_objects --instantiation_dir $tpldir $predep_objects $libobjs $deplibs $convenience $postdep_objects~
< 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'
< 	      ;;
< 	    *) # Version 6 will use weak symbols
< 	      _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
< 	      _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'
< 	      ;;
< 	    esac
< 
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}--rpath ${wl}$libdir'
< 	    _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
< 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
<             ;;
< 	  cxx*)
< 	    # Compaq C++
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname  -o $lib ${wl}-retain-symbols-file $wl$export_symbols'
< 
< 	    runpath_var=LD_RUN_PATH
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
< 	    _LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
< 	    # Commands to make compiler produce verbose output that lists
< 	    # what "hidden" libraries, object files and flags are used when
< 	    # linking a shared library.
< 	    #
< 	    # There doesn't appear to be a way to prevent this compiler from
< 	    # explicitly linking system object files so we need to strip them
< 	    # from the output so that they don't get included in the library
< 	    # dependencies.
< 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld"`; templist=`$ECHO "X$templist" | $Xsed -e "s/\(^.*ld.*\)\( .*ld .*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
< 	    ;;
< 	  xl*)
< 	    # IBM XL 8.0 on PPC, with GNU ld
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
< 	    _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -qmkshrobj $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	    if test "x$supports_anon_versioning" = xyes; then
< 	      _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $output_objdir/$libname.ver~
< 		cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
< 		echo "local: *; };" >> $output_objdir/$libname.ver~
< 		$CC -qmkshrobj $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
< 	    fi
< 	    ;;
< 	  *)
< 	    case `$CC -V 2>&1 | sed 5q` in
< 	    *Sun\ C*)
< 	      # Sun C++ 5.9
< 	      _LT_TAGVAR(no_undefined_flag, $1)=' -zdefs'
< 	      _LT_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	      _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file ${wl}$export_symbols'
< 	      _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
< 	      _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
< 	      _LT_TAGVAR(compiler_needs_object, $1)=yes
< 
< 	      # Not sure whether something based on
< 	      # $CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1
< 	      # would be better.
< 	      output_verbose_link_cmd='echo'
< 
< 	      # Archives containing C++ object files must be created using
< 	      # "CC -xar", where "CC" is the Sun C++ compiler.  This is
< 	      # necessary to make sure instantiated templates are included
< 	      # in the archive.
< 	      _LT_TAGVAR(old_archive_cmds, $1)='$CC -xar -o $oldlib $oldobjs'
< 	      ;;
< 	    esac
< 	    ;;
< 	esac
< 	;;
< 
<       lynxos*)
<         # FIXME: insert proper C++ library support
< 	_LT_TAGVAR(ld_shlibs, $1)=no
< 	;;
< 
<       m88k*)
<         # FIXME: insert proper C++ library support
<         _LT_TAGVAR(ld_shlibs, $1)=no
< 	;;
< 
<       mvs*)
<         case $cc_basename in
<           cxx*)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
< 	  *)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
< 	esac
< 	;;
< 
<       netbsd*)
<         if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable  -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'
< 	  wlarc=
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
< 	  _LT_TAGVAR(hardcode_direct, $1)=yes
< 	  _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	fi
< 	# Workaround some broken pre-1.5 toolchains
< 	output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
< 	;;
< 
<       *nto* | *qnx*)
<         _LT_TAGVAR(ld_shlibs, $1)=yes
< 	;;
< 
<       openbsd2*)
<         # C++ shared libraries are fairly broken
< 	_LT_TAGVAR(ld_shlibs, $1)=no
< 	;;
< 
<       openbsd*)
< 	if test -f /usr/libexec/ld.so; then
< 	  _LT_TAGVAR(hardcode_direct, $1)=yes
< 	  _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	  _LT_TAGVAR(hardcode_direct_absolute, $1)=yes
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
< 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file,$export_symbols -o $lib'
< 	    _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
< 	    _LT_TAGVAR(whole_archive_flag_spec, $1)="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
< 	  fi
< 	  output_verbose_link_cmd=echo
< 	else
< 	  _LT_TAGVAR(ld_shlibs, $1)=no
< 	fi
< 	;;
< 
<       osf3* | osf4* | osf5*)
<         case $cc_basename in
<           KCC*)
< 	    # Kuck and Associates, Inc. (KAI) C++ Compiler
< 
< 	    # KCC will only create a shared library if the output file
< 	    # ends with ".so" (or ".sl" for HP-UX), so rename the library
< 	    # to its proper name (with version) after linking.
< 	    _LT_TAGVAR(archive_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo "$lib" | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'
< 
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
< 	    _LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
< 	    # Archives containing C++ object files must be created using
< 	    # the KAI C++ compiler.
< 	    case $host in
< 	      osf3*) _LT_TAGVAR(old_archive_cmds, $1)='$CC -Bstatic -o $oldlib $oldobjs' ;;
< 	      *) _LT_TAGVAR(old_archive_cmds, $1)='$CC -o $oldlib $oldobjs' ;;
< 	    esac
< 	    ;;
<           RCC*)
< 	    # Rational C++ 2.4.1
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           cxx*)
< 	    case $host in
< 	      osf3*)
< 	        _LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $soname `test -n "$verstring" && $ECHO "X${wl}-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	        _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
< 		;;
< 	      *)
< 	        _LT_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	        _LT_TAGVAR(archive_expsym_cmds, $1)='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done~
< 	          echo "-hidden">> $lib.exp~
< 	          $CC -shared$allow_undefined_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname ${wl}-input ${wl}$lib.exp  `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib~
< 	          $RM $lib.exp'
< 	        _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
< 		;;
< 	    esac
< 
< 	    _LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
< 	    # Commands to make compiler produce verbose output that lists
< 	    # what "hidden" libraries, object files and flags are used when
< 	    # linking a shared library.
< 	    #
< 	    # There doesn't appear to be a way to prevent this compiler from
< 	    # explicitly linking system object files so we need to strip them
< 	    # from the output so that they don't get included in the library
< 	    # dependencies.
< 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld" | $GREP -v "ld:"`; templist=`$ECHO "X$templist" | $Xsed -e "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
< 	    ;;
< 	  *)
< 	    if test "$GXX" = yes && test "$with_gnu_ld" = no; then
< 	      _LT_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
< 	      case $host in
< 	        osf3*)
< 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
< 		  ;;
< 	        *)
< 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
< 		  ;;
< 	      esac
< 
< 	      _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
< 	      _LT_TAGVAR(hardcode_libdir_separator, $1)=:
< 
< 	      # Commands to make compiler produce verbose output that lists
< 	      # what "hidden" libraries, object files and flags are used when
< 	      # linking a shared library.
< 	      output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
< 
< 	    else
< 	      # FIXME: insert proper C++ library support
< 	      _LT_TAGVAR(ld_shlibs, $1)=no
< 	    fi
< 	    ;;
<         esac
<         ;;
< 
<       psos*)
<         # FIXME: insert proper C++ library support
<         _LT_TAGVAR(ld_shlibs, $1)=no
<         ;;
< 
<       sunos4*)
<         case $cc_basename in
<           CC*)
< 	    # Sun C++ 4.x
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           lcc*)
< 	    # Lucid
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           *)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<         esac
<         ;;
< 
<       solaris*)
<         case $cc_basename in
<           CC*)
< 	    # Sun C++ 4.2, 5.x and Centerline C++
<             _LT_TAGVAR(archive_cmds_need_lc,$1)=yes
< 	    _LT_TAGVAR(no_undefined_flag, $1)=' -zdefs'
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag}  -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 	      $CC -G${allow_undefined_flag} ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$RM $lib.exp'
< 
< 	    _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
< 	    _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	    case $host_os in
< 	      solaris2.[[0-5]] | solaris2.[[0-5]].*) ;;
< 	      *)
< 		# The compiler driver will combine and reorder linker options,
< 		# but understands `-z linker_flag'.
< 	        # Supported since Solaris 2.6 (maybe 2.5.1?)
< 		_LT_TAGVAR(whole_archive_flag_spec, $1)='-z allextract$convenience -z defaultextract'
< 	        ;;
< 	    esac
< 	    _LT_TAGVAR(link_all_deplibs, $1)=yes
< 
< 	    output_verbose_link_cmd='echo'
< 
< 	    # Archives containing C++ object files must be created using
< 	    # "CC -xar", where "CC" is the Sun C++ compiler.  This is
< 	    # necessary to make sure instantiated templates are included
< 	    # in the archive.
< 	    _LT_TAGVAR(old_archive_cmds, $1)='$CC -xar -o $oldlib $oldobjs'
< 	    ;;
<           gcx*)
< 	    # Green Hills C++ Compiler
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
< 
< 	    # The C++ compiler must be used to create the archive.
< 	    _LT_TAGVAR(old_archive_cmds, $1)='$CC $LDFLAGS -archive -o $oldlib $oldobjs'
< 	    ;;
<           *)
< 	    # GNU C++ compiler with Solaris linker
< 	    if test "$GXX" = yes && test "$with_gnu_ld" = no; then
< 	      _LT_TAGVAR(no_undefined_flag, $1)=' ${wl}-z ${wl}defs'
< 	      if $CC --version | $GREP -v '^2\.7' > /dev/null; then
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
< 	        _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 		  $CC -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$RM $lib.exp'
< 
< 	        # Commands to make compiler produce verbose output that lists
< 	        # what "hidden" libraries, object files and flags are used when
< 	        # linking a shared library.
< 	        output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
< 	      else
< 	        # g++ 2.7 appears to require `-G' NOT `-shared' on this
< 	        # platform.
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -G -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
< 	        _LT_TAGVAR(archive_expsym_cmds, $1)='echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~echo "local: *; };" >> $lib.exp~
< 		  $CC -G -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$RM $lib.exp'
< 
< 	        # Commands to make compiler produce verbose output that lists
< 	        # what "hidden" libraries, object files and flags are used when
< 	        # linking a shared library.
< 	        output_verbose_link_cmd='$CC -G $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
< 	      fi
< 
< 	      _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $wl$libdir'
< 	      case $host_os in
< 		solaris2.[[0-5]] | solaris2.[[0-5]].*) ;;
< 		*)
< 		  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
< 		  ;;
< 	      esac
< 	    fi
< 	    ;;
<         esac
<         ;;
< 
<     sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[[01]].[[10]]* | unixware7* | sco3.2v5.0.[[024]]*)
<       _LT_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
<       _LT_TAGVAR(archive_cmds_need_lc, $1)=no
<       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
<       runpath_var='LD_RUN_PATH'
< 
<       case $cc_basename in
<         CC*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
< 	*)
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	  ;;
<       esac
<       ;;
< 
<       sysv5* | sco3.2v5* | sco5v6*)
< 	# Note: We can NOT use -z defs as we might desire, because we do not
< 	# link with -lc, and that would cause any symbols used from libc to
< 	# always be unresolved, which means just about no library would
< 	# ever link correctly.  If we're not using GNU ld we use -z text
< 	# though, which does catch some bad symbols but isn't as heavy-handed
< 	# as -z defs.
< 	_LT_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
< 	_LT_TAGVAR(allow_undefined_flag, $1)='${wl}-z,nodefs'
< 	_LT_TAGVAR(archive_cmds_need_lc, $1)=no
< 	_LT_TAGVAR(hardcode_shlibpath_var, $1)=no
< 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R,$libdir'
< 	_LT_TAGVAR(hardcode_libdir_separator, $1)=':'
< 	_LT_TAGVAR(link_all_deplibs, $1)=yes
< 	_LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
< 	runpath_var='LD_RUN_PATH'
< 
< 	case $cc_basename in
<           CC*)
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	    ;;
< 	  *)
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	    _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
< 	    ;;
< 	esac
<       ;;
< 
<       tandem*)
<         case $cc_basename in
<           NCC*)
< 	    # NonStop-UX NCC 3.20
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<           *)
< 	    # FIXME: insert proper C++ library support
< 	    _LT_TAGVAR(ld_shlibs, $1)=no
< 	    ;;
<         esac
<         ;;
< 
<       vxworks*)
<         # FIXME: insert proper C++ library support
<         _LT_TAGVAR(ld_shlibs, $1)=no
<         ;;
< 
<       *)
<         # FIXME: insert proper C++ library support
<         _LT_TAGVAR(ld_shlibs, $1)=no
<         ;;
<     esac
< 
<     AC_MSG_RESULT([$_LT_TAGVAR(ld_shlibs, $1)])
<     test "$_LT_TAGVAR(ld_shlibs, $1)" = no && can_build_shared=no
< 
<     _LT_TAGVAR(GCC, $1)="$GXX"
<     _LT_TAGVAR(LD, $1)="$LD"
< 
<     ## CAVEAT EMPTOR:
<     ## There is no encapsulation within the following macros, do not change
<     ## the running order or otherwise move them around unless you know exactly
<     ## what you are doing...
<     _LT_SYS_HIDDEN_LIBDEPS($1)
<     _LT_COMPILER_PIC($1)
<     _LT_COMPILER_C_O($1)
<     _LT_COMPILER_FILE_LOCKS($1)
<     _LT_LINKER_SHLIBS($1)
<     _LT_SYS_DYNAMIC_LINKER($1)
<     _LT_LINKER_HARDCODE_LIBPATH($1)
< 
<     _LT_CONFIG($1)
<   fi # test -n "$compiler"
< 
<   CC=$lt_save_CC
<   LDCXX=$LD
<   LD=$lt_save_LD
<   GCC=$lt_save_GCC
<   with_gnu_ld=$lt_save_with_gnu_ld
<   lt_cv_path_LDCXX=$lt_cv_path_LD
<   lt_cv_path_LD=$lt_save_path_LD
<   lt_cv_prog_gnu_ldcxx=$lt_cv_prog_gnu_ld
<   lt_cv_prog_gnu_ld=$lt_save_with_gnu_ld
< fi # test "$_lt_caught_CXX_error" != yes
< 
< AC_LANG_POP
< ])# _LT_LANG_CXX_CONFIG
< 
< 
< # _LT_SYS_HIDDEN_LIBDEPS([TAGNAME])
< # ---------------------------------
< # Figure out "hidden" library dependencies from verbose
< # compiler output when linking a shared library.
< # Parse the compiler output and extract the necessary
< # objects, libraries and library flags.
< m4_defun([_LT_SYS_HIDDEN_LIBDEPS],
< [m4_require([_LT_FILEUTILS_DEFAULTS])dnl
< # Dependencies to place before and after the object being linked:
< _LT_TAGVAR(predep_objects, $1)=
< _LT_TAGVAR(postdep_objects, $1)=
< _LT_TAGVAR(predeps, $1)=
< _LT_TAGVAR(postdeps, $1)=
< _LT_TAGVAR(compiler_lib_search_path, $1)=
< 
< dnl we can't use the lt_simple_compile_test_code here,
< dnl because it contains code intended for an executable,
< dnl not a library.  It's possible we should let each
< dnl tag define a new lt_????_link_test_code variable,
< dnl but it's only used here...
< m4_if([$1], [], [cat > conftest.$ac_ext <<_LT_EOF
< int a;
< void foo (void) { a = 0; }
< _LT_EOF
< ], [$1], [CXX], [cat > conftest.$ac_ext <<_LT_EOF
< class Foo
< {
< public:
<   Foo (void) { a = 0; }
< private:
<   int a;
< };
< _LT_EOF
< ], [$1], [F77], [cat > conftest.$ac_ext <<_LT_EOF
<       subroutine foo
<       implicit none
<       integer*4 a
<       a=0
<       return
<       end
< _LT_EOF
< ], [$1], [FC], [cat > conftest.$ac_ext <<_LT_EOF
<       subroutine foo
<       implicit none
<       integer a
<       a=0
<       return
<       end
< _LT_EOF
< ], [$1], [GCJ], [cat > conftest.$ac_ext <<_LT_EOF
< public class foo {
<   private int a;
<   public void bar (void) {
<     a = 0;
<   }
< };
< _LT_EOF
< ])
< dnl Parse the compiler output and extract the necessary
< dnl objects, libraries and library flags.
< if AC_TRY_EVAL(ac_compile); then
<   # Parse the compiler output and extract the necessary
<   # objects, libraries and library flags.
< 
<   # Sentinel used to keep track of whether or not we are before
<   # the conftest object file.
<   pre_test_object_deps_done=no
< 
<   for p in `eval "$output_verbose_link_cmd"`; do
<     case $p in
< 
<     -L* | -R* | -l*)
<        # Some compilers place space between "-{L,R}" and the path.
<        # Remove the space.
<        if test $p = "-L" ||
<           test $p = "-R"; then
< 	 prev=$p
< 	 continue
<        else
< 	 prev=
<        fi
< 
<        if test "$pre_test_object_deps_done" = no; then
< 	 case $p in
< 	 -L* | -R*)
< 	   # Internal compiler library paths should come after those
< 	   # provided the user.  The postdeps already come after the
< 	   # user supplied libs so there is no need to process them.
< 	   if test -z "$_LT_TAGVAR(compiler_lib_search_path, $1)"; then
< 	     _LT_TAGVAR(compiler_lib_search_path, $1)="${prev}${p}"
< 	   else
< 	     _LT_TAGVAR(compiler_lib_search_path, $1)="${_LT_TAGVAR(compiler_lib_search_path, $1)} ${prev}${p}"
< 	   fi
< 	   ;;
< 	 # The "-l" case would never come before the object being
< 	 # linked, so don't bother handling this case.
< 	 esac
<        else
< 	 if test -z "$_LT_TAGVAR(postdeps, $1)"; then
< 	   _LT_TAGVAR(postdeps, $1)="${prev}${p}"
< 	 else
< 	   _LT_TAGVAR(postdeps, $1)="${_LT_TAGVAR(postdeps, $1)} ${prev}${p}"
< 	 fi
<        fi
<        ;;
< 
<     *.$objext)
<        # This assumes that the test object file only shows up
<        # once in the compiler output.
<        if test "$p" = "conftest.$objext"; then
< 	 pre_test_object_deps_done=yes
< 	 continue
<        fi
< 
<        if test "$pre_test_object_deps_done" = no; then
< 	 if test -z "$_LT_TAGVAR(predep_objects, $1)"; then
< 	   _LT_TAGVAR(predep_objects, $1)="$p"
< 	 else
< 	   _LT_TAGVAR(predep_objects, $1)="$_LT_TAGVAR(predep_objects, $1) $p"
< 	 fi
<        else
< 	 if test -z "$_LT_TAGVAR(postdep_objects, $1)"; then
< 	   _LT_TAGVAR(postdep_objects, $1)="$p"
< 	 else
< 	   _LT_TAGVAR(postdep_objects, $1)="$_LT_TAGVAR(postdep_objects, $1) $p"
< 	 fi
<        fi
<        ;;
< 
<     *) ;; # Ignore the rest.
< 
<     esac
<   done
< 
<   # Clean up.
<   rm -f a.out a.exe
< else
<   echo "libtool.m4: error: problem compiling $1 test program"
< fi
< 
< $RM -f confest.$objext
< 
< # PORTME: override above test on systems where it is broken
< m4_if([$1], [CXX],
< [case $host_os in
< interix[[3-9]]*)
<   # Interix 3.5 installs completely hosed .la files for C++, so rather than
<   # hack all around it, let's just trust "g++" to DTRT.
<   _LT_TAGVAR(predep_objects,$1)=
<   _LT_TAGVAR(postdep_objects,$1)=
<   _LT_TAGVAR(postdeps,$1)=
<   ;;
< 
< linux*)
<   case `$CC -V 2>&1 | sed 5q` in
<   *Sun\ C*)
<     # Sun C++ 5.9
< 
<     # The more standards-conforming stlport4 library is
<     # incompatible with the Cstd library. Avoid specifying
<     # it if it's in CXXFLAGS. Ignore libCrun as
<     # -library=stlport4 depends on it.
<     case " $CXX $CXXFLAGS " in
<     *" -library=stlport4 "*)
<       solaris_use_stlport4=yes
<       ;;
<     esac
< 
<     if test "$solaris_use_stlport4" != yes; then
<       _LT_TAGVAR(postdeps,$1)='-library=Cstd -library=Crun'
<     fi
<     ;;
<   esac
<   ;;
< 
< solaris*)
<   case $cc_basename in
<   CC*)
<     # The more standards-conforming stlport4 library is
<     # incompatible with the Cstd library. Avoid specifying
<     # it if it's in CXXFLAGS. Ignore libCrun as
<     # -library=stlport4 depends on it.
<     case " $CXX $CXXFLAGS " in
<     *" -library=stlport4 "*)
<       solaris_use_stlport4=yes
<       ;;
<     esac
< 
<     # Adding this requires a known-good setup of shared libraries for
<     # Sun compiler versions before 5.6, else PIC objects from an old
<     # archive will be linked into the output, leading to subtle bugs.
<     if test "$solaris_use_stlport4" != yes; then
<       _LT_TAGVAR(postdeps,$1)='-library=Cstd -library=Crun'
<     fi
<     ;;
<   esac
<   ;;
< esac
< ])
< 
< case " $_LT_TAGVAR(postdeps, $1) " in
< *" -lc "*) _LT_TAGVAR(archive_cmds_need_lc, $1)=no ;;
< esac
<  _LT_TAGVAR(compiler_lib_search_dirs, $1)=
< if test -n "${_LT_TAGVAR(compiler_lib_search_path, $1)}"; then
<  _LT_TAGVAR(compiler_lib_search_dirs, $1)=`echo " ${_LT_TAGVAR(compiler_lib_search_path, $1)}" | ${SED} -e 's! -L! !g' -e 's!^ !!'`
< fi
< _LT_TAGDECL([], [compiler_lib_search_dirs], [1],
<     [The directories searched by this compiler when creating a shared library])
< _LT_TAGDECL([], [predep_objects], [1],
<     [Dependencies to place before and after the objects being linked to
<     create a shared library])
< _LT_TAGDECL([], [postdep_objects], [1])
< _LT_TAGDECL([], [predeps], [1])
< _LT_TAGDECL([], [postdeps], [1])
< _LT_TAGDECL([], [compiler_lib_search_path], [1],
<     [The library search path used internally by the compiler when linking
<     a shared library])
< ])# _LT_SYS_HIDDEN_LIBDEPS
< 
< 
< # _LT_PROG_F77
< # ------------
< # Since AC_PROG_F77 is broken, in that it returns the empty string
< # if there is no fortran compiler, we have our own version here.
< m4_defun([_LT_PROG_F77],
< [
< pushdef([AC_MSG_ERROR], [_lt_disable_F77=yes])
< AC_PROG_F77
< if test -z "$F77" || test "X$F77" = "Xno"; then
<   _lt_disable_F77=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_F77
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_F77], [])
< 
< 
< # _LT_LANG_F77_CONFIG([TAG])
< # --------------------------
< # Ensure that the configuration variables for a Fortran 77 compiler are
< # suitably defined.  These variables are subsequently used by _LT_CONFIG
< # to write the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_F77_CONFIG],
< [AC_REQUIRE([_LT_PROG_F77])dnl
< AC_LANG_PUSH(Fortran 77)
< 
< _LT_TAGVAR(archive_cmds_need_lc, $1)=no
< _LT_TAGVAR(allow_undefined_flag, $1)=
< _LT_TAGVAR(always_export_symbols, $1)=no
< _LT_TAGVAR(archive_expsym_cmds, $1)=
< _LT_TAGVAR(export_dynamic_flag_spec, $1)=
< _LT_TAGVAR(hardcode_direct, $1)=no
< _LT_TAGVAR(hardcode_direct_absolute, $1)=no
< _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
< _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
< _LT_TAGVAR(hardcode_libdir_separator, $1)=
< _LT_TAGVAR(hardcode_minus_L, $1)=no
< _LT_TAGVAR(hardcode_automatic, $1)=no
< _LT_TAGVAR(inherit_rpath, $1)=no
< _LT_TAGVAR(module_cmds, $1)=
< _LT_TAGVAR(module_expsym_cmds, $1)=
< _LT_TAGVAR(link_all_deplibs, $1)=unknown
< _LT_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
< _LT_TAGVAR(no_undefined_flag, $1)=
< _LT_TAGVAR(whole_archive_flag_spec, $1)=
< _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=no
< 
< # Source file extension for f77 test sources.
< ac_ext=f
< 
< # Object file extension for compiled f77 test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # No sense in running all these tests if we already determined that
< # the F77 compiler isn't working.  Some variables (like enable_shared)
< # are currently assumed to apply to all compilers on this platform,
< # and will be corrupted by setting them based on a non-working compiler.
< if test "$_lt_disable_F77" != yes; then
<   # Code to be used in simple compile tests
<   lt_simple_compile_test_code="\
<       subroutine t
<       return
<       end
< "
< 
<   # Code to be used in simple link tests
<   lt_simple_link_test_code="\
<       program t
<       end
< "
< 
<   # ltmain only uses $CC for tagged configurations so make sure $CC is set.
<   _LT_TAG_COMPILER
< 
<   # save warnings/boilerplate of simple test code
<   _LT_COMPILER_BOILERPLATE
<   _LT_LINKER_BOILERPLATE
< 
<   # Allow CC to be a program name with arguments.
<   lt_save_CC="$CC"
<   lt_save_GCC=$GCC
<   CC=${F77-"f77"}
<   compiler=$CC
<   _LT_TAGVAR(compiler, $1)=$CC
<   _LT_CC_BASENAME([$compiler])
<   GCC=$G77
<   if test -n "$compiler"; then
<     AC_MSG_CHECKING([if libtool supports shared libraries])
<     AC_MSG_RESULT([$can_build_shared])
< 
<     AC_MSG_CHECKING([whether to build shared libraries])
<     test "$can_build_shared" = "no" && enable_shared=no
< 
<     # On AIX, shared libraries and static libraries use the same namespace, and
<     # are all built from PIC.
<     case $host_os in
<       aix3*)
<         test "$enable_shared" = yes && enable_static=no
<         if test -n "$RANLIB"; then
<           archive_cmds="$archive_cmds~\$RANLIB \$lib"
<           postinstall_cmds='$RANLIB $lib'
<         fi
<         ;;
<       aix[[4-9]]*)
< 	if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
< 	  test "$enable_shared" = yes && enable_static=no
< 	fi
<         ;;
<     esac
<     AC_MSG_RESULT([$enable_shared])
< 
<     AC_MSG_CHECKING([whether to build static libraries])
<     # Make sure either enable_shared or enable_static is yes.
<     test "$enable_shared" = yes || enable_static=yes
<     AC_MSG_RESULT([$enable_static])
< 
<     _LT_TAGVAR(GCC, $1)="$G77"
<     _LT_TAGVAR(LD, $1)="$LD"
< 
<     ## CAVEAT EMPTOR:
<     ## There is no encapsulation within the following macros, do not change
<     ## the running order or otherwise move them around unless you know exactly
<     ## what you are doing...
<     _LT_COMPILER_PIC($1)
<     _LT_COMPILER_C_O($1)
<     _LT_COMPILER_FILE_LOCKS($1)
<     _LT_LINKER_SHLIBS($1)
<     _LT_SYS_DYNAMIC_LINKER($1)
<     _LT_LINKER_HARDCODE_LIBPATH($1)
< 
<     _LT_CONFIG($1)
<   fi # test -n "$compiler"
< 
<   GCC=$lt_save_GCC
<   CC="$lt_save_CC"
< fi # test "$_lt_disable_F77" != yes
< 
< AC_LANG_POP
< ])# _LT_LANG_F77_CONFIG
< 
< 
< # _LT_PROG_FC
< # -----------
< # Since AC_PROG_FC is broken, in that it returns the empty string
< # if there is no fortran compiler, we have our own version here.
< m4_defun([_LT_PROG_FC],
< [
< pushdef([AC_MSG_ERROR], [_lt_disable_FC=yes])
< AC_PROG_FC
< if test -z "$FC" || test "X$FC" = "Xno"; then
<   _lt_disable_FC=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_FC
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_FC], [])
< 
< 
< # _LT_LANG_FC_CONFIG([TAG])
< # -------------------------
< # Ensure that the configuration variables for a Fortran compiler are
< # suitably defined.  These variables are subsequently used by _LT_CONFIG
< # to write the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_FC_CONFIG],
< [AC_REQUIRE([_LT_PROG_FC])dnl
< AC_LANG_PUSH(Fortran)
< 
< _LT_TAGVAR(archive_cmds_need_lc, $1)=no
< _LT_TAGVAR(allow_undefined_flag, $1)=
< _LT_TAGVAR(always_export_symbols, $1)=no
< _LT_TAGVAR(archive_expsym_cmds, $1)=
< _LT_TAGVAR(export_dynamic_flag_spec, $1)=
< _LT_TAGVAR(hardcode_direct, $1)=no
< _LT_TAGVAR(hardcode_direct_absolute, $1)=no
< _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=
< _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
< _LT_TAGVAR(hardcode_libdir_separator, $1)=
< _LT_TAGVAR(hardcode_minus_L, $1)=no
< _LT_TAGVAR(hardcode_automatic, $1)=no
< _LT_TAGVAR(inherit_rpath, $1)=no
< _LT_TAGVAR(module_cmds, $1)=
< _LT_TAGVAR(module_expsym_cmds, $1)=
< _LT_TAGVAR(link_all_deplibs, $1)=unknown
< _LT_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
< _LT_TAGVAR(no_undefined_flag, $1)=
< _LT_TAGVAR(whole_archive_flag_spec, $1)=
< _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=no
< 
< # Source file extension for fc test sources.
< ac_ext=${ac_fc_srcext-f}
< 
< # Object file extension for compiled fc test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # No sense in running all these tests if we already determined that
< # the FC compiler isn't working.  Some variables (like enable_shared)
< # are currently assumed to apply to all compilers on this platform,
< # and will be corrupted by setting them based on a non-working compiler.
< if test "$_lt_disable_FC" != yes; then
<   # Code to be used in simple compile tests
<   lt_simple_compile_test_code="\
<       subroutine t
<       return
<       end
< "
< 
<   # Code to be used in simple link tests
<   lt_simple_link_test_code="\
<       program t
<       end
< "
< 
<   # ltmain only uses $CC for tagged configurations so make sure $CC is set.
<   _LT_TAG_COMPILER
< 
<   # save warnings/boilerplate of simple test code
<   _LT_COMPILER_BOILERPLATE
<   _LT_LINKER_BOILERPLATE
< 
<   # Allow CC to be a program name with arguments.
<   lt_save_CC="$CC"
<   lt_save_GCC=$GCC
<   CC=${FC-"f95"}
<   compiler=$CC
<   GCC=$ac_cv_fc_compiler_gnu
< 
<   _LT_TAGVAR(compiler, $1)=$CC
<   _LT_CC_BASENAME([$compiler])
< 
<   if test -n "$compiler"; then
<     AC_MSG_CHECKING([if libtool supports shared libraries])
<     AC_MSG_RESULT([$can_build_shared])
< 
<     AC_MSG_CHECKING([whether to build shared libraries])
<     test "$can_build_shared" = "no" && enable_shared=no
< 
<     # On AIX, shared libraries and static libraries use the same namespace, and
<     # are all built from PIC.
<     case $host_os in
<       aix3*)
<         test "$enable_shared" = yes && enable_static=no
<         if test -n "$RANLIB"; then
<           archive_cmds="$archive_cmds~\$RANLIB \$lib"
<           postinstall_cmds='$RANLIB $lib'
<         fi
<         ;;
<       aix[[4-9]]*)
< 	if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
< 	  test "$enable_shared" = yes && enable_static=no
< 	fi
<         ;;
<     esac
<     AC_MSG_RESULT([$enable_shared])
< 
<     AC_MSG_CHECKING([whether to build static libraries])
<     # Make sure either enable_shared or enable_static is yes.
<     test "$enable_shared" = yes || enable_static=yes
<     AC_MSG_RESULT([$enable_static])
< 
<     _LT_TAGVAR(GCC, $1)="$ac_cv_fc_compiler_gnu"
<     _LT_TAGVAR(LD, $1)="$LD"
< 
<     ## CAVEAT EMPTOR:
<     ## There is no encapsulation within the following macros, do not change
<     ## the running order or otherwise move them around unless you know exactly
<     ## what you are doing...
<     _LT_SYS_HIDDEN_LIBDEPS($1)
<     _LT_COMPILER_PIC($1)
<     _LT_COMPILER_C_O($1)
<     _LT_COMPILER_FILE_LOCKS($1)
<     _LT_LINKER_SHLIBS($1)
<     _LT_SYS_DYNAMIC_LINKER($1)
<     _LT_LINKER_HARDCODE_LIBPATH($1)
< 
<     _LT_CONFIG($1)
<   fi # test -n "$compiler"
< 
<   GCC=$lt_save_GCC
<   CC="$lt_save_CC"
< fi # test "$_lt_disable_FC" != yes
< 
< AC_LANG_POP
< ])# _LT_LANG_FC_CONFIG
< 
< 
< # _LT_LANG_GCJ_CONFIG([TAG])
< # --------------------------
< # Ensure that the configuration variables for the GNU Java Compiler compiler
< # are suitably defined.  These variables are subsequently used by _LT_CONFIG
< # to write the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_GCJ_CONFIG],
< [AC_REQUIRE([LT_PROG_GCJ])dnl
< AC_LANG_SAVE
< 
< # Source file extension for Java test sources.
< ac_ext=java
< 
< # Object file extension for compiled Java test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # Code to be used in simple compile tests
< lt_simple_compile_test_code="class foo {}"
< 
< # Code to be used in simple link tests
< lt_simple_link_test_code='public class conftest { public static void main(String[[]] argv) {}; }'
< 
< # ltmain only uses $CC for tagged configurations so make sure $CC is set.
< _LT_TAG_COMPILER
< 
< # save warnings/boilerplate of simple test code
< _LT_COMPILER_BOILERPLATE
< _LT_LINKER_BOILERPLATE
< 
< # Allow CC to be a program name with arguments.
< lt_save_CC="$CC"
< lt_save_GCC=$GCC
< GCC=yes
< CC=${GCJ-"gcj"}
< compiler=$CC
< _LT_TAGVAR(compiler, $1)=$CC
< _LT_TAGVAR(LD, $1)="$LD"
< _LT_CC_BASENAME([$compiler])
< 
< # GCJ did not exist at the time GCC didn't implicitly link libc in.
< _LT_TAGVAR(archive_cmds_need_lc, $1)=no
< 
< _LT_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
< 
< if test -n "$compiler"; then
<   _LT_COMPILER_NO_RTTI($1)
<   _LT_COMPILER_PIC($1)
<   _LT_COMPILER_C_O($1)
<   _LT_COMPILER_FILE_LOCKS($1)
<   _LT_LINKER_SHLIBS($1)
<   _LT_LINKER_HARDCODE_LIBPATH($1)
< 
<   _LT_CONFIG($1)
< fi
< 
< AC_LANG_RESTORE
< 
< GCC=$lt_save_GCC
< CC="$lt_save_CC"
< ])# _LT_LANG_GCJ_CONFIG
< 
< 
< # _LT_LANG_RC_CONFIG([TAG])
< # -------------------------
< # Ensure that the configuration variables for the Windows resource compiler
< # are suitably defined.  These variables are subsequently used by _LT_CONFIG
< # to write the compiler configuration to `libtool'.
< m4_defun([_LT_LANG_RC_CONFIG],
< [AC_REQUIRE([LT_PROG_RC])dnl
< AC_LANG_SAVE
< 
< # Source file extension for RC test sources.
< ac_ext=rc
< 
< # Object file extension for compiled RC test sources.
< objext=o
< _LT_TAGVAR(objext, $1)=$objext
< 
< # Code to be used in simple compile tests
< lt_simple_compile_test_code='sample MENU { MENUITEM "&Soup", 100, CHECKED }'
< 
< # Code to be used in simple link tests
< lt_simple_link_test_code="$lt_simple_compile_test_code"
< 
< # ltmain only uses $CC for tagged configurations so make sure $CC is set.
< _LT_TAG_COMPILER
< 
< # save warnings/boilerplate of simple test code
< _LT_COMPILER_BOILERPLATE
< _LT_LINKER_BOILERPLATE
< 
< # Allow CC to be a program name with arguments.
< lt_save_CC="$CC"
< lt_save_GCC=$GCC
< GCC=
< CC=${RC-"windres"}
< compiler=$CC
< _LT_TAGVAR(compiler, $1)=$CC
< _LT_CC_BASENAME([$compiler])
< _LT_TAGVAR(lt_cv_prog_compiler_c_o, $1)=yes
< 
< if test -n "$compiler"; then
<   :
<   _LT_CONFIG($1)
< fi
< 
< GCC=$lt_save_GCC
< AC_LANG_RESTORE
< CC="$lt_save_CC"
< ])# _LT_LANG_RC_CONFIG
< 
< 
< # LT_PROG_GCJ
< # -----------
< AC_DEFUN([LT_PROG_GCJ],
< [m4_ifdef([AC_PROG_GCJ], [AC_PROG_GCJ],
<   [m4_ifdef([A][M_PROG_GCJ], [A][M_PROG_GCJ],
<     [AC_CHECK_TOOL(GCJ, gcj,)
<       test "x${GCJFLAGS+set}" = xset || GCJFLAGS="-g -O2"
<       AC_SUBST(GCJFLAGS)])])[]dnl
< ])
< 
< # Old name:
< AU_ALIAS([LT_AC_PROG_GCJ], [LT_PROG_GCJ])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([LT_AC_PROG_GCJ], [])
< 
< 
< # LT_PROG_RC
< # ----------
< AC_DEFUN([LT_PROG_RC],
< [AC_CHECK_TOOL(RC, windres,)
< ])
< 
< # Old name:
< AU_ALIAS([LT_AC_PROG_RC], [LT_PROG_RC])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([LT_AC_PROG_RC], [])
< 
< 
< # _LT_DECL_EGREP
< # --------------
< # If we don't have a new enough Autoconf to choose the best grep
< # available, choose the one first in the user's PATH.
< m4_defun([_LT_DECL_EGREP],
< [AC_REQUIRE([AC_PROG_EGREP])dnl
< AC_REQUIRE([AC_PROG_FGREP])dnl
< test -z "$GREP" && GREP=grep
< _LT_DECL([], [GREP], [1], [A grep program that handles long lines])
< _LT_DECL([], [EGREP], [1], [An ERE matcher])
< _LT_DECL([], [FGREP], [1], [A literal string matcher])
< dnl Non-bleeding-edge autoconf doesn't subst GREP, so do it here too
< AC_SUBST([GREP])
< ])
< 
< 
< # _LT_DECL_OBJDUMP
< # --------------
< # If we don't have a new enough Autoconf to choose the best objdump
< # available, choose the one first in the user's PATH.
< m4_defun([_LT_DECL_OBJDUMP],
< [AC_CHECK_TOOL(OBJDUMP, objdump, false)
< test -z "$OBJDUMP" && OBJDUMP=objdump
< _LT_DECL([], [OBJDUMP], [1], [An object symbol dumper])
< AC_SUBST([OBJDUMP])
< ])
< 
< 
< # _LT_DECL_SED
< # ------------
< # Check for a fully-functional sed program, that truncates
< # as few characters as possible.  Prefer GNU sed if found.
< m4_defun([_LT_DECL_SED],
< [AC_PROG_SED
< test -z "$SED" && SED=sed
< Xsed="$SED -e 1s/^X//"
< _LT_DECL([], [SED], [1], [A sed program that does not truncate output])
< _LT_DECL([], [Xsed], ["\$SED -e 1s/^X//"],
<     [Sed that helps us avoid accidentally triggering echo(1) options like -n])
< ])# _LT_DECL_SED
< 
< m4_ifndef([AC_PROG_SED], [
< # NOTE: This macro has been submitted for inclusion into   #
< #  GNU Autoconf as AC_PROG_SED.  When it is available in   #
< #  a released version of Autoconf we should remove this    #
< #  macro and use it instead.                               #
< 
< m4_defun([AC_PROG_SED],
< [AC_MSG_CHECKING([for a sed that does not truncate output])
< AC_CACHE_VAL(lt_cv_path_SED,
< [# Loop through the user's path and test for sed and gsed.
< # Then use that list of sed's as ones to test for truncation.
< as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
< for as_dir in $PATH
< do
<   IFS=$as_save_IFS
<   test -z "$as_dir" && as_dir=.
<   for lt_ac_prog in sed gsed; do
<     for ac_exec_ext in '' $ac_executable_extensions; do
<       if $as_executable_p "$as_dir/$lt_ac_prog$ac_exec_ext"; then
<         lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
<       fi
<     done
<   done
< done
< IFS=$as_save_IFS
< lt_ac_max=0
< lt_ac_count=0
< # Add /usr/xpg4/bin/sed as it is typically found on Solaris
< # along with /bin/sed that truncates output.
< for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
<   test ! -f $lt_ac_sed && continue
<   cat /dev/null > conftest.in
<   lt_ac_count=0
<   echo $ECHO_N "0123456789$ECHO_C" >conftest.in
<   # Check for GNU sed and select it if it is found.
<   if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
<     lt_cv_path_SED=$lt_ac_sed
<     break
<   fi
<   while true; do
<     cat conftest.in conftest.in >conftest.tmp
<     mv conftest.tmp conftest.in
<     cp conftest.in conftest.nl
<     echo >>conftest.nl
<     $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
<     cmp -s conftest.out conftest.nl || break
<     # 10000 chars as input seems more than enough
<     test $lt_ac_count -gt 10 && break
<     lt_ac_count=`expr $lt_ac_count + 1`
<     if test $lt_ac_count -gt $lt_ac_max; then
<       lt_ac_max=$lt_ac_count
<       lt_cv_path_SED=$lt_ac_sed
<     fi
<   done
< done
< ])
< SED=$lt_cv_path_SED
< AC_SUBST([SED])
< AC_MSG_RESULT([$SED])
< ])#AC_PROG_SED
< ])#m4_ifndef
< 
< # Old name:
< AU_ALIAS([LT_AC_PROG_SED], [AC_PROG_SED])
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([LT_AC_PROG_SED], [])
< 
< 
< # _LT_CHECK_SHELL_FEATURES
< # ------------------------
< # Find out whether the shell is Bourne or XSI compatible,
< # or has some other useful features.
< m4_defun([_LT_CHECK_SHELL_FEATURES],
< [AC_MSG_CHECKING([whether the shell understands some XSI constructs])
< # Try some XSI features
< xsi_shell=no
< ( _lt_dummy="a/b/c"
<   test "${_lt_dummy##*/},${_lt_dummy%/*},"${_lt_dummy%"$_lt_dummy"}, \
<       = c,a/b,, \
<     && eval 'test $(( 1 + 1 )) -eq 2 \
<     && test "${#_lt_dummy}" -eq 5' ) >/dev/null 2>&1 \
<   && xsi_shell=yes
< AC_MSG_RESULT([$xsi_shell])
< _LT_CONFIG_LIBTOOL_INIT([xsi_shell='$xsi_shell'])
< 
< AC_MSG_CHECKING([whether the shell understands "+="])
< lt_shell_append=no
< ( foo=bar; set foo baz; eval "$[1]+=\$[2]" && test "$foo" = barbaz ) \
<     >/dev/null 2>&1 \
<   && lt_shell_append=yes
< AC_MSG_RESULT([$lt_shell_append])
< _LT_CONFIG_LIBTOOL_INIT([lt_shell_append='$lt_shell_append'])
< 
< if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
<   lt_unset=unset
< else
<   lt_unset=false
< fi
< _LT_DECL([], [lt_unset], [0], [whether the shell understands "unset"])dnl
< 
< # test EBCDIC or ASCII
< case `echo X|tr X '\101'` in
<  A) # ASCII based system
<     # \n is not interpreted correctly by Solaris 8 /usr/ucb/tr
<   lt_SP2NL='tr \040 \012'
<   lt_NL2SP='tr \015\012 \040\040'
<   ;;
<  *) # EBCDIC based system
<   lt_SP2NL='tr \100 \n'
<   lt_NL2SP='tr \r\n \100\100'
<   ;;
< esac
< _LT_DECL([SP2NL], [lt_SP2NL], [1], [turn spaces into newlines])dnl
< _LT_DECL([NL2SP], [lt_NL2SP], [1], [turn newlines into spaces])dnl
< ])# _LT_CHECK_SHELL_FEATURES
< 
< 
< # _LT_PROG_XSI_SHELLFNS
< # ---------------------
< # Bourne and XSI compatible variants of some useful shell functions.
< m4_defun([_LT_PROG_XSI_SHELLFNS],
< [case $xsi_shell in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
<   case ${1} in
<     */*) func_dirname_result="${1%/*}${2}" ;;
<     *  ) func_dirname_result="${3}" ;;
<   esac
< }
< 
< # func_basename file
< func_basename ()
< {
<   func_basename_result="${1##*/}"
< }
< 
< # func_dirname_and_basename file append nondir_replacement
< # perform func_basename and func_dirname in a single function
< # call:
< #   dirname:  Compute the dirname of FILE.  If nonempty,
< #             add APPEND to the result, otherwise set result
< #             to NONDIR_REPLACEMENT.
< #             value returned in "$func_dirname_result"
< #   basename: Compute filename of FILE.
< #             value retuned in "$func_basename_result"
< # Implementation must be kept synchronized with func_dirname
< # and func_basename. For efficiency, we do not delegate to
< # those functions but instead duplicate the functionality here.
< func_dirname_and_basename ()
< {
<   case ${1} in
<     */*) func_dirname_result="${1%/*}${2}" ;;
<     *  ) func_dirname_result="${3}" ;;
<   esac
<   func_basename_result="${1##*/}"
< }
< 
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< func_stripname ()
< {
<   # pdksh 5.2.14 does not do ${X%$Y} correctly if both X and Y are
<   # positional parameters, so assign one to ordinary parameter first.
<   func_stripname_result=${3}
<   func_stripname_result=${func_stripname_result#"${1}"}
<   func_stripname_result=${func_stripname_result%"${2}"}
< }
< 
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=${1%%=*}
<   func_opt_split_arg=${1#*=}
< }
< 
< # func_lo2o object
< func_lo2o ()
< {
<   case ${1} in
<     *.lo) func_lo2o_result=${1%.lo}.${objext} ;;
<     *)    func_lo2o_result=${1} ;;
<   esac
< }
< 
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=${1%.*}.lo
< }
< 
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=$(( $[*] ))
< }
< 
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=${#1}
< }
< 
< _LT_EOF
<     ;;
<   *) # Bourne compatible functions.
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
<   # Extract subdirectory from the argument.
<   func_dirname_result=`$ECHO "X${1}" | $Xsed -e "$dirname"`
<   if test "X$func_dirname_result" = "X${1}"; then
<     func_dirname_result="${3}"
<   else
<     func_dirname_result="$func_dirname_result${2}"
<   fi
< }
< 
< # func_basename file
< func_basename ()
< {
<   func_basename_result=`$ECHO "X${1}" | $Xsed -e "$basename"`
< }
< 
< dnl func_dirname_and_basename
< dnl A portable version of this function is already defined in general.m4sh
< dnl so there is no need for it here.
< 
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< # func_strip_suffix prefix name
< func_stripname ()
< {
<   case ${2} in
<     .*) func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%\\\\${2}\$%%"`;;
<     *)  func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%${2}\$%%"`;;
<   esac
< }
< 
< # sed scripts:
< my_sed_long_opt='1s/^\(-[[^=]]*\)=.*/\1/;q'
< my_sed_long_arg='1s/^-[[^=]]*=//'
< 
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_opt"`
<   func_opt_split_arg=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_arg"`
< }
< 
< # func_lo2o object
< func_lo2o ()
< {
<   func_lo2o_result=`$ECHO "X${1}" | $Xsed -e "$lo2o"`
< }
< 
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=`$ECHO "X${1}" | $Xsed -e 's/\.[[^.]]*$/.lo/'`
< }
< 
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=`expr "$[@]"`
< }
< 
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=`expr "$[1]" : ".*" 2>/dev/null || echo $max_cmd_len`
< }
< 
< _LT_EOF
< esac
< 
< case $lt_shell_append in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$[1]+=\$[2]"
< }
< _LT_EOF
<     ;;
<   *)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$[1]=\$$[1]\$[2]"
< }
< 
< _LT_EOF
<     ;;
<   esac
< ])
< 
< # Helper functions for option handling.                    -*- Autoconf -*-
< #
< #   Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.
< #   Written by Gary V. Vaughan, 2004
< #
< # This file is free software; the Free Software Foundation gives
< # unlimited permission to copy and/or distribute it, with or without
< # modifications, as long as this notice is preserved.
< 
< # serial 6 ltoptions.m4
< 
< # This is to help aclocal find these macros, as it can't see m4_define.
< AC_DEFUN([LTOPTIONS_VERSION], [m4_if([1])])
< 
< 
< # _LT_MANGLE_OPTION(MACRO-NAME, OPTION-NAME)
< # ------------------------------------------
< m4_define([_LT_MANGLE_OPTION],
< [[_LT_OPTION_]m4_bpatsubst($1__$2, [[^a-zA-Z0-9_]], [_])])
< 
< 
< # _LT_SET_OPTION(MACRO-NAME, OPTION-NAME)
< # ---------------------------------------
< # Set option OPTION-NAME for macro MACRO-NAME, and if there is a
< # matching handler defined, dispatch to it.  Other OPTION-NAMEs are
< # saved as a flag.
< m4_define([_LT_SET_OPTION],
< [m4_define(_LT_MANGLE_OPTION([$1], [$2]))dnl
< m4_ifdef(_LT_MANGLE_DEFUN([$1], [$2]),
<         _LT_MANGLE_DEFUN([$1], [$2]),
<     [m4_warning([Unknown $1 option `$2'])])[]dnl
< ])
< 
< 
< # _LT_IF_OPTION(MACRO-NAME, OPTION-NAME, IF-SET, [IF-NOT-SET])
< # ------------------------------------------------------------
< # Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
< m4_define([_LT_IF_OPTION],
< [m4_ifdef(_LT_MANGLE_OPTION([$1], [$2]), [$3], [$4])])
< 
< 
< # _LT_UNLESS_OPTIONS(MACRO-NAME, OPTION-LIST, IF-NOT-SET)
< # -------------------------------------------------------
< # Execute IF-NOT-SET unless all options in OPTION-LIST for MACRO-NAME
< # are set.
< m4_define([_LT_UNLESS_OPTIONS],
< [m4_foreach([_LT_Option], m4_split(m4_normalize([$2])),
< 	    [m4_ifdef(_LT_MANGLE_OPTION([$1], _LT_Option),
< 		      [m4_define([$0_found])])])[]dnl
< m4_ifdef([$0_found], [m4_undefine([$0_found])], [$3
< ])[]dnl
< ])
< 
< 
< # _LT_SET_OPTIONS(MACRO-NAME, OPTION-LIST)
< # ----------------------------------------
< # OPTION-LIST is a space-separated list of Libtool options associated
< # with MACRO-NAME.  If any OPTION has a matching handler declared with
< # LT_OPTION_DEFINE, dispatch to that macro; otherwise complain about
< # the unknown option and exit.
< m4_defun([_LT_SET_OPTIONS],
< [# Set options
< m4_foreach([_LT_Option], m4_split(m4_normalize([$2])),
<     [_LT_SET_OPTION([$1], _LT_Option)])
< 
< m4_if([$1],[LT_INIT],[
<   dnl
<   dnl Simply set some default values (i.e off) if boolean options were not
<   dnl specified:
<   _LT_UNLESS_OPTIONS([LT_INIT], [dlopen], [enable_dlopen=no
<   ])
<   _LT_UNLESS_OPTIONS([LT_INIT], [win32-dll], [enable_win32_dll=no
<   ])
<   dnl
<   dnl If no reference was made to various pairs of opposing options, then
<   dnl we run the default mode handler for the pair.  For example, if neither
<   dnl `shared' nor `disable-shared' was passed, we enable building of shared
<   dnl archives by default:
<   _LT_UNLESS_OPTIONS([LT_INIT], [shared disable-shared], [_LT_ENABLE_SHARED])
<   _LT_UNLESS_OPTIONS([LT_INIT], [static disable-static], [_LT_ENABLE_STATIC])
<   _LT_UNLESS_OPTIONS([LT_INIT], [pic-only no-pic], [_LT_WITH_PIC])
<   _LT_UNLESS_OPTIONS([LT_INIT], [fast-install disable-fast-install],
<   		   [_LT_ENABLE_FAST_INSTALL])
<   ])
< ])# _LT_SET_OPTIONS
< 
< 
< 
< # _LT_MANGLE_DEFUN(MACRO-NAME, OPTION-NAME)
< # -----------------------------------------
< m4_define([_LT_MANGLE_DEFUN],
< [[_LT_OPTION_DEFUN_]m4_bpatsubst(m4_toupper([$1__$2]), [[^A-Z0-9_]], [_])])
< 
< 
< # LT_OPTION_DEFINE(MACRO-NAME, OPTION-NAME, CODE)
< # -----------------------------------------------
< m4_define([LT_OPTION_DEFINE],
< [m4_define(_LT_MANGLE_DEFUN([$1], [$2]), [$3])[]dnl
< ])# LT_OPTION_DEFINE
< 
< 
< # dlopen
< # ------
< LT_OPTION_DEFINE([LT_INIT], [dlopen], [enable_dlopen=yes
< ])
< 
< AU_DEFUN([AC_LIBTOOL_DLOPEN],
< [_LT_SET_OPTION([LT_INIT], [dlopen])
< AC_DIAGNOSE([obsolete],
< [$0: Remove this warning and the call to _LT_SET_OPTION when you
< put the `dlopen' option into LT_INIT's first parameter.])
< ])
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_LIBTOOL_DLOPEN], [])
< 
< 
< # win32-dll
< # ---------
< # Declare package support for building win32 dll's.
< LT_OPTION_DEFINE([LT_INIT], [win32-dll],
< [enable_win32_dll=yes
< 
< case $host in
< *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-cegcc*)
<   AC_CHECK_TOOL(AS, as, false)
<   AC_CHECK_TOOL(DLLTOOL, dlltool, false)
<   AC_CHECK_TOOL(OBJDUMP, objdump, false)
<   ;;
< esac
< 
< test -z "$AS" && AS=as
< _LT_DECL([], [AS],      [0], [Assembler program])dnl
< 
< test -z "$DLLTOOL" && DLLTOOL=dlltool
< _LT_DECL([], [DLLTOOL], [0], [DLL creation program])dnl
< 
< test -z "$OBJDUMP" && OBJDUMP=objdump
< _LT_DECL([], [OBJDUMP], [0], [Object dumper program])dnl
< ])# win32-dll
< 
< AU_DEFUN([AC_LIBTOOL_WIN32_DLL],
< [AC_REQUIRE([AC_CANONICAL_HOST])dnl
< _LT_SET_OPTION([LT_INIT], [win32-dll])
< AC_DIAGNOSE([obsolete],
< [$0: Remove this warning and the call to _LT_SET_OPTION when you
< put the `win32-dll' option into LT_INIT's first parameter.])
< ])
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_LIBTOOL_WIN32_DLL], [])
< 
< 
< # _LT_ENABLE_SHARED([DEFAULT])
< # ----------------------------
< # implement the --enable-shared flag, and supports the `shared' and
< # `disable-shared' LT_INIT options.
< # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
< m4_define([_LT_ENABLE_SHARED],
< [m4_define([_LT_ENABLE_SHARED_DEFAULT], [m4_if($1, no, no, yes)])dnl
< AC_ARG_ENABLE([shared],
<     [AS_HELP_STRING([--enable-shared@<:@=PKGS@:>@],
< 	[build shared libraries @<:@default=]_LT_ENABLE_SHARED_DEFAULT[@:>@])],
<     [p=${PACKAGE-default}
<     case $enableval in
<     yes) enable_shared=yes ;;
<     no) enable_shared=no ;;
<     *)
<       enable_shared=no
<       # Look at the argument we got.  We use all the common list separators.
<       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
<       for pkg in $enableval; do
< 	IFS="$lt_save_ifs"
< 	if test "X$pkg" = "X$p"; then
< 	  enable_shared=yes
< 	fi
<       done
<       IFS="$lt_save_ifs"
<       ;;
<     esac],
<     [enable_shared=]_LT_ENABLE_SHARED_DEFAULT)
< 
<     _LT_DECL([build_libtool_libs], [enable_shared], [0],
< 	[Whether or not to build shared libraries])
< ])# _LT_ENABLE_SHARED
< 
< LT_OPTION_DEFINE([LT_INIT], [shared], [_LT_ENABLE_SHARED([yes])])
< LT_OPTION_DEFINE([LT_INIT], [disable-shared], [_LT_ENABLE_SHARED([no])])
< 
< # Old names:
< AC_DEFUN([AC_ENABLE_SHARED],
< [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[shared])
< ])
< 
< AC_DEFUN([AC_DISABLE_SHARED],
< [_LT_SET_OPTION([LT_INIT], [disable-shared])
< ])
< 
< AU_DEFUN([AM_ENABLE_SHARED], [AC_ENABLE_SHARED($@)])
< AU_DEFUN([AM_DISABLE_SHARED], [AC_DISABLE_SHARED($@)])
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AM_ENABLE_SHARED], [])
< dnl AC_DEFUN([AM_DISABLE_SHARED], [])
< 
< 
< 
< # _LT_ENABLE_STATIC([DEFAULT])
< # ----------------------------
< # implement the --enable-static flag, and support the `static' and
< # `disable-static' LT_INIT options.
< # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
< m4_define([_LT_ENABLE_STATIC],
< [m4_define([_LT_ENABLE_STATIC_DEFAULT], [m4_if($1, no, no, yes)])dnl
< AC_ARG_ENABLE([static],
<     [AS_HELP_STRING([--enable-static@<:@=PKGS@:>@],
< 	[build static libraries @<:@default=]_LT_ENABLE_STATIC_DEFAULT[@:>@])],
<     [p=${PACKAGE-default}
<     case $enableval in
<     yes) enable_static=yes ;;
<     no) enable_static=no ;;
<     *)
<      enable_static=no
<       # Look at the argument we got.  We use all the common list separators.
<       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
<       for pkg in $enableval; do
< 	IFS="$lt_save_ifs"
< 	if test "X$pkg" = "X$p"; then
< 	  enable_static=yes
< 	fi
<       done
<       IFS="$lt_save_ifs"
<       ;;
<     esac],
<     [enable_static=]_LT_ENABLE_STATIC_DEFAULT)
< 
<     _LT_DECL([build_old_libs], [enable_static], [0],
< 	[Whether or not to build static libraries])
< ])# _LT_ENABLE_STATIC
< 
< LT_OPTION_DEFINE([LT_INIT], [static], [_LT_ENABLE_STATIC([yes])])
< LT_OPTION_DEFINE([LT_INIT], [disable-static], [_LT_ENABLE_STATIC([no])])
< 
< # Old names:
< AC_DEFUN([AC_ENABLE_STATIC],
< [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[static])
< ])
< 
< AC_DEFUN([AC_DISABLE_STATIC],
< [_LT_SET_OPTION([LT_INIT], [disable-static])
< ])
< 
< AU_DEFUN([AM_ENABLE_STATIC], [AC_ENABLE_STATIC($@)])
< AU_DEFUN([AM_DISABLE_STATIC], [AC_DISABLE_STATIC($@)])
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AM_ENABLE_STATIC], [])
< dnl AC_DEFUN([AM_DISABLE_STATIC], [])
< 
< 
< 
< # _LT_ENABLE_FAST_INSTALL([DEFAULT])
< # ----------------------------------
< # implement the --enable-fast-install flag, and support the `fast-install'
< # and `disable-fast-install' LT_INIT options.
< # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
< m4_define([_LT_ENABLE_FAST_INSTALL],
< [m4_define([_LT_ENABLE_FAST_INSTALL_DEFAULT], [m4_if($1, no, no, yes)])dnl
< AC_ARG_ENABLE([fast-install],
<     [AS_HELP_STRING([--enable-fast-install@<:@=PKGS@:>@],
<     [optimize for fast installation @<:@default=]_LT_ENABLE_FAST_INSTALL_DEFAULT[@:>@])],
<     [p=${PACKAGE-default}
<     case $enableval in
<     yes) enable_fast_install=yes ;;
<     no) enable_fast_install=no ;;
<     *)
<       enable_fast_install=no
<       # Look at the argument we got.  We use all the common list separators.
<       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
<       for pkg in $enableval; do
< 	IFS="$lt_save_ifs"
< 	if test "X$pkg" = "X$p"; then
< 	  enable_fast_install=yes
< 	fi
<       done
<       IFS="$lt_save_ifs"
<       ;;
<     esac],
<     [enable_fast_install=]_LT_ENABLE_FAST_INSTALL_DEFAULT)
< 
< _LT_DECL([fast_install], [enable_fast_install], [0],
< 	 [Whether or not to optimize for fast installation])dnl
< ])# _LT_ENABLE_FAST_INSTALL
< 
< LT_OPTION_DEFINE([LT_INIT], [fast-install], [_LT_ENABLE_FAST_INSTALL([yes])])
< LT_OPTION_DEFINE([LT_INIT], [disable-fast-install], [_LT_ENABLE_FAST_INSTALL([no])])
< 
< # Old names:
< AU_DEFUN([AC_ENABLE_FAST_INSTALL],
< [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[fast-install])
< AC_DIAGNOSE([obsolete],
< [$0: Remove this warning and the call to _LT_SET_OPTION when you put
< the `fast-install' option into LT_INIT's first parameter.])
< ])
< 
< AU_DEFUN([AC_DISABLE_FAST_INSTALL],
< [_LT_SET_OPTION([LT_INIT], [disable-fast-install])
< AC_DIAGNOSE([obsolete],
< [$0: Remove this warning and the call to _LT_SET_OPTION when you put
< the `disable-fast-install' option into LT_INIT's first parameter.])
< ])
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([AC_ENABLE_FAST_INSTALL], [])
< dnl AC_DEFUN([AM_DISABLE_FAST_INSTALL], [])
< 
< 
< # _LT_WITH_PIC([MODE])
< # --------------------
< # implement the --with-pic flag, and support the `pic-only' and `no-pic'
< # LT_INIT options.
< # MODE is either `yes' or `no'.  If omitted, it defaults to `both'.
< m4_define([_LT_WITH_PIC],
< [AC_ARG_WITH([pic],
<     [AS_HELP_STRING([--with-pic],
< 	[try to use only PIC/non-PIC objects @<:@default=use both@:>@])],
<     [pic_mode="$withval"],
<     [pic_mode=default])
< 
< test -z "$pic_mode" && pic_mode=m4_default([$1], [default])
< 
< _LT_DECL([], [pic_mode], [0], [What type of objects to build])dnl
< ])# _LT_WITH_PIC
< 
< LT_OPTION_DEFINE([LT_INIT], [pic-only], [_LT_WITH_PIC([yes])])
< LT_OPTION_DEFINE([LT_INIT], [no-pic], [_LT_WITH_PIC([no])])
---
> ])# LT_FUNC_DLSYM_USCORE
7705,7711c829
< AU_DEFUN([AC_LIBTOOL_PICMODE],
< [_LT_SET_OPTION([LT_INIT], [pic-only])
< AC_DIAGNOSE([obsolete],
< [$0: Remove this warning and the call to _LT_SET_OPTION when you
< put the `pic-only' option into LT_INIT's first parameter.])
< ])
< 
---
> AU_ALIAS([AC_LTDL_DLSYM_USCORE], [LT_FUNC_DLSYM_USCORE])
7713,7969c831
< dnl AC_DEFUN([AC_LIBTOOL_PICMODE], [])
< 
< 
< m4_define([_LTDL_MODE], [])
< LT_OPTION_DEFINE([LTDL_INIT], [nonrecursive],
< 		 [m4_define([_LTDL_MODE], [nonrecursive])])
< LT_OPTION_DEFINE([LTDL_INIT], [recursive],
< 		 [m4_define([_LTDL_MODE], [recursive])])
< LT_OPTION_DEFINE([LTDL_INIT], [subproject],
< 		 [m4_define([_LTDL_MODE], [subproject])])
< 
< m4_define([_LTDL_TYPE], [])
< LT_OPTION_DEFINE([LTDL_INIT], [installable],
< 		 [m4_define([_LTDL_TYPE], [installable])])
< LT_OPTION_DEFINE([LTDL_INIT], [convenience],
< 		 [m4_define([_LTDL_TYPE], [convenience])])
< 
< # ltsugar.m4 -- libtool m4 base layer.                         -*-Autoconf-*-
< #
< # Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.
< # Written by Gary V. Vaughan, 2004
< #
< # This file is free software; the Free Software Foundation gives
< # unlimited permission to copy and/or distribute it, with or without
< # modifications, as long as this notice is preserved.
< 
< # serial 6 ltsugar.m4
< 
< # This is to help aclocal find these macros, as it can't see m4_define.
< AC_DEFUN([LTSUGAR_VERSION], [m4_if([0.1])])
< 
< 
< # lt_join(SEP, ARG1, [ARG2...])
< # -----------------------------
< # Produce ARG1SEPARG2...SEPARGn, omitting [] arguments and their
< # associated separator.
< # Needed until we can rely on m4_join from Autoconf 2.62, since all earlier
< # versions in m4sugar had bugs.
< m4_define([lt_join],
< [m4_if([$#], [1], [],
<        [$#], [2], [[$2]],
<        [m4_if([$2], [], [], [[$2]_])$0([$1], m4_shift(m4_shift($@)))])])
< m4_define([_lt_join],
< [m4_if([$#$2], [2], [],
<        [m4_if([$2], [], [], [[$1$2]])$0([$1], m4_shift(m4_shift($@)))])])
< 
< 
< # lt_car(LIST)
< # lt_cdr(LIST)
< # ------------
< # Manipulate m4 lists.
< # These macros are necessary as long as will still need to support
< # Autoconf-2.59 which quotes differently.
< m4_define([lt_car], [[$1]])
< m4_define([lt_cdr],
< [m4_if([$#], 0, [m4_fatal([$0: cannot be called without arguments])],
<        [$#], 1, [],
<        [m4_dquote(m4_shift($@))])])
< m4_define([lt_unquote], $1)
< 
< 
< # lt_append(MACRO-NAME, STRING, [SEPARATOR])
< # ------------------------------------------
< # Redefine MACRO-NAME to hold its former content plus `SEPARATOR'`STRING'.
< # Note that neither SEPARATOR nor STRING are expanded; they are appended
< # to MACRO-NAME as is (leaving the expansion for when MACRO-NAME is invoked).
< # No SEPARATOR is output if MACRO-NAME was previously undefined (different
< # than defined and empty).
< #
< # This macro is needed until we can rely on Autoconf 2.62, since earlier
< # versions of m4sugar mistakenly expanded SEPARATOR but not STRING.
< m4_define([lt_append],
< [m4_define([$1],
< 	   m4_ifdef([$1], [m4_defn([$1])[$3]])[$2])])
< 
< 
< 
< # lt_combine(SEP, PREFIX-LIST, INFIX, SUFFIX1, [SUFFIX2...])
< # ----------------------------------------------------------
< # Produce a SEP delimited list of all paired combinations of elements of
< # PREFIX-LIST with SUFFIX1 through SUFFIXn.  Each element of the list
< # has the form PREFIXmINFIXSUFFIXn.
< # Needed until we can rely on m4_combine added in Autoconf 2.62.
< m4_define([lt_combine],
< [m4_if(m4_eval([$# > 3]), [1],
<        [m4_pushdef([_Lt_sep], [m4_define([_Lt_sep], m4_defn([lt_car]))])]]dnl
< [[m4_foreach([_Lt_prefix], [$2],
< 	     [m4_foreach([_Lt_suffix],
< 		]m4_dquote(m4_dquote(m4_shift(m4_shift(m4_shift($@)))))[,
< 	[_Lt_sep([$1])[]m4_defn([_Lt_prefix])[$3]m4_defn([_Lt_suffix])])])])])
< 
< 
< # lt_if_append_uniq(MACRO-NAME, VARNAME, [SEPARATOR], [UNIQ], [NOT-UNIQ])
< # -----------------------------------------------------------------------
< # Iff MACRO-NAME does not yet contain VARNAME, then append it (delimited
< # by SEPARATOR if supplied) and expand UNIQ, else NOT-UNIQ.
< m4_define([lt_if_append_uniq],
< [m4_ifdef([$1],
< 	  [m4_if(m4_index([$3]m4_defn([$1])[$3], [$3$2$3]), [-1],
< 		 [lt_append([$1], [$2], [$3])$4],
< 		 [$5])],
< 	  [lt_append([$1], [$2], [$3])$4])])
< 
< 
< # lt_dict_add(DICT, KEY, VALUE)
< # -----------------------------
< m4_define([lt_dict_add],
< [m4_define([$1($2)], [$3])])
< 
< 
< # lt_dict_add_subkey(DICT, KEY, SUBKEY, VALUE)
< # --------------------------------------------
< m4_define([lt_dict_add_subkey],
< [m4_define([$1($2:$3)], [$4])])
< 
< 
< # lt_dict_fetch(DICT, KEY, [SUBKEY])
< # ----------------------------------
< m4_define([lt_dict_fetch],
< [m4_ifval([$3],
< 	m4_ifdef([$1($2:$3)], [m4_defn([$1($2:$3)])]),
<     m4_ifdef([$1($2)], [m4_defn([$1($2)])]))])
< 
< 
< # lt_if_dict_fetch(DICT, KEY, [SUBKEY], VALUE, IF-TRUE, [IF-FALSE])
< # -----------------------------------------------------------------
< m4_define([lt_if_dict_fetch],
< [m4_if(lt_dict_fetch([$1], [$2], [$3]), [$4],
< 	[$5],
<     [$6])])
< 
< 
< # lt_dict_filter(DICT, [SUBKEY], VALUE, [SEPARATOR], KEY, [...])
< # --------------------------------------------------------------
< m4_define([lt_dict_filter],
< [m4_if([$5], [], [],
<   [lt_join(m4_quote(m4_default([$4], [[, ]])),
<            lt_unquote(m4_split(m4_normalize(m4_foreach(_Lt_key, lt_car([m4_shiftn(4, $@)]),
< 		      [lt_if_dict_fetch([$1], _Lt_key, [$2], [$3], [_Lt_key ])])))))])[]dnl
< ])
< 
< # ltversion.m4 -- version numbers			-*- Autoconf -*-
< #
< #   Copyright (C) 2004 Free Software Foundation, Inc.
< #   Written by Scott James Remnant, 2004
< #
< # This file is free software; the Free Software Foundation gives
< # unlimited permission to copy and/or distribute it, with or without
< # modifications, as long as this notice is preserved.
< 
< # Generated from ltversion.in.
< 
< # serial 3017 ltversion.m4
< # This file is part of GNU Libtool
< 
< m4_define([LT_PACKAGE_VERSION], [2.2.6b])
< m4_define([LT_PACKAGE_REVISION], [1.3017])
< 
< AC_DEFUN([LTVERSION_VERSION],
< [macro_version='2.2.6b'
< macro_revision='1.3017'
< _LT_DECL(, macro_version, 0, [Which release of libtool.m4 was used?])
< _LT_DECL(, macro_revision, 0)
< ])
< 
< # lt~obsolete.m4 -- aclocal satisfying obsolete definitions.    -*-Autoconf-*-
< #
< #   Copyright (C) 2004, 2005, 2007 Free Software Foundation, Inc.
< #   Written by Scott James Remnant, 2004.
< #
< # This file is free software; the Free Software Foundation gives
< # unlimited permission to copy and/or distribute it, with or without
< # modifications, as long as this notice is preserved.
< 
< # serial 4 lt~obsolete.m4
< 
< # These exist entirely to fool aclocal when bootstrapping libtool.
< #
< # In the past libtool.m4 has provided macros via AC_DEFUN (or AU_DEFUN)
< # which have later been changed to m4_define as they aren't part of the
< # exported API, or moved to Autoconf or Automake where they belong.
< #
< # The trouble is, aclocal is a bit thick.  It'll see the old AC_DEFUN
< # in /usr/share/aclocal/libtool.m4 and remember it, then when it sees us
< # using a macro with the same name in our local m4/libtool.m4 it'll
< # pull the old libtool.m4 in (it doesn't see our shiny new m4_define
< # and doesn't know about Autoconf macros at all.)
< #
< # So we provide this file, which has a silly filename so it's always
< # included after everything else.  This provides aclocal with the
< # AC_DEFUNs it wants, but when m4 processes it, it doesn't do anything
< # because those macros already exist, or will be overwritten later.
< # We use AC_DEFUN over AU_DEFUN for compatibility with aclocal-1.6. 
< #
< # Anytime we withdraw an AC_DEFUN or AU_DEFUN, remember to add it here.
< # Yes, that means every name once taken will need to remain here until
< # we give up compatibility with versions before 1.7, at which point
< # we need to keep only those names which we still refer to.
< 
< # This is to help aclocal find these macros, as it can't see m4_define.
< AC_DEFUN([LTOBSOLETE_VERSION], [m4_if([1])])
< 
< m4_ifndef([AC_LIBTOOL_LINKER_OPTION],	[AC_DEFUN([AC_LIBTOOL_LINKER_OPTION])])
< m4_ifndef([AC_PROG_EGREP],		[AC_DEFUN([AC_PROG_EGREP])])
< m4_ifndef([_LT_AC_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_AC_PROG_ECHO_BACKSLASH])])
< m4_ifndef([_LT_AC_SHELL_INIT],		[AC_DEFUN([_LT_AC_SHELL_INIT])])
< m4_ifndef([_LT_AC_SYS_LIBPATH_AIX],	[AC_DEFUN([_LT_AC_SYS_LIBPATH_AIX])])
< m4_ifndef([_LT_PROG_LTMAIN],		[AC_DEFUN([_LT_PROG_LTMAIN])])
< m4_ifndef([_LT_AC_TAGVAR],		[AC_DEFUN([_LT_AC_TAGVAR])])
< m4_ifndef([AC_LTDL_ENABLE_INSTALL],	[AC_DEFUN([AC_LTDL_ENABLE_INSTALL])])
< m4_ifndef([AC_LTDL_PREOPEN],		[AC_DEFUN([AC_LTDL_PREOPEN])])
< m4_ifndef([_LT_AC_SYS_COMPILER],	[AC_DEFUN([_LT_AC_SYS_COMPILER])])
< m4_ifndef([_LT_AC_LOCK],		[AC_DEFUN([_LT_AC_LOCK])])
< m4_ifndef([AC_LIBTOOL_SYS_OLD_ARCHIVE],	[AC_DEFUN([AC_LIBTOOL_SYS_OLD_ARCHIVE])])
< m4_ifndef([_LT_AC_TRY_DLOPEN_SELF],	[AC_DEFUN([_LT_AC_TRY_DLOPEN_SELF])])
< m4_ifndef([AC_LIBTOOL_PROG_CC_C_O],	[AC_DEFUN([AC_LIBTOOL_PROG_CC_C_O])])
< m4_ifndef([AC_LIBTOOL_SYS_HARD_LINK_LOCKS], [AC_DEFUN([AC_LIBTOOL_SYS_HARD_LINK_LOCKS])])
< m4_ifndef([AC_LIBTOOL_OBJDIR],		[AC_DEFUN([AC_LIBTOOL_OBJDIR])])
< m4_ifndef([AC_LTDL_OBJDIR],		[AC_DEFUN([AC_LTDL_OBJDIR])])
< m4_ifndef([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH], [AC_DEFUN([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH])])
< m4_ifndef([AC_LIBTOOL_SYS_LIB_STRIP],	[AC_DEFUN([AC_LIBTOOL_SYS_LIB_STRIP])])
< m4_ifndef([AC_PATH_MAGIC],		[AC_DEFUN([AC_PATH_MAGIC])])
< m4_ifndef([AC_PROG_LD_GNU],		[AC_DEFUN([AC_PROG_LD_GNU])])
< m4_ifndef([AC_PROG_LD_RELOAD_FLAG],	[AC_DEFUN([AC_PROG_LD_RELOAD_FLAG])])
< m4_ifndef([AC_DEPLIBS_CHECK_METHOD],	[AC_DEFUN([AC_DEPLIBS_CHECK_METHOD])])
< m4_ifndef([AC_LIBTOOL_PROG_COMPILER_NO_RTTI], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_NO_RTTI])])
< m4_ifndef([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE], [AC_DEFUN([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE])])
< m4_ifndef([AC_LIBTOOL_PROG_COMPILER_PIC], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_PIC])])
< m4_ifndef([AC_LIBTOOL_PROG_LD_SHLIBS],	[AC_DEFUN([AC_LIBTOOL_PROG_LD_SHLIBS])])
< m4_ifndef([AC_LIBTOOL_POSTDEP_PREDEP],	[AC_DEFUN([AC_LIBTOOL_POSTDEP_PREDEP])])
< m4_ifndef([LT_AC_PROG_EGREP],		[AC_DEFUN([LT_AC_PROG_EGREP])])
< m4_ifndef([LT_AC_PROG_SED],		[AC_DEFUN([LT_AC_PROG_SED])])
< m4_ifndef([_LT_CC_BASENAME],		[AC_DEFUN([_LT_CC_BASENAME])])
< m4_ifndef([_LT_COMPILER_BOILERPLATE],	[AC_DEFUN([_LT_COMPILER_BOILERPLATE])])
< m4_ifndef([_LT_LINKER_BOILERPLATE],	[AC_DEFUN([_LT_LINKER_BOILERPLATE])])
< m4_ifndef([_AC_PROG_LIBTOOL],		[AC_DEFUN([_AC_PROG_LIBTOOL])])
< m4_ifndef([AC_LIBTOOL_SETUP],		[AC_DEFUN([AC_LIBTOOL_SETUP])])
< m4_ifndef([_LT_AC_CHECK_DLFCN],		[AC_DEFUN([_LT_AC_CHECK_DLFCN])])
< m4_ifndef([AC_LIBTOOL_SYS_DYNAMIC_LINKER],	[AC_DEFUN([AC_LIBTOOL_SYS_DYNAMIC_LINKER])])
< m4_ifndef([_LT_AC_TAGCONFIG],		[AC_DEFUN([_LT_AC_TAGCONFIG])])
< m4_ifndef([AC_DISABLE_FAST_INSTALL],	[AC_DEFUN([AC_DISABLE_FAST_INSTALL])])
< m4_ifndef([_LT_AC_LANG_CXX],		[AC_DEFUN([_LT_AC_LANG_CXX])])
< m4_ifndef([_LT_AC_LANG_F77],		[AC_DEFUN([_LT_AC_LANG_F77])])
< m4_ifndef([_LT_AC_LANG_GCJ],		[AC_DEFUN([_LT_AC_LANG_GCJ])])
< m4_ifndef([AC_LIBTOOL_RC],		[AC_DEFUN([AC_LIBTOOL_RC])])
< m4_ifndef([AC_LIBTOOL_LANG_C_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_C_CONFIG])])
< m4_ifndef([_LT_AC_LANG_C_CONFIG],	[AC_DEFUN([_LT_AC_LANG_C_CONFIG])])
< m4_ifndef([AC_LIBTOOL_LANG_CXX_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_CXX_CONFIG])])
< m4_ifndef([_LT_AC_LANG_CXX_CONFIG],	[AC_DEFUN([_LT_AC_LANG_CXX_CONFIG])])
< m4_ifndef([AC_LIBTOOL_LANG_F77_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_F77_CONFIG])])
< m4_ifndef([_LT_AC_LANG_F77_CONFIG],	[AC_DEFUN([_LT_AC_LANG_F77_CONFIG])])
< m4_ifndef([AC_LIBTOOL_LANG_GCJ_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_GCJ_CONFIG])])
< m4_ifndef([_LT_AC_LANG_GCJ_CONFIG],	[AC_DEFUN([_LT_AC_LANG_GCJ_CONFIG])])
< m4_ifndef([AC_LIBTOOL_LANG_RC_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG])])
< m4_ifndef([_LT_AC_LANG_RC_CONFIG],	[AC_DEFUN([_LT_AC_LANG_RC_CONFIG])])
< m4_ifndef([AC_LIBTOOL_CONFIG],		[AC_DEFUN([AC_LIBTOOL_CONFIG])])
< m4_ifndef([_LT_AC_FILE_LTDLL_C],	[AC_DEFUN([_LT_AC_FILE_LTDLL_C])])
---
> dnl AC_DEFUN([AC_LTDL_DLSYM_USCORE], [])
8997a1860,1872
> m4_include([m4/ax_cc_maxopt.m4])
> m4_include([m4/ax_cflags_warn_all.m4])
> m4_include([m4/ax_check_compiler_flags.m4])
> m4_include([m4/ax_compiler_vendor.m4])
> m4_include([m4/ax_configure_args.m4])
> m4_include([m4/ax_enable_builddir.m4])
> m4_include([m4/ax_gcc_archflag.m4])
> m4_include([m4/ax_gcc_x86_cpuid.m4])
> m4_include([m4/libtool.m4])
> m4_include([m4/ltoptions.m4])
> m4_include([m4/ltsugar.m4])
> m4_include([m4/ltversion.m4])
> m4_include([m4/lt~obsolete.m4])
Only in libffi: build-ios.sh
Only in libffi.old: config-ml.in
diff -rbw libffi.old/config.guess libffi/config.guess
7c7
< timestamp='2009-11-19'
---
> timestamp='2009-11-20'
335a336,338
>     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
> 	echo i386-pc-auroraux${UNAME_RELEASE}
> 	exit ;;
diff -rbw libffi.old/config.sub libffi/config.sub
7c7
< timestamp='2009-11-07'
---
> timestamp='2009-11-20'
1258a1259,1261
>         -auroraux)
> 	        os=-auroraux
> 		;;
1280,1281c1283,1284
< 	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
< 	      | -kopensolaris* \
---
> 	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
> 	      | -sym* | -kopensolaris* \
diff -rbw libffi.old/configure libffi/configure
3c3,5
< # Generated by GNU Autoconf 2.63 for libffi 3.0.10rc0.
---
> # Generated by GNU Autoconf 2.68 for libffi 3.0.10rc8.
> #
> # Report bugs to <http://sourceware.org/libffi.html>.
5d6
< # Report bugs to <http://gcc.gnu.org/bugs.html>.
8c9,12
< # 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
---
> # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
> # Foundation, Inc.
> #
> #
11c15
< ## --------------------- ##
---
> ## -------------------- ##
13c17
< ## --------------------- ##
---
> ## -------------------- ##
17c21
< if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
---
> if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
25,26c29,33
<   case `(set -o) 2>/dev/null` in
<   *posix*) set -o posix ;;
---
>   case `(set -o) 2>/dev/null` in #(
>   *posix*) :
>     set -o posix ;; #(
>   *) :
>      ;;
28d34
< 
32,41d37
< 
< 
< # PATH needs CR
< # Avoid depending upon Character Ranges.
< as_cr_letters='abcdefghijklmnopqrstuvwxyz'
< as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
< as_cr_Letters=$as_cr_letters$as_cr_LETTERS
< as_cr_digits='0123456789'
< as_cr_alnum=$as_cr_Letters$as_cr_digits
< 
49c45,51
< if (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
---
> # Prefer a ksh shell builtin over an external printf program on Solaris,
> # but without wasting forks for bash or zsh.
> if test -z "$BASH_VERSION$ZSH_VERSION" \
>     && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
>   as_echo='print -r --'
>   as_echo_n='print -rn --'
> elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
60c62
<       case $arg in
---
>       case $arg in #(
83,89d84
< # Support unset when possible.
< if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
<   as_unset=unset
< else
<   as_unset=false
< fi
< 
99c94,95
< case $0 in
---
> as_myself=
> case $0 in #((
119c115
<   { (exit 1); exit 1; }
---
>   exit 1
122,124c118,124
< # Work around bugs in pre-3.0 UWIN ksh.
< for as_var in ENV MAIL MAILPATH
< do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
---
> # Unset variables that we do not need and which cause bugs (e.g. in
> # pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
> # suppresses any "Segmentation fault" message there.  '((' could
> # trigger a bug in pdksh 5.2.14.
> for as_var in BASH_ENV ENV MAIL MAILPATH
> do eval test x\${$as_var+set} = xset \
>   && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
136,170d135
< # Required to use basename.
< if expr a : '\(a\)' >/dev/null 2>&1 &&
<    test "X`expr 00001 : '.*\(...\)'`" = X001; then
<   as_expr=expr
< else
<   as_expr=false
< fi
< 
< if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
<   as_basename=basename
< else
<   as_basename=false
< fi
< 
< 
< # Name of the executable.
< as_me=`$as_basename -- "$0" ||
< $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
< 	 X"$0" : 'X\(//\)$' \| \
< 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
< $as_echo X/"$0" |
<     sed '/^.*\/\([^/][^/]*\)\/*$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\/\(\/\/\)$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\/\(\/\).*/{
< 	    s//\1/
< 	    q
< 	  }
< 	  s/.*/./; q'`
< 
172,173c137
< $as_unset CDPATH
< 
---
> (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
176,177c140,146
<   if (eval ":") 2>/dev/null; then
<   as_have_required=yes
---
>   as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
>   emulate sh
>   NULLCMD=:
>   # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
>   # is contrary to our usage.  Disable this feature.
>   alias -g '\${1+\"\$@\"}'='\"\$@\"'
>   setopt NO_GLOB_SUBST
179c148,153
<   as_have_required=no
---
>   case \`(set -o) 2>/dev/null\` in #(
>   *posix*) :
>     set -o posix ;; #(
>   *) :
>      ;;
> esac
181,197c155,160
< 
<   if test $as_have_required = yes &&	 (eval ":
< (as_func_return () {
<   (exit \$1)
< }
< as_func_success () {
<   as_func_return 0
< }
< as_func_failure () {
<   as_func_return 1
< }
< as_func_ret_success () {
<   return 0
< }
< as_func_ret_failure () {
<   return 1
< }
---
> "
>   as_required="as_fn_return () { (exit \$1); }
> as_fn_success () { as_fn_return 0; }
> as_fn_failure () { as_fn_return 1; }
> as_fn_ret_success () { return 0; }
> as_fn_ret_failure () { return 1; }
200,225c163,187
< if as_func_success; then
<   :
< else
<   exitcode=1
<   echo as_func_success failed.
< fi
< 
< if as_func_failure; then
<   exitcode=1
<   echo as_func_failure succeeded.
< fi
< 
< if as_func_ret_success; then
<   :
< else
<   exitcode=1
<   echo as_func_ret_success failed.
< fi
< 
< if as_func_ret_failure; then
<   exitcode=1
<   echo as_func_ret_failure succeeded.
< fi
< 
< if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
<   :
---
> as_fn_success || { exitcode=1; echo as_fn_success failed.; }
> as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
> as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
> as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
> if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :
> 
> else
>   exitcode=1; echo positional parameters were not saved.
> fi
> test x\$exitcode = x0 || exit 1"
>   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
>   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
>   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
>   test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
> 
>   test -n \"\${ZSH_VERSION+set}\${BASH_VERSION+set}\" || (
>     ECHO='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
>     ECHO=\$ECHO\$ECHO\$ECHO\$ECHO\$ECHO
>     ECHO=\$ECHO\$ECHO\$ECHO\$ECHO\$ECHO\$ECHO
>     PATH=/empty FPATH=/empty; export PATH FPATH
>     test \"X\`printf %s \$ECHO\`\" = \"X\$ECHO\" \\
>       || test \"X\`print -r -- \$ECHO\`\" = \"X\$ECHO\" ) || exit 1
> test \$(( 1 + 1 )) = 2 || exit 1"
>   if (eval "$as_required") 2>/dev/null; then :
>   as_have_required=yes
227,228c189
<   exitcode=1
<   echo positional parameters were not saved.
---
>   as_have_required=no
229a191
>   if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :
231,239d192
< test \$exitcode = 0) || { (exit 1); exit 1; }
< 
< (
<   as_lineno_1=\$LINENO
<   as_lineno_2=\$LINENO
<   test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
<   test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
< ") 2> /dev/null; then
<   :
241d193
<   as_candidate_shells=
242a195
> as_found=false
247c200,201
<   case $as_dir in
---
>   as_found=:
>   case $as_dir in #(
250c204,212
< 	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
---
> 	     # Try only shells that exist, to save several forks.
> 	     as_shell=$as_dir/$as_base
> 	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
> 		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
>   CONFIG_SHELL=$as_shell as_have_required=yes
> 		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
>   break 2
> fi
> fi
252a215
>   as_found=false
253a217,220
> $as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
> 	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
>   CONFIG_SHELL=$SHELL as_have_required=yes
> fi; }
257,272c224,253
<       for as_shell in $as_candidate_shells $SHELL; do
< 	 # Try only shells that exist, to save several forks.
< 	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
< 		{ ("$as_shell") 2> /dev/null <<\_ASEOF
< if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
<   emulate sh
<   NULLCMD=:
<   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
<   # is contrary to our usage.  Disable this feature.
<   alias -g '${1+"$@"}'='"$@"'
<   setopt NO_GLOB_SUBST
< else
<   case `(set -o) 2>/dev/null` in
<   *posix*) set -o posix ;;
< esac
< 
---
>       if test "x$CONFIG_SHELL" != x; then :
>   # We cannot yet assume a decent shell, so we have to provide a
> 	# neutralization value for shells without unset; and this also
> 	# works around shells that cannot unset nonexistent variables.
> 	# Preserve -v and -x to the replacement shell.
> 	BASH_ENV=/dev/null
> 	ENV=/dev/null
> 	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
> 	export CONFIG_SHELL
> 	case $- in # ((((
> 	  *v*x* | *x*v* ) as_opts=-vx ;;
> 	  *v* ) as_opts=-v ;;
> 	  *x* ) as_opts=-x ;;
> 	  * ) as_opts= ;;
> 	esac
> 	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
> fi
> 
>     if test x$as_have_required = xno; then :
>   $as_echo "$0: This script requires a shell more modern than all"
>   $as_echo "$0: the shells that I found on your system."
>   if test x${ZSH_VERSION+set} = xset ; then
>     $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
>     $as_echo "$0: be upgraded to zsh 4.3.4 or later."
>   else
>     $as_echo "$0: Please tell bug-autoconf@gnu.org and
> $0: http://sourceware.org/libffi.html about your system,
> $0: including any error possibly output before this
> $0: message. Then install a modern shell, or manually run
> $0: the script under such a shell if you do have one."
274,293c255
< 
< 
< :
< _ASEOF
< }; then
<   CONFIG_SHELL=$as_shell
< 	       as_have_required=yes
< 	       if { "$as_shell" 2> /dev/null <<\_ASEOF
< if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
<   emulate sh
<   NULLCMD=:
<   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
<   # is contrary to our usage.  Disable this feature.
<   alias -g '${1+"$@"}'='"$@"'
<   setopt NO_GLOB_SUBST
< else
<   case `(set -o) 2>/dev/null` in
<   *posix*) set -o posix ;;
< esac
< 
---
>   exit 1
294a257,263
> fi
> fi
> SHELL=${CONFIG_SHELL-/bin/sh}
> export SHELL
> # Unset more variables known to interfere with behavior of common tools.
> CLICOLOR_FORCE= GREP_OPTIONS=
> unset CLICOLOR_FORCE GREP_OPTIONS
295a265,299
> ## --------------------- ##
> ## M4sh Shell Functions. ##
> ## --------------------- ##
> # as_fn_unset VAR
> # ---------------
> # Portably unset VAR.
> as_fn_unset ()
> {
>   { eval $1=; unset $1;}
> }
> as_unset=as_fn_unset
> 
> # as_fn_set_status STATUS
> # -----------------------
> # Set $? to STATUS, without forking.
> as_fn_set_status ()
> {
>   return $1
> } # as_fn_set_status
> 
> # as_fn_exit STATUS
> # -----------------
> # Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
> as_fn_exit ()
> {
>   set +e
>   as_fn_set_status $1
>   exit $1
> } # as_fn_exit
> 
> # as_fn_mkdir_p
> # -------------
> # Create "$as_dir" as a directory, including parents if necessary.
> as_fn_mkdir_p ()
> {
297,302c301,320
< :
< (as_func_return () {
<   (exit $1)
< }
< as_func_success () {
<   as_func_return 0
---
>   case $as_dir in #(
>   -*) as_dir=./$as_dir;;
>   esac
>   test -d "$as_dir" || eval $as_mkdir_p || {
>     as_dirs=
>     while :; do
>       case $as_dir in #(
>       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
>       *) as_qdir=$as_dir;;
>       esac
>       as_dirs="'$as_qdir' $as_dirs"
>       as_dir=`$as_dirname -- "$as_dir" ||
> $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
> 	 X"$as_dir" : 'X\(//\)[^/]' \| \
> 	 X"$as_dir" : 'X\(//\)$' \| \
> 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
> $as_echo X"$as_dir" |
>     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
> 	    s//\1/
> 	    q
304,305c322,324
< as_func_failure () {
<   as_func_return 1
---
> 	  /^X\(\/\/\)[^/].*/{
> 	    s//\1/
> 	    q
307,308c326,328
< as_func_ret_success () {
<   return 0
---
> 	  /^X\(\/\/\)$/{
> 	    s//\1/
> 	    q
310,311c330,332
< as_func_ret_failure () {
<   return 1
---
> 	  /^X\(\/\).*/{
> 	    s//\1/
> 	    q
312a334,338
> 	  s/.*/./; q'`
>       test -d "$as_dir" && break
>     done
>     test -z "$as_dirs" || eval "mkdir $as_dirs"
>   } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
314,325d339
< exitcode=0
< if as_func_success; then
<   :
< else
<   exitcode=1
<   echo as_func_success failed.
< fi
< 
< if as_func_failure; then
<   exitcode=1
<   echo as_func_failure succeeded.
< fi
327,328c341,352
< if as_func_ret_success; then
<   :
---
> } # as_fn_mkdir_p
> # as_fn_append VAR VALUE
> # ----------------------
> # Append the text in VALUE to the end of the definition contained in VAR. Take
> # advantage of any shell optimizations that allow amortized linear growth over
> # repeated appends, instead of the typical quadratic growth present in naive
> # implementations.
> if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
>   eval 'as_fn_append ()
>   {
>     eval $1+=\$2
>   }'
330,337c354,358
<   exitcode=1
<   echo as_func_ret_success failed.
< fi
< 
< if as_func_ret_failure; then
<   exitcode=1
<   echo as_func_ret_failure succeeded.
< fi
---
>   as_fn_append ()
>   {
>     eval $1=\$$1\$2
>   }
> fi # as_fn_append
339,340c360,369
< if ( set x; as_func_ret_success y && test x = "$1" ); then
<   :
---
> # as_fn_arith ARG...
> # ------------------
> # Perform arithmetic evaluation on the ARGs, and store the result in the
> # global $as_val. Take advantage of shells that can avoid forks. The arguments
> # must be portable across $(()) and expr.
> if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
>   eval 'as_fn_arith ()
>   {
>     as_val=$(( $* ))
>   }'
342,400c371,373
<   exitcode=1
<   echo positional parameters were not saved.
< fi
< 
< test $exitcode = 0) || { (exit 1); exit 1; }
< 
< (
<   as_lineno_1=$LINENO
<   as_lineno_2=$LINENO
<   test "x$as_lineno_1" != "x$as_lineno_2" &&
<   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
< 
< _ASEOF
< }; then
<   break
< fi
< 
< fi
< 
<       done
< 
<       if test "x$CONFIG_SHELL" != x; then
<   for as_var in BASH_ENV ENV
< 	do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
< 	done
< 	export CONFIG_SHELL
< 	exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
< fi
< 
< 
<     if test $as_have_required = no; then
<   echo This script requires a shell more modern than all the
<       echo shells that I found on your system.  Please install a
<       echo modern shell, or manually run the script under such a
<       echo shell if you do have one.
<       { (exit 1); exit 1; }
< fi
< 
< 
< fi
< 
< fi
< 
< 
< 
< (eval "as_func_return () {
<   (exit \$1)
< }
< as_func_success () {
<   as_func_return 0
< }
< as_func_failure () {
<   as_func_return 1
< }
< as_func_ret_success () {
<   return 0
< }
< as_func_ret_failure () {
<   return 1
---
>   as_fn_arith ()
>   {
>     as_val=`expr "$@" || test $? -eq 1`
401a375
> fi # as_fn_arith
403,409d376
< exitcode=0
< if as_func_success; then
<   :
< else
<   exitcode=1
<   echo as_func_success failed.
< fi
411,413c378,388
< if as_func_failure; then
<   exitcode=1
<   echo as_func_failure succeeded.
---
> # as_fn_error STATUS ERROR [LINENO LOG_FD]
> # ----------------------------------------
> # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
> # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
> # script with STATUS, using 1 if that was 0.
> as_fn_error ()
> {
>   as_status=$1; test $as_status -eq 0 && as_status=1
>   if test "$4"; then
>     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>     $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
414a390,392
>   $as_echo "$as_me: error: $2" >&2
>   as_fn_exit $as_status
> } # as_fn_error
416,417c394,396
< if as_func_ret_success; then
<   :
---
> if expr a : '\(a\)' >/dev/null 2>&1 &&
>    test "X`expr 00001 : '.*\(...\)'`" = X001; then
>   as_expr=expr
419,420c398
<   exitcode=1
<   echo as_func_ret_success failed.
---
>   as_expr=false
423,425c401,404
< if as_func_ret_failure; then
<   exitcode=1
<   echo as_func_ret_failure succeeded.
---
> if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
>   as_basename=basename
> else
>   as_basename=false
428,429c407,408
< if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
<   :
---
> if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
>   as_dirname=dirname
431,432c410
<   exitcode=1
<   echo positional parameters were not saved.
---
>   as_dirname=false
435,440c413,424
< test \$exitcode = 0") || {
<   echo No shell found that supports shell functions.
<   echo Please tell bug-autoconf@gnu.org about your system,
<   echo including any error possibly output before this message.
<   echo This can help us improve future autoconf versions.
<   echo Configuration will now proceed without shell functions.
---
> as_me=`$as_basename -- "$0" ||
> $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
> 	 X"$0" : 'X\(//\)$' \| \
> 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
> $as_echo X/"$0" |
>     sed '/^.*\/\([^/][^/]*\)\/*$/{
> 	    s//\1/
> 	    q
> 	  }
> 	  /^X\/\(\/\/\)$/{
> 	    s//\1/
> 	    q
441a426,430
> 	  /^X\/\(\/\).*/{
> 	    s//\1/
> 	    q
> 	  }
> 	  s/.*/./; q'`
442a432,437
> # Avoid depending upon Character Ranges.
> as_cr_letters='abcdefghijklmnopqrstuvwxyz'
> as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
> as_cr_Letters=$as_cr_letters$as_cr_LETTERS
> as_cr_digits='0123456789'
> as_cr_alnum=$as_cr_Letters$as_cr_digits
445,459c440,444
<   as_lineno_1=$LINENO
<   as_lineno_2=$LINENO
<   test "x$as_lineno_1" != "x$as_lineno_2" &&
<   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
< 
<   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
<   # uniformly replaced by the line number.  The first 'sed' inserts a
<   # line-number line after each line using $LINENO; the second 'sed'
<   # does the real work.  The second script uses 'N' to pair each
<   # line-number line with the line containing $LINENO, and appends
<   # trailing '-' during substitution so that $LINENO is not a special
<   # case at line end.
<   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
<   # scripts with optimization help from Paolo Bonzini.  Blame Lee
<   # E. McMahon (1931-1989) for sed's syntax.  :-)
---
>   as_lineno_1=$LINENO as_lineno_1a=$LINENO
>   as_lineno_2=$LINENO as_lineno_2a=$LINENO
>   eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
>   test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
>   # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
476,477c461
<     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
<    { (exit 1); exit 1; }; }
---
>     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
487,493d470
< 
< if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
<   as_dirname=dirname
< else
<   as_dirname=false
< fi
< 
495c472
< case `echo -n x` in
---
> case `echo -n x` in #(((((
497c474
<   case `echo 'x\c'` in
---
>   case `echo 'xy\c'` in
499c476,478
<   *)   ECHO_C='\c';;
---
>   xy)  ECHO_C='\c';;
>   *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
>        ECHO_T='	';;
504,509d482
< if expr a : '\(a\)' >/dev/null 2>&1 &&
<    test "X`expr 00001 : '.*\(...\)'`" = X001; then
<   as_expr=expr
< else
<   as_expr=false
< fi
539c512
<   as_mkdir_p=:
---
>   as_mkdir_p='mkdir -p "$as_dir"'
558c531
< 	case $1 in
---
> 	case $1 in #(
561c534
< 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
---
> 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
574,577d546
< 
< 
< 
< # Check that we are running under the correct shell.
580,722d548
< case X$lt_ECHO in
< X*--fallback-echo)
<   # Remove one level of quotation (which was required for Make).
<   ECHO=`echo "$lt_ECHO" | sed 's,\\\\\$\\$0,'$0','`
<   ;;
< esac
< 
< ECHO=${lt_ECHO-echo}
< if test "X$1" = X--no-reexec; then
<   # Discard the --no-reexec flag, and continue.
<   shift
< elif test "X$1" = X--fallback-echo; then
<   # Avoid inline document here, it may be left over
<   :
< elif test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' ; then
<   # Yippee, $ECHO works!
<   :
< else
<   # Restart under the correct shell.
<   exec $SHELL "$0" --no-reexec ${1+"$@"}
< fi
< 
< if test "X$1" = X--fallback-echo; then
<   # used as fallback echo
<   shift
<   cat <<_LT_EOF
< $*
< _LT_EOF
<   exit 0
< fi
< 
< # The HP-UX ksh and POSIX shell print the target directory to stdout
< # if CDPATH is set.
< (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
< 
< if test -z "$lt_ECHO"; then
<   if test "X${echo_test_string+set}" != Xset; then
<     # find a string as large as possible, as long as the shell can cope with it
<     for cmd in 'sed 50q "$0"' 'sed 20q "$0"' 'sed 10q "$0"' 'sed 2q "$0"' 'echo test'; do
<       # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
<       if { echo_test_string=`eval $cmd`; } 2>/dev/null &&
< 	 { test "X$echo_test_string" = "X$echo_test_string"; } 2>/dev/null
<       then
<         break
<       fi
<     done
<   fi
< 
<   if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
<      echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
<      test "X$echo_testing_string" = "X$echo_test_string"; then
<     :
<   else
<     # The Solaris, AIX, and Digital Unix default echo programs unquote
<     # backslashes.  This makes it impossible to quote backslashes using
<     #   echo "$something" | sed 's/\\/\\\\/g'
<     #
<     # So, first we look for a working echo in the user's PATH.
< 
<     lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
<     for dir in $PATH /usr/ucb; do
<       IFS="$lt_save_ifs"
<       if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
<          test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         ECHO="$dir/echo"
<         break
<       fi
<     done
<     IFS="$lt_save_ifs"
< 
<     if test "X$ECHO" = Xecho; then
<       # We didn't find a better echo, so look for alternatives.
<       if test "X`{ print -r '\t'; } 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`{ print -r "$echo_test_string"; } 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         # This shell has a builtin print -r that does the trick.
<         ECHO='print -r'
<       elif { test -f /bin/ksh || test -f /bin/ksh$ac_exeext; } &&
< 	   test "X$CONFIG_SHELL" != X/bin/ksh; then
<         # If we have ksh, try running configure again with it.
<         ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
<         export ORIGINAL_CONFIG_SHELL
<         CONFIG_SHELL=/bin/ksh
<         export CONFIG_SHELL
<         exec $CONFIG_SHELL "$0" --no-reexec ${1+"$@"}
<       else
<         # Try using printf.
<         ECHO='printf %s\n'
<         if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
< 	   echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
< 	   test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  # Cool, printf works
< 	  :
<         elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
< 	  export CONFIG_SHELL
< 	  SHELL="$CONFIG_SHELL"
< 	  export SHELL
< 	  ECHO="$CONFIG_SHELL $0 --fallback-echo"
<         elif echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  ECHO="$CONFIG_SHELL $0 --fallback-echo"
<         else
< 	  # maybe with a smaller string...
< 	  prev=:
< 
< 	  for cmd in 'echo test' 'sed 2q "$0"' 'sed 10q "$0"' 'sed 20q "$0"' 'sed 50q "$0"'; do
< 	    if { test "X$echo_test_string" = "X`eval $cmd`"; } 2>/dev/null
< 	    then
< 	      break
< 	    fi
< 	    prev="$cmd"
< 	  done
< 
< 	  if test "$prev" != 'sed 50q "$0"'; then
< 	    echo_test_string=`eval $prev`
< 	    export echo_test_string
< 	    exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
< 	  else
< 	    # Oops.  We lost completely, so just stick with echo.
< 	    ECHO=echo
< 	  fi
<         fi
<       fi
<     fi
<   fi
< fi
< 
< # Copy echo and quote the copy suitably for passing to libtool from
< # the Makefile, instead of quoting the original, which is used later.
< lt_ECHO=$ECHO
< if test "X$lt_ECHO" = "X$CONFIG_SHELL $0 --fallback-echo"; then
<    lt_ECHO="$CONFIG_SHELL \\\$\$0 --fallback-echo"
< fi
< 
< 
724,725c550,551
< 
< exec 7<&0 </dev/null 6>&1
---
> test -n "$DJDIR" || exec 7<&0 </dev/null
> exec 6>&1
728c554
< # hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
---
> # hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
743d568
< SHELL=${CONFIG_SHELL-/bin/sh}
748,750c573,576
< PACKAGE_VERSION='3.0.10rc0'
< PACKAGE_STRING='libffi 3.0.10rc0'
< PACKAGE_BUGREPORT='http://gcc.gnu.org/bugs.html'
---
> PACKAGE_VERSION='3.0.10rc8'
> PACKAGE_STRING='libffi 3.0.10rc8'
> PACKAGE_BUGREPORT='http://sourceware.org/libffi.html'
> PACKAGE_URL=''
793a620,621
> FFI_DEBUG_FALSE
> FFI_DEBUG_TRUE
795a624,627
> FFI_EXEC_TRAMPOLINE_TABLE
> FFI_EXEC_TRAMPOLINE_TABLE_FALSE
> FFI_EXEC_TRAMPOLINE_TABLE_TRUE
> sys_symbol_underscore
827a660,661
> MOXIE_FALSE
> MOXIE_TRUE
856a691
> PRTDIAG
863c698
< lt_ECHO
---
> MANIFEST_TOOL
864a700
> ac_ct_AR
865a702
> DLLTOOL
920a758
> ax_enable_builddir_sed
962a801
> PACKAGE_URL
972a812
> enable_builddir
978a819
> with_sysroot
979a821,822
> enable_portable_binary
> with_gcc_arch
1055c898,899
<   *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
---
>   *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
>   *=)   ac_optarg= ;;
1101,1102c945
<       { $as_echo "$as_me: error: invalid feature name: $ac_useropt" >&2
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "invalid feature name: $ac_useropt"
1128,1129c971
<       { $as_echo "$as_me: error: invalid feature name: $ac_useropt" >&2
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "invalid feature name: $ac_useropt"
1333,1334c1175
<       { $as_echo "$as_me: error: invalid package name: $ac_useropt" >&2
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "invalid package name: $ac_useropt"
1350,1351c1191
<       { $as_echo "$as_me: error: invalid package name: $ac_useropt" >&2
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "invalid package name: $ac_useropt"
1381,1383c1221,1222
<   -*) { $as_echo "$as_me: error: unrecognized option: $ac_option
< Try \`$0 --help' for more information." >&2
<    { (exit 1); exit 1; }; }
---
>   -*) as_fn_error $? "unrecognized option: \`$ac_option'
> Try \`$0 --help' for more information"
1389,1391c1228,1231
<     expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
<       { $as_echo "$as_me: error: invalid variable name: $ac_envvar" >&2
<    { (exit 1); exit 1; }; }
---
>     case $ac_envvar in #(
>       '' | [0-9]* | *[!_$as_cr_alnum]* )
>       as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
>     esac
1400c1240
<     : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
---
>     : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
1408,1409c1248
<   { $as_echo "$as_me: error: missing argument to $ac_option" >&2
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "missing argument to $ac_option"
1415,1416c1254
<     fatal) { $as_echo "$as_me: error: unrecognized options: $ac_unrecognized_opts" >&2
<    { (exit 1); exit 1; }; } ;;
---
>     fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
1439,1440c1277
<   { $as_echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
1454,1455c1291,1292
<     $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
<     If a cross compiler is detected then cross compile mode will be used." >&2
---
>     $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
>     If a cross compiler is detected then cross compile mode will be used" >&2
1470,1471c1307
<   { $as_echo "$as_me: error: working directory cannot be determined" >&2
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "working directory cannot be determined"
1473,1474c1309
<   { $as_echo "$as_me: error: pwd does not report name of working directory" >&2
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "pwd does not report name of working directory"
1513,1514c1348
<   { $as_echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
1518,1519c1352
< 	cd "$srcdir" && test -r "./$ac_unique_file" || { $as_echo "$as_me: error: $ac_msg" >&2
<    { (exit 1); exit 1; }; }
---
> 	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
1545c1378
< \`configure' configures libffi 3.0.10rc0 to adapt to many kinds of systems.
---
> \`configure' configures libffi 3.0.10rc8 to adapt to many kinds of systems.
1616c1449
<      short | recursive ) echo "Configuration of libffi 3.0.10rc0:";;
---
>      short | recursive ) echo "Configuration of libffi 3.0.10rc8:";;
1623a1457,1458
>   --disable-builddir      disable automatic build in subdir of sources
> 
1630a1466,1468
>   --enable-portable-binary
>                           disable compiler optimizations that would produce
>                           unportable binaries
1643a1482,1485
>   --with-sysroot=DIR Search for dependent libraries within DIR
>                         (or the compiler's sysroot if not specified).
>   --with-gcc-arch=<arch>  use architecture <arch> for gcc -march/-mtune,
>                           instead of guessing
1651c1493
<   CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
---
>   CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
1660c1502
< Report bugs to <http://gcc.gnu.org/bugs.html>.
---
> Report bugs to <http://sourceware.org/libffi.html>.
1723,1724c1565,1566
< libffi configure 3.0.10rc0
< generated by GNU Autoconf 2.63
---
> libffi configure 3.0.10rc8
> generated by GNU Autoconf 2.68
1726,1727c1568
< Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
< 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
---
> Copyright (C) 2010 Free Software Foundation, Inc.
1733,1735d1573
< cat >config.log <<_ACEOF
< This file contains any messages produced by compilers while
< running configure, to aid debugging if configure makes a mistake.
1737,1738c1575,1615
< It was created by libffi $as_me 3.0.10rc0, which was
< generated by GNU Autoconf 2.63.  Invocation command line was
---
> ## ------------------------ ##
> ## Autoconf initialization. ##
> ## ------------------------ ##
> 
> # ac_fn_c_try_compile LINENO
> # --------------------------
> # Try to compile conftest.$ac_ext, and return whether this succeeded.
> ac_fn_c_try_compile ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   rm -f conftest.$ac_objext
>   if { { ac_try="$ac_compile"
> case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_compile") 2>conftest.err
>   ac_status=$?
>   if test -s conftest.err; then
>     grep -v '^ *+' conftest.err >conftest.er1
>     cat conftest.er1 >&5
>     mv -f conftest.er1 conftest.err
>   fi
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && {
> 	 test -z "$ac_c_werror_flag" ||
> 	 test ! -s conftest.err
>        } && test -s conftest.$ac_objext; then :
>   ac_retval=0
> else
>   $as_echo "$as_me: failed program was:" >&5
> sed 's/^/| /' conftest.$ac_ext >&5
> 
> 	ac_retval=1
> fi
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
>   as_fn_set_status $ac_retval
> 
> } # ac_fn_c_try_compile
1740c1617,1649
<   $ $0 $@
---
> # ac_fn_c_try_link LINENO
> # -----------------------
> # Try to link conftest.$ac_ext, and return whether this succeeded.
> ac_fn_c_try_link ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   rm -f conftest.$ac_objext conftest$ac_exeext
>   if { { ac_try="$ac_link"
> case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_link") 2>conftest.err
>   ac_status=$?
>   if test -s conftest.err; then
>     grep -v '^ *+' conftest.err >conftest.er1
>     cat conftest.er1 >&5
>     mv -f conftest.er1 conftest.err
>   fi
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && {
> 	 test -z "$ac_c_werror_flag" ||
> 	 test ! -s conftest.err
>        } && test -s conftest$ac_exeext && {
> 	 test "$cross_compiling" = yes ||
> 	 $as_test_x conftest$ac_exeext
>        }; then :
>   ac_retval=0
> else
>   $as_echo "$as_me: failed program was:" >&5
> sed 's/^/| /' conftest.$ac_ext >&5
1741a1651,1678
> 	ac_retval=1
> fi
>   # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
>   # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
>   # interfere with the next link command; also delete a directory that is
>   # left behind by Apple's compiler.  We do this before executing the actions.
>   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
>   as_fn_set_status $ac_retval
> 
> } # ac_fn_c_try_link
> 
> # ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
> # -------------------------------------------------------
> # Tests whether HEADER exists and can be compiled using the include files in
> # INCLUDES, setting the cache variable VAR accordingly.
> ac_fn_c_check_header_compile ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
> $as_echo_n "checking for $2... " >&6; }
> if eval \${$3+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> #include <$2>
1743c1680,1697
< exec 5>>config.log
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   eval "$3=yes"
> else
>   eval "$3=no"
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> fi
> eval ac_res=\$$3
> 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
> $as_echo "$ac_res" >&6; }
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
> 
> } # ac_fn_c_check_header_compile
> 
> # ac_fn_c_try_cpp LINENO
> # ----------------------
> # Try to preprocess conftest.$ac_ext, and return whether this succeeded.
> ac_fn_c_try_cpp ()
1745,1748c1699,1722
< cat <<_ASUNAME
< ## --------- ##
< ## Platform. ##
< ## --------- ##
---
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   if { { ac_try="$ac_cpp conftest.$ac_ext"
> case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
>   ac_status=$?
>   if test -s conftest.err; then
>     grep -v '^ *+' conftest.err >conftest.er1
>     cat conftest.er1 >&5
>     mv -f conftest.er1 conftest.err
>   fi
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } > conftest.i && {
> 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
> 	 test ! -s conftest.err
>        }; then :
>   ac_retval=0
> else
>   $as_echo "$as_me: failed program was:" >&5
> sed 's/^/| /' conftest.$ac_ext >&5
1750,1754c1724,1727
< hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
< uname -m = `(uname -m) 2>/dev/null || echo unknown`
< uname -r = `(uname -r) 2>/dev/null || echo unknown`
< uname -s = `(uname -s) 2>/dev/null || echo unknown`
< uname -v = `(uname -v) 2>/dev/null || echo unknown`
---
>     ac_retval=1
> fi
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
>   as_fn_set_status $ac_retval
1756,1757c1729
< /usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
< /bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
---
> } # ac_fn_c_try_cpp
1759,1765c1731,1763
< /bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
< /usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
< /usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
< /usr/bin/hostinfo      = `(/usr/bin/hostinfo) 2>/dev/null      || echo unknown`
< /bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
< /usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
< /bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
---
> # ac_fn_c_try_run LINENO
> # ----------------------
> # Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
> # that executables *can* be run.
> ac_fn_c_try_run ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   if { { ac_try="$ac_link"
> case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_link") 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
>   { { case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_try") 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; }; then :
>   ac_retval=0
> else
>   $as_echo "$as_me: program exited with status $ac_status" >&5
>        $as_echo "$as_me: failed program was:" >&5
> sed 's/^/| /' conftest.$ac_ext >&5
1767c1765,1769
< _ASUNAME
---
>        ac_retval=$ac_status
> fi
>   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
>   as_fn_set_status $ac_retval
1769,1776c1771
< as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
< for as_dir in $PATH
< do
<   IFS=$as_save_IFS
<   test -z "$as_dir" && as_dir=.
<   $as_echo "PATH: $as_dir"
< done
< IFS=$as_save_IFS
---
> } # ac_fn_c_try_run
1778c1773,1788
< } >&5
---
> # ac_fn_c_check_func LINENO FUNC VAR
> # ----------------------------------
> # Tests whether FUNC exists, setting the cache variable VAR accordingly
> ac_fn_c_check_func ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
> $as_echo_n "checking for $2... " >&6; }
> if eval \${$3+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
>    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
> #define $2 innocuous_$2
1780c1790,1793
< cat >&5 <<_ACEOF
---
> /* System header to define __stub macros and hopefully few prototypes,
>     which can conflict with char $2 (); below.
>     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
>     <limits.h> exists even on freestanding compilers.  */
1781a1795,1799
> #ifdef __STDC__
> # include <limits.h>
> #else
> # include <assert.h>
> #endif
1783,1785c1801,1815
< ## ----------- ##
< ## Core tests. ##
< ## ----------- ##
---
> #undef $2
> 
> /* Override any GCC internal prototype to avoid an error.
>    Use char because int might match the return type of a GCC
>    builtin and then its argument prototype would still apply.  */
> #ifdef __cplusplus
> extern "C"
> #endif
> char $2 ();
> /* The GNU C library defines this for functions which it implements
>     to always fail with ENOSYS.  Some functions are actually named
>     something starting with __ and the normal name is an alias.  */
> #if defined __stub_$2 || defined __stub___$2
> choke me
> #endif
1786a1817,1823
> int
> main ()
> {
> return $2 ();
>   ;
>   return 0;
> }
1787a1825,1836
> if ac_fn_c_try_link "$LINENO"; then :
>   eval "$3=yes"
> else
>   eval "$3=no"
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> fi
> eval ac_res=\$$3
> 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
> $as_echo "$ac_res" >&6; }
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
1788a1838
> } # ac_fn_c_check_func
1790,1816c1840,1856
< # Keep a trace of the command line.
< # Strip out --no-create and --no-recursion so they do not pile up.
< # Strip out --silent because we don't want to record it for future runs.
< # Also quote any args containing shell meta-characters.
< # Make two passes to allow for proper duplicate-argument suppression.
< ac_configure_args=
< ac_configure_args0=
< ac_configure_args1=
< ac_must_keep_next=false
< for ac_pass in 1 2
< do
<   for ac_arg
<   do
<     case $ac_arg in
<     -no-create | --no-c* | -n | -no-recursion | --no-r*) continue ;;
<     -q | -quiet | --quiet | --quie | --qui | --qu | --q \
<     | -silent | --silent | --silen | --sile | --sil)
<       continue ;;
<     *\'*)
<       ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
<     esac
<     case $ac_pass in
<     1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
<     2)
<       ac_configure_args1="$ac_configure_args1 '$ac_arg'"
<       if test $ac_must_keep_next = true; then
< 	ac_must_keep_next=false # Got value, back to normal.
---
> # ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
> # -------------------------------------------------------
> # Tests whether HEADER exists, giving a warning if it cannot be compiled using
> # the include files in INCLUDES and setting the cache variable VAR
> # accordingly.
> ac_fn_c_check_header_mongrel ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   if eval \${$3+:} false; then :
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
> $as_echo_n "checking for $2... " >&6; }
> if eval \${$3+:} false; then :
>   $as_echo_n "(cached) " >&6
> fi
> eval ac_res=\$$3
> 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
> $as_echo "$ac_res" >&6; }
1818,1828c1858,1869
< 	case $ac_arg in
< 	  *=* | --config-cache | -C | -disable-* | --disable-* \
< 	  | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \
< 	  | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \
< 	  | -with-* | --with-* | -without-* | --without-* | --x)
< 	    case "$ac_configure_args0 " in
< 	      "$ac_configure_args1"*" '$ac_arg' "* ) continue ;;
< 	    esac
< 	    ;;
< 	  -* ) ac_must_keep_next=true ;;
< 	esac
---
>   # Is the header compilable?
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
> $as_echo_n "checking $2 usability... " >&6; }
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> #include <$2>
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_header_compiler=yes
> else
>   ac_header_compiler=no
1830,1836c1871,1873
<       ac_configure_args="$ac_configure_args '$ac_arg'"
<       ;;
<     esac
<   done
< done
< $as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
< $as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
---
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
> $as_echo "$ac_header_compiler" >&6; }
1838,1846c1875,1889
< # When interrupted or exit'd, cleanup temporary files, and complete
< # config.log.  We remove comments because anyway the quotes in there
< # would cause problems or look ugly.
< # WARNING: Use '\'' to represent an apostrophe within the trap.
< # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
< trap 'exit_status=$?
<   # Save into config.log some information that might help in debugging.
<   {
<     echo
---
> # Is the header present?
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
> $as_echo_n "checking $2 presence... " >&6; }
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <$2>
> _ACEOF
> if ac_fn_c_try_cpp "$LINENO"; then :
>   ac_header_preproc=yes
> else
>   ac_header_preproc=no
> fi
> rm -f conftest.err conftest.i conftest.$ac_ext
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
> $as_echo "$ac_header_preproc" >&6; }
1848,1879c1891,1913
<     cat <<\_ASBOX
< ## ---------------- ##
< ## Cache variables. ##
< ## ---------------- ##
< _ASBOX
<     echo
<     # The following way of writing the cache mishandles newlines in values,
< (
<   for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
<     eval ac_val=\$$ac_var
<     case $ac_val in #(
<     *${as_nl}*)
<       case $ac_var in #(
<       *_cv_*) { $as_echo "$as_me:$LINENO: WARNING: cache variable $ac_var contains a newline" >&5
< $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
<       esac
<       case $ac_var in #(
<       _ | IFS | as_nl) ;; #(
<       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
<       *) $as_unset $ac_var ;;
<       esac ;;
<     esac
<   done
<   (set) 2>&1 |
<     case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
<     *${as_nl}ac_space=\ *)
<       sed -n \
< 	"s/'\''/'\''\\\\'\'''\''/g;
< 	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
<       ;; #(
<     *)
<       sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
---
> # So?  What about this header?
> case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
>   yes:no: )
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
> $as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
> $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
>     ;;
>   no:yes:* )
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
> $as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
> $as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
> $as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
> $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
> $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
> ( $as_echo "## ------------------------------------------------ ##
> ## Report this to http://sourceware.org/libffi.html ##
> ## ------------------------------------------------ ##"
>      ) | sed "s/^/$as_me: WARNING:     /" >&2
1881,1913d1914
<     esac |
<     sort
< )
<     echo
< 
<     cat <<\_ASBOX
< ## ----------------- ##
< ## Output variables. ##
< ## ----------------- ##
< _ASBOX
<     echo
<     for ac_var in $ac_subst_vars
<     do
<       eval ac_val=\$$ac_var
<       case $ac_val in
<       *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
<       esac
<       $as_echo "$ac_var='\''$ac_val'\''"
<     done | sort
<     echo
< 
<     if test -n "$ac_subst_files"; then
<       cat <<\_ASBOX
< ## ------------------- ##
< ## File substitutions. ##
< ## ------------------- ##
< _ASBOX
<       echo
<       for ac_var in $ac_subst_files
<       do
< 	eval ac_val=\$$ac_var
< 	case $ac_val in
< 	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
1915,1917c1916,1921
< 	$as_echo "$ac_var='\''$ac_val'\''"
<       done | sort
<       echo
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
> $as_echo_n "checking for $2... " >&6; }
> if eval \${$3+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   eval "$3=\$ac_header_compiler"
1919,1928c1923,1925
< 
<     if test -s confdefs.h; then
<       cat <<\_ASBOX
< ## ----------- ##
< ## confdefs.h. ##
< ## ----------- ##
< _ASBOX
<       echo
<       cat confdefs.h
<       echo
---
> eval ac_res=\$$3
> 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
> $as_echo "$ac_res" >&6; }
1930,1944c1927
<     test "$ac_signal" != 0 &&
<       $as_echo "$as_me: caught signal $ac_signal"
<     $as_echo "$as_me: exit $exit_status"
<   } >&5
<   rm -f core *.core core.conftest.* &&
<     rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
<     exit $exit_status
< ' 0
< for ac_signal in 1 2 13 15; do
<   trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
< done
< ac_signal=0
< 
< # confdefs.h avoids OS command line length limits that DEFS can exceed.
< rm -f -r conftest* confdefs.h
---
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
1946c1929
< # Predefined preprocessor variables.
---
> } # ac_fn_c_check_header_mongrel
1948,1949c1931,1954
< cat >>confdefs.h <<_ACEOF
< #define PACKAGE_NAME "$PACKAGE_NAME"
---
> # ac_fn_c_check_type LINENO TYPE VAR INCLUDES
> # -------------------------------------------
> # Tests whether TYPE exists after having included INCLUDES, setting cache
> # variable VAR accordingly.
> ac_fn_c_check_type ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
> $as_echo_n "checking for $2... " >&6; }
> if eval \${$3+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   eval "$3=no"
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> if (sizeof ($2))
> 	 return 0;
>   ;
>   return 0;
> }
1951,1954c1956,1967
< 
< 
< cat >>confdefs.h <<_ACEOF
< #define PACKAGE_TARNAME "$PACKAGE_TARNAME"
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> if (sizeof (($2)))
> 	    return 0;
>   ;
>   return 0;
> }
1955a1969
> if ac_fn_c_try_compile "$LINENO"; then :
1956a1971,1981
> else
>   eval "$3=yes"
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> fi
> eval ac_res=\$$3
> 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
> $as_echo "$ac_res" >&6; }
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
1958,1960c1983
< cat >>confdefs.h <<_ACEOF
< #define PACKAGE_VERSION "$PACKAGE_VERSION"
< _ACEOF
---
> } # ac_fn_c_check_type
1961a1985,2002
> # ac_fn_c_compute_int LINENO EXPR VAR INCLUDES
> # --------------------------------------------
> # Tries to find the compile-time value of EXPR in a program that includes
> # INCLUDES, setting VAR accordingly. Returns whether the value could be
> # computed
> ac_fn_c_compute_int ()
> {
>   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>   if test "$cross_compiling" = yes; then
>     # Depending upon the size, compute the lo and hi bounds.
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> static int test_array [1 - 2 * !(($2) >= 0)];
> test_array [0] = 0
1963,1964c2004,2006
< cat >>confdefs.h <<_ACEOF
< #define PACKAGE_STRING "$PACKAGE_STRING"
---
>   ;
>   return 0;
> }
1965a2008,2018
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_lo=0 ac_mid=0
>   while :; do
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> static int test_array [1 - 2 * !(($2) <= $ac_mid)];
> test_array [0] = 0
1967,1969c2020,2022
< 
< cat >>confdefs.h <<_ACEOF
< #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
---
>   ;
>   return 0;
> }
1971,1981c2024,2025
< 
< 
< # Let the site file select an alternate cache file if it wants to.
< # Prefer an explicitly selected file to automatically selected ones.
< ac_site_file1=NONE
< ac_site_file2=NONE
< if test -n "$CONFIG_SITE"; then
<   ac_site_file1=$CONFIG_SITE
< elif test "x$prefix" != xNONE; then
<   ac_site_file1=$prefix/share/config.site
<   ac_site_file2=$prefix/etc/config.site
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_hi=$ac_mid; break
1983,1984c2027,2030
<   ac_site_file1=$ac_default_prefix/share/config.site
<   ac_site_file2=$ac_default_prefix/etc/config.site
---
>   as_fn_arith $ac_mid + 1 && ac_lo=$as_val
> 			if test $ac_lo -le $ac_mid; then
> 			  ac_lo= ac_hi=
> 			  break
1986,1993c2032
< for ac_site_file in "$ac_site_file1" "$ac_site_file2"
< do
<   test "x$ac_site_file" = xNONE && continue
<   if test -r "$ac_site_file"; then
<     { $as_echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
< $as_echo "$as_me: loading site script $ac_site_file" >&6;}
<     sed 's/^/| /' "$ac_site_file" >&5
<     . "$ac_site_file"
---
> 			as_fn_arith 2 '*' $ac_mid + 1 && ac_mid=$as_val
1994a2034
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
1995a2036,2044
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> static int test_array [1 - 2 * !(($2) < 0)];
> test_array [0] = 0
1997,2006c2046,2074
< if test -r "$cache_file"; then
<   # Some versions of bash will fail to source /dev/null (special
<   # files actually), so we avoid doing that.
<   if test -f "$cache_file"; then
<     { $as_echo "$as_me:$LINENO: loading cache $cache_file" >&5
< $as_echo "$as_me: loading cache $cache_file" >&6;}
<     case $cache_file in
<       [\\/]* | ?:[\\/]* ) . "$cache_file";;
<       *)                      . "./$cache_file";;
<     esac
---
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_hi=-1 ac_mid=-1
>   while :; do
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> static int test_array [1 - 2 * !(($2) >= $ac_mid)];
> test_array [0] = 0
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_lo=$ac_mid; break
> else
>   as_fn_arith '(' $ac_mid ')' - 1 && ac_hi=$as_val
> 			if test $ac_mid -le $ac_hi; then
> 			  ac_lo= ac_hi=
> 			  break
> 			fi
> 			as_fn_arith 2 '*' $ac_mid && ac_mid=$as_val
2007a2076,2077
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>   done
2009,2011c2079
<   { $as_echo "$as_me:$LINENO: creating cache $cache_file" >&5
< $as_echo "$as_me: creating cache $cache_file" >&6;}
<   >$cache_file
---
>   ac_lo= ac_hi=
2013,2044c2081
< 
< # Check that the precious variables saved in the cache have kept the same
< # value.
< ac_cache_corrupted=false
< for ac_var in $ac_precious_vars; do
<   eval ac_old_set=\$ac_cv_env_${ac_var}_set
<   eval ac_new_set=\$ac_env_${ac_var}_set
<   eval ac_old_val=\$ac_cv_env_${ac_var}_value
<   eval ac_new_val=\$ac_env_${ac_var}_value
<   case $ac_old_set,$ac_new_set in
<     set,)
<       { $as_echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
< $as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
<       ac_cache_corrupted=: ;;
<     ,set)
<       { $as_echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
< $as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
<       ac_cache_corrupted=: ;;
<     ,);;
<     *)
<       if test "x$ac_old_val" != "x$ac_new_val"; then
< 	# differences in whitespace do not lead to failure.
< 	ac_old_val_w=`echo x $ac_old_val`
< 	ac_new_val_w=`echo x $ac_new_val`
< 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
< 	  { $as_echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
< $as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
< 	  ac_cache_corrupted=:
< 	else
< 	  { $as_echo "$as_me:$LINENO: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
< $as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
< 	  eval $ac_var=\$ac_old_val
---
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
2046,2061c2083,2103
< 	{ $as_echo "$as_me:$LINENO:   former value:  \`$ac_old_val'" >&5
< $as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
< 	{ $as_echo "$as_me:$LINENO:   current value: \`$ac_new_val'" >&5
< $as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
<       fi;;
<   esac
<   # Pass precious variables to config.status.
<   if test "$ac_new_set" = set; then
<     case $ac_new_val in
<     *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
<     *) ac_arg=$ac_var=$ac_new_val ;;
<     esac
<     case " $ac_configure_args " in
<       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
<       *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
<     esac
---
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> # Binary search between lo and hi bounds.
> while test "x$ac_lo" != "x$ac_hi"; do
>   as_fn_arith '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo && ac_mid=$as_val
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> int
> main ()
> {
> static int test_array [1 - 2 * !(($2) <= $ac_mid)];
> test_array [0] = 0
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_hi=$ac_mid
> else
>   as_fn_arith '(' $ac_mid ')' + 1 && ac_lo=$as_val
2062a2105
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
2064,2072c2107,2121
< if $ac_cache_corrupted; then
<   { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
< $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
<   { $as_echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
< $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
<   { { $as_echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
< $as_echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
<    { (exit 1); exit 1; }; }
< fi
---
> case $ac_lo in #((
> ?*) eval "$3=\$ac_lo"; ac_retval=0 ;;
> '') ac_retval=1 ;;
> esac
>   else
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> $4
> static long int longval () { return $2; }
> static unsigned long int ulongval () { return $2; }
> #include <stdio.h>
> #include <stdlib.h>
> int
> main ()
> {
2073a2123,2142
>   FILE *f = fopen ("conftest.val", "w");
>   if (! f)
>     return 1;
>   if (($2) < 0)
>     {
>       long int i = longval ();
>       if (i != ($2))
> 	return 1;
>       fprintf (f, "%ld", i);
>     }
>   else
>     {
>       unsigned long int i = ulongval ();
>       if (i != ($2))
> 	return 1;
>       fprintf (f, "%lu", i);
>     }
>   /* Do not output a trailing newline, as this causes \r\n confusion
>      on some platforms.  */
>   return ferror (f) || fclose (f) != 0;
2074a2144,2155
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_run "$LINENO"; then :
>   echo >>conftest.val; read $3 <conftest.val; ac_retval=0
> else
>   ac_retval=1
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
> rm -f conftest.val
2075a2157,2159
>   fi
>   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
>   as_fn_set_status $ac_retval
2076a2161,2164
> } # ac_fn_c_compute_int
> cat >config.log <<_ACEOF
> This file contains any messages produced by compilers while
> running configure, to aid debugging if configure makes a mistake.
2077a2166,2167
> It was created by libffi $as_me 3.0.10rc8, which was
> generated by GNU Autoconf 2.68.  Invocation command line was
2078a2169
>   $ $0 $@
2079a2171,2177
> _ACEOF
> exec 5>>config.log
> {
> cat <<_ASUNAME
> ## --------- ##
> ## Platform. ##
> ## --------- ##
2080a2179,2183
> hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
> uname -m = `(uname -m) 2>/dev/null || echo unknown`
> uname -r = `(uname -r) 2>/dev/null || echo unknown`
> uname -s = `(uname -s) 2>/dev/null || echo unknown`
> uname -v = `(uname -v) 2>/dev/null || echo unknown`
2081a2185,2186
> /usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
> /bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
2082a2188,2194
> /bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
> /usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
> /usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
> /usr/bin/hostinfo      = `(/usr/bin/hostinfo) 2>/dev/null      || echo unknown`
> /bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
> /usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
> /bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
2083a2196
> _ASUNAME
2084a2198,2205
> as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     $as_echo "PATH: $as_dir"
>   done
> IFS=$as_save_IFS
2085a2207
> } >&5
2086a2209
> cat >&5 <<_ACEOF
2088a2212,2214
> ## ----------- ##
> ## Core tests. ##
> ## ----------- ##
2089a2216
> _ACEOF
2091a2219,2265
> # Keep a trace of the command line.
> # Strip out --no-create and --no-recursion so they do not pile up.
> # Strip out --silent because we don't want to record it for future runs.
> # Also quote any args containing shell meta-characters.
> # Make two passes to allow for proper duplicate-argument suppression.
> ac_configure_args=
> ac_configure_args0=
> ac_configure_args1=
> ac_must_keep_next=false
> for ac_pass in 1 2
> do
>   for ac_arg
>   do
>     case $ac_arg in
>     -no-create | --no-c* | -n | -no-recursion | --no-r*) continue ;;
>     -q | -quiet | --quiet | --quie | --qui | --qu | --q \
>     | -silent | --silent | --silen | --sile | --sil)
>       continue ;;
>     *\'*)
>       ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
>     esac
>     case $ac_pass in
>     1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
>     2)
>       as_fn_append ac_configure_args1 " '$ac_arg'"
>       if test $ac_must_keep_next = true; then
> 	ac_must_keep_next=false # Got value, back to normal.
>       else
> 	case $ac_arg in
> 	  *=* | --config-cache | -C | -disable-* | --disable-* \
> 	  | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \
> 	  | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \
> 	  | -with-* | --with-* | -without-* | --without-* | --x)
> 	    case "$ac_configure_args0 " in
> 	      "$ac_configure_args1"*" '$ac_arg' "* ) continue ;;
> 	    esac
> 	    ;;
> 	  -* ) ac_must_keep_next=true ;;
> 	esac
>       fi
>       as_fn_append ac_configure_args " '$ac_arg'"
>       ;;
>     esac
>   done
> done
> { ac_configure_args0=; unset ac_configure_args0;}
> { ac_configure_args1=; unset ac_configure_args1;}
2092a2267,2275
> # When interrupted or exit'd, cleanup temporary files, and complete
> # config.log.  We remove comments because anyway the quotes in there
> # would cause problems or look ugly.
> # WARNING: Use '\'' to represent an apostrophe within the trap.
> # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
> trap 'exit_status=$?
>   # Save into config.log some information that might help in debugging.
>   {
>     echo
2093a2277,2311
>     $as_echo "## ---------------- ##
> ## Cache variables. ##
> ## ---------------- ##"
>     echo
>     # The following way of writing the cache mishandles newlines in values,
> (
>   for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
>     eval ac_val=\$$ac_var
>     case $ac_val in #(
>     *${as_nl}*)
>       case $ac_var in #(
>       *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
> $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
>       esac
>       case $ac_var in #(
>       _ | IFS | as_nl) ;; #(
>       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
>       *) { eval $ac_var=; unset $ac_var;} ;;
>       esac ;;
>     esac
>   done
>   (set) 2>&1 |
>     case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
>     *${as_nl}ac_space=\ *)
>       sed -n \
> 	"s/'\''/'\''\\\\'\'''\''/g;
> 	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
>       ;; #(
>     *)
>       sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
>       ;;
>     esac |
>     sort
> )
>     echo
2094a2313,2325
>     $as_echo "## ----------------- ##
> ## Output variables. ##
> ## ----------------- ##"
>     echo
>     for ac_var in $ac_subst_vars
>     do
>       eval ac_val=\$$ac_var
>       case $ac_val in
>       *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
>       esac
>       $as_echo "$ac_var='\''$ac_val'\''"
>     done | sort
>     echo
2095a2327,2341
>     if test -n "$ac_subst_files"; then
>       $as_echo "## ------------------- ##
> ## File substitutions. ##
> ## ------------------- ##"
>       echo
>       for ac_var in $ac_subst_files
>       do
> 	eval ac_val=\$$ac_var
> 	case $ac_val in
> 	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
> 	esac
> 	$as_echo "$ac_var='\''$ac_val'\''"
>       done | sort
>       echo
>     fi
2096a2343,2362
>     if test -s confdefs.h; then
>       $as_echo "## ----------- ##
> ## confdefs.h. ##
> ## ----------- ##"
>       echo
>       cat confdefs.h
>       echo
>     fi
>     test "$ac_signal" != 0 &&
>       $as_echo "$as_me: caught signal $ac_signal"
>     $as_echo "$as_me: exit $exit_status"
>   } >&5
>   rm -f core *.core core.conftest.* &&
>     rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
>     exit $exit_status
> ' 0
> for ac_signal in 1 2 13 15; do
>   trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
> done
> ac_signal=0
2098,2102c2364,2511
< ac_ext=c
< ac_cpp='$CPP $CPPFLAGS'
< ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
< ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
< ac_compiler_gnu=$ac_cv_c_compiler_gnu
---
> # confdefs.h avoids OS command line length limits that DEFS can exceed.
> rm -f -r conftest* confdefs.h
> 
> $as_echo "/* confdefs.h */" > confdefs.h
> 
> # Predefined preprocessor variables.
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_NAME "$PACKAGE_NAME"
> _ACEOF
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_TARNAME "$PACKAGE_TARNAME"
> _ACEOF
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_VERSION "$PACKAGE_VERSION"
> _ACEOF
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_STRING "$PACKAGE_STRING"
> _ACEOF
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
> _ACEOF
> 
> cat >>confdefs.h <<_ACEOF
> #define PACKAGE_URL "$PACKAGE_URL"
> _ACEOF
> 
> 
> # Let the site file select an alternate cache file if it wants to.
> # Prefer an explicitly selected file to automatically selected ones.
> ac_site_file1=NONE
> ac_site_file2=NONE
> if test -n "$CONFIG_SITE"; then
>   # We do not want a PATH search for config.site.
>   case $CONFIG_SITE in #((
>     -*)  ac_site_file1=./$CONFIG_SITE;;
>     */*) ac_site_file1=$CONFIG_SITE;;
>     *)   ac_site_file1=./$CONFIG_SITE;;
>   esac
> elif test "x$prefix" != xNONE; then
>   ac_site_file1=$prefix/share/config.site
>   ac_site_file2=$prefix/etc/config.site
> else
>   ac_site_file1=$ac_default_prefix/share/config.site
>   ac_site_file2=$ac_default_prefix/etc/config.site
> fi
> for ac_site_file in "$ac_site_file1" "$ac_site_file2"
> do
>   test "x$ac_site_file" = xNONE && continue
>   if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
> $as_echo "$as_me: loading site script $ac_site_file" >&6;}
>     sed 's/^/| /' "$ac_site_file" >&5
>     . "$ac_site_file" \
>       || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
> $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
> as_fn_error $? "failed to load site script $ac_site_file
> See \`config.log' for more details" "$LINENO" 5; }
>   fi
> done
> 
> if test -r "$cache_file"; then
>   # Some versions of bash will fail to source /dev/null (special files
>   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
>   if test /dev/null != "$cache_file" && test -f "$cache_file"; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
> $as_echo "$as_me: loading cache $cache_file" >&6;}
>     case $cache_file in
>       [\\/]* | ?:[\\/]* ) . "$cache_file";;
>       *)                      . "./$cache_file";;
>     esac
>   fi
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
> $as_echo "$as_me: creating cache $cache_file" >&6;}
>   >$cache_file
> fi
> 
> # Check that the precious variables saved in the cache have kept the same
> # value.
> ac_cache_corrupted=false
> for ac_var in $ac_precious_vars; do
>   eval ac_old_set=\$ac_cv_env_${ac_var}_set
>   eval ac_new_set=\$ac_env_${ac_var}_set
>   eval ac_old_val=\$ac_cv_env_${ac_var}_value
>   eval ac_new_val=\$ac_env_${ac_var}_value
>   case $ac_old_set,$ac_new_set in
>     set,)
>       { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
> $as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
>       ac_cache_corrupted=: ;;
>     ,set)
>       { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
> $as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
>       ac_cache_corrupted=: ;;
>     ,);;
>     *)
>       if test "x$ac_old_val" != "x$ac_new_val"; then
> 	# differences in whitespace do not lead to failure.
> 	ac_old_val_w=`echo x $ac_old_val`
> 	ac_new_val_w=`echo x $ac_new_val`
> 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
> 	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
> $as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
> 	  ac_cache_corrupted=:
> 	else
> 	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
> $as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
> 	  eval $ac_var=\$ac_old_val
> 	fi
> 	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
> $as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
> 	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
> $as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
>       fi;;
>   esac
>   # Pass precious variables to config.status.
>   if test "$ac_new_set" = set; then
>     case $ac_new_val in
>     *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
>     *) ac_arg=$ac_var=$ac_new_val ;;
>     esac
>     case " $ac_configure_args " in
>       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
>       *) as_fn_append ac_configure_args " '$ac_arg'" ;;
>     esac
>   fi
> done
> if $ac_cache_corrupted; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
> $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
>   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
> $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
>   as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
> fi
> ## -------------------- ##
> ## Main body of script. ##
> ## -------------------- ##
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
2125,2127c2534
<   { { $as_echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&5
< $as_echo "$as_me: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
2141,2143c2548
<   { { $as_echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
< $as_echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
2145c2550
< { $as_echo "$as_me:$LINENO: checking build system type" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
2147c2552
< if test "${ac_cv_build+set}" = set; then
---
> if ${ac_cv_build+:} false; then :
2154,2156c2559
<   { { $as_echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
< $as_echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
2158,2160c2561
<   { { $as_echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
< $as_echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
2163c2564
< { $as_echo "$as_me:$LINENO: result: $ac_cv_build" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
2167,2169c2568
< *) { { $as_echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
< $as_echo "$as_me: error: invalid value of canonical build" >&2;}
<    { (exit 1); exit 1; }; };;
---
> *) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
2185c2584
< { $as_echo "$as_me:$LINENO: checking host system type" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
2187c2586
< if test "${ac_cv_host+set}" = set; then
---
> if ${ac_cv_host+:} false; then :
2194,2196c2593
<     { { $as_echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
< $as_echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
2200c2597
< { $as_echo "$as_me:$LINENO: result: $ac_cv_host" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
2204,2206c2601
< *) { { $as_echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
< $as_echo "$as_me: error: invalid value of canonical host" >&2;}
<    { (exit 1); exit 1; }; };;
---
> *) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
2222c2617
< { $as_echo "$as_me:$LINENO: checking target system type" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
2224c2619
< if test "${ac_cv_target+set}" = set; then
---
> if ${ac_cv_target+:} false; then :
2231,2233c2626
<     { { $as_echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&5
< $as_echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $target_alias failed" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
2237c2630
< { $as_echo "$as_me:$LINENO: result: $ac_cv_target" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
2241,2243c2634
< *) { { $as_echo "$as_me:$LINENO: error: invalid value of canonical target" >&5
< $as_echo "$as_me: error: invalid value of canonical target" >&2;}
<    { (exit 1); exit 1; }; };;
---
> *) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
2264a2656
> 
2268a2661,2764
> 
>    # [$]@ is unsable in 2.60+ but earlier autoconf had no ac_configure_args
>    if test "${ac_configure_args+set}" != "set" ; then
>       ac_configure_args=
>       for ac_arg in ${1+"$@"}; do
>          ac_configure_args="$ac_configure_args '$ac_arg'"
>       done
>    fi
> 
> # expand $ac_aux_dir to an absolute path
> am_aux_dir=`cd $ac_aux_dir && pwd`
> 
> 
> ax_enable_builddir="."
> # Check whether --enable-builddir was given.
> if test "${enable_builddir+set}" = set; then :
>   enableval=$enable_builddir; ax_enable_builddir="$enableval"
> else
>   ax_enable_builddir="auto"
> fi
> 
> if test ".$ac_srcdir_defaulted" != ".no" ; then
> if test ".$srcdir" = ".." ; then
>   if test -f config.status ; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: toplevel srcdir already configured... skipping subdir build" >&5
> $as_echo "$as_me: toplevel srcdir already configured... skipping subdir build" >&6;}
>   else
>     test ".$ax_enable_builddir" = "."  && ax_enable_builddir="."
>     test ".$ax_enable_builddir" = ".no"  && ax_enable_builddir="."
>     test ".$TARGET" = "." && TARGET="$target"
>     test ".$ax_enable_builddir" = ".auto" && ax_enable_builddir="$TARGET"
>     if test ".$ax_enable_builddir" != ".." ; then    # we know where to go and
>       as_dir=$ax_enable_builddir; as_fn_mkdir_p
>       echo __.$ax_enable_builddir.__ > $ax_enable_builddir/conftest.tmp
>       cd $ax_enable_builddir
>       if grep __.$ax_enable_builddir.__ conftest.tmp >/dev/null 2>/dev/null ; then
>         rm conftest.tmp
>         { $as_echo "$as_me:${as_lineno-$LINENO}: result: continue configure in default builddir \"./$ax_enable_builddir\"" >&5
> $as_echo "continue configure in default builddir \"./$ax_enable_builddir\"" >&6; }
>       else
>         as_fn_error $? "could not change to default builddir \"./$ax_enable_builddir\"" "$LINENO" 5
>       fi
>       srcdir=`echo "$ax_enable_builddir" |
>               sed -e 's,^\./,,;s,[^/]$,&/,;s,[^/]*/,../,g;s,[/]$,,;'`
>       # going to restart from subdirectory location
>       test -f $srcdir/config.log   && mv $srcdir/config.log   .
>       test -f $srcdir/confdefs.h   && mv $srcdir/confdefs.h   .
>       test -f $srcdir/conftest.log && mv $srcdir/conftest.log .
>       test -f $srcdir/$cache_file  && mv $srcdir/$cache_file  .
>       { $as_echo "$as_me:${as_lineno-$LINENO}: result: ....exec $SHELL $srcdir/$0 \"--srcdir=$srcdir\" \"--enable-builddir=$ax_enable_builddir\" ${1+\"$@\"}" >&5
> $as_echo "....exec $SHELL $srcdir/$0 \"--srcdir=$srcdir\" \"--enable-builddir=$ax_enable_builddir\" ${1+\"$@\"}" >&6; }
>       case "$0" in # restart
>        /\\*) eval $SHELL "'$0'" "'--srcdir=$srcdir'" "'--enable-builddir=$ax_enable_builddir'" $ac_configure_args ;;
>        *) eval $SHELL "'$srcdir/$0'" "'--srcdir=$srcdir'" "'--enable-builddir=$ax_enable_builddir'" $ac_configure_args ;;
>       esac ; exit $?
>     fi
>   fi
> fi fi
> test ".$ax_enable_builddir" = ".auto" && ax_enable_builddir="."
> # Extract the first word of "gsed sed", so it can be a program name with args.
> set dummy gsed sed; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_path_ax_enable_builddir_sed+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   case $ax_enable_builddir_sed in
>   [\\/]* | ?:[\\/]*)
>   ac_cv_path_ax_enable_builddir_sed="$ax_enable_builddir_sed" # Let the user override the test with a path.
>   ;;
>   *)
>   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_path_ax_enable_builddir_sed="$as_dir/$ac_word$ac_exec_ext"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
>   test -z "$ac_cv_path_ax_enable_builddir_sed" && ac_cv_path_ax_enable_builddir_sed="sed"
>   ;;
> esac
> fi
> ax_enable_builddir_sed=$ac_cv_path_ax_enable_builddir_sed
> if test -n "$ax_enable_builddir_sed"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_enable_builddir_sed" >&5
> $as_echo "$ax_enable_builddir_sed" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
> 
> ax_enable_builddir_auxdir="$am_aux_dir"
> ac_config_commands="$ac_config_commands buildir"
> 
> 
2285c2781
< { $as_echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
2288c2784
< if test "${ac_cv_path_install+set}" = set; then
---
> if ${ac_cv_path_install+:} false; then :
2297,2298c2793,2794
< case $as_dir/ in
<   ./ | .// | /cC/* | \
---
> case $as_dir/ in #((
>   ./ | .// | /[cC]/* | \
2300c2796
<   ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
---
>   ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
2353c2849
< { $as_echo "$as_me:$LINENO: result: $INSTALL" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
2364c2860
< { $as_echo "$as_me:$LINENO: checking whether build environment is sane" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
2375,2377c2871
<     { { $as_echo "$as_me:$LINENO: error: unsafe absolute working directory name" >&5
< $as_echo "$as_me: error: unsafe absolute working directory name" >&2;}
<    { (exit 1); exit 1; }; };;
---
>     as_fn_error $? "unsafe absolute working directory name" "$LINENO" 5;;
2381,2383c2875
<     { { $as_echo "$as_me:$LINENO: error: unsafe srcdir value: \`$srcdir'" >&5
< $as_echo "$as_me: error: unsafe srcdir value: \`$srcdir'" >&2;}
<    { (exit 1); exit 1; }; };;
---
>     as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
2405,2409c2897,2898
<       { { $as_echo "$as_me:$LINENO: error: ls -t appears to fail.  Make sure there is not a broken
< alias in your environment" >&5
< $as_echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
< alias in your environment" >&2;}
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
> alias in your environment" "$LINENO" 5
2418,2422c2907,2908
<    { { $as_echo "$as_me:$LINENO: error: newly created file is older than distributed files!
< Check your system clock" >&5
< $as_echo "$as_me: error: newly created file is older than distributed files!
< Check your system clock" >&2;}
<    { (exit 1); exit 1; }; }
---
>    as_fn_error $? "newly created file is older than distributed files!
> Check your system clock" "$LINENO" 5
2424c2910
< { $as_echo "$as_me:$LINENO: result: yes" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
2436,2438d2921
< # expand $ac_aux_dir to an absolute path
< am_aux_dir=`cd $ac_aux_dir && pwd`
< 
2452c2935
<   { $as_echo "$as_me:$LINENO: WARNING: \`missing' script is too old or missing" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
2473c2956
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2475c2958
< if test "${ac_cv_prog_STRIP+set}" = set; then
---
> if ${ac_cv_prog_STRIP+:} false; then :
2489c2972
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2500c2983
<   { $as_echo "$as_me:$LINENO: result: $STRIP" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
2503c2986
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2513c2996
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2515c2998
< if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
2529c3012
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2540c3023
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
2543c3026
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2552c3035
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
2565c3048
< { $as_echo "$as_me:$LINENO: checking for a thread-safe mkdir -p" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a thread-safe mkdir -p" >&5
2568c3051
<   if test "${ac_cv_path_mkdir+set}" = set; then
---
>   if ${ac_cv_path_mkdir+:} false; then :
2592a3076
>   test -d ./--version && rmdir ./--version
2600d3083
<     test -d ./--version && rmdir ./--version
2604c3087
< { $as_echo "$as_me:$LINENO: result: $MKDIR_P" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
2617c3100
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2619c3102
< if test "${ac_cv_prog_AWK+set}" = set; then
---
> if ${ac_cv_prog_AWK+:} false; then :
2633c3116
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2644c3127
<   { $as_echo "$as_me:$LINENO: result: $AWK" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
2647c3130
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2655c3138
< { $as_echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \$(MAKE)" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
2659c3142
< if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then
---
> if eval \${ac_cv_prog_make_${ac_make}_set+:} false; then :
2677c3160
<   { $as_echo "$as_me:$LINENO: result: yes" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
2681c3164
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2701,2703c3184
<     { { $as_echo "$as_me:$LINENO: error: source directory already configured; run \"make distclean\" there first" >&5
< $as_echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
2719c3200
<  VERSION='3.0.10rc0'
---
>  VERSION='3.0.10rc8'
2763a3245,3246
> # Also save and restore CFLAGS, since AC_PROG_CC will come up with
> # defaults of its own if none are provided.
2766a3250
> save_CFLAGS=$CFLAGS
2775c3259
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2777c3261
< if test "${ac_cv_prog_CC+set}" = set; then
---
> if ${ac_cv_prog_CC+:} false; then :
2791c3275
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2802c3286
<   { $as_echo "$as_me:$LINENO: result: $CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
2805c3289
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2815c3299
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2817c3301
< if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_CC+:} false; then :
2831c3315
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2842c3326
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
2845c3329
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2854c3338
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
2868c3352
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2870c3354
< if test "${ac_cv_prog_CC+set}" = set; then
---
> if ${ac_cv_prog_CC+:} false; then :
2884c3368
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2895c3379
<   { $as_echo "$as_me:$LINENO: result: $CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
2898c3382
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2908c3392
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2910c3394
< if test "${ac_cv_prog_CC+set}" = set; then
---
> if ${ac_cv_prog_CC+:} false; then :
2929c3413
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2952c3436
<   { $as_echo "$as_me:$LINENO: result: $CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
2955c3439
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
2967c3451
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
2969c3453
< if test "${ac_cv_prog_CC+set}" = set; then
---
> if ${ac_cv_prog_CC+:} false; then :
2983c3467
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
2994c3478
<   { $as_echo "$as_me:$LINENO: result: $CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
2997c3481
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
3011c3495
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
3013c3497
< if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_CC+:} false; then :
3027c3511
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
3038c3522
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
3041c3525
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
3054c3538
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
3065c3549
< test -z "$CC" && { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
> test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
3067,3071c3551,3552
< { { $as_echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: no acceptable C compiler found in \$PATH
< See \`config.log' for more details." >&2;}
<    { (exit 1); exit 1; }; }; }
---
> as_fn_error $? "no acceptable C compiler found in \$PATH
> See \`config.log' for more details" "$LINENO" 5; }
3074c3555
< $as_echo "$as_me:$LINENO: checking for C compiler version" >&5
---
> $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
3077,3099c3558,3559
< { (ac_try="$ac_compiler --version >&5"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compiler --version >&5") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }
< { (ac_try="$ac_compiler -v >&5"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compiler -v >&5") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }
< { (ac_try="$ac_compiler -V >&5"
---
> for ac_option in --version -v -V -qversion; do
>   { { ac_try="$ac_compiler $ac_option >&5"
3104,3106c3564,3566
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compiler -V >&5") 2>&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
3108,3109c3568,3577
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }
---
>   if test -s conftest.err; then
>     sed '10a\
> ... rest of stderr output deleted ...
>          10q' conftest.err >conftest.er1
>     cat conftest.er1 >&5
>   fi
>   rm -f conftest.er1 conftest.err
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
> done
3111,3115c3579
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3131,3132c3595,3596
< { $as_echo "$as_me:$LINENO: checking for C compiler default output file name" >&5
< $as_echo_n "checking for C compiler default output file name... " >&6; }
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
> $as_echo_n "checking whether the C compiler works... " >&6; }
3148c3612
< if { (ac_try="$ac_link_default"
---
> if { { ac_try="$ac_link_default"
3153,3154c3617,3618
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
3157,3158c3621,3622
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then :
3194,3197c3658,3660
< 
< { $as_echo "$as_me:$LINENO: result: $ac_file" >&5
< $as_echo "$ac_file" >&6; }
< if test -z "$ac_file"; then
---
> if test -z "$ac_file"; then :
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
3201c3664
< { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
> { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
3203,3233c3666,3667
< { { $as_echo "$as_me:$LINENO: error: C compiler cannot create executables
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: C compiler cannot create executables
< See \`config.log' for more details." >&2;}
<    { (exit 77); exit 77; }; }; }
< fi
< 
< ac_exeext=$ac_cv_exeext
< 
< # Check that the compiler produces executables we can run.  If not, either
< # the compiler is broken, or we cross compile.
< { $as_echo "$as_me:$LINENO: checking whether the C compiler works" >&5
< $as_echo_n "checking whether the C compiler works... " >&6; }
< # FIXME: These cross compiler hacks should be removed for Autoconf 3.0
< # If not cross compiling, check that we can run a simple program.
< if test "$cross_compiling" != yes; then
<   if { ac_try='./$ac_file'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<     cross_compiling=no
<   else
<     if test "$cross_compiling" = maybe; then
< 	cross_compiling=yes
---
> as_fn_error 77 "C compiler cannot create executables
> See \`config.log' for more details" "$LINENO" 5; }
3235,3247c3669
< 	{ { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
< $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
< { { $as_echo "$as_me:$LINENO: error: cannot run C compiled programs.
< If you meant to cross compile, use \`--host'.
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot run C compiled programs.
< If you meant to cross compile, use \`--host'.
< See \`config.log' for more details." >&2;}
<    { (exit 1); exit 1; }; }; }
<     fi
<   fi
< fi
< { $as_echo "$as_me:$LINENO: result: yes" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
3248a3671,3676
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
> $as_echo_n "checking for C compiler default output file name... " >&6; }
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
> $as_echo "$ac_file" >&6; }
> ac_exeext=$ac_cv_exeext
3252,3259c3680
< # Check that the compiler produces executables we can run.  If not, either
< # the compiler is broken, or we cross compile.
< { $as_echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
< $as_echo_n "checking whether we are cross compiling... " >&6; }
< { $as_echo "$as_me:$LINENO: result: $cross_compiling" >&5
< $as_echo "$cross_compiling" >&6; }
< 
< { $as_echo "$as_me:$LINENO: checking for suffix of executables" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
3261c3682
< if { (ac_try="$ac_link"
---
> if { { ac_try="$ac_link"
3266,3267c3687,3688
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
3270,3271c3691,3692
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then :
3286c3707
<   { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
>   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
3288,3292c3709,3710
< { { $as_echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
< See \`config.log' for more details." >&2;}
<    { (exit 1); exit 1; }; }; }
---
> as_fn_error $? "cannot compute suffix of executables: cannot compile and link
> See \`config.log' for more details" "$LINENO" 5; }
3294,3296c3712,3713
< 
< rm -f conftest$ac_cv_exeext
< { $as_echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
---
> rm -f conftest conftest$ac_cv_exeext
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
3302c3719,3778
< { $as_echo "$as_me:$LINENO: checking for suffix of object files" >&5
---
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <stdio.h>
> int
> main ()
> {
> FILE *f = fopen ("conftest.out", "w");
>  return ferror (f) || fclose (f) != 0;
> 
>   ;
>   return 0;
> }
> _ACEOF
> ac_clean_files="$ac_clean_files conftest.out"
> # Check that the compiler produces executables we can run.  If not, either
> # the compiler is broken, or we cross compile.
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
> $as_echo_n "checking whether we are cross compiling... " >&6; }
> if test "$cross_compiling" != yes; then
>   { { ac_try="$ac_link"
> case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_link") 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
>   if { ac_try='./conftest$ac_cv_exeext'
>   { { case "(($ac_try" in
>   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
>   *) ac_try_echo=$ac_try;;
> esac
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
>   (eval "$ac_try") 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; }; then
>     cross_compiling=no
>   else
>     if test "$cross_compiling" = maybe; then
> 	cross_compiling=yes
>     else
> 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
> $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
> as_fn_error $? "cannot run C compiled programs.
> If you meant to cross compile, use \`--host'.
> See \`config.log' for more details" "$LINENO" 5; }
>     fi
>   fi
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
> $as_echo "$cross_compiling" >&6; }
> 
> rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
> ac_clean_files=$ac_clean_files_save
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
3304c3780
< if test "${ac_cv_objext+set}" = set; then
---
> if ${ac_cv_objext+:} false; then :
3307,3311c3783
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3323c3795
< if { (ac_try="$ac_compile"
---
> if { { ac_try="$ac_compile"
3328,3329c3800,3801
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
3332,3333c3804,3805
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then :
3346c3818
< { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
> { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
3348,3352c3820,3821
< { { $as_echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute suffix of object files: cannot compile
< See \`config.log' for more details." >&2;}
<    { (exit 1); exit 1; }; }; }
---
> as_fn_error $? "cannot compute suffix of object files: cannot compile
> See \`config.log' for more details" "$LINENO" 5; }
3354d3822
< 
3357c3825
< { $as_echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
3361c3829
< { $as_echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
3363c3831
< if test "${ac_cv_c_compiler_gnu+set}" = set; then
---
> if ${ac_cv_c_compiler_gnu+:} false; then :
3366,3370c3834
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3384,3401c3848
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
3404,3406d3850
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
3409d3852
< 
3414c3857
< { $as_echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
3423c3866
< { $as_echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
3425c3868
< if test "${ac_cv_prog_cc_g+set}" = set; then
---
> if ${ac_cv_prog_cc_g+:} false; then :
3432,3436c3875
<    cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3447,3464c3886
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
3467,3469d3888
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
3471,3475c3890
<       cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3486,3507c3901
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   :
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
> if ac_fn_c_try_compile "$LINENO"; then :
3508a3903
> else
3511,3515c3906
< 	 cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3526,3543c3917
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
3545,3549d3918
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
3551d3919
< 
3554d3921
< 
3557d3923
< 
3561c3927
< { $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
3578c3944
< { $as_echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
3580c3946
< if test "${ac_cv_prog_cc_c89+set}" = set; then
---
> if ${ac_cv_prog_cc_c89+:} false; then :
3585,3589c3951
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
3646,3663c4008
<   rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
>   if ac_fn_c_try_compile "$LINENO"; then :
3665,3669d4009
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
3671d4010
< 
3682c4021
<     { $as_echo "$as_me:$LINENO: result: none needed" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
3685c4024
<     { $as_echo "$as_me:$LINENO: result: unsupported" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
3689c4028
<     { $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
3691a4031
> if test "x$ac_cv_prog_cc_c89" != xno; then :
3692a4033
> fi
3711c4052
< { $as_echo "$as_me:$LINENO: checking for style of include used by $am_make" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for style of include used by $am_make" >&5
3739c4080
< { $as_echo "$as_me:$LINENO: result: $_am_result" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $_am_result" >&5
3744c4085
< if test "${enable_dependency_tracking+set}" = set; then
---
> if test "${enable_dependency_tracking+set}" = set; then :
3764c4105
< { $as_echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
3766c4107
< if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
---
> if ${am_cv_CC_dependencies_compiler_type+:} false; then :
3874c4215
< { $as_echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
3888a4230
> CFLAGS=$save_CFLAGS
3903c4245
< { $as_echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
3905c4247
< if test "${am_cv_CCAS_dependencies_compiler_type+set}" = set; then
---
> if ${am_cv_CCAS_dependencies_compiler_type+:} false; then :
4011c4353
< { $as_echo "$as_me:$LINENO: result: $am_cv_CCAS_dependencies_compiler_type" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CCAS_dependencies_compiler_type" >&5
4027c4369
<   { $as_echo "$as_me:$LINENO: checking whether $CC and cc understand -c and -o together" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC and cc understand -c and -o together" >&5
4030c4372
<   { $as_echo "$as_me:$LINENO: checking whether cc understands -c and -o together" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc understands -c and -o together" >&5
4035c4377
< if { as_var=ac_cv_prog_cc_${ac_cc}_c_o; eval "test \"\${$as_var+set}\" = set"; }; then
---
> if eval \${ac_cv_prog_cc_${ac_cc}_c_o+:} false; then :
4038,4042c4380
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
4058c4396
< if { (case "(($ac_try" in
---
> if { { case "(($ac_try" in
4062,4063c4400,4401
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
4066,4068c4404,4406
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } &&
<    test -f conftest2.$ac_objext && { (case "(($ac_try" in
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } &&
>    test -f conftest2.$ac_objext && { { case "(($ac_try" in
4072,4073c4410,4411
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
4076,4077c4414,4415
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); };
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; };
4083c4421
<   { (case "(($ac_try" in
---
>   { { case "(($ac_try" in
4087,4088c4425,4426
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
4091,4092c4429,4430
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; }; then
4095c4433
<       if { (case "(($ac_try" in
---
>       if { { case "(($ac_try" in
4099,4100c4437,4438
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
4103,4105c4441,4443
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } &&
< 	 test -f conftest2.$ac_objext && { (case "(($ac_try" in
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } &&
> 	 test -f conftest2.$ac_objext && { { case "(($ac_try" in
4109,4110c4447,4448
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
---
> eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
> $as_echo "$ac_try_echo"; } >&5
4113,4114c4451,4452
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); };
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; };
4131c4469
<   { $as_echo "$as_me:$LINENO: result: yes" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
4134c4472
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
4137,4139c4475
< cat >>confdefs.h <<\_ACEOF
< #define NO_MINUS_C_MINUS_O 1
< _ACEOF
---
> $as_echo "#define NO_MINUS_C_MINUS_O 1" >>confdefs.h
4160c4496
<     { $as_echo "$as_me:$LINENO: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
4166,4167c4502,4503
< macro_version='2.2.6'
< macro_revision='1.3012'
---
> macro_version='2.4'
> macro_revision='1.3293'
4183c4519,4588
< { $as_echo "$as_me:$LINENO: checking for a sed that does not truncate output" >&5
---
> # Backslashify metacharacters that are still active within
> # double-quoted strings.
> sed_quote_subst='s/\(["`$\\]\)/\\\1/g'
> 
> # Same as above, but do not quote variable references.
> double_quote_subst='s/\(["`\\]\)/\\\1/g'
> 
> # Sed substitution to delay expansion of an escaped shell variable in a
> # double_quote_subst'ed string.
> delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
> 
> # Sed substitution to delay expansion of an escaped single quote.
> delay_single_quote_subst='s/'\''/'\'\\\\\\\'\''/g'
> 
> # Sed substitution to avoid accidental globbing in evaled expressions
> no_glob_subst='s/\*/\\\*/g'
> 
> ECHO='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
> ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO
> ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO$ECHO
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to print strings" >&5
> $as_echo_n "checking how to print strings... " >&6; }
> # Test print first, because it will be a builtin if present.
> if test "X`( print -r -- -n ) 2>/dev/null`" = X-n && \
>    test "X`print -r -- $ECHO 2>/dev/null`" = "X$ECHO"; then
>   ECHO='print -r --'
> elif test "X`printf %s $ECHO 2>/dev/null`" = "X$ECHO"; then
>   ECHO='printf %s\n'
> else
>   # Use this function as a fallback that always works.
>   func_fallback_echo ()
>   {
>     eval 'cat <<_LTECHO_EOF
> $1
> _LTECHO_EOF'
>   }
>   ECHO='func_fallback_echo'
> fi
> 
> # func_echo_all arg...
> # Invoke $ECHO with all args, space-separated.
> func_echo_all ()
> {
>     $ECHO ""
> }
> 
> case "$ECHO" in
>   printf*) { $as_echo "$as_me:${as_lineno-$LINENO}: result: printf" >&5
> $as_echo "printf" >&6; } ;;
>   print*) { $as_echo "$as_me:${as_lineno-$LINENO}: result: print -r" >&5
> $as_echo "print -r" >&6; } ;;
>   *) { $as_echo "$as_me:${as_lineno-$LINENO}: result: cat" >&5
> $as_echo "cat" >&6; } ;;
> esac
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output" >&5
4185c4590
< if test "${ac_cv_path_SED+set}" = set; then
---
> if ${ac_cv_path_SED+:} false; then :
4193c4598
<      $as_unset ac_script || ac_script=
---
>      { ac_script=; unset ac_script;}
4222c4627
<     ac_count=`expr $ac_count + 1`
---
>     as_fn_arith $ac_count + 1 && ac_count=$as_val
4240,4242c4645
<     { { $as_echo "$as_me:$LINENO: error: no acceptable sed could be found in \$PATH" >&5
< $as_echo "$as_me: error: no acceptable sed could be found in \$PATH" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "no acceptable sed could be found in \$PATH" "$LINENO" 5
4249c4652
< { $as_echo "$as_me:$LINENO: result: $ac_cv_path_SED" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_SED" >&5
4267c4670
< { $as_echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
4269c4672
< if test "${ac_cv_path_GREP+set}" = set; then
---
> if ${ac_cv_path_GREP+:} false; then :
4300c4703
<     ac_count=`expr $ac_count + 1`
---
>     as_fn_arith $ac_count + 1 && ac_count=$as_val
4318,4320c4721
<     { { $as_echo "$as_me:$LINENO: error: no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
< $as_echo "$as_me: error: no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
4327c4728
< { $as_echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
4332c4733
< { $as_echo "$as_me:$LINENO: checking for egrep" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
4334c4735
< if test "${ac_cv_path_EGREP+set}" = set; then
---
> if ${ac_cv_path_EGREP+:} false; then :
4368c4769
<     ac_count=`expr $ac_count + 1`
---
>     as_fn_arith $ac_count + 1 && ac_count=$as_val
4386,4388c4787
<     { { $as_echo "$as_me:$LINENO: error: no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
< $as_echo "$as_me: error: no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
4396c4795
< { $as_echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
4401c4800
< { $as_echo "$as_me:$LINENO: checking for fgrep" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fgrep" >&5
4403c4802
< if test "${ac_cv_path_FGREP+set}" = set; then
---
> if ${ac_cv_path_FGREP+:} false; then :
4437c4836
<     ac_count=`expr $ac_count + 1`
---
>     as_fn_arith $ac_count + 1 && ac_count=$as_val
4455,4457c4854
<     { { $as_echo "$as_me:$LINENO: error: no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
< $as_echo "$as_me: error: no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
4465c4862
< { $as_echo "$as_me:$LINENO: result: $ac_cv_path_FGREP" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_FGREP" >&5
4491c4888
< if test "${with_gnu_ld+set}" = set; then
---
> if test "${with_gnu_ld+set}" = set; then :
4500c4897
<   { $as_echo "$as_me:$LINENO: checking for ld used by $CC" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
4530c4927
<   { $as_echo "$as_me:$LINENO: checking for GNU ld" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
4533c4930
<   { $as_echo "$as_me:$LINENO: checking for non-GNU ld" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
4536c4933
< if test "${lt_cv_path_LD+set}" = set; then
---
> if ${lt_cv_path_LD+:} false; then :
4567c4964
<   { $as_echo "$as_me:$LINENO: result: $LD" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
4570c4967
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
4573,4576c4970,4971
< test -z "$LD" && { { $as_echo "$as_me:$LINENO: error: no acceptable ld found in \$PATH" >&5
< $as_echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
<    { (exit 1); exit 1; }; }
< { $as_echo "$as_me:$LINENO: checking if the linker ($LD) is GNU ld" >&5
---
> test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
4578c4973
< if test "${lt_cv_prog_gnu_ld+set}" = set; then
---
> if ${lt_cv_prog_gnu_ld+:} false; then :
4591c4986
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_gnu_ld" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
4603c4998
< { $as_echo "$as_me:$LINENO: checking for BSD- or MS-compatible name lister (nm)" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for BSD- or MS-compatible name lister (nm)" >&5
4605c5000
< if test "${lt_cv_path_NM+set}" = set; then
---
> if ${lt_cv_path_NM+:} false; then :
4652c5047
< { $as_echo "$as_me:$LINENO: result: $lt_cv_path_NM" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_path_NM" >&5
4657a5053,5055
>   if test -n "$DUMPBIN"; then :
>     # Let the user override the test.
>   else
4659c5057
<   for ac_prog in "dumpbin -symbols" "link -dump -symbols"
---
>   for ac_prog in dumpbin "link -dump"
4663c5061
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
4665c5063
< if test "${ac_cv_prog_DUMPBIN+set}" = set; then
---
> if ${ac_cv_prog_DUMPBIN+:} false; then :
4679c5077
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
4690c5088
<   { $as_echo "$as_me:$LINENO: result: $DUMPBIN" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DUMPBIN" >&5
4693c5091
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
4703c5101
<   for ac_prog in "dumpbin -symbols" "link -dump -symbols"
---
>   for ac_prog in dumpbin "link -dump"
4707c5105
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
4709c5107
< if test "${ac_cv_prog_ac_ct_DUMPBIN+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_DUMPBIN+:} false; then :
4723c5121
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
4734c5132
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_DUMPBIN" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DUMPBIN" >&5
4737c5135
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
4750c5148
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
4757a5156,5164
>     case `$DUMPBIN -symbols /dev/null 2>&1 | sed '1q'` in
>     *COFF*)
>       DUMPBIN="$DUMPBIN -symbols"
>       ;;
>     *)
>       DUMPBIN=:
>       ;;
>     esac
>   fi
4770c5177
< { $as_echo "$as_me:$LINENO: checking the name lister ($NM) interface" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking the name lister ($NM) interface" >&5
4772c5179
< if test "${lt_cv_nm_interface+set}" = set; then
---
> if ${lt_cv_nm_interface+:} false; then :
4777c5184
<   (eval echo "\"\$as_me:4777: $ac_compile\"" >&5)
---
>   (eval echo "\"\$as_me:$LINENO: $ac_compile\"" >&5)
4780c5187
<   (eval echo "\"\$as_me:4780: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
---
>   (eval echo "\"\$as_me:$LINENO: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
4783c5190
<   (eval echo "\"\$as_me:4783: output\"" >&5)
---
>   (eval echo "\"\$as_me:$LINENO: output\"" >&5)
4790c5197
< { $as_echo "$as_me:$LINENO: result: $lt_cv_nm_interface" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_nm_interface" >&5
4793c5200
< { $as_echo "$as_me:$LINENO: checking whether ln -s works" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ln -s works" >&5
4797c5204
<   { $as_echo "$as_me:$LINENO: result: yes" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
4800c5207
<   { $as_echo "$as_me:$LINENO: result: no, using $LN_S" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, using $LN_S" >&5
4805c5212
< { $as_echo "$as_me:$LINENO: checking the maximum length of command line arguments" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking the maximum length of command line arguments" >&5
4807c5214
< if test "${lt_cv_sys_max_cmd_len+set}" = set; then
---
> if ${lt_cv_sys_max_cmd_len+:} false; then :
4839a5247,5251
>   mint*)
>     # On MiNT this can take a long time and run out of memory.
>     lt_cv_sys_max_cmd_len=8192;
>     ;;
> 
4904,4905c5316,5317
<       while { test "X"`$SHELL $0 --fallback-echo "X$teststring$teststring" 2>/dev/null` \
< 	         = "XX$teststring$teststring"; } >/dev/null 2>&1 &&
---
>       while { test "X"`func_fallback_echo "$teststring$teststring" 2>/dev/null` \
> 	         = "X$teststring$teststring"; } >/dev/null 2>&1 &&
4925c5337
<   { $as_echo "$as_me:$LINENO: result: $lt_cv_sys_max_cmd_len" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sys_max_cmd_len" >&5
4928c5340
<   { $as_echo "$as_me:$LINENO: result: none" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: none" >&5
4942c5354
< { $as_echo "$as_me:$LINENO: checking whether the shell understands some XSI constructs" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the shell understands some XSI constructs" >&5
4947,4948c5359,5360
<   test "${_lt_dummy##*/},${_lt_dummy%/*},"${_lt_dummy%"$_lt_dummy"}, \
<       = c,a/b,, \
---
>   test "${_lt_dummy##*/},${_lt_dummy%/*},${_lt_dummy#??}"${_lt_dummy%"$_lt_dummy"}, \
>       = c,a/b,b/c, \
4952c5364
< { $as_echo "$as_me:$LINENO: result: $xsi_shell" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $xsi_shell" >&5
4956c5368
< { $as_echo "$as_me:$LINENO: checking whether the shell understands \"+=\"" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the shell understands \"+=\"" >&5
4962c5374
< { $as_echo "$as_me:$LINENO: result: $lt_shell_append" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_shell_append" >&5
4997c5409,5483
< { $as_echo "$as_me:$LINENO: checking for $LD option to reload object files" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to convert $build file names to $host format" >&5
> $as_echo_n "checking how to convert $build file names to $host format... " >&6; }
> if ${lt_cv_to_host_file_cmd+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   case $host in
>   *-*-mingw* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_host_file_cmd=func_convert_file_msys_to_w32
>         ;;
>       *-*-cygwin* )
>         lt_cv_to_host_file_cmd=func_convert_file_cygwin_to_w32
>         ;;
>       * ) # otherwise, assume *nix
>         lt_cv_to_host_file_cmd=func_convert_file_nix_to_w32
>         ;;
>     esac
>     ;;
>   *-*-cygwin* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_host_file_cmd=func_convert_file_msys_to_cygwin
>         ;;
>       *-*-cygwin* )
>         lt_cv_to_host_file_cmd=func_convert_file_noop
>         ;;
>       * ) # otherwise, assume *nix
>         lt_cv_to_host_file_cmd=func_convert_file_nix_to_cygwin
>         ;;
>     esac
>     ;;
>   * ) # unhandled hosts (and "normal" native builds)
>     lt_cv_to_host_file_cmd=func_convert_file_noop
>     ;;
> esac
> 
> fi
> 
> to_host_file_cmd=$lt_cv_to_host_file_cmd
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_to_host_file_cmd" >&5
> $as_echo "$lt_cv_to_host_file_cmd" >&6; }
> 
> 
> 
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to convert $build file names to toolchain format" >&5
> $as_echo_n "checking how to convert $build file names to toolchain format... " >&6; }
> if ${lt_cv_to_tool_file_cmd+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   #assume ordinary cross tools, or native build.
> lt_cv_to_tool_file_cmd=func_convert_file_noop
> case $host in
>   *-*-mingw* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_tool_file_cmd=func_convert_file_msys_to_w32
>         ;;
>     esac
>     ;;
> esac
> 
> fi
> 
> to_tool_file_cmd=$lt_cv_to_tool_file_cmd
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_to_tool_file_cmd" >&5
> $as_echo "$lt_cv_to_tool_file_cmd" >&6; }
> 
> 
> 
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LD option to reload object files" >&5
4999c5485
< if test "${lt_cv_ld_reload_flag+set}" = set; then
---
> if ${lt_cv_ld_reload_flag+:} false; then :
5004c5490
< { $as_echo "$as_me:$LINENO: result: $lt_cv_ld_reload_flag" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_reload_flag" >&5
5012a5499,5503
>   cygwin* | mingw* | pw32* | cegcc*)
>     if test "$GCC" != yes; then
>       reload_cmds=false
>     fi
>     ;;
5033c5524
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5035c5526
< if test "${ac_cv_prog_OBJDUMP+set}" = set; then
---
> if ${ac_cv_prog_OBJDUMP+:} false; then :
5049c5540
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5060c5551
<   { $as_echo "$as_me:$LINENO: result: $OBJDUMP" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OBJDUMP" >&5
5063c5554
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5073c5564
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5075c5566
< if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_OBJDUMP+:} false; then :
5089c5580
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5100c5591
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_OBJDUMP" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OBJDUMP" >&5
5103c5594
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5112c5603
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
5132c5623
< { $as_echo "$as_me:$LINENO: checking how to recognize dependent libraries" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to recognize dependent libraries" >&5
5134c5625
< if test "${lt_cv_deplibs_check_method+set}" = set; then
---
> if ${lt_cv_deplibs_check_method+:} false; then :
5176c5667,5668
<   if ( file / ) >/dev/null 2>&1; then
---
>   # func_win32_libid assumes BSD nm, so disallow it if using MS dumpbin.
>   if ( test "$lt_cv_nm_interface" = "BSD nm" && file / ) >/dev/null 2>&1; then
5180c5672,5673
<     lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
---
>     # Keep this pattern in sync with the one in func_win32_libid.
>     lt_cv_deplibs_check_method='file_magic file format (pei*-i386(.*architecture: i386)?|pe-arm-wince|pe-x86-64)'
5185c5678
< cegcc)
---
> cegcc*)
5214a5708,5711
> haiku*)
>   lt_cv_deplibs_check_method=pass_all
>   ;;
> 
5223c5720
<     lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]'
---
>     lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF[ -][0-9][0-9])(-bit)?( [LM]SB)? shared object( file)?[, -]* PA-RISC [0-9]\.[0-9]'
5227c5724
<     lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9].[0-9]) shared library'
---
>     lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9]\.[0-9]) shared library'
5249c5746
< linux* | k*bsd*-gnu)
---
> linux* | k*bsd*-gnu | kopensolaris*-gnu)
5328c5825
< { $as_echo "$as_me:$LINENO: result: $lt_cv_deplibs_check_method" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_deplibs_check_method" >&5
5329a5827,5841
> 
> file_magic_glob=
> want_nocaseglob=no
> if test "$build" = "$host"; then
>   case $host_os in
>   mingw* | pw32*)
>     if ( shopt | grep nocaseglob ) >/dev/null 2>&1; then
>       want_nocaseglob=yes
>     else
>       file_magic_glob=`echo aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ | $SED -e "s/\(..\)/s\/[\1]\/[\1]\/g;/g"`
>     fi
>     ;;
>   esac
> fi
> 
5344a5857,5866
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
5346,5348c5868,5870
<   # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
< set dummy ${ac_tool_prefix}ar; ac_word=$2
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
>   # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
> set dummy ${ac_tool_prefix}dlltool; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5350c5872
< if test "${ac_cv_prog_AR+set}" = set; then
---
> if ${ac_cv_prog_DLLTOOL+:} false; then :
5353,5354c5875,5876
<   if test -n "$AR"; then
<   ac_cv_prog_AR="$AR" # Let the user override the test.
---
>   if test -n "$DLLTOOL"; then
>   ac_cv_prog_DLLTOOL="$DLLTOOL" # Let the user override the test.
5363,5364c5885,5886
<     ac_cv_prog_AR="${ac_tool_prefix}ar"
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5373,5376c5895,5898
< AR=$ac_cv_prog_AR
< if test -n "$AR"; then
<   { $as_echo "$as_me:$LINENO: result: $AR" >&5
< $as_echo "$AR" >&6; }
---
> DLLTOOL=$ac_cv_prog_DLLTOOL
> if test -n "$DLLTOOL"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DLLTOOL" >&5
> $as_echo "$DLLTOOL" >&6; }
5378c5900
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5384,5388c5906,5910
< if test -z "$ac_cv_prog_AR"; then
<   ac_ct_AR=$AR
<   # Extract the first word of "ar", so it can be a program name with args.
< set dummy ar; ac_word=$2
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> if test -z "$ac_cv_prog_DLLTOOL"; then
>   ac_ct_DLLTOOL=$DLLTOOL
>   # Extract the first word of "dlltool", so it can be a program name with args.
> set dummy dlltool; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5390c5912
< if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_DLLTOOL+:} false; then :
5393,5394c5915,5916
<   if test -n "$ac_ct_AR"; then
<   ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
---
>   if test -n "$ac_ct_DLLTOOL"; then
>   ac_cv_prog_ac_ct_DLLTOOL="$ac_ct_DLLTOOL" # Let the user override the test.
5403,5404c5925,5926
<     ac_cv_prog_ac_ct_AR="ar"
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     ac_cv_prog_ac_ct_DLLTOOL="dlltool"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5413,5416c5935,5938
< ac_ct_AR=$ac_cv_prog_ac_ct_AR
< if test -n "$ac_ct_AR"; then
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
< $as_echo "$ac_ct_AR" >&6; }
---
> ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
> if test -n "$ac_ct_DLLTOOL"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DLLTOOL" >&5
> $as_echo "$ac_ct_DLLTOOL" >&6; }
5418c5940
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5422,5423c5944,5945
<   if test "x$ac_ct_AR" = x; then
<     AR="false"
---
>   if test "x$ac_ct_DLLTOOL" = x; then
>     DLLTOOL="false"
5427c5949
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
5431c5953
<     AR=$ac_ct_AR
---
>     DLLTOOL=$ac_ct_DLLTOOL
5434c5956
<   AR="$ac_cv_prog_AR"
---
>   DLLTOOL="$ac_cv_prog_DLLTOOL"
5437,5438c5959,5960
< test -z "$AR" && AR=ar
< test -z "$AR_FLAGS" && AR_FLAGS=cru
---
> test -z "$DLLTOOL" && DLLTOOL=dlltool
> 
5447a5970,6006
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to associate runtime and link libraries" >&5
> $as_echo_n "checking how to associate runtime and link libraries... " >&6; }
> if ${lt_cv_sharedlib_from_linklib_cmd+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_sharedlib_from_linklib_cmd='unknown'
> 
> case $host_os in
> cygwin* | mingw* | pw32* | cegcc*)
>   # two different shell functions defined in ltmain.sh
>   # decide which to use based on capabilities of $DLLTOOL
>   case `$DLLTOOL --help 2>&1` in
>   *--identify-strict*)
>     lt_cv_sharedlib_from_linklib_cmd=func_cygming_dll_for_implib
>     ;;
>   *)
>     lt_cv_sharedlib_from_linklib_cmd=func_cygming_dll_for_implib_fallback
>     ;;
>   esac
>   ;;
> *)
>   # fallback: assume linklib IS sharedlib
>   lt_cv_sharedlib_from_linklib_cmd="$ECHO"
>   ;;
> esac
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sharedlib_from_linklib_cmd" >&5
> $as_echo "$lt_cv_sharedlib_from_linklib_cmd" >&6; }
> sharedlib_from_linklib_cmd=$lt_cv_sharedlib_from_linklib_cmd
> test -z "$sharedlib_from_linklib_cmd" && sharedlib_from_linklib_cmd=$ECHO
> 
> 
> 
> 
> 
> 
5451,5453c6010,6014
<   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
< set dummy ${ac_tool_prefix}strip; ac_word=$2
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
>   for ac_prog in ar
>   do
>     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
> set dummy $ac_tool_prefix$ac_prog; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5455c6016
< if test "${ac_cv_prog_STRIP+set}" = set; then
---
> if ${ac_cv_prog_AR+:} false; then :
5458,5459c6019,6020
<   if test -n "$STRIP"; then
<   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
---
>   if test -n "$AR"; then
>   ac_cv_prog_AR="$AR" # Let the user override the test.
5468,5469c6029,6030
<     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     ac_cv_prog_AR="$ac_tool_prefix$ac_prog"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5478,5481c6039,6042
< STRIP=$ac_cv_prog_STRIP
< if test -n "$STRIP"; then
<   { $as_echo "$as_me:$LINENO: result: $STRIP" >&5
< $as_echo "$STRIP" >&6; }
---
> AR=$ac_cv_prog_AR
> if test -n "$AR"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
> $as_echo "$AR" >&6; }
5483c6044
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5487a6049,6050
>     test -n "$AR" && break
>   done
5489,5493c6052,6058
< if test -z "$ac_cv_prog_STRIP"; then
<   ac_ct_STRIP=$STRIP
<   # Extract the first word of "strip", so it can be a program name with args.
< set dummy strip; ac_word=$2
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> if test -z "$AR"; then
>   ac_ct_AR=$AR
>   for ac_prog in ar
> do
>   # Extract the first word of "$ac_prog", so it can be a program name with args.
> set dummy $ac_prog; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5495c6060
< if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_AR+:} false; then :
5498,5499c6063,6229
<   if test -n "$ac_ct_STRIP"; then
<   ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
---
>   if test -n "$ac_ct_AR"; then
>   ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
> else
> as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_prog_ac_ct_AR="$ac_prog"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
> fi
> fi
> ac_ct_AR=$ac_cv_prog_ac_ct_AR
> if test -n "$ac_ct_AR"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR" >&5
> $as_echo "$ac_ct_AR" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
> 
>   test -n "$ac_ct_AR" && break
> done
> 
>   if test "x$ac_ct_AR" = x; then
>     AR="false"
>   else
>     case $cross_compiling:$ac_tool_warned in
> yes:)
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
> $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
> ac_tool_warned=yes ;;
> esac
>     AR=$ac_ct_AR
>   fi
> fi
> 
> : ${AR=ar}
> : ${AR_FLAGS=cru}
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for archiver @FILE support" >&5
> $as_echo_n "checking for archiver @FILE support... " >&6; }
> if ${lt_cv_ar_at_file+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_ar_at_file=no
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> 
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   echo conftest.$ac_objext > conftest.lst
>       lt_ar_try='$AR $AR_FLAGS libconftest.a @conftest.lst >&5'
>       { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$lt_ar_try\""; } >&5
>   (eval $lt_ar_try) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
>       if test "$ac_status" -eq 0; then
> 	# Ensure the archiver fails upon bogus file names.
> 	rm -f conftest.$ac_objext libconftest.a
> 	{ { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$lt_ar_try\""; } >&5
>   (eval $lt_ar_try) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
> 	if test "$ac_status" -ne 0; then
>           lt_cv_ar_at_file=@
>         fi
>       fi
>       rm -f conftest.* libconftest.a
> 
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ar_at_file" >&5
> $as_echo "$lt_cv_ar_at_file" >&6; }
> 
> if test "x$lt_cv_ar_at_file" = xno; then
>   archiver_list_spec=
> else
>   archiver_list_spec=$lt_cv_ar_at_file
> fi
> 
> 
> 
> 
> 
> 
> 
> if test -n "$ac_tool_prefix"; then
>   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
> set dummy ${ac_tool_prefix}strip; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_prog_STRIP+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test -n "$STRIP"; then
>   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
> else
> as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
> fi
> fi
> STRIP=$ac_cv_prog_STRIP
> if test -n "$STRIP"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
> $as_echo "$STRIP" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
> 
> fi
> if test -z "$ac_cv_prog_STRIP"; then
>   ac_ct_STRIP=$STRIP
>   # Extract the first word of "strip", so it can be a program name with args.
> set dummy strip; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test -n "$ac_ct_STRIP"; then
>   ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
5509c6239
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5520c6250
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
5523c6253
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5532c6262
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
5552c6282
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5554c6284
< if test "${ac_cv_prog_RANLIB+set}" = set; then
---
> if ${ac_cv_prog_RANLIB+:} false; then :
5568c6298
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5579c6309
<   { $as_echo "$as_me:$LINENO: result: $RANLIB" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
5582c6312
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5592c6322
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
5594c6324
< if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
5608c6338
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
5619c6349
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
5622c6352
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
5631c6361
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
5664a6395,6406
> case $host_os in
>   darwin*)
>     lock_old_archive_extraction=yes ;;
>   *)
>     lock_old_archive_extraction=no ;;
> esac
> 
> 
> 
> 
> 
> 
5709c6451
< { $as_echo "$as_me:$LINENO: checking command to parse $NM output from $compiler object" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking command to parse $NM output from $compiler object" >&5
5711c6453
< if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then
---
> if ${lt_cv_sys_global_symbol_pipe+:} false; then :
5772,5773c6514,6515
< lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (void *) \&\2},/p'"
< lt_cv_sys_global_symbol_to_c_name_address_lib_prefix="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([^ ]*\) \(lib[^ ]*\)$/  {\"\2\", (void *) \&\2},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"lib\2\", (void *) \&\2},/p'"
---
> lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\)[ ]*$/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (void *) \&\2},/p'"
> lt_cv_sys_global_symbol_to_c_name_address_lib_prefix="sed -n -e 's/^: \([^ ]*\)[ ]*$/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([^ ]*\) \(lib[^ ]*\)$/  {\"\2\", (void *) \&\2},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"lib\2\", (void *) \&\2},/p'"
5808a6551
>   lt_cv_sys_global_symbol_pipe="$lt_cv_sys_global_symbol_pipe | sed '/ __gnu_lto/d'"
5827c6570
<   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
5830,5831c6573,6574
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
5834,5835c6577,6578
<     if { (eval echo "$as_me:$LINENO: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
<   (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
---
>     if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$NM conftest.$ac_objext \| "$lt_cv_sys_global_symbol_pipe" \> $nlist\""; } >&5
>   (eval $NM conftest.$ac_objext \| "$lt_cv_sys_global_symbol_pipe" \> $nlist) 2>&5
5837,5838c6580,6581
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && test -s "$nlist"; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && test -s "$nlist"; then
5849a6593,6604
> /* Keep this code in sync between libtool.m4, ltmain, lt_system.h, and tests.  */
> #if defined(_WIN32) || defined(__CYGWIN__) || defined(_WIN32_WCE)
> /* DATA imports from DLLs on WIN32 con't be const, because runtime
>    relocations are performed -- see ld's documentation on pseudo-relocs.  */
> # define LT_DLSYM_CONST
> #elif defined(__osf__)
> /* This system does not cope well with relocations in const data.  */
> # define LT_DLSYM_CONST
> #else
> # define LT_DLSYM_CONST const
> #endif
> 
5861c6616
< const struct {
---
> LT_DLSYM_CONST struct {
5887,5888c6642,6643
< 	  lt_save_LIBS="$LIBS"
< 	  lt_save_CFLAGS="$CFLAGS"
---
> 	  lt_globsym_save_LIBS=$LIBS
> 	  lt_globsym_save_CFLAGS=$CFLAGS
5891c6646
< 	  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
---
> 	  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
5894,5895c6649,6650
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && test -s conftest${ac_exeext}; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && test -s conftest${ac_exeext}; then
5898,5899c6653,6654
< 	  LIBS="$lt_save_LIBS"
< 	  CFLAGS="$lt_save_CFLAGS"
---
> 	  LIBS=$lt_globsym_save_LIBS
> 	  CFLAGS=$lt_globsym_save_CFLAGS
5929c6684
<   { $as_echo "$as_me:$LINENO: result: failed" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: failed" >&5
5932c6687
<   { $as_echo "$as_me:$LINENO: result: ok" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
5935a6691,6702
> # Response file support.
> if test "$lt_cv_nm_interface" = "MS dumpbin"; then
>   nm_file_list_spec='@'
> elif $NM --help 2>/dev/null | grep '[@]FILE' >/dev/null; then
>   nm_file_list_spec='@'
> fi
> 
> 
> 
> 
> 
> 
5956a6724,6759
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysroot" >&5
> $as_echo_n "checking for sysroot... " >&6; }
> 
> # Check whether --with-sysroot was given.
> if test "${with_sysroot+set}" = set; then :
>   withval=$with_sysroot;
> else
>   with_sysroot=no
> fi
> 
> 
> lt_sysroot=
> case ${with_sysroot} in #(
>  yes)
>    if test "$GCC" = yes; then
>      lt_sysroot=`$CC --print-sysroot 2>/dev/null`
>    fi
>    ;; #(
>  /*)
>    lt_sysroot=`echo "$with_sysroot" | sed -e "$sed_quote_subst"`
>    ;; #(
>  no|'')
>    ;; #(
>  *)
>    { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${with_sysroot}" >&5
> $as_echo "${with_sysroot}" >&6; }
>    as_fn_error $? "The sysroot must be an absolute path." "$LINENO" 5
>    ;;
> esac
> 
>  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${lt_sysroot:-no}" >&5
> $as_echo "${lt_sysroot:-no}" >&6; }
> 
> 
> 
> 
5959c6762
< if test "${enable_libtool_lock+set}" = set; then
---
> if test "${enable_libtool_lock+set}" = set; then :
5971c6774
<   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
5974,5975c6777,6778
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
5989,5990c6792,6793
<   echo '#line 5989 "configure"' > conftest.$ac_ext
<   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
>   echo '#line '$LINENO' "configure"' > conftest.$ac_ext
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
5993,5994c6796,6797
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
6028c6831
<   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
6031,6032c6834,6835
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
6081c6884
<   { $as_echo "$as_me:$LINENO: checking whether the C compiler needs -belf" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler needs -belf" >&5
6083c6886
< if test "${lt_cv_cc_needs_belf+set}" = set; then
---
> if ${lt_cv_cc_needs_belf+:} false; then :
6092,6096c6895
<      cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6107,6127c6906
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
---
> if ac_fn_c_try_link "$LINENO"; then :
6130,6132d6908
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
6135,6137c6911
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
---
> rm -f core conftest.err conftest.$ac_objext \
6146c6920
< { $as_echo "$as_me:$LINENO: result: $lt_cv_cc_needs_belf" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_cc_needs_belf" >&5
6156c6930
<   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
6159,6160c6933,6934
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
6179a6954,7070
> if test -n "$ac_tool_prefix"; then
>   # Extract the first word of "${ac_tool_prefix}mt", so it can be a program name with args.
> set dummy ${ac_tool_prefix}mt; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_prog_MANIFEST_TOOL+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test -n "$MANIFEST_TOOL"; then
>   ac_cv_prog_MANIFEST_TOOL="$MANIFEST_TOOL" # Let the user override the test.
> else
> as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_prog_MANIFEST_TOOL="${ac_tool_prefix}mt"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
> fi
> fi
> MANIFEST_TOOL=$ac_cv_prog_MANIFEST_TOOL
> if test -n "$MANIFEST_TOOL"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MANIFEST_TOOL" >&5
> $as_echo "$MANIFEST_TOOL" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
> 
> fi
> if test -z "$ac_cv_prog_MANIFEST_TOOL"; then
>   ac_ct_MANIFEST_TOOL=$MANIFEST_TOOL
>   # Extract the first word of "mt", so it can be a program name with args.
> set dummy mt; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_prog_ac_ct_MANIFEST_TOOL+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test -n "$ac_ct_MANIFEST_TOOL"; then
>   ac_cv_prog_ac_ct_MANIFEST_TOOL="$ac_ct_MANIFEST_TOOL" # Let the user override the test.
> else
> as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> for as_dir in $PATH
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_prog_ac_ct_MANIFEST_TOOL="mt"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
> fi
> fi
> ac_ct_MANIFEST_TOOL=$ac_cv_prog_ac_ct_MANIFEST_TOOL
> if test -n "$ac_ct_MANIFEST_TOOL"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_MANIFEST_TOOL" >&5
> $as_echo "$ac_ct_MANIFEST_TOOL" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
>   if test "x$ac_ct_MANIFEST_TOOL" = x; then
>     MANIFEST_TOOL=":"
>   else
>     case $cross_compiling:$ac_tool_warned in
> yes:)
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
> $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
> ac_tool_warned=yes ;;
> esac
>     MANIFEST_TOOL=$ac_ct_MANIFEST_TOOL
>   fi
> else
>   MANIFEST_TOOL="$ac_cv_prog_MANIFEST_TOOL"
> fi
> 
> test -z "$MANIFEST_TOOL" && MANIFEST_TOOL=mt
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $MANIFEST_TOOL is a manifest tool" >&5
> $as_echo_n "checking if $MANIFEST_TOOL is a manifest tool... " >&6; }
> if ${lt_cv_path_mainfest_tool+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_path_mainfest_tool=no
>   echo "$as_me:$LINENO: $MANIFEST_TOOL '-?'" >&5
>   $MANIFEST_TOOL '-?' 2>conftest.err > conftest.out
>   cat conftest.err >&5
>   if $GREP 'Manifest Tool' conftest.out > /dev/null; then
>     lt_cv_path_mainfest_tool=yes
>   fi
>   rm -f conftest*
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_path_mainfest_tool" >&5
> $as_echo "$lt_cv_path_mainfest_tool" >&6; }
> if test "x$lt_cv_path_mainfest_tool" != xyes; then
>   MANIFEST_TOOL=:
> fi
> 
> 
> 
> 
> 
6186c7077
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6188c7079
< if test "${ac_cv_prog_DSYMUTIL+set}" = set; then
---
> if ${ac_cv_prog_DSYMUTIL+:} false; then :
6202c7093
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6213c7104
<   { $as_echo "$as_me:$LINENO: result: $DSYMUTIL" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DSYMUTIL" >&5
6216c7107
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6226c7117
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6228c7119
< if test "${ac_cv_prog_ac_ct_DSYMUTIL+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_DSYMUTIL+:} false; then :
6242c7133
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6253c7144
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_DSYMUTIL" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DSYMUTIL" >&5
6256c7147
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6265c7156
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
6278c7169
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6280c7171
< if test "${ac_cv_prog_NMEDIT+set}" = set; then
---
> if ${ac_cv_prog_NMEDIT+:} false; then :
6294c7185
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6305c7196
<   { $as_echo "$as_me:$LINENO: result: $NMEDIT" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $NMEDIT" >&5
6308c7199
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6318c7209
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6320c7211
< if test "${ac_cv_prog_ac_ct_NMEDIT+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_NMEDIT+:} false; then :
6334c7225
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6345c7236
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_NMEDIT" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_NMEDIT" >&5
6348c7239
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6357c7248
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
6370c7261
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6372c7263
< if test "${ac_cv_prog_LIPO+set}" = set; then
---
> if ${ac_cv_prog_LIPO+:} false; then :
6386c7277
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6397c7288
<   { $as_echo "$as_me:$LINENO: result: $LIPO" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LIPO" >&5
6400c7291
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6410c7301
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6412c7303
< if test "${ac_cv_prog_ac_ct_LIPO+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_LIPO+:} false; then :
6426c7317
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6437c7328
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_LIPO" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_LIPO" >&5
6440c7331
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6449c7340
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
6462c7353
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6464c7355
< if test "${ac_cv_prog_OTOOL+set}" = set; then
---
> if ${ac_cv_prog_OTOOL+:} false; then :
6478c7369
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6489c7380
<   { $as_echo "$as_me:$LINENO: result: $OTOOL" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OTOOL" >&5
6492c7383
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6502c7393
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6504c7395
< if test "${ac_cv_prog_ac_ct_OTOOL+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_OTOOL+:} false; then :
6518c7409
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6529c7420
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_OTOOL" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OTOOL" >&5
6532c7423
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6541c7432
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
6554c7445
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6556c7447
< if test "${ac_cv_prog_OTOOL64+set}" = set; then
---
> if ${ac_cv_prog_OTOOL64+:} false; then :
6570c7461
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6581c7472
<   { $as_echo "$as_me:$LINENO: result: $OTOOL64" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OTOOL64" >&5
6584c7475
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6594c7485
< { $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
6596c7487
< if test "${ac_cv_prog_ac_ct_OTOOL64+set}" = set; then
---
> if ${ac_cv_prog_ac_ct_OTOOL64+:} false; then :
6610c7501
<     $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
---
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
6621c7512
<   { $as_echo "$as_me:$LINENO: result: $ac_ct_OTOOL64" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OTOOL64" >&5
6624c7515
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
6633c7524
< { $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
6669c7560
<     { $as_echo "$as_me:$LINENO: checking for -single_module linker flag" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -single_module linker flag" >&5
6671c7562
< if test "${lt_cv_apple_cc_single_mod+set}" = set; then
---
> if ${lt_cv_apple_cc_single_mod+:} false; then :
6696c7587
< { $as_echo "$as_me:$LINENO: result: $lt_cv_apple_cc_single_mod" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod" >&5
6698c7589
<     { $as_echo "$as_me:$LINENO: checking for -exported_symbols_list linker flag" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
6700c7591
< if test "${lt_cv_ld_exported_symbols_list+set}" = set; then
---
> if ${lt_cv_ld_exported_symbols_list+:} false; then :
6707,6711c7598
<       cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6722,6742c7609
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
---
> if ac_fn_c_try_link "$LINENO"; then :
6745,6747d7611
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
6750,6752c7614
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
---
> rm -f core conftest.err conftest.$ac_objext \
6757c7619
< { $as_echo "$as_me:$LINENO: result: $lt_cv_ld_exported_symbols_list" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list" >&5
6758a7621,7652
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -force_load linker flag" >&5
> $as_echo_n "checking for -force_load linker flag... " >&6; }
> if ${lt_cv_ld_force_load+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_ld_force_load=no
>       cat > conftest.c << _LT_EOF
> int forced_loaded() { return 2;}
> _LT_EOF
>       echo "$LTCC $LTCFLAGS -c -o conftest.o conftest.c" >&5
>       $LTCC $LTCFLAGS -c -o conftest.o conftest.c 2>&5
>       echo "$AR cru libconftest.a conftest.o" >&5
>       $AR cru libconftest.a conftest.o 2>&5
>       echo "$RANLIB libconftest.a" >&5
>       $RANLIB libconftest.a 2>&5
>       cat > conftest.c << _LT_EOF
> int main() { return 0;}
> _LT_EOF
>       echo "$LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a" >&5
>       $LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a 2>conftest.err
>       _lt_result=$?
>       if test -f conftest && test ! -s conftest.err && test $_lt_result = 0 && $GREP forced_load conftest 2>&1 >/dev/null; then
> 	lt_cv_ld_force_load=yes
>       else
> 	cat conftest.err >&5
>       fi
>         rm -f conftest.err libconftest.a conftest conftest.c
>         rm -rf conftest.dSYM
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_force_load" >&5
> $as_echo "$lt_cv_ld_force_load" >&6; }
6786c7680
<     if test "$DSYMUTIL" != ":"; then
---
>     if test "$DSYMUTIL" != ":" && test "$lt_cv_ld_force_load" = "no"; then
6799c7693
< { $as_echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
6806c7700
<   if test "${ac_cv_prog_CPP+set}" = set; then
---
>   if ${ac_cv_prog_CPP+:} false; then :
6821,6825c7715
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6834,6854c7724
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
<   :
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
> if ac_fn_c_try_cpp "$LINENO"; then :
6855a7726
> else
6859,6860c7730
< 
< rm -f conftest.err conftest.$ac_ext
---
> rm -f conftest.err conftest.i conftest.$ac_ext
6864,6868c7734
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6872,6888c7738
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
---
> if ac_fn_c_try_cpp "$LINENO"; then :
6892,6894d7741
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
6899,6900c7746
< 
< rm -f conftest.err conftest.$ac_ext
---
> rm -f conftest.err conftest.i conftest.$ac_ext
6904,6905c7750,7751
< rm -f conftest.err conftest.$ac_ext
< if $ac_preproc_ok; then
---
> rm -f conftest.i conftest.err conftest.$ac_ext
> if $ac_preproc_ok; then :
6917c7763
< { $as_echo "$as_me:$LINENO: result: $CPP" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
6928,6932c7774
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6941,6961c7783
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
<   :
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
> if ac_fn_c_try_cpp "$LINENO"; then :
6962a7785
> else
6966,6967c7789
< 
< rm -f conftest.err conftest.$ac_ext
---
> rm -f conftest.err conftest.i conftest.$ac_ext
6971,6975c7793
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
6979,6995c7797
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
---
> if ac_fn_c_try_cpp "$LINENO"; then :
6999,7001d7800
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
7006,7007c7805
< 
< rm -f conftest.err conftest.$ac_ext
---
> rm -f conftest.err conftest.i conftest.$ac_ext
7011,7013c7809,7811
< rm -f conftest.err conftest.$ac_ext
< if $ac_preproc_ok; then
<   :
---
> rm -f conftest.i conftest.err conftest.$ac_ext
> if $ac_preproc_ok; then :
> 
7015c7813
<   { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
>   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
7017,7021c7815,7816
< { { $as_echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
< See \`config.log' for more details." >&2;}
<    { (exit 1); exit 1; }; }; }
---
> as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
> See \`config.log' for more details" "$LINENO" 5; }
7031c7826
< { $as_echo "$as_me:$LINENO: checking for ANSI C header files" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
7033c7828
< if test "${ac_cv_header_stdc+set}" = set; then
---
> if ${ac_cv_header_stdc+:} false; then :
7036,7040c7831
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
7055,7072c7846
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
7075,7077d7848
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
7080d7850
< 
7085,7089c7855
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
7095,7096c7861,7862
<   $EGREP "memchr" >/dev/null 2>&1; then
<   :
---
>   $EGREP "memchr" >/dev/null 2>&1; then :
> 
7106,7110c7872
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
7116,7117c7878,7879
<   $EGREP "free" >/dev/null 2>&1; then
<   :
---
>   $EGREP "free" >/dev/null 2>&1; then :
> 
7127c7889
<   if test "$cross_compiling" = yes; then
---
>   if test "$cross_compiling" = yes; then :
7130,7134c7892
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
7161,7187c7919
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<   :
< else
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
> if ac_fn_c_try_run "$LINENO"; then :
7189c7921
< ( exit $ac_status )
---
> else
7192,7193c7924,7925
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
---
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
7196d7927
< 
7199c7930
< { $as_echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
7203,7205c7934
< cat >>confdefs.h <<\_ACEOF
< #define STDC_HEADERS 1
< _ACEOF
---
> $as_echo "#define STDC_HEADERS 1" >>confdefs.h
7210,7218d7938
< 
< 
< 
< 
< 
< 
< 
< 
< 
7221c7941
< do
---
> do :
7223,7272c7943,7945
< { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
< $as_echo_n "checking for $ac_header... " >&6; }
< if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< 
< #include <$ac_header>
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   eval "$as_ac_Header=yes"
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	eval "$as_ac_Header=no"
< fi
< 
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< fi
< ac_res=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
< as_val=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
---
> ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
> "
> if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
7282d7954
< 
7284,7335c7956,7959
< do
< as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
< { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
< $as_echo_n "checking for $ac_header... " >&6; }
< if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< 
< #include <$ac_header>
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   eval "$as_ac_Header=yes"
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	eval "$as_ac_Header=no"
< fi
< 
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< fi
< ac_res=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
< as_val=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
---
> do :
>   ac_fn_c_check_header_compile "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default
> "
> if test "x$ac_cv_header_dlfcn_h" = xyes; then :
7337c7961
< #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
---
> #define HAVE_DLFCN_H 1
7345a7970,7971
> 
> 
7357c7983
< if test "${enable_shared+set}" = set; then
---
> if test "${enable_shared+set}" = set; then :
7388c8014
< if test "${enable_static+set}" = set; then
---
> if test "${enable_static+set}" = set; then :
7420c8046
< if test "${with_pic+set}" = set; then
---
> if test "${with_pic+set}" = set; then :
7436c8062
< if test "${enable_fast_install+set}" = set; then
---
> if test "${enable_fast_install+set}" = set; then :
7497a8124
> 
7517c8144
< { $as_echo "$as_me:$LINENO: checking for objdir" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for objdir" >&5
7519c8146
< if test "${lt_cv_objdir+set}" = set; then
---
> if ${lt_cv_objdir+:} false; then :
7532c8159
< { $as_echo "$as_me:$LINENO: result: $lt_cv_objdir" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_objdir" >&5
7547,7559d8173
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
7572,7588d8185
< # Sed substitution that helps us do robust quoting.  It backslashifies
< # metacharacters that are still active within double-quoted strings.
< sed_quote_subst='s/\(["`$\\]\)/\\\1/g'
< 
< # Same as above, but do not quote variable references.
< double_quote_subst='s/\(["`\\]\)/\\\1/g'
< 
< # Sed substitution to delay expansion of an escaped shell variable in a
< # double_quote_subst'ed string.
< delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
< 
< # Sed substitution to delay expansion of an escaped single quote.
< delay_single_quote_subst='s/'\''/'\'\\\\\\\'\''/g'
< 
< # Sed substitution to avoid accidental globbing in evaled expressions
< no_glob_subst='s/\*/\\\*/g'
< 
7617c8214
< cc_basename=`$ECHO "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`
---
> cc_basename=`$ECHO "$cc_temp" | $SED "s%.*/%%; s%^$host_alias-%%"`
7625c8222
<     { $as_echo "$as_me:$LINENO: checking for ${ac_tool_prefix}file" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${ac_tool_prefix}file" >&5
7627c8224
< if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
---
> if ${lt_cv_path_MAGIC_CMD+:} false; then :
7678c8275
<   { $as_echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
7681c8278
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
7691c8288
<     { $as_echo "$as_me:$LINENO: checking for file" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for file" >&5
7693c8290
< if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
---
> if ${lt_cv_path_MAGIC_CMD+:} false; then :
7744c8341
<   { $as_echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
7747c8344
<   { $as_echo "$as_me:$LINENO: result: no" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
7816a8414,8417
> ## CAVEAT EMPTOR:
> ## There is no encapsulation within the following macros, do not change
> ## the running order or otherwise move them around unless you know exactly
> ## what you are doing...
7822c8423,8428
<   lt_prog_compiler_no_builtin_flag=' -fno-builtin'
---
>   case $cc_basename in
>   nvcc*)
>     lt_prog_compiler_no_builtin_flag=' -Xcompiler -fno-builtin' ;;
>   *)
>     lt_prog_compiler_no_builtin_flag=' -fno-builtin' ;;
>   esac
7824c8430
<   { $as_echo "$as_me:$LINENO: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
7826c8432
< if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then
---
> if ${lt_cv_prog_compiler_rtti_exceptions+:} false; then :
7842c8448
<    (eval echo "\"\$as_me:7842: $lt_compile\"" >&5)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&5)
7846c8452
<    echo "$as_me:7846: \$? = $ac_status" >&5
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&5
7850c8456
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' >conftest.exp
7859c8465
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
7879,7880d8484
< { $as_echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
< $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
7927a8532,8537
>     haiku*)
>       # PIC is the default for Haiku.
>       # The "-static" flag exists, but is broken.
>       lt_prog_compiler_static=
>       ;;
> 
7969a8580,8586
> 
>     case $cc_basename in
>     nvcc*) # Cuda Compiler Driver 2.2
>       lt_prog_compiler_wl='-Xlinker '
>       lt_prog_compiler_pic='-Xcompiler -fPIC'
>       ;;
>     esac
8011c8628
<     linux* | k*bsd*-gnu)
---
>     linux* | k*bsd*-gnu | kopensolaris*-gnu)
8032c8649,8655
<       pgcc* | pgf77* | pgf90* | pgf95*)
---
>       nagfor*)
> 	# NAG Fortran compiler
> 	lt_prog_compiler_wl='-Wl,-Wl,,'
> 	lt_prog_compiler_pic='-PIC'
> 	lt_prog_compiler_static='-Bstatic'
> 	;;
>       pgcc* | pgf77* | pgf90* | pgf95* | pgfortran*)
8044,8045c8667,8668
<       xl*)
< 	# IBM XL C 8.0/Fortran 10.1 on PPC
---
>       xl* | bgxl* | bgf* | mpixl*)
> 	# IBM XL C 8.0/Fortran 10.1, 11.1 on PPC and BlueGene
8052,8053c8675,8676
< 	*Sun\ C*)
< 	  # Sun C 5.9
---
> 	*Sun\ F* | *Sun*Fortran*)
> 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
8056c8679
< 	  lt_prog_compiler_wl='-Wl,'
---
> 	  lt_prog_compiler_wl=''
8058,8059c8681,8682
< 	*Sun\ F*)
< 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
---
> 	*Sun\ C*)
> 	  # Sun C 5.9
8062c8685
< 	  lt_prog_compiler_wl=''
---
> 	  lt_prog_compiler_wl='-Wl,'
8094c8717
<       f77* | f90* | f95*)
---
>       f77* | f90* | f95* | sunf77* | sunf90* | sunf95*)
8151,8156d8773
< { $as_echo "$as_me:$LINENO: result: $lt_prog_compiler_pic" >&5
< $as_echo "$lt_prog_compiler_pic" >&6; }
< 
< 
< 
< 
8157a8775,8784
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
> $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
> if ${lt_cv_prog_compiler_pic+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_prog_compiler_pic=$lt_prog_compiler_pic
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic" >&5
> $as_echo "$lt_cv_prog_compiler_pic" >&6; }
> lt_prog_compiler_pic=$lt_cv_prog_compiler_pic
8163c8790
<   { $as_echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
8165c8792
< if test "${lt_cv_prog_compiler_pic_works+set}" = set; then
---
> if ${lt_cv_prog_compiler_pic_works+:} false; then :
8181c8808
<    (eval echo "\"\$as_me:8181: $lt_compile\"" >&5)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&5)
8185c8812
<    echo "$as_me:8185: \$? = $ac_status" >&5
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&5
8189c8816
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' >conftest.exp
8198c8825
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works" >&5
8217a8845,8849
> 
> 
> 
> 
> 
8222c8854
< { $as_echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
8224c8856
< if test "${lt_cv_prog_compiler_static_works+set}" = set; then
---
> if ${lt_cv_prog_compiler_static_works+:} false; then :
8237c8869
<        $ECHO "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
---
>        $ECHO "$_lt_linker_boilerplate" | $SED '/^$/d' > conftest.exp
8250c8882
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works" >&5
8265c8897
<   { $as_echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
8267c8899
< if test "${lt_cv_prog_compiler_c_o+set}" = set; then
---
> if ${lt_cv_prog_compiler_c_o+:} false; then :
8286c8918
<    (eval echo "\"\$as_me:8286: $lt_compile\"" >&5)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&5)
8290c8922
<    echo "$as_me:8290: \$? = $ac_status" >&5
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&5
8295c8927
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' > out/conftest.exp
8312c8944
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
8320c8952
<   { $as_echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
8322c8954
< if test "${lt_cv_prog_compiler_c_o+set}" = set; then
---
> if ${lt_cv_prog_compiler_c_o+:} false; then :
8341c8973
<    (eval echo "\"\$as_me:8341: $lt_compile\"" >&5)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&5)
8345c8977
<    echo "$as_me:8345: \$? = $ac_status" >&5
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&5
8350c8982
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' > out/conftest.exp
8367c8999
< { $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
8376c9008
<   { $as_echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
8384c9016
<   { $as_echo "$as_me:$LINENO: result: $hard_links" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
8387c9019
<     { $as_echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
8400c9032
<   { $as_echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
8462a9095,9098
> 
>   # On some targets, GNU ld is compatible enough with the native linker
>   # that we're better off using the native interface for both.
>   lt_use_gnu_ld_interface=no
8463a9100,9121
>     case $host_os in
>       aix*)
> 	# The AIX port of GNU ld has always aspired to compatibility
> 	# with the native linker.  However, as the warning in the GNU ld
> 	# block says, versions before 2.19.5* couldn't really create working
> 	# shared libraries, regardless of the interface used.
> 	case `$LD -v 2>&1` in
> 	  *\ \(GNU\ Binutils\)\ 2.19.5*) ;;
> 	  *\ \(GNU\ Binutils\)\ 2.[2-9]*) ;;
> 	  *\ \(GNU\ Binutils\)\ [3-9]*) ;;
> 	  *)
> 	    lt_use_gnu_ld_interface=yes
> 	    ;;
> 	esac
> 	;;
>       *)
> 	lt_use_gnu_ld_interface=yes
> 	;;
>     esac
>   fi
> 
>   if test "$lt_use_gnu_ld_interface" = yes; then
8480a9139
>       *GNU\ gold*) supports_anon_versioning=yes ;;
8496c9155
< *** Warning: the GNU linker, at least up to release 2.9.1, is reported
---
> *** Warning: the GNU linker, at least up to release 2.19, is reported
8499,8500c9158,9160
< *** really care for shared libraries, you may want to modify your PATH
< *** so that a non-GNU linker is found, and then restart.
---
> *** really care for shared libraries, you may want to install binutils
> *** 2.20 or above, or modify your PATH so that a non-GNU linker is found.
> *** You will then need to restart the configuration process.
8535a9196
>       export_dynamic_flag_spec='${wl}--export-all-symbols'
8539c9200,9201
<       export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/'\'' | $SED -e '\''/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'
---
>       export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/;s/^.*[ ]__nm__\([^ ]*\)[ ][^ ]*/\1 DATA/;/^I[ ]/d;/^[AITW][ ]/s/.* //'\'' | sort | uniq > $export_symbols'
>       exclude_expsyms='[_]+GLOBAL_OFFSET_TABLE_|[_]+GLOBAL__[FID]_.*|[_]+head_[A-Za-z0-9_]+_dll|[A-Za-z0-9_]+_dll_iname'
8556a9219,9223
>     haiku*)
>       archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
>       link_all_deplibs=yes
>       ;;
> 
8572c9239
<     gnu* | linux* | tpf* | k*bsd*-gnu)
---
>     gnu* | linux* | tpf* | k*bsd*-gnu | kopensolaris*-gnu)
8582c9249
< 	tmp_addflag=
---
> 	tmp_addflag=' $pic_flag'
8586c9253
< 	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
8589,8590c9256,9258
< 	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
< 	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	pgf77* | pgf90* | pgf95* | pgfortran*)
> 					# Portland Group f77 and f90 compilers
> 	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
8601c9269
< 	xl[cC]*)			# IBM XL C 8.0 on PPC (deal with xlf below)
---
> 	xl[cC]* | bgxl[cC]* | mpixl[cC]*) # IBM XL C 8.0 on PPC (deal with xlf below)
8603a9272,9275
> 	nvcc*)	# Cuda Compiler Driver 2.2
> 	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
> 	  compiler_needs_object=yes
> 	  ;;
8607c9279
< 	  whole_archive_flag_spec='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	  whole_archive_flag_spec='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
8623c9295
< 	xlf*)
---
> 	xlf* | bgf* | bgxlf* | mpixlf*)
8628c9300
< 	  archive_cmds='$LD -shared $libobjs $deplibs $compiler_flags -soname $soname -o $lib'
---
> 	  archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'
8633c9305
< 	      $LD -shared $libobjs $deplibs $compiler_flags -soname $soname -version-script $output_objdir/$libname.ver -o $lib'
---
> 	      $LD -shared $libobjs $deplibs $linker_flags -soname $soname -version-script $output_objdir/$libname.ver -o $lib'
8647,8648c9319,9320
< 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	archive_expsym_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
8666,8667c9338,9339
< 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	archive_expsym_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
8713,8714c9385,9386
< 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	archive_expsym_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
8753a9426,9427
> 	# Also, AIX nm treats weak defined symbols like other global
> 	# defined symbols, whereas GNU nm marks them as "W".
8755c9429
< 	  export_symbols_cmds='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && (substr(\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
---
> 	  export_symbols_cmds='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B") || (\$ 2 == "W")) && (substr(\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
8842,8846c9516,9522
<         cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>         if test "${lt_cv_aix_libpath+set}" = set; then
>   aix_libpath=$lt_cv_aix_libpath
> else
>   if ${lt_cv_aix_libpath_+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
8857,8877c9533
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
---
> if ac_fn_c_try_link "$LINENO"; then :
8882c9538
< 	    s/^0  *\(.*\)$/\1/
---
> 	      s/^0  *\([^ ]*\) *$/\1/
8886c9542
< aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>   lt_cv_aix_libpath_=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
8888,8889c9544,9551
< if test -z "$aix_libpath"; then
<   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>   if test -z "$lt_cv_aix_libpath_"; then
>     lt_cv_aix_libpath_=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
>   fi
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
>   if test -z "$lt_cv_aix_libpath_"; then
>     lt_cv_aix_libpath_="/usr/lib:/lib"
8891,8894d9552
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
8898,8901c9556,9557
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
---
>   aix_libpath=$lt_cv_aix_libpath_
> fi
8904c9560
<         archive_expsym_cmds='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then $ECHO "X${wl}${allow_undefined_flag}" | $Xsed; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
---
>         archive_expsym_cmds='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then func_echo_all "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
8913,8917c9569,9575
< 	 cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	 if test "${lt_cv_aix_libpath+set}" = set; then
>   aix_libpath=$lt_cv_aix_libpath
> else
>   if ${lt_cv_aix_libpath_+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
8928,8948c9586
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
---
> if ac_fn_c_try_link "$LINENO"; then :
8953c9591
< 	    s/^0  *\(.*\)$/\1/
---
> 	      s/^0  *\([^ ]*\) *$/\1/
8957c9595
< aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>   lt_cv_aix_libpath_=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
8959,8960c9597,9604
< if test -z "$aix_libpath"; then
<   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>   if test -z "$lt_cv_aix_libpath_"; then
>     lt_cv_aix_libpath_=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
>   fi
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
>   if test -z "$lt_cv_aix_libpath_"; then
>     lt_cv_aix_libpath_="/usr/lib:/lib"
8962,8965d9605
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
8969,8972c9609,9610
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
---
>   aix_libpath=$lt_cv_aix_libpath_
> fi
8978a9617,9620
> 	  if test "$with_gnu_ld" = yes; then
> 	    # We only use this code for GNU lds that support --whole-archive.
> 	    whole_archive_flag_spec='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
> 	  else
8980a9623
> 	  fi
9011a9655,9696
>       case $cc_basename in
>       cl*)
> 	# Native MSVC
> 	hardcode_libdir_flag_spec=' '
> 	allow_undefined_flag=unsupported
> 	always_export_symbols=yes
> 	file_list_spec='@'
> 	# Tell ltmain to make .lib files, not .a files.
> 	libext=lib
> 	# Tell ltmain to make .dll files, not .so files.
> 	shrext_cmds=".dll"
> 	# FIXME: Setting linknames here is a bad hack.
> 	archive_cmds='$CC -o $output_objdir/$soname $libobjs $compiler_flags $deplibs -Wl,-dll~linknames='
> 	archive_expsym_cmds='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
> 	    sed -n -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' -e '1\\\!p' < $export_symbols > $output_objdir/$soname.exp;
> 	  else
> 	    sed -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' < $export_symbols > $output_objdir/$soname.exp;
> 	  fi~
> 	  $CC -o $tool_output_objdir$soname $libobjs $compiler_flags $deplibs "@$tool_output_objdir$soname.exp" -Wl,-DLL,-IMPLIB:"$tool_output_objdir$libname.dll.lib"~
> 	  linknames='
> 	# The linker will not automatically build a static lib if we build a DLL.
> 	# _LT_TAGVAR(old_archive_from_new_cmds, )='true'
> 	enable_shared_with_static_runtimes=yes
> 	export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1,DATA/'\'' | $SED -e '\''/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'
> 	# Don't use ranlib
> 	old_postinstall_cmds='chmod 644 $oldlib'
> 	postlink_cmds='lt_outputfile="@OUTPUT@"~
> 	  lt_tool_outputfile="@TOOL_OUTPUT@"~
> 	  case $lt_outputfile in
> 	    *.exe|*.EXE) ;;
> 	    *)
> 	      lt_outputfile="$lt_outputfile.exe"
> 	      lt_tool_outputfile="$lt_tool_outputfile.exe"
> 	      ;;
> 	  esac~
> 	  if test "$MANIFEST_TOOL" != ":" && test -f "$lt_outputfile.manifest"; then
> 	    $MANIFEST_TOOL -manifest "$lt_tool_outputfile.manifest" -outputresource:"$lt_tool_outputfile" || exit 1;
> 	    $RM "$lt_outputfile.manifest";
> 	  fi'
> 	;;
>       *)
> 	# Assume MSVC wrapper
9019c9704
<       archive_cmds='$CC -o $lib $libobjs $compiler_flags `$ECHO "X$deplibs" | $Xsed -e '\''s/ -lc$//'\''` -link -dll~linknames='
---
> 	archive_cmds='$CC -o $lib $libobjs $compiler_flags `func_echo_all "$deplibs" | $SED '\''s/ -lc$//'\''` -link -dll~linknames='
9024d9708
<       fix_srcfile_path='`cygpath -w "$srcfile"`'
9026a9711,9712
>       esac
>       ;;
9034a9721,9723
>   if test "$lt_cv_ld_force_load" = "yes"; then
>     whole_archive_flag_spec='`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience ${wl}-force_load,$conv\"; done; func_echo_all \"$new_convenience\"`'
>   else
9035a9725
>   fi
9043c9733
<     output_verbose_link_cmd=echo
---
>     output_verbose_link_cmd=func_echo_all
9086c9776
<       archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
---
>       archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
9094c9784
< 	archive_cmds='$RM $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
---
> 	archive_cmds='$RM $output_objdir/$soname~$CC -shared $pic_flag ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
9109,9110c9799,9800
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
< 	archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
---
>       if test "$GCC" = yes && test "$with_gnu_ld" = no; then
> 	archive_cmds='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
9128c9818
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
---
>       if test "$GCC" = yes && test "$with_gnu_ld" = no; then
9134c9824
< 	  archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
---
> 	  archive_cmds='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
9137c9827
< 	  archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
---
> 	  archive_cmds='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
9148a9839,9873
> 
> 	  # Older versions of the 11.00 compiler do not understand -b yet
> 	  # (HP92453-01 A.11.01.20 doesn't, HP92453-01 B.11.X.35175-35176.GP does)
> 	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $CC understands -b" >&5
> $as_echo_n "checking if $CC understands -b... " >&6; }
> if ${lt_cv_prog_compiler__b+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_prog_compiler__b=no
>    save_LDFLAGS="$LDFLAGS"
>    LDFLAGS="$LDFLAGS -b"
>    echo "$lt_simple_link_test_code" > conftest.$ac_ext
>    if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
>      # The linker can only warn and ignore the option if not recognized
>      # So say no if there are warnings
>      if test -s conftest.err; then
>        # Append any errors to the config.log.
>        cat conftest.err 1>&5
>        $ECHO "$_lt_linker_boilerplate" | $SED '/^$/d' > conftest.exp
>        $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
>        if diff conftest.exp conftest.er2 >/dev/null; then
>          lt_cv_prog_compiler__b=yes
>        fi
>      else
>        lt_cv_prog_compiler__b=yes
>      fi
>    fi
>    $RM -r conftest*
>    LDFLAGS="$save_LDFLAGS"
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler__b" >&5
> $as_echo "$lt_cv_prog_compiler__b" >&6; }
> 
> if test x"$lt_cv_prog_compiler__b" = xyes; then
9149a9875,9878
> else
>     archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
> fi
> 
9177c9906
< 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
9180a9910,9915
> 	# This should be the same for all languages, so no per-tag cache variable.
> 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $host_os linker accepts -exported_symbol" >&5
> $as_echo_n "checking whether the $host_os linker accepts -exported_symbol... " >&6; }
> if ${lt_cv_irix_exported_symbol+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
9183,9184c9918,9920
<         cat >conftest.$ac_ext <<_ACEOF
< int foo(void) {}
---
> 	   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> int foo (void) { return 0; }
9186,9208c9922,9923
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
< 
---
> if ac_fn_c_try_link "$LINENO"; then :
>   lt_cv_irix_exported_symbol=yes
9210,9213c9925
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
---
>   lt_cv_irix_exported_symbol=no
9215,9217c9927
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
---
> rm -f core conftest.err conftest.$ac_objext \
9219a9930,9935
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_irix_exported_symbol" >&5
> $as_echo "$lt_cv_irix_exported_symbol" >&6; }
> 	if test "$lt_cv_irix_exported_symbol" = yes; then
>           archive_expsym_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
> 	fi
9221,9222c9937,9938
< 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -exports_file $export_symbols -o $lib'
---
> 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
> 	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -exports_file $export_symbols -o $lib'
9284c10000
<       archive_cmds='$ECHO "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$ECHO "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$ECHO DATA >> $output_objdir/$libname.def~$ECHO " SINGLE NONSHARED" >> $output_objdir/$libname.def~$ECHO EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
---
>       archive_cmds='$ECHO "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$ECHO "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~echo DATA >> $output_objdir/$libname.def~echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
9291c10007
< 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
9294c10010
< 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
9304c10020
< 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	archive_cmds='$CC -shared${allow_undefined_flag} $pic_flag $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
9308c10024
< 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -msym -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -msym -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
9310c10026
< 	$CC -shared${allow_undefined_flag} ${wl}-input ${wl}$lib.exp $compiler_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib~$RM $lib.exp'
---
> 	$CC -shared${allow_undefined_flag} ${wl}-input ${wl}$lib.exp $compiler_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && $ECHO "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib~$RM $lib.exp'
9323c10039
< 	archive_cmds='$CC -shared ${wl}-z ${wl}text ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
---
> 	archive_cmds='$CC -shared $pic_flag ${wl}-z ${wl}text ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
9325c10041
< 	  $CC -shared ${wl}-z ${wl}text ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
---
> 	  $CC -shared $pic_flag ${wl}-z ${wl}text ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
9474c10190
< { $as_echo "$as_me:$LINENO: result: $ld_shlibs" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs" >&5
9511c10227
<       { $as_echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
---
>       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
9512a10229,10231
> if ${lt_cv_archive_cmds_need_lc+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
9516c10235
<       if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
---
> 	if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
9519,9520c10238,10239
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } 2>conftest.err; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } 2>conftest.err; then
9534c10253
<         if { (eval echo "$as_me:$LINENO: \"$archive_cmds 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1\"") >&5
---
> 	  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1\""; } >&5
9537,9538c10256,10257
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
9540c10259
< 	  archive_cmds_need_lc=no
---
> 	    lt_cv_archive_cmds_need_lc=no
9542c10261
< 	  archive_cmds_need_lc=yes
---
> 	    lt_cv_archive_cmds_need_lc=yes
9549,9550c10268,10272
<       { $as_echo "$as_me:$LINENO: result: $archive_cmds_need_lc" >&5
< $as_echo "$archive_cmds_need_lc" >&6; }
---
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_archive_cmds_need_lc" >&5
> $as_echo "$lt_cv_archive_cmds_need_lc" >&6; }
>       archive_cmds_need_lc=$lt_cv_archive_cmds_need_lc
9713c10435
<   { $as_echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
9721,9722c10443,10449
<   lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e "s,=/,/,g"`
<   if $ECHO "$lt_search_path_spec" | $GREP ';' >/dev/null ; then
---
>   case $host_os in
>     mingw* | cegcc*) lt_sed_strip_eq="s,=\([A-Za-z]:\),\1,g" ;;
>     *) lt_sed_strip_eq="s,=/,/,g" ;;
>   esac
>   lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e $lt_sed_strip_eq`
>   case $lt_search_path_spec in
>   *\;*)
9727,9730c10454,10459
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED -e 's/;/ /g'`
<   else
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
<   fi
---
>     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED 's/;/ /g'`
>     ;;
>   *)
>     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED "s/$PATH_SEPARATOR/ /g"`
>     ;;
>   esac
9743c10472
<   lt_search_path_spec=`$ECHO $lt_tmp_lt_search_path_spec | awk '
---
>   lt_search_path_spec=`$ECHO "$lt_tmp_lt_search_path_spec" | awk '
9763c10492,10498
<   sys_lib_search_path_spec=`$ECHO $lt_search_path_spec`
---
>   # AWK program above erroneously prepends '/' to C:/dos/paths
>   # for these hosts.
>   case $host_os in
>     mingw* | cegcc*) lt_search_path_spec=`$ECHO "$lt_search_path_spec" |\
>       $SED 's,/\([A-Za-z]:\),\1,g'` ;;
>   esac
>   sys_lib_search_path_spec=`$ECHO "$lt_search_path_spec" | $lt_NL2SP`
9851c10586
<     finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$ECHO "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $RM /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
---
>     finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`func_echo_all "$lib" | $SED '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $RM /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
9882,9883c10617,10619
<   case $GCC,$host_os in
<   yes,cygwin* | yes,mingw* | yes,pw32* | yes,cegcc*)
---
>   case $GCC,$cc_basename in
>   yes,*)
>     # gcc
9904c10640,10641
<       sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
---
> 
>       sys_lib_search_path_spec="$sys_lib_search_path_spec /usr/lib/w32api"
9909c10646,10686
<       sys_lib_search_path_spec=`$CC -print-search-dirs | $GREP "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
---
>       ;;
>     pw32*)
>       # pw32 DLLs use 'pw' prefix rather than 'lib'
>       library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
>       ;;
>     esac
>     dynamic_linker='Win32 ld.exe'
>     ;;
> 
>   *,cl*)
>     # Native MSVC
>     libname_spec='$name'
>     soname_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
>     library_names_spec='${libname}.dll.lib'
> 
>     case $build_os in
>     mingw*)
>       sys_lib_search_path_spec=
>       lt_save_ifs=$IFS
>       IFS=';'
>       for lt_path in $LIB
>       do
>         IFS=$lt_save_ifs
>         # Let DOS variable expansion print the short 8.3 style file name.
>         lt_path=`cd "$lt_path" 2>/dev/null && cmd //C "for %i in (".") do @echo %~si"`
>         sys_lib_search_path_spec="$sys_lib_search_path_spec $lt_path"
>       done
>       IFS=$lt_save_ifs
>       # Convert to MSYS style.
>       sys_lib_search_path_spec=`$ECHO "$sys_lib_search_path_spec" | sed -e 's|\\\\|/|g' -e 's| \\([a-zA-Z]\\):| /\\1|g' -e 's|^ ||'`
>       ;;
>     cygwin*)
>       # Convert to unix form, then to dos form, then back to unix form
>       # but this time dos style (no spaces!) so that the unix form looks
>       # like /cygdrive/c/PROGRA~1:/cygdr...
>       sys_lib_search_path_spec=`cygpath --path --unix "$LIB"`
>       sys_lib_search_path_spec=`cygpath --path --dos "$sys_lib_search_path_spec" 2>/dev/null`
>       sys_lib_search_path_spec=`cygpath --path --unix "$sys_lib_search_path_spec" | $SED -e "s/$PATH_SEPARATOR/ /g"`
>       ;;
>     *)
>       sys_lib_search_path_spec="$LIB"
9911,9916c10688
<         # It is most probably a Windows format PATH printed by
<         # mingw gcc, but we are running on Cygwin. Gcc prints its search
<         # path with ; separators, and with drive letters. We can handle the
<         # drive letters (cygwin fileutils understands them), so leave them,
<         # especially as we might pass files found there to a mingw objdump,
<         # which wouldn't understand a cygwinified path. Ahh.
---
>         # It is most probably a Windows format PATH.
9921,9924c10693,10694
<       ;;
<     pw32*)
<       # pw32 DLLs use 'pw' prefix rather than 'lib'
<       library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
---
>       # FIXME: find the short name or the path components, as spaces are
>       # common. (e.g. "Program Files" -> "PROGRA~1")
9926a10697,10708
> 
>     # DLL is installed to $(libdir)/../bin by postinstall_cmds
>     postinstall_cmds='base_file=`basename \${file}`~
>       dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i; echo \$dlname'\''`~
>       dldir=$destdir/`dirname \$dlpath`~
>       test -d \$dldir || mkdir -p \$dldir~
>       $install_prog $dir/$dlname \$dldir/$dlname'
>     postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
>       dlpath=$dir/\$dldll~
>        $RM \$dlpath'
>     shlibpath_overrides_runpath=yes
>     dynamic_linker='Win32 link.exe'
9929a10712
>     # Assume MSVC wrapper
9930a10714
>     dynamic_linker='Win32 ld.exe'
9933d10716
<   dynamic_linker='Win32 ld.exe'
10019a10803,10815
> haiku*)
>   version_type=linux
>   need_lib_prefix=no
>   need_version=no
>   dynamic_linker="$host_os runtime_loader"
>   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
>   soname_spec='${libname}${release}${shared_ext}$major'
>   shlibpath_var=LIBRARY_PATH
>   shlibpath_overrides_runpath=yes
>   sys_lib_dlsearch_path_spec='/boot/home/config/lib /boot/common/lib /boot/system/lib'
>   hardcode_into_libs=yes
>   ;;
> 
10062c10858
<   # HP-UX runs *really* slowly unless shared libraries are mode 555.
---
>   # HP-UX runs *really* slowly unless shared libraries are mode 555, ...
10063a10860,10861
>   # or fails outright, so override atomically:
>   install_override_mode=555
10121c10919
< linux* | k*bsd*-gnu)
---
> linux* | k*bsd*-gnu | kopensolaris*-gnu)
10129a10928
> 
10130a10930,10933
>   if ${lt_cv_shlibpath_overrides_runpath+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   lt_cv_shlibpath_overrides_runpath=no
10135,10139c10938
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
10150,10172c10949,10951
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   if  ($OBJDUMP -p conftest$ac_exeext) 2>/dev/null | grep "RUNPATH.*$libdir" >/dev/null; then
<   shlibpath_overrides_runpath=yes
---
> if ac_fn_c_try_link "$LINENO"; then :
>   if  ($OBJDUMP -p conftest$ac_exeext) 2>/dev/null | grep "RUNPATH.*$libdir" >/dev/null; then :
>   lt_cv_shlibpath_overrides_runpath=yes
10174,10179d10952
< 
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
10181,10183c10954
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
---
> rm -f core conftest.err conftest.$ac_objext \
10187a10959,10962
> fi
> 
>   shlibpath_overrides_runpath=$lt_cv_shlibpath_overrides_runpath
> 
10193,10195d10967
<   # Add ABI-specific directories to the system library path.
<   sys_lib_dlsearch_path_spec="/lib64 /usr/lib64 /lib /usr/lib"
< 
10198,10199c10970,10971
<     lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[	 ]*hwcap[	 ]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
<     sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec $lt_ld_extra"
---
>     lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[	 ]*hwcap[	 ]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;s/"//g;/^$/d' | tr '\n' ' '`
>     sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
10399c11171
< { $as_echo "$as_me:$LINENO: result: $dynamic_linker" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
10495,11506c11267,11293
< 
< 
< 
< 
< 
< 
<   { $as_echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
< $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
< hardcode_action=
< if test -n "$hardcode_libdir_flag_spec" ||
<    test -n "$runpath_var" ||
<    test "X$hardcode_automatic" = "Xyes" ; then
< 
<   # We can hardcode non-existent directories.
<   if test "$hardcode_direct" != no &&
<      # If the only mechanism to avoid hardcoding is shlibpath_var, we
<      # have to relink, otherwise we might link with an installed library
<      # when we should be linking with a yet-to-be-installed one
<      ## test "$_LT_TAGVAR(hardcode_shlibpath_var, )" != no &&
<      test "$hardcode_minus_L" != no; then
<     # Linking always hardcodes the temporary library directory.
<     hardcode_action=relink
<   else
<     # We can link without hardcoding, and we can hardcode nonexisting dirs.
<     hardcode_action=immediate
<   fi
< else
<   # We cannot hardcode anything, or else we can only hardcode existing
<   # directories.
<   hardcode_action=unsupported
< fi
< { $as_echo "$as_me:$LINENO: result: $hardcode_action" >&5
< $as_echo "$hardcode_action" >&6; }
< 
< if test "$hardcode_action" = relink ||
<    test "$inherit_rpath" = yes; then
<   # Fast installation is not supported
<   enable_fast_install=no
< elif test "$shlibpath_overrides_runpath" = yes ||
<      test "$enable_shared" = no; then
<   # Fast installation is not necessary
<   enable_fast_install=needless
< fi
< 
< 
< 
< 
< 
< 
<   if test "x$enable_dlopen" != xyes; then
<   enable_dlopen=unknown
<   enable_dlopen_self=unknown
<   enable_dlopen_self_static=unknown
< else
<   lt_cv_dlopen=no
<   lt_cv_dlopen_libs=
< 
<   case $host_os in
<   beos*)
<     lt_cv_dlopen="load_add_on"
<     lt_cv_dlopen_libs=
<     lt_cv_dlopen_self=yes
<     ;;
< 
<   mingw* | pw32* | cegcc*)
<     lt_cv_dlopen="LoadLibrary"
<     lt_cv_dlopen_libs=
<     ;;
< 
<   cygwin*)
<     lt_cv_dlopen="dlopen"
<     lt_cv_dlopen_libs=
<     ;;
< 
<   darwin*)
<   # if libdl is installed we need to link against it
<     { $as_echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
< $as_echo_n "checking for dlopen in -ldl... " >&6; }
< if test "${ac_cv_lib_dl_dlopen+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_check_lib_save_LIBS=$LIBS
< LIBS="-ldl  $LIBS"
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char dlopen ();
< int
< main ()
< {
< return dlopen ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_lib_dl_dlopen=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_lib_dl_dlopen=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< LIBS=$ac_check_lib_save_LIBS
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
< $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
< if test "x$ac_cv_lib_dl_dlopen" = x""yes; then
<   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
< else
< 
<     lt_cv_dlopen="dyld"
<     lt_cv_dlopen_libs=
<     lt_cv_dlopen_self=yes
< 
< fi
< 
<     ;;
< 
<   *)
<     { $as_echo "$as_me:$LINENO: checking for shl_load" >&5
< $as_echo_n "checking for shl_load... " >&6; }
< if test "${ac_cv_func_shl_load+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< /* Define shl_load to an innocuous variant, in case <limits.h> declares shl_load.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define shl_load innocuous_shl_load
< 
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char shl_load (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
< 
< #ifdef __STDC__
< # include <limits.h>
< #else
< # include <assert.h>
< #endif
< 
< #undef shl_load
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char shl_load ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_shl_load || defined __stub___shl_load
< choke me
< #endif
< 
< int
< main ()
< {
< return shl_load ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_func_shl_load=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_func_shl_load=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_shl_load" >&5
< $as_echo "$ac_cv_func_shl_load" >&6; }
< if test "x$ac_cv_func_shl_load" = x""yes; then
<   lt_cv_dlopen="shl_load"
< else
<   { $as_echo "$as_me:$LINENO: checking for shl_load in -ldld" >&5
< $as_echo_n "checking for shl_load in -ldld... " >&6; }
< if test "${ac_cv_lib_dld_shl_load+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_check_lib_save_LIBS=$LIBS
< LIBS="-ldld  $LIBS"
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char shl_load ();
< int
< main ()
< {
< return shl_load ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_lib_dld_shl_load=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_lib_dld_shl_load=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< LIBS=$ac_check_lib_save_LIBS
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load" >&5
< $as_echo "$ac_cv_lib_dld_shl_load" >&6; }
< if test "x$ac_cv_lib_dld_shl_load" = x""yes; then
<   lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
< else
<   { $as_echo "$as_me:$LINENO: checking for dlopen" >&5
< $as_echo_n "checking for dlopen... " >&6; }
< if test "${ac_cv_func_dlopen+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< /* Define dlopen to an innocuous variant, in case <limits.h> declares dlopen.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define dlopen innocuous_dlopen
< 
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char dlopen (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
< 
< #ifdef __STDC__
< # include <limits.h>
< #else
< # include <assert.h>
< #endif
< 
< #undef dlopen
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char dlopen ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_dlopen || defined __stub___dlopen
< choke me
< #endif
< 
< int
< main ()
< {
< return dlopen ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_func_dlopen=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_func_dlopen=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_dlopen" >&5
< $as_echo "$ac_cv_func_dlopen" >&6; }
< if test "x$ac_cv_func_dlopen" = x""yes; then
<   lt_cv_dlopen="dlopen"
< else
<   { $as_echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
< $as_echo_n "checking for dlopen in -ldl... " >&6; }
< if test "${ac_cv_lib_dl_dlopen+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_check_lib_save_LIBS=$LIBS
< LIBS="-ldl  $LIBS"
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char dlopen ();
< int
< main ()
< {
< return dlopen ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_lib_dl_dlopen=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_lib_dl_dlopen=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< LIBS=$ac_check_lib_save_LIBS
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
< $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
< if test "x$ac_cv_lib_dl_dlopen" = x""yes; then
<   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
< else
<   { $as_echo "$as_me:$LINENO: checking for dlopen in -lsvld" >&5
< $as_echo_n "checking for dlopen in -lsvld... " >&6; }
< if test "${ac_cv_lib_svld_dlopen+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_check_lib_save_LIBS=$LIBS
< LIBS="-lsvld  $LIBS"
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char dlopen ();
< int
< main ()
< {
< return dlopen ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_lib_svld_dlopen=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_lib_svld_dlopen=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< LIBS=$ac_check_lib_save_LIBS
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen" >&5
< $as_echo "$ac_cv_lib_svld_dlopen" >&6; }
< if test "x$ac_cv_lib_svld_dlopen" = x""yes; then
<   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
< else
<   { $as_echo "$as_me:$LINENO: checking for dld_link in -ldld" >&5
< $as_echo_n "checking for dld_link in -ldld... " >&6; }
< if test "${ac_cv_lib_dld_dld_link+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_check_lib_save_LIBS=$LIBS
< LIBS="-ldld  $LIBS"
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char dld_link ();
< int
< main ()
< {
< return dld_link ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_lib_dld_dld_link=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_lib_dld_dld_link=no
< fi
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< LIBS=$ac_check_lib_save_LIBS
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link" >&5
< $as_echo "$ac_cv_lib_dld_dld_link" >&6; }
< if test "x$ac_cv_lib_dld_dld_link" = x""yes; then
<   lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
< fi
< 
< 
< fi
< 
< 
< fi
< 
< 
< fi
< 
< 
< fi
< 
< 
< fi
< 
<     ;;
<   esac
< 
<   if test "x$lt_cv_dlopen" != xno; then
<     enable_dlopen=yes
<   else
<     enable_dlopen=no
<   fi
< 
<   case $lt_cv_dlopen in
<   dlopen)
<     save_CPPFLAGS="$CPPFLAGS"
<     test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"
< 
<     save_LDFLAGS="$LDFLAGS"
<     wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"
< 
<     save_LIBS="$LIBS"
<     LIBS="$lt_cv_dlopen_libs $LIBS"
< 
<     { $as_echo "$as_me:$LINENO: checking whether a program can dlopen itself" >&5
< $as_echo_n "checking whether a program can dlopen itself... " >&6; }
< if test "${lt_cv_dlopen_self+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   	  if test "$cross_compiling" = yes; then :
<   lt_cv_dlopen_self=cross
< else
<   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
<   lt_status=$lt_dlunknown
<   cat > conftest.$ac_ext <<_LT_EOF
< #line 11144 "configure"
< #include "confdefs.h"
< 
< #if HAVE_DLFCN_H
< #include <dlfcn.h>
< #endif
< 
< #include <stdio.h>
< 
< #ifdef RTLD_GLOBAL
< #  define LT_DLGLOBAL		RTLD_GLOBAL
< #else
< #  ifdef DL_GLOBAL
< #    define LT_DLGLOBAL		DL_GLOBAL
< #  else
< #    define LT_DLGLOBAL		0
< #  endif
< #endif
< 
< /* We may have to define LT_DLLAZY_OR_NOW in the command line if we
<    find out it does not work in some platform. */
< #ifndef LT_DLLAZY_OR_NOW
< #  ifdef RTLD_LAZY
< #    define LT_DLLAZY_OR_NOW		RTLD_LAZY
< #  else
< #    ifdef DL_LAZY
< #      define LT_DLLAZY_OR_NOW		DL_LAZY
< #    else
< #      ifdef RTLD_NOW
< #        define LT_DLLAZY_OR_NOW	RTLD_NOW
< #      else
< #        ifdef DL_NOW
< #          define LT_DLLAZY_OR_NOW	DL_NOW
< #        else
< #          define LT_DLLAZY_OR_NOW	0
< #        endif
< #      endif
< #    endif
< #  endif
< #endif
< 
< void fnord() { int i=42;}
< int main ()
< {
<   void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
<   int status = $lt_dlunknown;
< 
<   if (self)
<     {
<       if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
<       else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
<       /* dlclose (self); */
<     }
<   else
<     puts (dlerror ());
< 
<   return status;
< }
< _LT_EOF
<   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
<   (eval $ac_link) 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
<     (./conftest; exit; ) >&5 2>/dev/null
<     lt_status=$?
<     case x$lt_status in
<       x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
<       x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
<       x$lt_dlunknown|x*) lt_cv_dlopen_self=no ;;
<     esac
<   else :
<     # compilation failed
<     lt_cv_dlopen_self=no
<   fi
< fi
< rm -fr conftest*
< 
< 
< fi
< { $as_echo "$as_me:$LINENO: result: $lt_cv_dlopen_self" >&5
< $as_echo "$lt_cv_dlopen_self" >&6; }
< 
<     if test "x$lt_cv_dlopen_self" = xyes; then
<       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
<       { $as_echo "$as_me:$LINENO: checking whether a statically linked program can dlopen itself" >&5
< $as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
< if test "${lt_cv_dlopen_self_static+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   	  if test "$cross_compiling" = yes; then :
<   lt_cv_dlopen_self_static=cross
< else
<   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
<   lt_status=$lt_dlunknown
<   cat > conftest.$ac_ext <<_LT_EOF
< #line 11240 "configure"
< #include "confdefs.h"
< 
< #if HAVE_DLFCN_H
< #include <dlfcn.h>
< #endif
< 
< #include <stdio.h>
< 
< #ifdef RTLD_GLOBAL
< #  define LT_DLGLOBAL		RTLD_GLOBAL
< #else
< #  ifdef DL_GLOBAL
< #    define LT_DLGLOBAL		DL_GLOBAL
< #  else
< #    define LT_DLGLOBAL		0
< #  endif
< #endif
< 
< /* We may have to define LT_DLLAZY_OR_NOW in the command line if we
<    find out it does not work in some platform. */
< #ifndef LT_DLLAZY_OR_NOW
< #  ifdef RTLD_LAZY
< #    define LT_DLLAZY_OR_NOW		RTLD_LAZY
< #  else
< #    ifdef DL_LAZY
< #      define LT_DLLAZY_OR_NOW		DL_LAZY
< #    else
< #      ifdef RTLD_NOW
< #        define LT_DLLAZY_OR_NOW	RTLD_NOW
< #      else
< #        ifdef DL_NOW
< #          define LT_DLLAZY_OR_NOW	DL_NOW
< #        else
< #          define LT_DLLAZY_OR_NOW	0
< #        endif
< #      endif
< #    endif
< #  endif
< #endif
< 
< void fnord() { int i=42;}
< int main ()
< {
<   void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
<   int status = $lt_dlunknown;
< 
<   if (self)
<     {
<       if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
<       else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
<       /* dlclose (self); */
<     }
<   else
<     puts (dlerror ());
< 
<   return status;
< }
< _LT_EOF
<   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
<   (eval $ac_link) 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
<     (./conftest; exit; ) >&5 2>/dev/null
<     lt_status=$?
<     case x$lt_status in
<       x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
<       x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
<       x$lt_dlunknown|x*) lt_cv_dlopen_self_static=no ;;
<     esac
<   else :
<     # compilation failed
<     lt_cv_dlopen_self_static=no
<   fi
< fi
< rm -fr conftest*
< 
< 
< fi
< { $as_echo "$as_me:$LINENO: result: $lt_cv_dlopen_self_static" >&5
< $as_echo "$lt_cv_dlopen_self_static" >&6; }
<     fi
< 
<     CPPFLAGS="$save_CPPFLAGS"
<     LDFLAGS="$save_LDFLAGS"
<     LIBS="$save_LIBS"
<     ;;
<   esac
< 
<   case $lt_cv_dlopen_self in
<   yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
<   *) enable_dlopen_self=unknown ;;
<   esac
< 
<   case $lt_cv_dlopen_self_static in
<   yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
<   *) enable_dlopen_self_static=unknown ;;
<   esac
< fi
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< striplib=
< old_striplib=
< { $as_echo "$as_me:$LINENO: checking whether stripping libraries is possible" >&5
< $as_echo_n "checking whether stripping libraries is possible... " >&6; }
< if test -n "$STRIP" && $STRIP -V 2>&1 | $GREP "GNU strip" >/dev/null; then
<   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
<   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
<   { $as_echo "$as_me:$LINENO: result: yes" >&5
< $as_echo "yes" >&6; }
< else
< # FIXME - insert some real tests, host_os isn't really good enough
<   case $host_os in
<   darwin*)
<     if test -n "$STRIP" ; then
<       striplib="$STRIP -x"
<       old_striplib="$STRIP -S"
<       { $as_echo "$as_me:$LINENO: result: yes" >&5
< $as_echo "yes" >&6; }
<     else
<       { $as_echo "$as_me:$LINENO: result: no" >&5
< $as_echo "no" >&6; }
<     fi
<     ;;
<   *)
<     { $as_echo "$as_me:$LINENO: result: no" >&5
< $as_echo "no" >&6; }
<     ;;
<   esac
< fi
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
<   # Report which library types will actually be built
<   { $as_echo "$as_me:$LINENO: checking if libtool supports shared libraries" >&5
< $as_echo_n "checking if libtool supports shared libraries... " >&6; }
<   { $as_echo "$as_me:$LINENO: result: $can_build_shared" >&5
< $as_echo "$can_build_shared" >&6; }
< 
<   { $as_echo "$as_me:$LINENO: checking whether to build shared libraries" >&5
< $as_echo_n "checking whether to build shared libraries... " >&6; }
<   test "$can_build_shared" = "no" && enable_shared=no
< 
<   # On AIX, shared libraries and static libraries use the same namespace, and
<   # are all built from PIC.
<   case $host_os in
<   aix3*)
<     test "$enable_shared" = yes && enable_static=no
<     if test -n "$RANLIB"; then
<       archive_cmds="$archive_cmds~\$RANLIB \$lib"
<       postinstall_cmds='$RANLIB $lib'
<     fi
<     ;;
< 
<   aix[4-9]*)
<     if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
<       test "$enable_shared" = yes && enable_static=no
<     fi
<     ;;
<   esac
<   { $as_echo "$as_me:$LINENO: result: $enable_shared" >&5
< $as_echo "$enable_shared" >&6; }
< 
<   { $as_echo "$as_me:$LINENO: checking whether to build static libraries" >&5
< $as_echo_n "checking whether to build static libraries... " >&6; }
<   # Make sure either enable_shared or enable_static is yes.
<   test "$enable_shared" = yes || enable_static=yes
<   { $as_echo "$as_me:$LINENO: result: $enable_static" >&5
< $as_echo "$enable_static" >&6; }
< 
< 
< 
< 
< fi
< ac_ext=c
< ac_cpp='$CPP $CPPFLAGS'
< ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
< ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
< ac_compiler_gnu=$ac_cv_c_compiler_gnu
< 
< CC="$lt_save_CC"
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
< 
<         ac_config_commands="$ac_config_commands libtool"
< 
< 
< 
< 
< # Only expand once:
< 
< 
< 
< 
< 
< { $as_echo "$as_me:$LINENO: checking whether to enable maintainer-specific portions of Makefiles" >&5
< $as_echo_n "checking whether to enable maintainer-specific portions of Makefiles... " >&6; }
<     # Check whether --enable-maintainer-mode was given.
< if test "${enable_maintainer_mode+set}" = set; then
<   enableval=$enable_maintainer_mode; USE_MAINTAINER_MODE=$enableval
< else
<   USE_MAINTAINER_MODE=no
< fi
< 
<   { $as_echo "$as_me:$LINENO: result: $USE_MAINTAINER_MODE" >&5
< $as_echo "$USE_MAINTAINER_MODE" >&6; }
<    if test $USE_MAINTAINER_MODE = yes; then
<   MAINTAINER_MODE_TRUE=
<   MAINTAINER_MODE_FALSE='#'
< else
<   MAINTAINER_MODE_TRUE='#'
<   MAINTAINER_MODE_FALSE=
< fi
< 
<   MAINT=$MAINTAINER_MODE_TRUE
< 
< 
< 
< 
< for ac_header in sys/mman.h
< do
< as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
< if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
<   { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
< $as_echo_n "checking for $ac_header... " >&6; }
< if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
<   $as_echo_n "(cached) " >&6
< fi
< ac_res=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
---
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
> $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
> hardcode_action=
> if test -n "$hardcode_libdir_flag_spec" ||
>    test -n "$runpath_var" ||
>    test "X$hardcode_automatic" = "Xyes" ; then
> 
>   # We can hardcode non-existent directories.
>   if test "$hardcode_direct" != no &&
>      # If the only mechanism to avoid hardcoding is shlibpath_var, we
>      # have to relink, otherwise we might link with an installed library
>      # when we should be linking with a yet-to-be-installed one
>      ## test "$_LT_TAGVAR(hardcode_shlibpath_var, )" != no &&
>      test "$hardcode_minus_L" != no; then
>     # Linking always hardcodes the temporary library directory.
>     hardcode_action=relink
11508,11538c11295,11297
<   # Is the header compilable?
< { $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
< $as_echo_n "checking $ac_header usability... " >&6; }
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< #include <$ac_header>
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_header_compiler=yes
---
>     # We can link without hardcoding, and we can hardcode nonexisting dirs.
>     hardcode_action=immediate
>   fi
11540,11541c11299,11304
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   # We cannot hardcode anything, or else we can only hardcode existing
>   # directories.
>   hardcode_action=unsupported
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action" >&5
> $as_echo "$hardcode_action" >&6; }
11543c11306,11313
< 	ac_header_compiler=no
---
> if test "$hardcode_action" = relink ||
>    test "$inherit_rpath" = yes; then
>   # Fast installation is not supported
>   enable_fast_install=no
> elif test "$shlibpath_overrides_runpath" = yes ||
>      test "$enable_shared" = no; then
>   # Fast installation is not necessary
>   enable_fast_install=needless
11546,11548d11315
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< { $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
< $as_echo "$ac_header_compiler" >&6; }
11550,11578c11317,11324
< # Is the header present?
< { $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
< $as_echo_n "checking $ac_header presence... " >&6; }
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< #include <$ac_header>
< _ACEOF
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
<   ac_header_preproc=yes
---
> 
> 
> 
> 
>   if test "x$enable_dlopen" != xyes; then
>   enable_dlopen=unknown
>   enable_dlopen_self=unknown
>   enable_dlopen_self_static=unknown
11580,11584c11326,11327
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
<   ac_header_preproc=no
< fi
---
>   lt_cv_dlopen=no
>   lt_cv_dlopen_libs=
11586,11588c11329,11334
< rm -f conftest.err conftest.$ac_ext
< { $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
< $as_echo "$ac_header_preproc" >&6; }
---
>   case $host_os in
>   beos*)
>     lt_cv_dlopen="load_add_on"
>     lt_cv_dlopen_libs=
>     lt_cv_dlopen_self=yes
>     ;;
11590,11597c11336,11338
< # So?  What about this header?
< case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
<   yes:no: )
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
< $as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
< $as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
<     ac_header_preproc=yes
---
>   mingw* | pw32* | cegcc*)
>     lt_cv_dlopen="LoadLibrary"
>     lt_cv_dlopen_libs=
11599,11617c11340,11343
<   no:yes:* )
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
< $as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
< $as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
< $as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
< $as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
< $as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
< $as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
<     ( cat <<\_ASBOX
< ## ------------------------------------------- ##
< ## Report this to http://gcc.gnu.org/bugs.html ##
< ## ------------------------------------------- ##
< _ASBOX
<      ) | sed "s/^/$as_me: WARNING:     /" >&2
---
> 
>   cygwin*)
>     lt_cv_dlopen="dlopen"
>     lt_cv_dlopen_libs=
11619,11622c11345,11350
< esac
< { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
< $as_echo_n "checking for $ac_header... " >&6; }
< if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
---
> 
>   darwin*)
>   # if libdl is installed we need to link against it
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
> $as_echo_n "checking for dlopen in -ldl... " >&6; }
> if ${ac_cv_lib_dl_dlopen+:} false; then :
11625,11630c11353,11356
<   eval "$as_ac_Header=\$ac_header_preproc"
< fi
< ac_res=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
---
>   ac_check_lib_save_LIBS=$LIBS
> LIBS="-ldl  $LIBS"
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
11632,11637c11358,11371
< fi
< as_val=`eval 'as_val=${'$as_ac_Header'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
<   cat >>confdefs.h <<_ACEOF
< #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
---
> /* Override any GCC internal prototype to avoid an error.
>    Use char because int might match the return type of a GCC
>    builtin and then its argument prototype would still apply.  */
> #ifdef __cplusplus
> extern "C"
> #endif
> char dlopen ();
> int
> main ()
> {
> return dlopen ();
>   ;
>   return 0;
> }
11639c11373,11380
< 
---
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_lib_dl_dlopen=yes
> else
>   ac_cv_lib_dl_dlopen=no
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> LIBS=$ac_check_lib_save_LIBS
11640a11382,11386
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
> $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
> if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
>   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
> else
11642c11388,11390
< done
---
>     lt_cv_dlopen="dyld"
>     lt_cv_dlopen_libs=
>     lt_cv_dlopen_self=yes
11643a11392
> fi
11645,11650c11394,11403
< for ac_func in mmap
< do
< as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
< { $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
< $as_echo_n "checking for $ac_func... " >&6; }
< if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
---
>     ;;
> 
>   *)
>     ac_fn_c_check_func "$LINENO" "shl_load" "ac_cv_func_shl_load"
> if test "x$ac_cv_func_shl_load" = xyes; then :
>   lt_cv_dlopen="shl_load"
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shl_load in -ldld" >&5
> $as_echo_n "checking for shl_load in -ldld... " >&6; }
> if ${ac_cv_lib_dld_shl_load+:} false; then :
11653,11657c11406,11408
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   ac_check_lib_save_LIBS=$LIBS
> LIBS="-ldld  $LIBS"
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
11659,11666d11409
< /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define $ac_func innocuous_$ac_func
< 
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char $ac_func (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
11668,11671c11411,11415
< #ifdef __STDC__
< # include <limits.h>
< #else
< # include <assert.h>
---
> /* Override any GCC internal prototype to avoid an error.
>    Use char because int might match the return type of a GCC
>    builtin and then its argument prototype would still apply.  */
> #ifdef __cplusplus
> extern "C"
11673,11674c11417,11452
< 
< #undef $ac_func
---
> char shl_load ();
> int
> main ()
> {
> return shl_load ();
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_lib_dld_shl_load=yes
> else
>   ac_cv_lib_dld_shl_load=no
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> LIBS=$ac_check_lib_save_LIBS
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_shl_load" >&5
> $as_echo "$ac_cv_lib_dld_shl_load" >&6; }
> if test "x$ac_cv_lib_dld_shl_load" = xyes; then :
>   lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
> else
>   ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
> if test "x$ac_cv_func_dlopen" = xyes; then :
>   lt_cv_dlopen="dlopen"
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
> $as_echo_n "checking for dlopen in -ldl... " >&6; }
> if ${ac_cv_lib_dl_dlopen+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   ac_check_lib_save_LIBS=$LIBS
> LIBS="-ldl  $LIBS"
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
11682,11689c11460
< char $ac_func ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_$ac_func || defined __stub___$ac_func
< choke me
< #endif
< 
---
> char dlopen ();
11693c11464
< return $ac_func ();
---
> return dlopen ();
11698,11719c11469,11470
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   eval "$as_ac_var=yes"
---
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_lib_dl_dlopen=yes
11721,11724c11472
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	eval "$as_ac_var=no"
---
>   ac_cv_lib_dl_dlopen=no
11726,11728c11474
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
---
> rm -f core conftest.err conftest.$ac_objext \
11729a11476
> LIBS=$ac_check_lib_save_LIBS
11731,11740c11478,11491
< ac_res=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
< as_val=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
<   cat >>confdefs.h <<_ACEOF
< #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
< _ACEOF
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
> $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
> if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
>   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -lsvld" >&5
> $as_echo_n "checking for dlopen in -lsvld... " >&6; }
> if ${ac_cv_lib_svld_dlopen+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   ac_check_lib_save_LIBS=$LIBS
> LIBS="-lsvld  $LIBS"
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
11741a11493,11511
> /* Override any GCC internal prototype to avoid an error.
>    Use char because int might match the return type of a GCC
>    builtin and then its argument prototype would still apply.  */
> #ifdef __cplusplus
> extern "C"
> #endif
> char dlopen ();
> int
> main ()
> {
> return dlopen ();
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_lib_svld_dlopen=yes
> else
>   ac_cv_lib_svld_dlopen=no
11743,11750c11513,11515
< done
< 
< 
< if test "${ac_cv_header_sys_mman_h+set}" = set; then
<   { $as_echo "$as_me:$LINENO: checking for sys/mman.h" >&5
< $as_echo_n "checking for sys/mman.h... " >&6; }
< if test "${ac_cv_header_sys_mman_h+set}" = set; then
<   $as_echo_n "(cached) " >&6
---
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> LIBS=$ac_check_lib_save_LIBS
11752,11753c11517,11520
< { $as_echo "$as_me:$LINENO: result: $ac_cv_header_sys_mman_h" >&5
< $as_echo "$ac_cv_header_sys_mman_h" >&6; }
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_svld_dlopen" >&5
> $as_echo "$ac_cv_lib_svld_dlopen" >&6; }
> if test "x$ac_cv_lib_svld_dlopen" = xyes; then :
>   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
11755,11762c11522,11529
<   # Is the header compilable?
< { $as_echo "$as_me:$LINENO: checking sys/mman.h usability" >&5
< $as_echo_n "checking sys/mman.h usability... " >&6; }
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dld_link in -ldld" >&5
> $as_echo_n "checking for dld_link in -ldld... " >&6; }
> if ${ac_cv_lib_dld_dld_link+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   ac_check_lib_save_LIBS=$LIBS
> LIBS="-ldld  $LIBS"
> cat confdefs.h - <<_ACEOF >conftest.$ac_ext
11764,11765c11531,11545
< $ac_includes_default
< #include <sys/mman.h>
---
> 
> /* Override any GCC internal prototype to avoid an error.
>    Use char because int might match the return type of a GCC
>    builtin and then its argument prototype would still apply.  */
> #ifdef __cplusplus
> extern "C"
> #endif
> char dld_link ();
> int
> main ()
> {
> return dld_link ();
>   ;
>   return 0;
> }
11767,11785c11547,11548
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_header_compiler=yes
---
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_lib_dld_dld_link=yes
11787,11788c11550,11561
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ac_cv_lib_dld_dld_link=no
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> LIBS=$ac_check_lib_save_LIBS
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_dld_link" >&5
> $as_echo "$ac_cv_lib_dld_dld_link" >&6; }
> if test "x$ac_cv_lib_dld_dld_link" = xyes; then :
>   lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
> fi
> 
11790d11562
< 	ac_header_compiler=no
11793,11795d11564
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< { $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
< $as_echo "$ac_header_compiler" >&6; }
11797,11828c11566,11567
< # Is the header present?
< { $as_echo "$as_me:$LINENO: checking sys/mman.h presence" >&5
< $as_echo_n "checking sys/mman.h presence... " >&6; }
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< #include <sys/mman.h>
< _ACEOF
< if { (ac_try="$ac_cpp conftest.$ac_ext"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } >/dev/null && {
< 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        }; then
<   ac_header_preproc=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
> fi
> 
11830d11568
<   ac_header_preproc=no
11833,11835d11570
< rm -f conftest.err conftest.$ac_ext
< { $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
< $as_echo "$ac_header_preproc" >&6; }
11837,11872d11571
< # So?  What about this header?
< case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
<   yes:no: )
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: accepted by the compiler, rejected by the preprocessor!" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: proceeding with the compiler's result" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: proceeding with the compiler's result" >&2;}
<     ac_header_preproc=yes
<     ;;
<   no:yes:* )
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: present but cannot be compiled" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: present but cannot be compiled" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h:     check for missing prerequisite headers?" >&5
< $as_echo "$as_me: WARNING: sys/mman.h:     check for missing prerequisite headers?" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: see the Autoconf documentation" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: see the Autoconf documentation" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h:     section \"Present But Cannot Be Compiled\"" >&5
< $as_echo "$as_me: WARNING: sys/mman.h:     section \"Present But Cannot Be Compiled\"" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: proceeding with the preprocessor's result" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: proceeding with the preprocessor's result" >&2;}
<     { $as_echo "$as_me:$LINENO: WARNING: sys/mman.h: in the future, the compiler will take precedence" >&5
< $as_echo "$as_me: WARNING: sys/mman.h: in the future, the compiler will take precedence" >&2;}
<     ( cat <<\_ASBOX
< ## ------------------------------------------- ##
< ## Report this to http://gcc.gnu.org/bugs.html ##
< ## ------------------------------------------- ##
< _ASBOX
<      ) | sed "s/^/$as_me: WARNING:     /" >&2
<     ;;
< esac
< { $as_echo "$as_me:$LINENO: checking for sys/mman.h" >&5
< $as_echo_n "checking for sys/mman.h... " >&6; }
< if test "${ac_cv_header_sys_mman_h+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   ac_cv_header_sys_mman_h=$ac_header_preproc
11874,11875c11573
< { $as_echo "$as_me:$LINENO: result: $ac_cv_header_sys_mman_h" >&5
< $as_echo "$ac_cv_header_sys_mman_h" >&6; }
---
> 
11878,11879c11576,11581
< if test "x$ac_cv_header_sys_mman_h" = x""yes; then
<   libffi_header_sys_mman_h=yes
---
> 
>     ;;
>   esac
> 
>   if test "x$lt_cv_dlopen" != xno; then
>     enable_dlopen=yes
11881c11583
<   libffi_header_sys_mman_h=no
---
>     enable_dlopen=no
11883a11586,11595
>   case $lt_cv_dlopen in
>   dlopen)
>     save_CPPFLAGS="$CPPFLAGS"
>     test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"
> 
>     save_LDFLAGS="$LDFLAGS"
>     wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"
> 
>     save_LIBS="$LIBS"
>     LIBS="$lt_cv_dlopen_libs $LIBS"
11885,11887c11597,11599
< { $as_echo "$as_me:$LINENO: checking for mmap" >&5
< $as_echo_n "checking for mmap... " >&6; }
< if test "${ac_cv_func_mmap+set}" = set; then
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a program can dlopen itself" >&5
> $as_echo_n "checking whether a program can dlopen itself... " >&6; }
> if ${lt_cv_dlopen_self+:} false; then :
11890,11898c11602,11609
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< /* Define mmap to an innocuous variant, in case <limits.h> declares mmap.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define mmap innocuous_mmap
---
>   	  if test "$cross_compiling" = yes; then :
>   lt_cv_dlopen_self=cross
> else
>   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
>   lt_status=$lt_dlunknown
>   cat > conftest.$ac_ext <<_LT_EOF
> #line $LINENO "configure"
> #include "confdefs.h"
11900,11903c11611,11613
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char mmap (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
---
> #if HAVE_DLFCN_H
> #include <dlfcn.h>
> #endif
11905,11906c11615,11618
< #ifdef __STDC__
< # include <limits.h>
---
> #include <stdio.h>
> 
> #ifdef RTLD_GLOBAL
> #  define LT_DLGLOBAL		RTLD_GLOBAL
11908c11620,11624
< # include <assert.h>
---
> #  ifdef DL_GLOBAL
> #    define LT_DLGLOBAL		DL_GLOBAL
> #  else
> #    define LT_DLGLOBAL		0
> #  endif
11911,11917c11627,11645
< #undef mmap
< 
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
---
> /* We may have to define LT_DLLAZY_OR_NOW in the command line if we
>    find out it does not work in some platform. */
> #ifndef LT_DLLAZY_OR_NOW
> #  ifdef RTLD_LAZY
> #    define LT_DLLAZY_OR_NOW		RTLD_LAZY
> #  else
> #    ifdef DL_LAZY
> #      define LT_DLLAZY_OR_NOW		DL_LAZY
> #    else
> #      ifdef RTLD_NOW
> #        define LT_DLLAZY_OR_NOW	RTLD_NOW
> #      else
> #        ifdef DL_NOW
> #          define LT_DLLAZY_OR_NOW	DL_NOW
> #        else
> #          define LT_DLLAZY_OR_NOW	0
> #        endif
> #      endif
> #    endif
11919,11924d11646
< char mmap ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_mmap || defined __stub___mmap
< choke me
11927,11928c11649,11656
< int
< main ()
---
> /* When -fvisbility=hidden is used, assume the code has been annotated
>    correspondingly for the symbols needed.  */
> #if defined(__GNUC__) && (((__GNUC__ == 3) && (__GNUC_MINOR__ >= 3)) || (__GNUC__ > 3))
> int fnord () __attribute__((visibility("default")));
> #endif
> 
> int fnord () { return 42; }
> int main ()
11930,11932c11658,11669
< return mmap ();
<   ;
<   return 0;
---
>   void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
>   int status = $lt_dlunknown;
> 
>   if (self)
>     {
>       if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
>       else
>         {
> 	  if (dlsym( self,"_fnord"))  status = $lt_dlneed_uscore;
>           else puts (dlerror ());
> 	}
>       /* dlclose (self); */
11934,11956d11670
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_func_mmap=yes
11958,11959c11672
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>     puts (dlerror ());
11961c11674,11691
< 	ac_cv_func_mmap=no
---
>   return status;
> }
> _LT_EOF
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
>   (eval $ac_link) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
>     (./conftest; exit; ) >&5 2>/dev/null
>     lt_status=$?
>     case x$lt_status in
>       x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
>       x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
>       x$lt_dlunknown|x*) lt_cv_dlopen_self=no ;;
>     esac
>   else :
>     # compilation failed
>     lt_cv_dlopen_self=no
11963,11966d11692
< 
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
11968,11973c11694,11696
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_mmap" >&5
< $as_echo "$ac_cv_func_mmap" >&6; }
< if test "x$ac_cv_func_mmap" = x""yes; then
<   libffi_func_mmap=yes
< else
<   libffi_func_mmap=no
---
> rm -fr conftest*
> 
> 
11974a11698,11699
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self" >&5
> $as_echo "$lt_cv_dlopen_self" >&6; }
11976,11984c11701,11705
< if test "$libffi_header_sys_mman_h" != yes \
<  || test "$libffi_func_mmap" != yes; then
<    ac_cv_func_mmap_file=no
<    ac_cv_func_mmap_dev_zero=no
<    ac_cv_func_mmap_anon=no
< else
<    { $as_echo "$as_me:$LINENO: checking whether read-only mmap of a plain file works" >&5
< $as_echo_n "checking whether read-only mmap of a plain file works... " >&6; }
< if test "${ac_cv_func_mmap_file+set}" = set; then
---
>     if test "x$lt_cv_dlopen_self" = xyes; then
>       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
>       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a statically linked program can dlopen itself" >&5
> $as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
> if ${lt_cv_dlopen_self_static+:} false; then :
11987,12004c11708,11709
<   # Add a system to this blacklist if
<    # mmap(0, stat_size, PROT_READ, MAP_PRIVATE, fd, 0) doesn't return a
<    # memory area containing the same data that you'd get if you applied
<    # read() to the same fd.  The only system known to have a problem here
<    # is VMS, where text files have record structure.
<    case "$host_os" in
<      vms* | ultrix*)
< 	ac_cv_func_mmap_file=no ;;
<      *)
< 	ac_cv_func_mmap_file=yes;;
<    esac
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_mmap_file" >&5
< $as_echo "$ac_cv_func_mmap_file" >&6; }
<    { $as_echo "$as_me:$LINENO: checking whether mmap from /dev/zero works" >&5
< $as_echo_n "checking whether mmap from /dev/zero works... " >&6; }
< if test "${ac_cv_func_mmap_dev_zero+set}" = set; then
<   $as_echo_n "(cached) " >&6
---
>   	  if test "$cross_compiling" = yes; then :
>   lt_cv_dlopen_self_static=cross
12006,12020c11711,11793
<   # Add a system to this blacklist if it has mmap() but /dev/zero
<    # does not exist, or if mmapping /dev/zero does not give anonymous
<    # zeroed pages with both the following properties:
<    # 1. If you map N consecutive pages in with one call, and then
<    #    unmap any subset of those pages, the pages that were not
<    #    explicitly unmapped remain accessible.
<    # 2. If you map two adjacent blocks of memory and then unmap them
<    #    both at once, they must both go away.
<    # Systems known to be in this category are Windows (all variants),
<    # VMS, and Darwin.
<    case "$host_os" in
<      vms* | cygwin* | pe | mingw* | darwin* | ultrix* | hpux10* | hpux11.00)
< 	ac_cv_func_mmap_dev_zero=no ;;
<      *)
< 	ac_cv_func_mmap_dev_zero=yes;;
---
>   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
>   lt_status=$lt_dlunknown
>   cat > conftest.$ac_ext <<_LT_EOF
> #line $LINENO "configure"
> #include "confdefs.h"
> 
> #if HAVE_DLFCN_H
> #include <dlfcn.h>
> #endif
> 
> #include <stdio.h>
> 
> #ifdef RTLD_GLOBAL
> #  define LT_DLGLOBAL		RTLD_GLOBAL
> #else
> #  ifdef DL_GLOBAL
> #    define LT_DLGLOBAL		DL_GLOBAL
> #  else
> #    define LT_DLGLOBAL		0
> #  endif
> #endif
> 
> /* We may have to define LT_DLLAZY_OR_NOW in the command line if we
>    find out it does not work in some platform. */
> #ifndef LT_DLLAZY_OR_NOW
> #  ifdef RTLD_LAZY
> #    define LT_DLLAZY_OR_NOW		RTLD_LAZY
> #  else
> #    ifdef DL_LAZY
> #      define LT_DLLAZY_OR_NOW		DL_LAZY
> #    else
> #      ifdef RTLD_NOW
> #        define LT_DLLAZY_OR_NOW	RTLD_NOW
> #      else
> #        ifdef DL_NOW
> #          define LT_DLLAZY_OR_NOW	DL_NOW
> #        else
> #          define LT_DLLAZY_OR_NOW	0
> #        endif
> #      endif
> #    endif
> #  endif
> #endif
> 
> /* When -fvisbility=hidden is used, assume the code has been annotated
>    correspondingly for the symbols needed.  */
> #if defined(__GNUC__) && (((__GNUC__ == 3) && (__GNUC_MINOR__ >= 3)) || (__GNUC__ > 3))
> int fnord () __attribute__((visibility("default")));
> #endif
> 
> int fnord () { return 42; }
> int main ()
> {
>   void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
>   int status = $lt_dlunknown;
> 
>   if (self)
>     {
>       if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
>       else
>         {
> 	  if (dlsym( self,"_fnord"))  status = $lt_dlneed_uscore;
>           else puts (dlerror ());
> 	}
>       /* dlclose (self); */
>     }
>   else
>     puts (dlerror ());
> 
>   return status;
> }
> _LT_EOF
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
>   (eval $ac_link) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
>     (./conftest; exit; ) >&5 2>/dev/null
>     lt_status=$?
>     case x$lt_status in
>       x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
>       x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
>       x$lt_dlunknown|x*) lt_cv_dlopen_self_static=no ;;
12021a11795,11797
>   else :
>     # compilation failed
>     lt_cv_dlopen_self_static=no
12023,12024c11799,11800
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_mmap_dev_zero" >&5
< $as_echo "$ac_cv_func_mmap_dev_zero" >&6; }
---
> fi
> rm -fr conftest*
12026,12040d11801
<    # Unlike /dev/zero, the MAP_ANON(YMOUS) defines can be probed for.
<    { $as_echo "$as_me:$LINENO: checking for MAP_ANON(YMOUS)" >&5
< $as_echo_n "checking for MAP_ANON(YMOUS)... " >&6; }
< if test "${ac_cv_decl_map_anon+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< #include <sys/types.h>
< #include <sys/mman.h>
< #include <unistd.h>
12042,12044c11803,11806
< #ifndef MAP_ANONYMOUS
< #define MAP_ANONYMOUS MAP_ANON
< #endif
---
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self_static" >&5
> $as_echo "$lt_cv_dlopen_self_static" >&6; }
>     fi
12046,12058c11808,11811
< int
< main ()
< {
< int n = MAP_ANONYMOUS;
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
---
>     CPPFLAGS="$save_CPPFLAGS"
>     LDFLAGS="$save_LDFLAGS"
>     LIBS="$save_LIBS"
>     ;;
12060,12075d11812
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_cv_decl_map_anon=yes
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
12077,12078c11814,11817
< 	ac_cv_decl_map_anon=no
< fi
---
>   case $lt_cv_dlopen_self in
>   yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
>   *) enable_dlopen_self=unknown ;;
>   esac
12080c11819,11822
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
---
>   case $lt_cv_dlopen_self_static in
>   yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
>   *) enable_dlopen_self_static=unknown ;;
>   esac
12082,12083d11823
< { $as_echo "$as_me:$LINENO: result: $ac_cv_decl_map_anon" >&5
< $as_echo "$ac_cv_decl_map_anon" >&6; }
12085,12086c11825,11849
<    if test $ac_cv_decl_map_anon = no; then
<      ac_cv_func_mmap_anon=no
---
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> striplib=
> old_striplib=
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether stripping libraries is possible" >&5
> $as_echo_n "checking whether stripping libraries is possible... " >&6; }
> if test -n "$STRIP" && $STRIP -V 2>&1 | $GREP "GNU strip" >/dev/null; then
>   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
>   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
> $as_echo "yes" >&6; }
12088,12091c11851,11858
<      { $as_echo "$as_me:$LINENO: checking whether mmap with MAP_ANON(YMOUS) works" >&5
< $as_echo_n "checking whether mmap with MAP_ANON(YMOUS) works... " >&6; }
< if test "${ac_cv_func_mmap_anon+set}" = set; then
<   $as_echo_n "(cached) " >&6
---
> # FIXME - insert some real tests, host_os isn't really good enough
>   case $host_os in
>   darwin*)
>     if test -n "$STRIP" ; then
>       striplib="$STRIP -x"
>       old_striplib="$STRIP -S"
>       { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
> $as_echo "yes" >&6; }
12093,12100c11860,11863
<   # Add a system to this blacklist if it has mmap() and MAP_ANON or
<    # MAP_ANONYMOUS, but using mmap(..., MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)
<    # doesn't give anonymous zeroed pages with the same properties listed
<    # above for use of /dev/zero.
<    # Systems known to be in this category are Windows, VMS, and SCO Unix.
<    case "$host_os" in
<      vms* | cygwin* | pe | mingw* | sco* | udk* )
< 	ac_cv_func_mmap_anon=no ;;
---
>       { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
>     fi
>     ;;
12102c11865,11867
< 	ac_cv_func_mmap_anon=yes;;
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
>     ;;
12105,12108d11869
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_mmap_anon" >&5
< $as_echo "$ac_cv_func_mmap_anon" >&6; }
<    fi
< fi
12110d11870
< if test $ac_cv_func_mmap_file = yes; then
12112,12114d11871
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_MMAP_FILE 1
< _ACEOF
12116,12117d11872
< fi
< if test $ac_cv_func_mmap_dev_zero = yes; then
12119,12121d11873
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_MMAP_DEV_ZERO 1
< _ACEOF
12123,12124d11874
< fi
< if test $ac_cv_func_mmap_anon = yes; then
12126,12128d11875
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_MMAP_ANON 1
< _ACEOF
12130d11876
< fi
12133,12139d11878
<  if test -d $srcdir/testsuite; then
<   TESTSUBDIR_TRUE=
<   TESTSUBDIR_FALSE='#'
< else
<   TESTSUBDIR_TRUE='#'
<   TESTSUBDIR_FALSE=
< fi
12142,12148d11880
< TARGETDIR="unknown"
< case "$host" in
<   alpha*-*-*)
< 	TARGET=ALPHA; TARGETDIR=alpha;
< 	# Support 128-bit long double, changable via command-line switch.
< 	HAVE_LONG_DOUBLE='defined(__LONG_DOUBLE_128__)'
< 	;;
12150,12152c11882,11886
<   arm*-*-*)
< 	TARGET=ARM; TARGETDIR=arm
< 	;;
---
>   # Report which library types will actually be built
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if libtool supports shared libraries" >&5
> $as_echo_n "checking if libtool supports shared libraries... " >&6; }
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $can_build_shared" >&5
> $as_echo "$can_build_shared" >&6; }
12154,12156c11888,11890
<   amd64-*-freebsd* | amd64-*-openbsd*)
< 	TARGET=X86_64; TARGETDIR=x86
<   	;;
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build shared libraries" >&5
> $as_echo_n "checking whether to build shared libraries... " >&6; }
>   test "$can_build_shared" = "no" && enable_shared=no
12158,12159c11892,11900
<   amd64-*-freebsd*)
< 	TARGET=X86_64; TARGETDIR=x86
---
>   # On AIX, shared libraries and static libraries use the same namespace, and
>   # are all built from PIC.
>   case $host_os in
>   aix3*)
>     test "$enable_shared" = yes && enable_static=no
>     if test -n "$RANLIB"; then
>       archive_cmds="$archive_cmds~\$RANLIB \$lib"
>       postinstall_cmds='$RANLIB $lib'
>     fi
12162,12163c11903,11906
<   avr32*-*-*)
< 	TARGET=AVR32; TARGETDIR=avr32
---
>   aix[4-9]*)
>     if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
>       test "$enable_shared" = yes && enable_static=no
>     fi
12164a11908,11910
>   esac
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_shared" >&5
> $as_echo "$enable_shared" >&6; }
12166,12168c11912,11929
<   cris-*-*)
< 	TARGET=LIBFFI_CRIS; TARGETDIR=cris
< 	;;
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build static libraries" >&5
> $as_echo_n "checking whether to build static libraries... " >&6; }
>   # Make sure either enable_shared or enable_static is yes.
>   test "$enable_shared" = yes || enable_static=yes
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_static" >&5
> $as_echo "$enable_static" >&6; }
> 
> 
> 
> 
> fi
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> CC="$lt_save_CC"
12170,12172d11930
<   frv-*-*)
< 	TARGET=FRV; TARGETDIR=frv
< 	;;
12174,12182d11931
<   hppa*-*-linux* | parisc*-*-linux*)
< 	TARGET=PA_LINUX; TARGETDIR=pa
< 	;;
<   hppa*64-*-hpux*)
< 	TARGET=PA64_HPUX; TARGETDIR=pa
< 	;;
<   hppa*-*-hpux*)
< 	TARGET=PA_HPUX; TARGETDIR=pa
< 	;;
12184,12200d11932
<   i?86-*-freebsd* | i?86-*-openbsd*)
< 	TARGET=X86_FREEBSD; TARGETDIR=x86
< 	;;
<   i?86-win32* | i?86-*-cygwin* | i?86-*-mingw*)
< 	TARGET=X86_WIN32; TARGETDIR=x86
< 	# All mingw/cygwin/win32 builds require this for sharedlib
< 	AM_LTLDFLAGS="-no-undefined"
< 	;;
<   i?86-*-darwin*)
< 	TARGET=X86_DARWIN; TARGETDIR=x86
< 	;;
<   i?86-*-solaris2.1[0-9]*)
< 	TARGET=X86_64; TARGETDIR=x86
< 	;;
<   i?86-*-*)
< 	TARGET=X86; TARGETDIR=x86
< 	;;
12202,12204d11933
<   ia64*-*-*)
< 	TARGET=IA64; TARGETDIR=ia64
< 	;;
12206,12208d11934
<   m32r*-*-*)
< 	TARGET=M32R; TARGETDIR=m32r
< 	;;
12210,12212d11935
<   m68k-*-*)
< 	TARGET=M68K; TARGETDIR=m68k
< 	;;
12214,12221d11936
<   mips-sgi-irix5.* | mips-sgi-irix6.*)
< 	TARGET=MIPS; TARGETDIR=mips
< 	;;
<   mips*-*-linux*)
< 	# Support 128-bit long double for NewABI.
< 	HAVE_LONG_DOUBLE='defined(__mips64)'
< 	TARGET=MIPS; TARGETDIR=mips
< 	;;
12223,12240d11937
<   powerpc*-*-linux* | powerpc-*-sysv*)
< 	TARGET=POWERPC; TARGETDIR=powerpc
< 	;;
<   powerpc-*-beos*)
< 	TARGET=POWERPC; TARGETDIR=powerpc
< 	;;
<   powerpc-*-darwin*)
< 	TARGET=POWERPC_DARWIN; TARGETDIR=powerpc
< 	;;
<   powerpc-*-aix* | rs6000-*-aix*)
< 	TARGET=POWERPC_AIX; TARGETDIR=powerpc
< 	;;
<   powerpc-*-freebsd*)
< 	TARGET=POWERPC_FREEBSD; TARGETDIR=powerpc
< 	;;
<   powerpc*-*-rtems*)
< 	TARGET=POWERPC; TARGETDIR=powerpc
< 	;;
12242,12244d11938
<   s390-*-* | s390x-*-*)
< 	TARGET=S390; TARGETDIR=s390
< 	;;
12246,12251d11939
<   sh-*-* | sh[34]*-*-*)
< 	TARGET=SH; TARGETDIR=sh
< 	;;
<   sh64-*-* | sh5*-*-*)
< 	TARGET=SH64; TARGETDIR=sh64
< 	;;
12253,12255d11940
<   sparc*-*-*)
< 	TARGET=SPARC; TARGETDIR=sparc
< 	;;
12257,12259d11941
<   x86_64-*-darwin*)
< 	TARGET=X86_DARWIN; TARGETDIR=x86
< 	;;
12261,12263c11943
<   x86_64-*-cygwin* | x86_64-*-mingw*)
< 	TARGET=X86_WIN64; TARGETDIR=x86
< 	;;
---
>         ac_config_commands="$ac_config_commands libtool"
12265,12268d11944
<   x86_64-*-*)
< 	TARGET=X86_64; TARGETDIR=x86
< 	;;
< esac
12271a11948
> # Only expand once:
12273,12277d11949
< if test $TARGETDIR = unknown; then
<   { { $as_echo "$as_me:$LINENO: error: \"libffi has not been ported to $host.\"" >&5
< $as_echo "$as_me: error: \"libffi has not been ported to $host.\"" >&2;}
<    { (exit 1); exit 1; }; }
< fi
12279,12285d11950
<  if test x$TARGET = xMIPS; then
<   MIPS_TRUE=
<   MIPS_FALSE='#'
< else
<   MIPS_TRUE='#'
<   MIPS_FALSE=
< fi
12287,12293d11951
<  if test x$TARGET = xSPARC; then
<   SPARC_TRUE=
<   SPARC_FALSE='#'
< else
<   SPARC_TRUE='#'
<   SPARC_FALSE=
< fi
12295,12301d11952
<  if test x$TARGET = xX86; then
<   X86_TRUE=
<   X86_FALSE='#'
< else
<   X86_TRUE='#'
<   X86_FALSE=
< fi
12303,12305c11954,11957
<  if test x$TARGET = xX86_FREEBSD; then
<   X86_FREEBSD_TRUE=
<   X86_FREEBSD_FALSE='#'
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler vendor" >&5
> $as_echo_n "checking for C compiler vendor... " >&6; }
> if ${ax_cv_c_compiler_vendor+:} false; then :
>   $as_echo_n "(cached) " >&6
12307,12309c11959,11964
<   X86_FREEBSD_TRUE='#'
<   X86_FREEBSD_FALSE=
< fi
---
>   ax_cv_c_compiler_vendor=unknown
>   # note: don't check for gcc first since some other compilers define __GNUC__
>   for ventest in intel:__ICC,__ECC,__INTEL_COMPILER ibm:__xlc__,__xlC__,__IBMC__,__IBMCPP__ pathscale:__PATHCC__,__PATHSCALE__ clang:__clang__ gnu:__GNUC__ sun:__SUNPRO_C,__SUNPRO_CC hp:__HP_cc,__HP_aCC dec:__DECC,__DECCXX,__DECC_VER,__DECCXX_VER borland:__BORLANDC__,__TURBOC__ comeau:__COMO__ cray:_CRAYC kai:__KCC lcc:__LCC__ metrowerks:__MWERKS__ sgi:__sgi,sgi microsoft:_MSC_VER watcom:__WATCOMC__ portland:__PGI; do
>     vencpp="defined("`echo $ventest | cut -d: -f2 | sed 's/,/) || defined(/g'`")"
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
12311,12316c11966,11979
<  if test x$TARGET = xX86_WIN32; then
<   X86_WIN32_TRUE=
<   X86_WIN32_FALSE='#'
< else
<   X86_WIN32_TRUE='#'
<   X86_WIN32_FALSE=
---
> int
> main ()
> {
> 
> #if !($vencpp)
>       thisisanerror;
> #endif
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ax_cv_c_compiler_vendor=`echo $ventest | cut -d: -f1`; break
12317a11981,11982
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>   done
12319,12324d11983
<  if test x$TARGET = xX86_WIN64; then
<   X86_WIN64_TRUE=
<   X86_WIN64_FALSE='#'
< else
<   X86_WIN64_TRUE='#'
<   X86_WIN64_FALSE=
12325a11985,11986
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_c_compiler_vendor" >&5
> $as_echo "$ax_cv_c_compiler_vendor" >&6; }
12327,12329c11988,11995
<  if test x$TARGET = xX86_DARWIN; then
<   X86_DARWIN_TRUE=
<   X86_DARWIN_FALSE='#'
---
> 
> 
> 
> 
> 
> # Check whether --enable-portable-binary was given.
> if test "${enable_portable_binary+set}" = set; then :
>   enableval=$enable_portable_binary; acx_maxopt_portable=$withval
12331,12332c11997
<   X86_DARWIN_TRUE='#'
<   X86_DARWIN_FALSE=
---
>   acx_maxopt_portable=no
12335,12337c12000,12021
<  if test x$TARGET = xALPHA; then
<   ALPHA_TRUE=
<   ALPHA_FALSE='#'
---
> 
> # Try to determine "good" native compiler flags if none specified via CFLAGS
> if test "$ac_test_CFLAGS" != "set"; then
>   CFLAGS=""
>   case $ax_cv_c_compiler_vendor in
>     dec) CFLAGS="-newc -w0 -O5 -ansi_alias -ansi_args -fp_reorder -tune host"
> 	 if test "x$acx_maxopt_portable" = xno; then
>            CFLAGS="$CFLAGS -arch host"
>          fi;;
> 
>     sun) CFLAGS="-native -fast -xO5 -dalign"
> 	 if test "x$acx_maxopt_portable" = xyes; then
> 	   CFLAGS="$CFLAGS -xarch=generic"
>          fi;;
> 
>     hp)  CFLAGS="+Oall +Optrs_ansi +DSnative"
> 	 if test "x$acx_maxopt_portable" = xyes; then
> 	   CFLAGS="$CFLAGS +DAportable"
> 	 fi;;
> 
>     ibm) if test "x$acx_maxopt_portable" = xno; then
>            xlc_opt="-qarch=auto -qtune=auto"
12339,12340c12023
<   ALPHA_TRUE='#'
<   ALPHA_FALSE=
---
>            xlc_opt="-qtune=auto"
12341a12025,12030
>           { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts $xlc_opt" >&5
> $as_echo_n "checking whether C compiler accepts $xlc_opt... " >&6; }
> ax_save_FLAGS=$CFLAGS
>    CFLAGS="$xlc_opt"
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
12343,12345c12032,12041
<  if test x$TARGET = xIA64; then
<   IA64_TRUE=
<   IA64_FALSE='#'
---
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   eval `$as_echo "ax_cv_c_flags_$xlc_opt" | $as_tr_sh`=yes
12347,12348c12043,12063
<   IA64_TRUE='#'
<   IA64_FALSE=
---
>   eval `$as_echo "ax_cv_c_flags_$xlc_opt" | $as_tr_sh`=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>    CFLAGS=$ax_save_FLAGS
> eval ax_check_compiler_flags=$`$as_echo "ax_cv_c_flags_$xlc_opt" | $as_tr_sh`
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	CFLAGS="-O3 -qansialias -w $xlc_opt"
> else
> 	CFLAGS="-O3 -qansialias -w"
>                 echo "******************************************************"
>                 echo "*  You seem to have the IBM  C compiler.  It is      *"
>                 echo "*  recommended for best performance that you use:    *"
>                 echo "*                                                    *"
>                 echo "*    CFLAGS=-O3 -qarch=xxx -qtune=xxx -qansialias -w *"
>                 echo "*                      ^^^        ^^^                *"
>                 echo "*  where xxx is pwr2, pwr3, 604, or whatever kind of *"
>                 echo "*  CPU you have.  (Set the CFLAGS environment var.   *"
>                 echo "*  and re-run configure.)  For more info, man cc.    *"
>                 echo "******************************************************"
12351,12353c12066,12085
<  if test x$TARGET = xM32R; then
<   M32R_TRUE=
<   M32R_FALSE='#'
---
>          ;;
> 
>     intel) CFLAGS="-O3 -ansi_alias"
> 	if test "x$acx_maxopt_portable" = xno; then
> 	  icc_archflag=unknown
> 	  icc_flags=""
> 	  case $host_cpu in
> 	    i686*|x86_64*)
>               # icc accepts gcc assembly syntax, so these should work:
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for x86 cpuid 0 output" >&5
> $as_echo_n "checking for x86 cpuid 0 output... " >&6; }
> if ${ax_cv_gcc_x86_cpuid_0+:} false; then :
>   $as_echo_n "(cached) " >&6
12355,12357c12087,12095
<   M32R_TRUE='#'
<   M32R_FALSE=
< fi
---
>   if test "$cross_compiling" = yes; then :
>   ax_cv_gcc_x86_cpuid_0=unknown
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <stdio.h>
> int
> main ()
> {
12359,12361c12097,12112
<  if test x$TARGET = xM68K; then
<   M68K_TRUE=
<   M68K_FALSE='#'
---
>      int op = 0, eax, ebx, ecx, edx;
>      FILE *f;
>       __asm__("cpuid"
>         : "=a" (eax), "=b" (ebx), "=c" (ecx), "=d" (edx)
>         : "a" (op));
>      f = fopen("conftest_cpuid", "w"); if (!f) return 1;
>      fprintf(f, "%x:%x:%x:%x\n", eax, ebx, ecx, edx);
>      fclose(f);
>      return 0;
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_run "$LINENO"; then :
>   ax_cv_gcc_x86_cpuid_0=`cat conftest_cpuid`; rm -f conftest_cpuid
12363,12364c12114,12117
<   M68K_TRUE='#'
<   M68K_FALSE=
---
>   ax_cv_gcc_x86_cpuid_0=unknown; rm -f conftest_cpuid
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
12367,12372d12119
<  if test x$TARGET = xPOWERPC; then
<   POWERPC_TRUE=
<   POWERPC_FALSE='#'
< else
<   POWERPC_TRUE='#'
<   POWERPC_FALSE=
12373a12121,12127
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_x86_cpuid_0" >&5
> $as_echo "$ax_cv_gcc_x86_cpuid_0" >&6; }
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
12375,12377c12129,12140
<  if test x$TARGET = xPOWERPC_AIX; then
<   POWERPC_AIX_TRUE=
<   POWERPC_AIX_FALSE='#'
---
> 
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for x86 cpuid 1 output" >&5
> $as_echo_n "checking for x86 cpuid 1 output... " >&6; }
> if ${ax_cv_gcc_x86_cpuid_1+:} false; then :
>   $as_echo_n "(cached) " >&6
12379,12381c12142,12150
<   POWERPC_AIX_TRUE='#'
<   POWERPC_AIX_FALSE=
< fi
---
>   if test "$cross_compiling" = yes; then :
>   ax_cv_gcc_x86_cpuid_1=unknown
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <stdio.h>
> int
> main ()
> {
12383,12385c12152,12167
<  if test x$TARGET = xPOWERPC_DARWIN; then
<   POWERPC_DARWIN_TRUE=
<   POWERPC_DARWIN_FALSE='#'
---
>      int op = 1, eax, ebx, ecx, edx;
>      FILE *f;
>       __asm__("cpuid"
>         : "=a" (eax), "=b" (ebx), "=c" (ecx), "=d" (edx)
>         : "a" (op));
>      f = fopen("conftest_cpuid", "w"); if (!f) return 1;
>      fprintf(f, "%x:%x:%x:%x\n", eax, ebx, ecx, edx);
>      fclose(f);
>      return 0;
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_run "$LINENO"; then :
>   ax_cv_gcc_x86_cpuid_1=`cat conftest_cpuid`; rm -f conftest_cpuid
12387,12388c12169,12172
<   POWERPC_DARWIN_TRUE='#'
<   POWERPC_DARWIN_FALSE=
---
>   ax_cv_gcc_x86_cpuid_1=unknown; rm -f conftest_cpuid
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
12391,12396d12174
<  if test x$TARGET = xPOWERPC_FREEBSD; then
<   POWERPC_FREEBSD_TRUE=
<   POWERPC_FREEBSD_FALSE='#'
< else
<   POWERPC_FREEBSD_TRUE='#'
<   POWERPC_FREEBSD_FALSE=
12397a12176,12182
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_x86_cpuid_1" >&5
> $as_echo "$ax_cv_gcc_x86_cpuid_1" >&6; }
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
12399,12401c12184,12212
<  if test x$TARGET = xARM; then
<   ARM_TRUE=
<   ARM_FALSE='#'
---
> 
> 	      case $ax_cv_gcc_x86_cpuid_0 in # see AX_GCC_ARCHFLAG
>                 *:756e6547:*:*) # Intel
>                   case $ax_cv_gcc_x86_cpuid_1 in
>                     *6a?:*[234]:*:*|*6[789b]?:*:*:*) icc_flags="-xK";;
>                     *f3[347]:*:*:*|*f41347:*:*:*) icc_flags="-xP -xN -xW -xK";;
>                     *f??:*:*:*) icc_flags="-xN -xW -xK";;
>                   esac ;;
>               esac ;;
>           esac
>           if test "x$icc_flags" != x; then
>             for flag in $icc_flags; do
>                { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts $flag" >&5
> $as_echo_n "checking whether C compiler accepts $flag... " >&6; }
> ax_save_FLAGS=$CFLAGS
>    CFLAGS="$flag"
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> 
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   eval `$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`=yes
12403,12404c12214
<   ARM_TRUE='#'
<   ARM_FALSE=
---
>   eval `$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`=no
12406,12409c12216,12222
< 
<  if test x$TARGET = xAVR32; then
<   AVR32_TRUE=
<   AVR32_FALSE='#'
---
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>    CFLAGS=$ax_save_FLAGS
> eval ax_check_compiler_flags=$`$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	icc_archflag=$flag; break
12411,12412c12224
<   AVR32_TRUE='#'
<   AVR32_FALSE=
---
> 	:
12415,12420c12227,12234
<  if test x$TARGET = xLIBFFI_CRIS; then
<   LIBFFI_CRIS_TRUE=
<   LIBFFI_CRIS_FALSE='#'
< else
<   LIBFFI_CRIS_TRUE='#'
<   LIBFFI_CRIS_FALSE=
---
>             done
>           fi
>           { $as_echo "$as_me:${as_lineno-$LINENO}: checking for icc architecture flag" >&5
> $as_echo_n "checking for icc architecture flag... " >&6; }
> 	  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $icc_archflag" >&5
> $as_echo "$icc_archflag" >&6; }
>           if test "x$icc_archflag" != xunknown; then
>             CFLAGS="$CFLAGS $icc_archflag"
12421a12236,12237
>         fi
> 	;;
12423,12425c12239,12247
<  if test x$TARGET = xFRV; then
<   FRV_TRUE=
<   FRV_FALSE='#'
---
>     gnu)
>      # default optimization flags for gcc on all systems
>      CFLAGS="-O3 -fomit-frame-pointer"
> 
>      #  -fstrict-aliasing for gcc-2.95+
>       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts -fstrict-aliasing" >&5
> $as_echo_n "checking whether C compiler accepts -fstrict-aliasing... " >&6; }
> if ${ax_cv_c_flags__fstrict_aliasing+:} false; then :
>   $as_echo_n "(cached) " >&6
12427,12429d12248
<   FRV_TRUE='#'
<   FRV_FALSE=
< fi
12431,12433c12250,12264
<  if test x$TARGET = xS390; then
<   S390_TRUE=
<   S390_FALSE='#'
---
>       ax_save_FLAGS=$CFLAGS
>       CFLAGS="-fstrict-aliasing"
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> 
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ax_cv_c_flags__fstrict_aliasing=yes
12435,12436c12266,12269
<   S390_TRUE='#'
<   S390_FALSE=
---
>   ax_cv_c_flags__fstrict_aliasing=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>       CFLAGS=$ax_save_FLAGS
12439,12441c12272,12276
<  if test x$TARGET = xX86_64; then
<   X86_64_TRUE=
<   X86_64_FALSE='#'
---
> eval ax_check_compiler_flags=$ax_cv_c_flags__fstrict_aliasing
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	CFLAGS="$CFLAGS -fstrict-aliasing"
12443,12444c12278
<   X86_64_TRUE='#'
<   X86_64_FALSE=
---
> 	:
12447,12449c12281,12285
<  if test x$TARGET = xSH; then
<   SH_TRUE=
<   SH_FALSE='#'
---
> 
>       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts -ffast-math" >&5
> $as_echo_n "checking whether C compiler accepts -ffast-math... " >&6; }
> if ${ax_cv_c_flags__ffast_math+:} false; then :
>   $as_echo_n "(cached) " >&6
12451,12453d12286
<   SH_TRUE='#'
<   SH_FALSE=
< fi
12455,12457c12288,12302
<  if test x$TARGET = xSH64; then
<   SH64_TRUE=
<   SH64_FALSE='#'
---
>       ax_save_FLAGS=$CFLAGS
>       CFLAGS="-ffast-math"
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> 
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   ax_cv_c_flags__ffast_math=yes
12459,12460c12304,12307
<   SH64_TRUE='#'
<   SH64_FALSE=
---
>   ax_cv_c_flags__ffast_math=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>       CFLAGS=$ax_save_FLAGS
12463,12465c12310,12314
<  if test x$TARGET = xPA_LINUX; then
<   PA_LINUX_TRUE=
<   PA_LINUX_FALSE='#'
---
> eval ax_check_compiler_flags=$ax_cv_c_flags__ffast_math
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	CFLAGS="$CFLAGS -ffast-math"
12467,12468c12316
<   PA_LINUX_TRUE='#'
<   PA_LINUX_FALSE=
---
> 	:
12471,12473c12319,12326
<  if test x$TARGET = xPA_HPUX; then
<   PA_HPUX_TRUE=
<   PA_HPUX_FALSE='#'
---
> 
> 
> 
> 
> 
> # Check whether --with-gcc-arch was given.
> if test "${with_gcc_arch+set}" = set; then :
>   withval=$with_gcc_arch; ax_gcc_arch=$withval
12475,12476c12328
<   PA_HPUX_TRUE='#'
<   PA_HPUX_FALSE=
---
>   ax_gcc_arch=yes
12479,12481c12331,12337
<  if test x$TARGET = xPA64_HPUX; then
<   PA64_HPUX_TRUE=
<   PA64_HPUX_FALSE='#'
---
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gcc architecture flag" >&5
> $as_echo_n "checking for gcc architecture flag... " >&6; }
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
> $as_echo "" >&6; }
> if ${ax_cv_gcc_archflag+:} false; then :
>   $as_echo_n "(cached) " >&6
12483,12485d12338
<   PA64_HPUX_TRUE='#'
<   PA64_HPUX_FALSE=
< fi
12486a12340
> ax_cv_gcc_archflag="unknown"
12488,12490c12342,12358
< { $as_echo "$as_me:$LINENO: checking for ANSI C header files" >&5
< $as_echo_n "checking for ANSI C header files... " >&6; }
< if test "${ac_cv_header_stdc+set}" = set; then
---
> if test "$GCC" = yes; then
> 
> if test "x$ax_gcc_arch" = xyes; then
> ax_gcc_arch=""
> if test "$cross_compiling" = no; then
> case $host_cpu in
>   i[3456]86*|x86_64*) # use cpuid codes, in part from x86info-1.7 by D. Jones
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for x86 cpuid 0 output" >&5
> $as_echo_n "checking for x86 cpuid 0 output... " >&6; }
> if ${ax_cv_gcc_x86_cpuid_0+:} false; then :
12493,12497c12361,12364
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   if test "$cross_compiling" = yes; then :
>   ax_cv_gcc_x86_cpuid_0=unknown
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
12499,12503c12366
< #include <stdlib.h>
< #include <stdarg.h>
< #include <string.h>
< #include <float.h>
< 
---
> #include <stdio.h>
12507a12371,12380
>      int op = 0, eax, ebx, ecx, edx;
>      FILE *f;
>       __asm__("cpuid"
>         : "=a" (eax), "=b" (ebx), "=c" (ecx), "=d" (edx)
>         : "a" (op));
>      f = fopen("conftest_cpuid", "w"); if (!f) return 1;
>      fprintf(f, "%x:%x:%x:%x\n", eax, ebx, ecx, edx);
>      fclose(f);
>      return 0;
> 
12512,12530c12385,12386
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_cv_header_stdc=yes
---
> if ac_fn_c_try_run "$LINENO"; then :
>   ax_cv_gcc_x86_cpuid_0=`cat conftest_cpuid`; rm -f conftest_cpuid
12532,12533c12388,12392
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ax_cv_gcc_x86_cpuid_0=unknown; rm -f conftest_cpuid
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
> fi
12535d12393
< 	ac_cv_header_stdc=no
12536a12395,12401
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_x86_cpuid_0" >&5
> $as_echo "$ax_cv_gcc_x86_cpuid_0" >&6; }
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
12538d12402
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
12540,12546c12404,12419
< if test $ac_cv_header_stdc = yes; then
<   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for x86 cpuid 1 output" >&5
> $as_echo_n "checking for x86 cpuid 1 output... " >&6; }
> if ${ax_cv_gcc_x86_cpuid_1+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test "$cross_compiling" = yes; then :
>   ax_cv_gcc_x86_cpuid_1=unknown
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
12548c12421,12424
< #include <string.h>
---
> #include <stdio.h>
> int
> main ()
> {
12549a12426,12438
>      int op = 1, eax, ebx, ecx, edx;
>      FILE *f;
>       __asm__("cpuid"
>         : "=a" (eax), "=b" (ebx), "=c" (ecx), "=d" (edx)
>         : "a" (op));
>      f = fopen("conftest_cpuid", "w"); if (!f) return 1;
>      fprintf(f, "%x:%x:%x:%x\n", eax, ebx, ecx, edx);
>      fclose(f);
>      return 0;
> 
>   ;
>   return 0;
> }
12551,12553c12440,12441
< if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
<   $EGREP "memchr" >/dev/null 2>&1; then
<   :
---
> if ac_fn_c_try_run "$LINENO"; then :
>   ax_cv_gcc_x86_cpuid_1=`cat conftest_cpuid`; rm -f conftest_cpuid
12555c12443,12446
<   ac_cv_header_stdc=no
---
>   ax_cv_gcc_x86_cpuid_1=unknown; rm -f conftest_cpuid
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
12557d12447
< rm -f conftest*
12559a12450,12456
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_x86_cpuid_1" >&5
> $as_echo "$ax_cv_gcc_x86_cpuid_1" >&6; }
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
12561,12567c12458,12502
< if test $ac_cv_header_stdc = yes; then
<   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 
>      case $ax_cv_gcc_x86_cpuid_0 in
>        *:756e6547:*:*) # Intel
>           case $ax_cv_gcc_x86_cpuid_1 in
> 	    *5[48]?:*:*:*) ax_gcc_arch="pentium-mmx pentium" ;;
> 	    *5??:*:*:*) ax_gcc_arch=pentium ;;
> 	    *6[3456]?:*:*:*) ax_gcc_arch="pentium2 pentiumpro" ;;
> 	    *6a?:*[01]:*:*) ax_gcc_arch="pentium2 pentiumpro" ;;
> 	    *6a?:*[234]:*:*) ax_gcc_arch="pentium3 pentiumpro" ;;
> 	    *6[9d]?:*:*:*) ax_gcc_arch="pentium-m pentium3 pentiumpro" ;;
> 	    *6[78b]?:*:*:*) ax_gcc_arch="pentium3 pentiumpro" ;;
> 	    *6??:*:*:*) ax_gcc_arch=pentiumpro ;;
>             *f3[347]:*:*:*|*f41347:*:*:*)
> 		case $host_cpu in
>                   x86_64*) ax_gcc_arch="nocona pentium4 pentiumpro" ;;
>                   *) ax_gcc_arch="prescott pentium4 pentiumpro" ;;
>                 esac ;;
>             *f??:*:*:*) ax_gcc_arch="pentium4 pentiumpro";;
>           esac ;;
>        *:68747541:*:*) # AMD
>           case $ax_cv_gcc_x86_cpuid_1 in
> 	    *5[67]?:*:*:*) ax_gcc_arch=k6 ;;
> 	    *5[8d]?:*:*:*) ax_gcc_arch="k6-2 k6" ;;
> 	    *5[9]?:*:*:*) ax_gcc_arch="k6-3 k6" ;;
> 	    *60?:*:*:*) ax_gcc_arch=k7 ;;
> 	    *6[12]?:*:*:*) ax_gcc_arch="athlon k7" ;;
> 	    *6[34]?:*:*:*) ax_gcc_arch="athlon-tbird k7" ;;
> 	    *67?:*:*:*) ax_gcc_arch="athlon-4 athlon k7" ;;
> 	    *6[68a]?:*:*:*)
> 
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for x86 cpuid 0x80000006 output" >&5
> $as_echo_n "checking for x86 cpuid 0x80000006 output... " >&6; }
> if ${ax_cv_gcc_x86_cpuid_0x80000006+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if test "$cross_compiling" = yes; then :
>   ax_cv_gcc_x86_cpuid_0x80000006=unknown
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
12569c12504,12517
< #include <stdlib.h>
---
> #include <stdio.h>
> int
> main ()
> {
> 
>      int op = 0x80000006, eax, ebx, ecx, edx;
>      FILE *f;
>       __asm__("cpuid"
>         : "=a" (eax), "=b" (ebx), "=c" (ecx), "=d" (edx)
>         : "a" (op));
>      f = fopen("conftest_cpuid", "w"); if (!f) return 1;
>      fprintf(f, "%x:%x:%x:%x\n", eax, ebx, ecx, edx);
>      fclose(f);
>      return 0;
12570a12519,12521
>   ;
>   return 0;
> }
12572,12574c12523,12524
< if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
<   $EGREP "free" >/dev/null 2>&1; then
<   :
---
> if ac_fn_c_try_run "$LINENO"; then :
>   ax_cv_gcc_x86_cpuid_0x80000006=`cat conftest_cpuid`; rm -f conftest_cpuid
12576c12526
<   ac_cv_header_stdc=no
---
>   ax_cv_gcc_x86_cpuid_0x80000006=unknown; rm -f conftest_cpuid
12578c12528,12539
< rm -f conftest*
---
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
> fi
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_x86_cpuid_0x80000006" >&5
> $as_echo "$ax_cv_gcc_x86_cpuid_0x80000006" >&6; }
> ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
12579a12541,12564
>  # L2 cache size
> 	       case $ax_cv_gcc_x86_cpuid_0x80000006 in
>                  *:*:*[1-9a-f]??????:*) # (L2 = ecx >> 16) >= 256
> 			ax_gcc_arch="athlon-xp athlon-4 athlon k7" ;;
>                  *) ax_gcc_arch="athlon-4 athlon k7" ;;
> 	       esac ;;
> 	    *f[4cef8b]?:*:*:*) ax_gcc_arch="athlon64 k8" ;;
> 	    *f5?:*:*:*) ax_gcc_arch="opteron k8" ;;
> 	    *f7?:*:*:*) ax_gcc_arch="athlon-fx opteron k8" ;;
> 	    *f??:*:*:*) ax_gcc_arch="k8" ;;
>           esac ;;
> 	*:746e6543:*:*) # IDT
> 	   case $ax_cv_gcc_x86_cpuid_1 in
> 	     *54?:*:*:*) ax_gcc_arch=winchip-c6 ;;
> 	     *58?:*:*:*) ax_gcc_arch=winchip2 ;;
> 	     *6[78]?:*:*:*) ax_gcc_arch=c3 ;;
> 	     *69?:*:*:*) ax_gcc_arch="c3-2 c3" ;;
> 	   esac ;;
>      esac
>      if test x"$ax_gcc_arch" = x; then # fallback
> 	case $host_cpu in
> 	  i586*) ax_gcc_arch=pentium ;;
> 	  i686*) ax_gcc_arch=pentiumpro ;;
>         esac
12580a12566
>      ;;
12582,12585c12568,12574
< if test $ac_cv_header_stdc = yes; then
<   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
<   if test "$cross_compiling" = yes; then
<   :
---
>   sparc*)
>      # Extract the first word of "prtdiag", so it can be a program name with args.
> set dummy prtdiag; ac_word=$2
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
> $as_echo_n "checking for $ac_word... " >&6; }
> if ${ac_cv_path_PRTDIAG+:} false; then :
>   $as_echo_n "(cached) " >&6
12587,12591c12576,12668
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   case $PRTDIAG in
>   [\\/]* | ?:[\\/]*)
>   ac_cv_path_PRTDIAG="$PRTDIAG" # Let the user override the test with a path.
>   ;;
>   *)
>   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
> as_dummy="$PATH:/usr/platform/`uname -i`/sbin/:/usr/platform/`uname -m`/sbin/"
> for as_dir in $as_dummy
> do
>   IFS=$as_save_IFS
>   test -z "$as_dir" && as_dir=.
>     for ac_exec_ext in '' $ac_executable_extensions; do
>   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
>     ac_cv_path_PRTDIAG="$as_dir/$ac_word$ac_exec_ext"
>     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
>     break 2
>   fi
> done
>   done
> IFS=$as_save_IFS
> 
>   test -z "$ac_cv_path_PRTDIAG" && ac_cv_path_PRTDIAG="prtdiag"
>   ;;
> esac
> fi
> PRTDIAG=$ac_cv_path_PRTDIAG
> if test -n "$PRTDIAG"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PRTDIAG" >&5
> $as_echo "$PRTDIAG" >&6; }
> else
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
> $as_echo "no" >&6; }
> fi
> 
> 
>      cputype=`(((grep cpu /proc/cpuinfo | cut -d: -f2) ; ($PRTDIAG -v |grep -i sparc) ; grep -i cpu /var/run/dmesg.boot ) | head -n 1) 2> /dev/null`
>      cputype=`echo "$cputype" | tr -d ' -' |tr $as_cr_LETTERS $as_cr_letters`
>      case $cputype in
>          *ultrasparciv*) ax_gcc_arch="ultrasparc4 ultrasparc3 ultrasparc v9" ;;
>          *ultrasparciii*) ax_gcc_arch="ultrasparc3 ultrasparc v9" ;;
>          *ultrasparc*) ax_gcc_arch="ultrasparc v9" ;;
>          *supersparc*|*tms390z5[05]*) ax_gcc_arch="supersparc v8" ;;
>          *hypersparc*|*rt62[056]*) ax_gcc_arch="hypersparc v8" ;;
>          *cypress*) ax_gcc_arch=cypress ;;
>      esac ;;
> 
>   alphaev5) ax_gcc_arch=ev5 ;;
>   alphaev56) ax_gcc_arch=ev56 ;;
>   alphapca56) ax_gcc_arch="pca56 ev56" ;;
>   alphapca57) ax_gcc_arch="pca57 pca56 ev56" ;;
>   alphaev6) ax_gcc_arch=ev6 ;;
>   alphaev67) ax_gcc_arch=ev67 ;;
>   alphaev68) ax_gcc_arch="ev68 ev67" ;;
>   alphaev69) ax_gcc_arch="ev69 ev68 ev67" ;;
>   alphaev7) ax_gcc_arch="ev7 ev69 ev68 ev67" ;;
>   alphaev79) ax_gcc_arch="ev79 ev7 ev69 ev68 ev67" ;;
> 
>   powerpc*)
>      cputype=`((grep cpu /proc/cpuinfo | head -n 1 | cut -d: -f2 | cut -d, -f1 | sed 's/ //g') ; /usr/bin/machine ; /bin/machine; grep CPU /var/run/dmesg.boot | head -n 1 | cut -d" " -f2) 2> /dev/null`
>      cputype=`echo $cputype | sed -e 's/ppc//g;s/ *//g'`
>      case $cputype in
>        *750*) ax_gcc_arch="750 G3" ;;
>        *740[0-9]*) ax_gcc_arch="$cputype 7400 G4" ;;
>        *74[4-5][0-9]*) ax_gcc_arch="$cputype 7450 G4" ;;
>        *74[0-9][0-9]*) ax_gcc_arch="$cputype G4" ;;
>        *970*) ax_gcc_arch="970 G5 power4";;
>        *POWER4*|*power4*|*gq*) ax_gcc_arch="power4 970";;
>        *POWER5*|*power5*|*gr*|*gs*) ax_gcc_arch="power5 power4 970";;
>        603ev|8240) ax_gcc_arch="$cputype 603e 603";;
>        *) ax_gcc_arch=$cputype ;;
>      esac
>      ax_gcc_arch="$ax_gcc_arch powerpc"
>      ;;
> esac
> fi # not cross-compiling
> fi # guess arch
> 
> if test "x$ax_gcc_arch" != x -a "x$ax_gcc_arch" != xno; then
> for arch in $ax_gcc_arch; do
>   if test "x$acx_maxopt_portable" = xyes; then # if we require portable code
>     flags="-mtune=$arch"
>     # -mcpu=$arch and m$arch generate nonportable code on every arch except
>     # x86.  And some other arches (e.g. Alpha) don't accept -mtune.  Grrr.
>     case $host_cpu in i*86|x86_64*) flags="$flags -mcpu=$arch -m$arch";; esac
>   else
>     flags="-march=$arch -mcpu=$arch -m$arch"
>   fi
>   for flag in $flags; do
>      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts $flag" >&5
> $as_echo_n "checking whether C compiler accepts $flag... " >&6; }
> ax_save_FLAGS=$CFLAGS
>    CFLAGS="$flag"
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
12593,12604d12669
< #include <ctype.h>
< #include <stdlib.h>
< #if ((' ' & 0x0FF) == 0x020)
< # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
< # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
< #else
< # define ISLOWER(c) \
< 		   (('a' <= (c) && (c) <= 'i') \
< 		     || ('j' <= (c) && (c) <= 'r') \
< 		     || ('s' <= (c) && (c) <= 'z'))
< # define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
< #endif
12606d12670
< #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
12610,12614c12674,12675
<   int i;
<   for (i = 0; i < 256; i++)
<     if (XOR (islower (i), ISLOWER (i))
< 	|| toupper (i) != TOUPPER (i))
<       return 2;
---
> 
>   ;
12618,12640c12679,12680
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<   :
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   eval `$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`=yes
12642,12647c12682,12692
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< ( exit $ac_status )
< ac_cv_header_stdc=no
---
>   eval `$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>    CFLAGS=$ax_save_FLAGS
> eval ax_check_compiler_flags=$`$as_echo "ax_cv_c_flags_$flag" | $as_tr_sh`
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	ax_cv_gcc_archflag=$flag; break
> else
> 	:
12649,12650c12694,12697
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
---
> 
>   done
>   test "x$ax_cv_gcc_archflag" = xunknown || break
> done
12652a12700
> fi # $GCC=yes
12654a12703,12711
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gcc architecture flag" >&5
> $as_echo_n "checking for gcc architecture flag... " >&6; }
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_gcc_archflag" >&5
> $as_echo "$ax_cv_gcc_archflag" >&6; }
> if test "x$ax_cv_gcc_archflag" = xunknown; then
>   :
> else
>   CFLAGS="$CFLAGS $ax_cv_gcc_archflag"
12656,12658d12712
< { $as_echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
< $as_echo "$ac_cv_header_stdc" >&6; }
< if test $ac_cv_header_stdc = yes; then
12660,12662c12714,12715
< cat >>confdefs.h <<\_ACEOF
< #define STDC_HEADERS 1
< _ACEOF
---
>      ;;
>   esac
12663a12717,12725
>   if test -z "$CFLAGS"; then
> 	echo ""
> 	echo "********************************************************"
>         echo "* WARNING: Don't know the best CFLAGS for this system  *"
>         echo "* Use ./configure CFLAGS=... to specify your own flags *"
> 	echo "* (otherwise, a default of CFLAGS=-O3 will be used)    *"
> 	echo "********************************************************"
> 	echo ""
>         CFLAGS="-O3"
12665a12728,12737
>    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether C compiler accepts $CFLAGS" >&5
> $as_echo_n "checking whether C compiler accepts $CFLAGS... " >&6; }
> ax_save_FLAGS=$CFLAGS
>    CFLAGS="$CFLAGS"
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> 
> int
> main ()
> {
12667,12676c12739,12741
< for ac_func in memcpy
< do
< as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
< { $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
< $as_echo_n "checking for $ac_func... " >&6; }
< if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
---
>   ;
>   return 0;
> }
12678,12683c12743,12755
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define $ac_func innocuous_$ac_func
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   eval `$as_echo "ax_cv_c_flags_$CFLAGS" | $as_tr_sh`=yes
> else
>   eval `$as_echo "ax_cv_c_flags_$CFLAGS" | $as_tr_sh`=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
>    CFLAGS=$ax_save_FLAGS
> eval ax_check_compiler_flags=$`$as_echo "ax_cv_c_flags_$CFLAGS" | $as_tr_sh`
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_check_compiler_flags" >&5
> $as_echo "$ax_check_compiler_flags" >&6; }
> if test "x$ax_check_compiler_flags" = xyes; then
> 	:
> else
12685,12688c12757,12764
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char $ac_func (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
---
> 	echo ""
>         echo "********************************************************"
>         echo "* WARNING: The guessed CFLAGS don't seem to work with  *"
>         echo "* your compiler.                                       *"
>         echo "* Use ./configure CFLAGS=... to specify your own flags *"
>         echo "********************************************************"
>         echo ""
>         CFLAGS=""
12690,12694c12766
< #ifdef __STDC__
< # include <limits.h>
< #else
< # include <assert.h>
< #endif
---
> fi
12696d12767
< #undef $ac_func
12698,12710c12769,12787
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char $ac_func ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_$ac_func || defined __stub___$ac_func
< choke me
< #endif
---
> fi
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking CFLAGS for maximum warnings" >&5
> $as_echo_n "checking CFLAGS for maximum warnings... " >&6; }
> if ${ac_cv_cflags_warn_all+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   ac_cv_cflags_warn_all="no, unknown"
>  ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
>  ac_save_CFLAGS="$CFLAGS"
> for ac_arg in "-pedantic  % -Wall"          "-xstrconst % -v"             "-std1      % -verbose -w0 -warnprotos"    "-qlanglvl=ansi % -qsrcmsg -qinfo=all:noppt:noppc:noobs:nocnd"    "-ansi -ansiE % -fullwarn"    "+ESlit     % +w1"            "-Xc        % -pvctl,fullmsg"    "-h conform % -h msglevel 2"    #
> do CFLAGS="$ac_save_CFLAGS "`echo $ac_arg | sed -e 's,%%.*,,' -e 's,%,,'`
>    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
12715c12792
< return $ac_func ();
---
> 
12720,12728c12797,12820
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_cv_cflags_warn_all=`echo $ac_arg | sed -e 's,.*% *,,'` ; break
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> done
>  CFLAGS="$ac_save_CFLAGS"
>  ac_ext=c
> ac_cpp='$CPP $CPPFLAGS'
> ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
> ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
> ac_compiler_gnu=$ac_cv_c_compiler_gnu
> 
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cflags_warn_all" >&5
> $as_echo "$ac_cv_cflags_warn_all" >&6; }
> case ".$ac_cv_cflags_warn_all" in
>      .ok|.ok,*)  ;;
>    .|.no|.no,*)
>  ;;
>    *)
>    if echo " $CFLAGS " | grep " $ac_cv_cflags_warn_all " 2>&1 >/dev/null
>    then { { $as_echo "$as_me:${as_lineno-$LINENO}: : CFLAGS does contain \$ac_cv_cflags_warn_all"; } >&5
>   (: CFLAGS does contain $ac_cv_cflags_warn_all) 2>&5
12730,12741c12822,12843
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   eval "$as_ac_var=yes"
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
>    else { { $as_echo "$as_me:${as_lineno-$LINENO}: : CFLAGS=\"\$CFLAGS \$ac_cv_cflags_warn_all\""; } >&5
>   (: CFLAGS="$CFLAGS $ac_cv_cflags_warn_all") 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }
>                       CFLAGS="$CFLAGS $ac_cv_cflags_warn_all"
>    fi
>  ;;
> esac
> 
> if test "x$GCC" = "xyes"; then
>   CFLAGS="$CFLAGS -fexceptions"
> fi
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable maintainer-specific portions of Makefiles" >&5
> $as_echo_n "checking whether to enable maintainer-specific portions of Makefiles... " >&6; }
>     # Check whether --enable-maintainer-mode was given.
> if test "${enable_maintainer_mode+set}" = set; then :
>   enableval=$enable_maintainer_mode; USE_MAINTAINER_MODE=$enableval
12743,12744c12845,12846
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   USE_MAINTAINER_MODE=no
> fi
12746c12848,12855
< 	eval "$as_ac_var=no"
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_MAINTAINER_MODE" >&5
> $as_echo "$USE_MAINTAINER_MODE" >&6; }
>    if test $USE_MAINTAINER_MODE = yes; then
>   MAINTAINER_MODE_TRUE=
>   MAINTAINER_MODE_FALSE='#'
> else
>   MAINTAINER_MODE_TRUE='#'
>   MAINTAINER_MODE_FALSE=
12749,12751c12858,12869
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
---
>   MAINT=$MAINTAINER_MODE_TRUE
> 
> 
> 
> for ac_header in sys/mman.h
> do :
>   ac_fn_c_check_header_mongrel "$LINENO" "sys/mman.h" "ac_cv_header_sys_mman_h" "$ac_includes_default"
> if test "x$ac_cv_header_sys_mman_h" = xyes; then :
>   cat >>confdefs.h <<_ACEOF
> #define HAVE_SYS_MMAN_H 1
> _ACEOF
> 
12753,12759c12871,12877
< ac_res=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
< as_val=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
---
> 
> done
> 
> for ac_func in mmap
> do :
>   ac_fn_c_check_func "$LINENO" "mmap" "ac_cv_func_mmap"
> if test "x$ac_cv_func_mmap" = xyes; then :
12761c12879
< #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
---
> #define HAVE_MMAP 1
12767,12771c12885,12909
< # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
< # for constant arguments.  Useless!
< { $as_echo "$as_me:$LINENO: checking for working alloca.h" >&5
< $as_echo_n "checking for working alloca.h... " >&6; }
< if test "${ac_cv_working_alloca_h+set}" = set; then
---
> 
> ac_fn_c_check_header_mongrel "$LINENO" "sys/mman.h" "ac_cv_header_sys_mman_h" "$ac_includes_default"
> if test "x$ac_cv_header_sys_mman_h" = xyes; then :
>   libffi_header_sys_mman_h=yes
> else
>   libffi_header_sys_mman_h=no
> fi
> 
> 
> ac_fn_c_check_func "$LINENO" "mmap" "ac_cv_func_mmap"
> if test "x$ac_cv_func_mmap" = xyes; then :
>   libffi_func_mmap=yes
> else
>   libffi_func_mmap=no
> fi
> 
> if test "$libffi_header_sys_mman_h" != yes \
>  || test "$libffi_func_mmap" != yes; then
>    ac_cv_func_mmap_file=no
>    ac_cv_func_mmap_dev_zero=no
>    ac_cv_func_mmap_anon=no
> else
>    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether read-only mmap of a plain file works" >&5
> $as_echo_n "checking whether read-only mmap of a plain file works... " >&6; }
> if ${ac_cv_func_mmap_file+:} false; then :
12774,12778c12912,12957
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   # Add a system to this blacklist if
>    # mmap(0, stat_size, PROT_READ, MAP_PRIVATE, fd, 0) doesn't return a
>    # memory area containing the same data that you'd get if you applied
>    # read() to the same fd.  The only system known to have a problem here
>    # is VMS, where text files have record structure.
>    case "$host_os" in
>      vms* | ultrix*)
> 	ac_cv_func_mmap_file=no ;;
>      *)
> 	ac_cv_func_mmap_file=yes;;
>    esac
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_file" >&5
> $as_echo "$ac_cv_func_mmap_file" >&6; }
>    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether mmap from /dev/zero works" >&5
> $as_echo_n "checking whether mmap from /dev/zero works... " >&6; }
> if ${ac_cv_func_mmap_dev_zero+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   # Add a system to this blacklist if it has mmap() but /dev/zero
>    # does not exist, or if mmapping /dev/zero does not give anonymous
>    # zeroed pages with both the following properties:
>    # 1. If you map N consecutive pages in with one call, and then
>    #    unmap any subset of those pages, the pages that were not
>    #    explicitly unmapped remain accessible.
>    # 2. If you map two adjacent blocks of memory and then unmap them
>    #    both at once, they must both go away.
>    # Systems known to be in this category are Windows (all variants),
>    # VMS, and Darwin.
>    case "$host_os" in
>      vms* | cygwin* | pe | mingw* | darwin* | ultrix* | hpux10* | hpux11.00)
> 	ac_cv_func_mmap_dev_zero=no ;;
>      *)
> 	ac_cv_func_mmap_dev_zero=yes;;
>    esac
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_dev_zero" >&5
> $as_echo "$ac_cv_func_mmap_dev_zero" >&6; }
> 
>    # Unlike /dev/zero, the MAP_ANON(YMOUS) defines can be probed for.
>    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for MAP_ANON(YMOUS)" >&5
> $as_echo_n "checking for MAP_ANON(YMOUS)... " >&6; }
> if ${ac_cv_decl_map_anon+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
12780c12959,12966
< #include <alloca.h>
---
> #include <sys/types.h>
> #include <sys/mman.h>
> #include <unistd.h>
> 
> #ifndef MAP_ANONYMOUS
> #define MAP_ANONYMOUS MAP_ANON
> #endif
> 
12784,12785c12970
< char *p = (char *) alloca (2 * sizeof (int));
< 			  if (p) return 0;
---
> int n = MAP_ANONYMOUS;
12790,12811c12975,12976
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_working_alloca_h=yes
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_cv_decl_map_anon=yes
12813,12814c12978,12983
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ac_cv_decl_map_anon=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_decl_map_anon" >&5
> $as_echo "$ac_cv_decl_map_anon" >&6; }
12816c12985,13007
< 	ac_cv_working_alloca_h=no
---
>    if test $ac_cv_decl_map_anon = no; then
>      ac_cv_func_mmap_anon=no
>    else
>      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether mmap with MAP_ANON(YMOUS) works" >&5
> $as_echo_n "checking whether mmap with MAP_ANON(YMOUS) works... " >&6; }
> if ${ac_cv_func_mmap_anon+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   # Add a system to this blacklist if it has mmap() and MAP_ANON or
>    # MAP_ANONYMOUS, but using mmap(..., MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)
>    # doesn't give anonymous zeroed pages with the same properties listed
>    # above for use of /dev/zero.
>    # Systems known to be in this category are Windows, VMS, and SCO Unix.
>    case "$host_os" in
>      vms* | cygwin* | pe | mingw* | sco* | udk* )
> 	ac_cv_func_mmap_anon=no ;;
>      *)
> 	ac_cv_func_mmap_anon=yes;;
>    esac
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_anon" >&5
> $as_echo "$ac_cv_func_mmap_anon" >&6; }
>    fi
12819,12821c13010,13013
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
---
> if test $ac_cv_func_mmap_file = yes; then
> 
> $as_echo "#define HAVE_MMAP_FILE 1" >>confdefs.h
> 
12823,12825c13015,13020
< { $as_echo "$as_me:$LINENO: result: $ac_cv_working_alloca_h" >&5
< $as_echo "$ac_cv_working_alloca_h" >&6; }
< if test $ac_cv_working_alloca_h = yes; then
---
> if test $ac_cv_func_mmap_dev_zero = yes; then
> 
> $as_echo "#define HAVE_MMAP_DEV_ZERO 1" >>confdefs.h
> 
> fi
> if test $ac_cv_func_mmap_anon = yes; then
12827,12829c13022
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_ALLOCA_H 1
< _ACEOF
---
> $as_echo "#define HAVE_MMAP_ANON 1" >>confdefs.h
12833,12863d13025
< { $as_echo "$as_me:$LINENO: checking for alloca" >&5
< $as_echo_n "checking for alloca... " >&6; }
< if test "${ac_cv_func_alloca_works+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< #ifdef __GNUC__
< # define alloca __builtin_alloca
< #else
< # ifdef _MSC_VER
< #  include <malloc.h>
< #  define alloca _alloca
< # else
< #  ifdef HAVE_ALLOCA_H
< #   include <alloca.h>
< #  else
< #   ifdef _AIX
<  #pragma alloca
< #   else
< #    ifndef alloca /* predefined by HP cc +Olibcalls */
< char *alloca ();
< #    endif
< #   endif
< #  endif
< # endif
< #endif
12865,12895c13027,13029
< int
< main ()
< {
< char *p = (char *) alloca (1);
< 				    if (p) return 0;
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   ac_cv_func_alloca_works=yes
---
>  if test -d $srcdir/testsuite; then
>   TESTSUBDIR_TRUE=
>   TESTSUBDIR_FALSE='#'
12897,12900c13031,13032
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_cv_func_alloca_works=no
---
>   TESTSUBDIR_TRUE='#'
>   TESTSUBDIR_FALSE=
12903,12908d13034
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_func_alloca_works" >&5
< $as_echo "$ac_cv_func_alloca_works" >&6; }
12910c13036,13042
< if test $ac_cv_func_alloca_works = yes; then
---
> TARGETDIR="unknown"
> case "$host" in
>   alpha*-*-*)
> 	TARGET=ALPHA; TARGETDIR=alpha;
> 	# Support 128-bit long double, changeable via command-line switch.
> 	HAVE_LONG_DOUBLE='defined(__LONG_DOUBLE_128__)'
> 	;;
12912,12914c13044,13046
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_ALLOCA 1
< _ACEOF
---
>   arm*-*-*)
> 	TARGET=ARM; TARGETDIR=arm
> 	;;
12916,12920c13048,13050
< else
<   # The SVR3 libPW and SVR4 libucb both contain incompatible functions
< # that cause trouble.  Some versions do not even contain alloca or
< # contain a buggy version.  If you still want to use their alloca,
< # use ar to extract alloca.o from them instead of compiling alloca.c.
---
>   amd64-*-freebsd* | amd64-*-openbsd*)
> 	TARGET=X86_64; TARGETDIR=x86
>   	;;
12922c13052,13054
< ALLOCA=\${LIBOBJDIR}alloca.$ac_objext
---
>   amd64-*-freebsd*)
> 	TARGET=X86_64; TARGETDIR=x86
> 	;;
12924,12926c13056,13058
< cat >>confdefs.h <<\_ACEOF
< #define C_ALLOCA 1
< _ACEOF
---
>   avr32*-*-*)
> 	TARGET=AVR32; TARGETDIR=avr32
> 	;;
12927a13060,13062
>   cris-*-*)
> 	TARGET=LIBFFI_CRIS; TARGETDIR=cris
> 	;;
12929,12944c13064,13066
< { $as_echo "$as_me:$LINENO: checking whether \`alloca.c' needs Cray hooks" >&5
< $as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
< if test "${ac_cv_os_cray+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< #if defined CRAY && ! defined CRAY2
< webecray
< #else
< wenotbecray
< #endif
---
>   frv-*-*)
> 	TARGET=FRV; TARGETDIR=frv
> 	;;
12946,12949c13068,13088
< _ACEOF
< if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
<   $EGREP "webecray" >/dev/null 2>&1; then
<   ac_cv_os_cray=yes
---
>   hppa*-*-linux* | parisc*-*-linux*)
> 	TARGET=PA_LINUX; TARGETDIR=pa
> 	;;
>   hppa*64-*-hpux*)
> 	TARGET=PA64_HPUX; TARGETDIR=pa
> 	;;
>   hppa*-*-hpux*)
> 	TARGET=PA_HPUX; TARGETDIR=pa
> 	;;
> 
>   i?86-*-freebsd* | i?86-*-openbsd*)
> 	TARGET=X86_FREEBSD; TARGETDIR=x86
> 	;;
>   i?86-win32* | i?86-*-cygwin* | i?86-*-mingw* | i?86-*-os2* | i?86-*-interix*)
> 	TARGET=X86_WIN32; TARGETDIR=x86
> 	# All mingw/cygwin/win32 builds require -no-undefined for sharedlib.
> 	# We must also check with_cross_host to decide if this is a native
> 	# or cross-build and select where to install dlls appropriately.
> 	if test -n "$with_cross_host" &&
> 	   test x"$with_cross_host" != x"no"; then
> 	  AM_LTLDFLAGS='-no-undefined -bindir "$(toolexeclibdir)"';
12951c13090
<   ac_cv_os_cray=no
---
> 	  AM_LTLDFLAGS='-no-undefined -bindir "$(bindir)"';
12953c13092,13101
< rm -f conftest*
---
> 	;;
>   i?86-*-darwin*)
> 	TARGET=X86_DARWIN; TARGETDIR=x86
> 	;;
>   i?86-*-solaris2.1[0-9]*)
> 	TARGET=X86_64; TARGETDIR=x86
> 	;;
>   i?86-*-*)
> 	TARGET=X86; TARGETDIR=x86
> 	;;
12955,12974c13103,13105
< fi
< { $as_echo "$as_me:$LINENO: result: $ac_cv_os_cray" >&5
< $as_echo "$ac_cv_os_cray" >&6; }
< if test $ac_cv_os_cray = yes; then
<   for ac_func in _getb67 GETB67 getb67; do
<     as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
< { $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
< $as_echo_n "checking for $ac_func... " >&6; }
< if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
<   $as_echo_n "(cached) " >&6
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
<    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
< #define $ac_func innocuous_$ac_func
---
>   ia64*-*-*)
> 	TARGET=IA64; TARGETDIR=ia64
> 	;;
12976,12979c13107,13109
< /* System header to define __stub macros and hopefully few prototypes,
<     which can conflict with char $ac_func (); below.
<     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
<     <limits.h> exists even on freestanding compilers.  */
---
>   m32r*-*-*)
> 	TARGET=M32R; TARGETDIR=m32r
> 	;;
12981,12985c13111,13113
< #ifdef __STDC__
< # include <limits.h>
< #else
< # include <assert.h>
< #endif
---
>   m68k-*-*)
> 	TARGET=M68K; TARGETDIR=m68k
> 	;;
12987c13115,13122
< #undef $ac_func
---
>   mips-sgi-irix5.* | mips-sgi-irix6.* | mips*-*-rtems*)
> 	TARGET=MIPS; TARGETDIR=mips
> 	;;
>   mips*-*-linux*)
> 	# Support 128-bit long double for NewABI.
> 	HAVE_LONG_DOUBLE='defined(__mips64)'
> 	TARGET=MIPS; TARGETDIR=mips
> 	;;
12989,13001c13124,13144
< /* Override any GCC internal prototype to avoid an error.
<    Use char because int might match the return type of a GCC
<    builtin and then its argument prototype would still apply.  */
< #ifdef __cplusplus
< extern "C"
< #endif
< char $ac_func ();
< /* The GNU C library defines this for functions which it implements
<     to always fail with ENOSYS.  Some functions are actually named
<     something starting with __ and the normal name is an alias.  */
< #if defined __stub_$ac_func || defined __stub___$ac_func
< choke me
< #endif
---
>   powerpc*-*-linux* | powerpc-*-sysv*)
> 	TARGET=POWERPC; TARGETDIR=powerpc
> 	;;
>   powerpc-*-beos*)
> 	TARGET=POWERPC; TARGETDIR=powerpc
> 	;;
>   powerpc-*-darwin* | powerpc64-*-darwin*)
> 	TARGET=POWERPC_DARWIN; TARGETDIR=powerpc
> 	;;
>   powerpc-*-aix* | rs6000-*-aix*)
> 	TARGET=POWERPC_AIX; TARGETDIR=powerpc
> 	;;
>   powerpc-*-freebsd*)
> 	TARGET=POWERPC_FREEBSD; TARGETDIR=powerpc
> 	;;
>   powerpc64-*-freebsd*)
> 	TARGET=POWERPC; TARGETDIR=powerpc
> 	;;
>   powerpc*-*-rtems*)
> 	TARGET=POWERPC; TARGETDIR=powerpc
> 	;;
13003,13015c13146,13171
< int
< main ()
< {
< return $ac_func ();
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
---
>   s390-*-* | s390x-*-*)
> 	TARGET=S390; TARGETDIR=s390
> 	;;
> 
>   sh-*-* | sh[34]*-*-*)
> 	TARGET=SH; TARGETDIR=sh
> 	;;
>   sh64-*-* | sh5*-*-*)
> 	TARGET=SH64; TARGETDIR=sh64
> 	;;
> 
>   sparc*-*-*)
> 	TARGET=SPARC; TARGETDIR=sparc
> 	;;
> 
>   x86_64-*-darwin*)
> 	TARGET=X86_DARWIN; TARGETDIR=x86
> 	;;
> 
>   x86_64-*-cygwin* | x86_64-*-mingw*)
> 	TARGET=X86_WIN64; TARGETDIR=x86
> 	;;
> 
>   x86_64-*-*)
> 	TARGET=X86_64; TARGETDIR=x86
> 	;;
13017,13035d13172
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
<   eval "$as_ac_var=yes"
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
13037,13038d13173
< 	eval "$as_ac_var=no"
< fi
13040,13050d13174
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< fi
< ac_res=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
< 	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
< $as_echo "$ac_res" >&6; }
< as_val=`eval 'as_val=${'$as_ac_var'}
< 		 $as_echo "$as_val"'`
<    if test "x$as_val" = x""yes; then
13052,13054d13175
< cat >>confdefs.h <<_ACEOF
< #define CRAY_STACKSEG_END $ac_func
< _ACEOF
13056c13177,13178
<     break
---
> if test $TARGETDIR = unknown; then
>   as_fn_error $? "\"libffi has not been ported to $host.\"" "$LINENO" 5
13059c13181,13186
<   done
---
>  if test x$TARGET = xMIPS; then
>   MIPS_TRUE=
>   MIPS_FALSE='#'
> else
>   MIPS_TRUE='#'
>   MIPS_FALSE=
13062,13086c13189,13191
< { $as_echo "$as_me:$LINENO: checking stack direction for C alloca" >&5
< $as_echo_n "checking stack direction for C alloca... " >&6; }
< if test "${ac_cv_c_stack_direction+set}" = set; then
<   $as_echo_n "(cached) " >&6
< else
<   if test "$cross_compiling" = yes; then
<   ac_cv_c_stack_direction=0
< else
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< find_stack_direction ()
< {
<   static char *addr = 0;
<   auto char dummy;
<   if (addr == 0)
<     {
<       addr = &dummy;
<       return find_stack_direction ();
<     }
---
>  if test x$TARGET = xSPARC; then
>   SPARC_TRUE=
>   SPARC_FALSE='#'
13088,13089c13193,13195
<     return (&dummy > addr) ? 1 : -1;
< }
---
>   SPARC_TRUE='#'
>   SPARC_FALSE=
> fi
13091,13119c13197,13199
< int
< main ()
< {
<   return find_stack_direction () < 0;
< }
< _ACEOF
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<   ac_cv_c_stack_direction=1
---
>  if test x$TARGET = xX86; then
>   X86_TRUE=
>   X86_FALSE='#'
13121,13129c13201,13202
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< ( exit $ac_status )
< ac_cv_c_stack_direction=-1
< fi
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
---
>   X86_TRUE='#'
>   X86_FALSE=
13132c13205,13210
< 
---
>  if test x$TARGET = xX86_FREEBSD; then
>   X86_FREEBSD_TRUE=
>   X86_FREEBSD_FALSE='#'
> else
>   X86_FREEBSD_TRUE='#'
>   X86_FREEBSD_FALSE=
13134,13135d13211
< { $as_echo "$as_me:$LINENO: result: $ac_cv_c_stack_direction" >&5
< $as_echo "$ac_cv_c_stack_direction" >&6; }
13137,13139c13213,13219
< cat >>confdefs.h <<_ACEOF
< #define STACK_DIRECTION $ac_cv_c_stack_direction
< _ACEOF
---
>  if test x$TARGET = xX86_WIN32; then
>   X86_WIN32_TRUE=
>   X86_WIN32_FALSE='#'
> else
>   X86_WIN32_TRUE='#'
>   X86_WIN32_FALSE=
> fi
13140a13221,13227
>  if test x$TARGET = xX86_WIN64; then
>   X86_WIN64_TRUE=
>   X86_WIN64_FALSE='#'
> else
>   X86_WIN64_TRUE='#'
>   X86_WIN64_FALSE=
> fi
13141a13229,13234
>  if test x$TARGET = xX86_DARWIN; then
>   X86_DARWIN_TRUE=
>   X86_DARWIN_FALSE='#'
> else
>   X86_DARWIN_TRUE='#'
>   X86_DARWIN_FALSE=
13143a13237,13243
>  if test x$TARGET = xALPHA; then
>   ALPHA_TRUE=
>   ALPHA_FALSE='#'
> else
>   ALPHA_TRUE='#'
>   ALPHA_FALSE=
> fi
13145,13152c13245,13247
< # The cast to long int works around a bug in the HP C Compiler
< # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
< # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
< # This bug is HP SR number 8606223364.
< { $as_echo "$as_me:$LINENO: checking size of double" >&5
< $as_echo_n "checking size of double... " >&6; }
< if test "${ac_cv_sizeof_double+set}" = set; then
<   $as_echo_n "(cached) " >&6
---
>  if test x$TARGET = xIA64; then
>   IA64_TRUE=
>   IA64_FALSE='#'
13154,13167c13249,13251
<   if test "$cross_compiling" = yes; then
<   # Depending upon the size, compute the lo and hi bounds.
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (double))) >= 0)];
< test_array [0] = 0
---
>   IA64_TRUE='#'
>   IA64_FALSE=
> fi
13169,13204c13253,13259
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_lo=0 ac_mid=0
<   while :; do
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (double))) <= $ac_mid)];
< test_array [0] = 0
---
>  if test x$TARGET = xM32R; then
>   M32R_TRUE=
>   M32R_FALSE='#'
> else
>   M32R_TRUE='#'
>   M32R_FALSE=
> fi
13206,13228c13261,13263
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=$ac_mid; break
---
>  if test x$TARGET = xM68K; then
>   M68K_TRUE=
>   M68K_FALSE='#'
13230,13231c13265,13267
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   M68K_TRUE='#'
>   M68K_FALSE=
> fi
13233,13236c13269,13274
< 	ac_lo=`expr $ac_mid + 1`
< 			if test $ac_lo -le $ac_mid; then
< 			  ac_lo= ac_hi=
< 			  break
---
>  if test x$TARGET = xMOXIE; then
>   MOXIE_TRUE=
>   MOXIE_FALSE='#'
> else
>   MOXIE_TRUE='#'
>   MOXIE_FALSE=
13238c13276,13282
< 			ac_mid=`expr 2 '*' $ac_mid + 1`
---
> 
>  if test x$TARGET = xPOWERPC; then
>   POWERPC_TRUE=
>   POWERPC_FALSE='#'
> else
>   POWERPC_TRUE='#'
>   POWERPC_FALSE=
13241,13242c13285,13287
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
<   done
---
>  if test x$TARGET = xPOWERPC_AIX; then
>   POWERPC_AIX_TRUE=
>   POWERPC_AIX_FALSE='#'
13244,13245c13289,13291
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   POWERPC_AIX_TRUE='#'
>   POWERPC_AIX_FALSE=
> fi
13247,13258c13293,13299
< 	cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (double))) < 0)];
< test_array [0] = 0
---
>  if test x$TARGET = xPOWERPC_DARWIN; then
>   POWERPC_DARWIN_TRUE=
>   POWERPC_DARWIN_FALSE='#'
> else
>   POWERPC_DARWIN_TRUE='#'
>   POWERPC_DARWIN_FALSE=
> fi
13260,13295c13301,13307
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=-1 ac_mid=-1
<   while :; do
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (double))) >= $ac_mid)];
< test_array [0] = 0
---
>  if test x$TARGET = xPOWERPC_FREEBSD; then
>   POWERPC_FREEBSD_TRUE=
>   POWERPC_FREEBSD_FALSE='#'
> else
>   POWERPC_FREEBSD_TRUE='#'
>   POWERPC_FREEBSD_FALSE=
> fi
13297,13319c13309,13319
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_lo=$ac_mid; break
---
>  if test x$TARGET = xARM; then
>   ARM_TRUE=
>   ARM_FALSE='#'
> else
>   ARM_TRUE='#'
>   ARM_FALSE=
> fi
> 
>  if test x$TARGET = xAVR32; then
>   AVR32_TRUE=
>   AVR32_FALSE='#'
13321,13322c13321,13323
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   AVR32_TRUE='#'
>   AVR32_FALSE=
> fi
13324,13327c13325,13330
< 	ac_hi=`expr '(' $ac_mid ')' - 1`
< 			if test $ac_mid -le $ac_hi; then
< 			  ac_lo= ac_hi=
< 			  break
---
>  if test x$TARGET = xLIBFFI_CRIS; then
>   LIBFFI_CRIS_TRUE=
>   LIBFFI_CRIS_FALSE='#'
> else
>   LIBFFI_CRIS_TRUE='#'
>   LIBFFI_CRIS_FALSE=
13329c13332,13338
< 			ac_mid=`expr 2 '*' $ac_mid`
---
> 
>  if test x$TARGET = xFRV; then
>   FRV_TRUE=
>   FRV_FALSE='#'
> else
>   FRV_TRUE='#'
>   FRV_FALSE=
13332,13333c13341,13343
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
<   done
---
>  if test x$TARGET = xS390; then
>   S390_TRUE=
>   S390_FALSE='#'
13335,13336c13345,13347
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   S390_TRUE='#'
>   S390_FALSE=
> fi
13338c13349,13354
< 	ac_lo= ac_hi=
---
>  if test x$TARGET = xX86_64; then
>   X86_64_TRUE=
>   X86_64_FALSE='#'
> else
>   X86_64_TRUE='#'
>   X86_64_FALSE=
13341c13357,13362
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
---
>  if test x$TARGET = xSH; then
>   SH_TRUE=
>   SH_FALSE='#'
> else
>   SH_TRUE='#'
>   SH_FALSE=
13344,13359c13365,13371
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< # Binary search between lo and hi bounds.
< while test "x$ac_lo" != "x$ac_hi"; do
<   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (double))) <= $ac_mid)];
< test_array [0] = 0
---
>  if test x$TARGET = xSH64; then
>   SH64_TRUE=
>   SH64_FALSE='#'
> else
>   SH64_TRUE='#'
>   SH64_FALSE=
> fi
13361,13383c13373,13375
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=$ac_mid
---
>  if test x$TARGET = xPA_LINUX; then
>   PA_LINUX_TRUE=
>   PA_LINUX_FALSE='#'
13385,13386c13377,13379
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   PA_LINUX_TRUE='#'
>   PA_LINUX_FALSE=
> fi
13388c13381,13386
< 	ac_lo=`expr '(' $ac_mid ')' + 1`
---
>  if test x$TARGET = xPA_HPUX; then
>   PA_HPUX_TRUE=
>   PA_HPUX_FALSE='#'
> else
>   PA_HPUX_TRUE='#'
>   PA_HPUX_FALSE=
13391,13402c13389,13391
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< done
< case $ac_lo in
< ?*) ac_cv_sizeof_double=$ac_lo;;
< '') if test "$ac_cv_type_double" = yes; then
<      { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
< $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
< { { $as_echo "$as_me:$LINENO: error: cannot compute sizeof (double)
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute sizeof (double)
< See \`config.log' for more details." >&2;}
<    { (exit 77); exit 77; }; }; }
---
>  if test x$TARGET = xPA64_HPUX; then
>   PA64_HPUX_TRUE=
>   PA64_HPUX_FALSE='#'
13404,13406c13393,13401
<      ac_cv_sizeof_double=0
<    fi ;;
< esac
---
>   PA64_HPUX_TRUE='#'
>   PA64_HPUX_FALSE=
> fi
> 
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
> $as_echo_n "checking for ANSI C header files... " >&6; }
> if ${ac_cv_header_stdc+:} false; then :
>   $as_echo_n "(cached) " >&6
13408,13412c13403
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13414,13417d13404
< $ac_includes_default
< static long int longval () { return (long int) (sizeof (double)); }
< static unsigned long int ulongval () { return (long int) (sizeof (double)); }
< #include <stdio.h>
13418a13406,13409
> #include <stdarg.h>
> #include <string.h>
> #include <float.h>
> 
13423,13443d13413
<   FILE *f = fopen ("conftest.val", "w");
<   if (! f)
<     return 1;
<   if (((long int) (sizeof (double))) < 0)
<     {
<       long int i = longval ();
<       if (i != ((long int) (sizeof (double))))
< 	return 1;
<       fprintf (f, "%ld", i);
<     }
<   else
<     {
<       unsigned long int i = ulongval ();
<       if (i != ((long int) (sizeof (double))))
< 	return 1;
<       fprintf (f, "%lu", i);
<     }
<   /* Do not output a trailing newline, as this causes \r\n confusion
<      on some platforms.  */
<   return ferror (f) || fclose (f) != 0;
< 
13448,13470c13418,13419
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<   ac_cv_sizeof_double=`cat conftest.val`
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   ac_cv_header_stdc=yes
13472,13474c13421,13433
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ac_cv_header_stdc=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> 
> if test $ac_cv_header_stdc = yes; then
>   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <string.h>
> 
> _ACEOF
> if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
>   $EGREP "memchr" >/dev/null 2>&1; then :
13476,13484d13434
< ( exit $ac_status )
< if test "$ac_cv_type_double" = yes; then
<      { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
< $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
< { { $as_echo "$as_me:$LINENO: error: cannot compute sizeof (double)
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute sizeof (double)
< See \`config.log' for more details." >&2;}
<    { (exit 77); exit 77; }; }; }
13486,13492c13436
<      ac_cv_sizeof_double=0
<    fi
< fi
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
< fi
< rm -f conftest.val
---
>   ac_cv_header_stdc=no
13494,13495c13438
< { $as_echo "$as_me:$LINENO: result: $ac_cv_sizeof_double" >&5
< $as_echo "$ac_cv_sizeof_double" >&6; }
---
> rm -f conftest*
13496a13440
> fi
13497a13442,13446
> if test $ac_cv_header_stdc = yes; then
>   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> #include <stdlib.h>
13499,13500d13447
< cat >>confdefs.h <<_ACEOF
< #define SIZEOF_DOUBLE $ac_cv_sizeof_double
13501a13449,13450
> if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
>   $EGREP "free" >/dev/null 2>&1; then :
13502a13452,13455
> else
>   ac_cv_header_stdc=no
> fi
> rm -f conftest*
13504,13511c13457,13462
< # The cast to long int works around a bug in the HP C Compiler
< # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
< # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
< # This bug is HP SR number 8606223364.
< { $as_echo "$as_me:$LINENO: checking size of long double" >&5
< $as_echo_n "checking size of long double... " >&6; }
< if test "${ac_cv_sizeof_long_double+set}" = set; then
<   $as_echo_n "(cached) " >&6
---
> fi
> 
> if test $ac_cv_header_stdc = yes; then
>   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
>   if test "$cross_compiling" = yes; then :
>   :
13513,13519c13464
<   if test "$cross_compiling" = yes; then
<   # Depending upon the size, compute the lo and hi bounds.
< cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13521,13526c13466,13477
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (long double))) >= 0)];
< test_array [0] = 0
---
> #include <ctype.h>
> #include <stdlib.h>
> #if ((' ' & 0x0FF) == 0x020)
> # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
> # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
> #else
> # define ISLOWER(c) \
> 		   (('a' <= (c) && (c) <= 'i') \
> 		     || ('j' <= (c) && (c) <= 'r') \
> 		     || ('s' <= (c) && (c) <= 'z'))
> # define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
> #endif
13528,13558c13479
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_lo=0 ac_mid=0
<   while :; do
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
< /* end confdefs.h.  */
< $ac_includes_default
---
> #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
13562,13587c13483,13492
< static int test_array [1 - 2 * !(((long int) (sizeof (long double))) <= $ac_mid)];
< test_array [0] = 0
< 
<   ;
<   return 0;
< }
< _ACEOF
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=$ac_mid; break
---
>   int i;
>   for (i = 0; i < 256; i++)
>     if (XOR (islower (i), ISLOWER (i))
> 	|| toupper (i) != TOUPPER (i))
>       return 2;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_run "$LINENO"; then :
> 
13589,13590c13494,13498
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ac_cv_header_stdc=no
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
> fi
13592,13595d13499
< 	ac_lo=`expr $ac_mid + 1`
< 			if test $ac_lo -le $ac_mid; then
< 			  ac_lo= ac_hi=
< 			  break
13597c13501,13507
< 			ac_mid=`expr 2 '*' $ac_mid + 1`
---
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
> $as_echo "$ac_cv_header_stdc" >&6; }
> if test $ac_cv_header_stdc = yes; then
> 
> $as_echo "#define STDC_HEADERS 1" >>confdefs.h
> 
13600c13510,13518
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
---
> for ac_func in memcpy
> do :
>   ac_fn_c_check_func "$LINENO" "memcpy" "ac_cv_func_memcpy"
> if test "x$ac_cv_func_memcpy" = xyes; then :
>   cat >>confdefs.h <<_ACEOF
> #define HAVE_MEMCPY 1
> _ACEOF
> 
> fi
13601a13520,13523
> 
> ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
> if test "x$ac_cv_type_size_t" = xyes; then :
> 
13603,13604d13524
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
13606,13607c13526,13527
< 	cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
---
> cat >>confdefs.h <<_ACEOF
> #define size_t unsigned int
13609,13610c13529,13539
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 
> fi
> 
> # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
> # for constant arguments.  Useless!
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
> $as_echo_n "checking for working alloca.h... " >&6; }
> if ${ac_cv_working_alloca_h+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13612c13541
< $ac_includes_default
---
> #include <alloca.h>
13616,13618c13545,13546
< static int test_array [1 - 2 * !(((long int) (sizeof (long double))) < 0)];
< test_array [0] = 0
< 
---
> char *p = (char *) alloca (2 * sizeof (int));
> 			  if (p) return 0;
13623,13647c13551,13572
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=-1 ac_mid=-1
<   while :; do
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_working_alloca_h=yes
> else
>   ac_cv_working_alloca_h=no
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
> $as_echo "$ac_cv_working_alloca_h" >&6; }
> if test $ac_cv_working_alloca_h = yes; then
> 
> $as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h
> 
> fi
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
> $as_echo_n "checking for alloca... " >&6; }
> if ${ac_cv_func_alloca_works+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13649c13574,13594
< $ac_includes_default
---
> #ifdef __GNUC__
> # define alloca __builtin_alloca
> #else
> # ifdef _MSC_VER
> #  include <malloc.h>
> #  define alloca _alloca
> # else
> #  ifdef HAVE_ALLOCA_H
> #   include <alloca.h>
> #  else
> #   ifdef _AIX
>  #pragma alloca
> #   else
> #    ifndef alloca /* predefined by HP cc +Olibcalls */
> void *alloca (size_t);
> #    endif
> #   endif
> #  endif
> # endif
> #endif
> 
13653,13655c13598,13599
< static int test_array [1 - 2 * !(((long int) (sizeof (long double))) >= $ac_mid)];
< test_array [0] = 0
< 
---
> char *p = (char *) alloca (1);
> 				    if (p) return 0;
13660,13678c13604,13605
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_lo=$ac_mid; break
---
> if ac_fn_c_try_link "$LINENO"; then :
>   ac_cv_func_alloca_works=yes
13680,13686c13607
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	ac_hi=`expr '(' $ac_mid ')' - 1`
< 			if test $ac_mid -le $ac_hi; then
< 			  ac_lo= ac_hi=
< 			  break
---
>   ac_cv_func_alloca_works=no
13688c13609,13610
< 			ac_mid=`expr 2 '*' $ac_mid`
---
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
13689a13612,13617
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
> $as_echo "$ac_cv_func_alloca_works" >&6; }
> 
> if test $ac_cv_func_alloca_works = yes; then
> 
> $as_echo "#define HAVE_ALLOCA 1" >>confdefs.h
13691,13692d13618
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
<   done
13694,13695c13620,13623
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   # The SVR3 libPW and SVR4 libucb both contain incompatible functions
> # that cause trouble.  Some versions do not even contain alloca or
> # contain a buggy version.  If you still want to use their alloca,
> # use ar to extract alloca.o from them instead of compiling alloca.c.
13697,13698c13625
< 	ac_lo= ac_hi=
< fi
---
> ALLOCA=\${LIBOBJDIR}alloca.$ac_objext
13700,13701c13627
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< fi
---
> $as_echo "#define C_ALLOCA 1" >>confdefs.h
13703,13711c13629,13635
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
< # Binary search between lo and hi bounds.
< while test "x$ac_lo" != "x$ac_hi"; do
<   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
> $as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
> if ${ac_cv_os_cray+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13713,13718c13637,13641
< $ac_includes_default
< int
< main ()
< {
< static int test_array [1 - 2 * !(((long int) (sizeof (long double))) <= $ac_mid)];
< test_array [0] = 0
---
> #if defined CRAY && ! defined CRAY2
> webecray
> #else
> wenotbecray
> #endif
13720,13722d13642
<   ;
<   return 0;
< }
13724,13742c13644,13646
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   ac_hi=$ac_mid
---
> if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
>   $EGREP "webecray" >/dev/null 2>&1; then :
>   ac_cv_os_cray=yes
13744,13745c13648,13650
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   ac_cv_os_cray=no
> fi
> rm -f conftest*
13747c13652,13665
< 	ac_lo=`expr '(' $ac_mid ')' + 1`
---
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
> $as_echo "$ac_cv_os_cray" >&6; }
> if test $ac_cv_os_cray = yes; then
>   for ac_func in _getb67 GETB67 getb67; do
>     as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
> ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
> if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
> 
> cat >>confdefs.h <<_ACEOF
> #define CRAY_STACKSEG_END $ac_func
> _ACEOF
> 
>     break
13750d13667
< rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
13752,13761c13669,13674
< case $ac_lo in
< ?*) ac_cv_sizeof_long_double=$ac_lo;;
< '') if test "$ac_cv_type_long_double" = yes; then
<      { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
< $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
< { { $as_echo "$as_me:$LINENO: error: cannot compute sizeof (long double)
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute sizeof (long double)
< See \`config.log' for more details." >&2;}
<    { (exit 77); exit 77; }; }; }
---
> fi
> 
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
> $as_echo_n "checking stack direction for C alloca... " >&6; }
> if ${ac_cv_c_stack_direction+:} false; then :
>   $as_echo_n "(cached) " >&6
13763,13765c13676,13677
<      ac_cv_sizeof_long_double=0
<    fi ;;
< esac
---
>   if test "$cross_compiling" = yes; then :
>   ac_cv_c_stack_direction=0
13767,13771c13679
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13774,13777d13681
< static long int longval () { return (long int) (sizeof (long double)); }
< static unsigned long int ulongval () { return (long int) (sizeof (long double)); }
< #include <stdio.h>
< #include <stdlib.h>
13779c13683
< main ()
---
> find_stack_direction ()
13781,13785c13685,13687
< 
<   FILE *f = fopen ("conftest.val", "w");
<   if (! f)
<     return 1;
<   if (((long int) (sizeof (long double))) < 0)
---
>   static char *addr = 0;
>   auto char dummy;
>   if (addr == 0)
13787,13790c13689,13690
<       long int i = longval ();
<       if (i != ((long int) (sizeof (long double))))
< 	return 1;
<       fprintf (f, "%ld", i);
---
>       addr = &dummy;
>       return find_stack_direction ();
13792a13693,13697
>     return (&dummy > addr) ? 1 : -1;
> }
> 
> int
> main ()
13794,13797c13699
<       unsigned long int i = ulongval ();
<       if (i != ((long int) (sizeof (long double))))
< 	return 1;
<       fprintf (f, "%lu", i);
---
>   return find_stack_direction () < 0;
13799,13801c13701,13746
<   /* Do not output a trailing newline, as this causes \r\n confusion
<      on some platforms.  */
<   return ferror (f) || fclose (f) != 0;
---
> _ACEOF
> if ac_fn_c_try_run "$LINENO"; then :
>   ac_cv_c_stack_direction=1
> else
>   ac_cv_c_stack_direction=-1
> fi
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
> fi
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
> $as_echo "$ac_cv_c_stack_direction" >&6; }
> cat >>confdefs.h <<_ACEOF
> #define STACK_DIRECTION $ac_cv_c_stack_direction
> _ACEOF
> 
> 
> fi
> 
> 
> # The cast to long int works around a bug in the HP C Compiler
> # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
> # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
> # This bug is HP SR number 8606223364.
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of double" >&5
> $as_echo_n "checking size of double... " >&6; }
> if ${ac_cv_sizeof_double+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
>   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (double))" "ac_cv_sizeof_double"        "$ac_includes_default"; then :
> 
> else
>   if test "$ac_cv_type_double" = yes; then
>      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
> $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
> as_fn_error 77 "cannot compute sizeof (double)
> See \`config.log' for more details" "$LINENO" 5; }
>    else
>      ac_cv_sizeof_double=0
>    fi
> fi
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_double" >&5
> $as_echo "$ac_cv_sizeof_double" >&6; }
13803,13805c13748,13751
<   ;
<   return 0;
< }
---
> 
> 
> cat >>confdefs.h <<_ACEOF
> #define SIZEOF_DOUBLE $ac_cv_sizeof_double
13807,13829c13753,13762
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
<   ac_cv_sizeof_long_double=`cat conftest.val`
---
> 
> 
> # The cast to long int works around a bug in the HP C Compiler
> # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
> # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
> # This bug is HP SR number 8606223364.
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long double" >&5
> $as_echo_n "checking size of long double... " >&6; }
> if ${ac_cv_sizeof_long_double+:} false; then :
>   $as_echo_n "(cached) " >&6
13831,13833c13764
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long double))" "ac_cv_sizeof_long_double"        "$ac_includes_default"; then :
13835c13766
< ( exit $ac_status )
---
> else
13837c13768
<      { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
---
>      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
13839,13843c13770,13771
< { { $as_echo "$as_me:$LINENO: error: cannot compute sizeof (long double)
< See \`config.log' for more details." >&5
< $as_echo "$as_me: error: cannot compute sizeof (long double)
< See \`config.log' for more details." >&2;}
<    { (exit 77); exit 77; }; }; }
---
> as_fn_error 77 "cannot compute sizeof (long double)
> See \`config.log' for more details" "$LINENO" 5; }
13848,13851c13776
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
< fi
< rm -f conftest.val
---
> 
13853c13778
< { $as_echo "$as_me:$LINENO: result: $ac_cv_sizeof_long_double" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_double" >&5
13871,13873c13796
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_LONG_DOUBLE 1
< _ACEOF
---
> $as_echo "#define HAVE_LONG_DOUBLE 1" >>confdefs.h
13880,13881c13803
< 
<  { $as_echo "$as_me:$LINENO: checking whether byte ordering is bigendian" >&5
---
>  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
13883c13805
< if test "${ac_cv_c_bigendian+set}" = set; then
---
> if ${ac_cv_c_bigendian+:} false; then :
13888,13892c13810
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13900,13917c13818
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
13920,13924c13821,13829
< 	# there are some -arch flags.  Note that *ppc* also matches
< 	# ppc64.  This check is also rather less than ideal.
< 	case "${CC} ${CFLAGS} ${CPPFLAGS} ${LDFLAGS}" in  #(
< 	  *-arch*ppc*|*-arch*i386*|*-arch*x86_64*) ac_cv_c_bigendian=universal;;
< 	esac
---
> 	# there are at least two -arch flags with different values.
> 	ac_arch=
> 	ac_prev=
> 	for ac_word in $CC $CFLAGS $CPPFLAGS $LDFLAGS; do
> 	 if test -n "$ac_prev"; then
> 	   case $ac_word in
> 	     i?86 | x86_64 | ppc | ppc64)
> 	       if test -z "$ac_arch" || test "$ac_arch" = "$ac_word"; then
> 		 ac_arch=$ac_word
13926,13929c13831,13840
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
---
> 		 ac_cv_c_bigendian=universal
> 		 break
> 	       fi
> 	       ;;
> 	   esac
> 	   ac_prev=
> 	 elif test "x$ac_word" = "x-arch"; then
> 	   ac_prev=arch
> 	 fi
>        done
13931d13841
< 
13935,13939c13845
<       cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13957,13974c13863
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
13976,13980c13865
< 	 cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
13996,14013c13881
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
14016,14018d13883
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
14021d13885
< 
14023,14027d13886
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
14029d13887
< 
14034,14038c13892
<       cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14053,14070c13907
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
14072,14076c13909
< 	 cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14091,14108c13924
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
14111,14113d13926
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
14116d13928
< 
14118,14122d13929
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
14124d13930
< 
14129c13935
<       if test "$cross_compiling" = yes; then
---
>       if test "$cross_compiling" = yes; then :
14131,14135c13937
< 	 cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14161,14178c13963
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
14190,14194d13974
< else
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 
14196d13975
< 
14199,14203c13978
<   cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14223,14244c13998
< rm -f conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
<   { (case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_try") 2>&5
<   ac_status=$?
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
---
> if ac_fn_c_try_run "$LINENO"; then :
14247,14251d14000
<   $as_echo "$as_me: program exited with status $ac_status" >&5
< $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< ( exit $ac_status )
14254,14255c14003,14004
< rm -rf conftest.dSYM
< rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
---
> rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
>   conftest.$ac_objext conftest.beam conftest.$ac_ext
14258d14006
< 
14261c14009
< { $as_echo "$as_me:$LINENO: result: $ac_cv_c_bigendian" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_bigendian" >&5
14265,14267c14013
<      cat >>confdefs.h <<\_ACEOF
< #define WORDS_BIGENDIAN 1
< _ACEOF
---
>      $as_echo "#define WORDS_BIGENDIAN 1" >>confdefs.h
14273,14275c14019
< cat >>confdefs.h <<\_ACEOF
< #define AC_APPLE_UNIVERSAL_BUILD 1
< _ACEOF
---
> $as_echo "#define AC_APPLE_UNIVERSAL_BUILD 1" >>confdefs.h
14279,14283c14023,14024
<      { { $as_echo "$as_me:$LINENO: error: unknown endianness
<  presetting ac_cv_c_bigendian=no (or yes) will help" >&5
< $as_echo "$as_me: error: unknown endianness
<  presetting ac_cv_c_bigendian=no (or yes) will help" >&2;}
<    { (exit 1); exit 1; }; } ;;
---
>      as_fn_error $? "unknown endianness
>  presetting ac_cv_c_bigendian=no (or yes) will help" "$LINENO" 5 ;;
14287c14028
< { $as_echo "$as_me:$LINENO: checking assembler .cfi pseudo-op support" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler .cfi pseudo-op support" >&5
14289c14030
< if test "${libffi_cv_as_cfi_pseudo_op+set}" = set; then
---
> if ${libffi_cv_as_cfi_pseudo_op+:} false; then :
14294,14298c14035
<     cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14309,14326c14046
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
---
> if ac_fn_c_try_compile "$LINENO"; then :
14329,14331d14048
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
14334d14050
< 
14338c14054
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_as_cfi_pseudo_op" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_cfi_pseudo_op" >&5
14342,14344c14058
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_AS_CFI_PSEUDO_OP 1
< _ACEOF
---
> $as_echo "#define HAVE_AS_CFI_PSEUDO_OP 1" >>confdefs.h
14349c14063
<     { $as_echo "$as_me:$LINENO: checking assembler and linker support unaligned pc related relocs" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler and linker support unaligned pc related relocs" >&5
14351c14065
< if test "${libffi_cv_as_sparc_ua_pcrel+set}" = set; then
---
> if ${libffi_cv_as_sparc_ua_pcrel+:} false; then :
14359,14363c14073
< 	cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
> 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14374,14394c14084
< rm -f conftest.$ac_objext conftest$ac_exeext
< if { (ac_try="$ac_link"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_link") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest$ac_exeext && {
< 	 test "$cross_compiling" = yes ||
< 	 $as_test_x conftest$ac_exeext
<        }; then
---
> if ac_fn_c_try_link "$LINENO"; then :
14397,14398c14087,14173
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
---
>   libffi_cv_as_sparc_ua_pcrel=no
> fi
> rm -f core conftest.err conftest.$ac_objext \
>     conftest$ac_exeext conftest.$ac_ext
> 	CFLAGS="$save_CFLAGS"
> 	LDFLAGS="$save_LDFLAGS"
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_sparc_ua_pcrel" >&5
> $as_echo "$libffi_cv_as_sparc_ua_pcrel" >&6; }
>     if test "x$libffi_cv_as_sparc_ua_pcrel" = xyes; then
> 
> $as_echo "#define HAVE_AS_SPARC_UA_PCREL 1" >>confdefs.h
> 
>     fi
> 
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler .register pseudo-op support" >&5
> $as_echo_n "checking assembler .register pseudo-op support... " >&6; }
> if ${libffi_cv_as_register_pseudo_op+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
> 
>        libffi_cv_as_register_pseudo_op=unknown
>        # Check if we have .register
>        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> asm (".register %g2, #scratch");
> int
> main ()
> {
> 
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   libffi_cv_as_register_pseudo_op=yes
> else
>   libffi_cv_as_register_pseudo_op=no
> fi
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_register_pseudo_op" >&5
> $as_echo "$libffi_cv_as_register_pseudo_op" >&6; }
>     if test "x$libffi_cv_as_register_pseudo_op" = xyes; then
> 
> $as_echo "#define HAVE_AS_REGISTER_PSEUDO_OP 1" >>confdefs.h
> 
>     fi
> fi
> 
> if test x$TARGET = xX86 || test x$TARGET = xX86_WIN32 || test x$TARGET = xX86_64; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler supports pc related relocs" >&5
> $as_echo_n "checking assembler supports pc related relocs... " >&6; }
> if ${libffi_cv_as_x86_pcrel+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
> 
> 	libffi_cv_as_x86_pcrel=no
> 	echo '.text; foo: nop; .data; .long foo-.; .text' > conftest.s
> 	if $CC $CFLAGS -c conftest.s > /dev/null; then
> 	   libffi_cv_as_x86_pcrel=yes
> 	fi
> 
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_x86_pcrel" >&5
> $as_echo "$libffi_cv_as_x86_pcrel" >&6; }
>     if test "x$libffi_cv_as_x86_pcrel" = xyes; then
> 
> $as_echo "#define HAVE_AS_X86_PCREL 1" >>confdefs.h
> 
>     fi
> 
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler .ascii pseudo-op support" >&5
> $as_echo_n "checking assembler .ascii pseudo-op support... " >&6; }
> if ${libffi_cv_as_ascii_pseudo_op+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
> 
>        libffi_cv_as_ascii_pseudo_op=unknown
>        # Check if we have .ascii
>        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
> /* end confdefs.h.  */
> asm (".ascii \\"string\\"");
> int
> main ()
> {
14400c14175,14182
< 	libffi_cv_as_sparc_ua_pcrel=no
---
>   ;
>   return 0;
> }
> _ACEOF
> if ac_fn_c_try_compile "$LINENO"; then :
>   libffi_cv_as_ascii_pseudo_op=yes
> else
>   libffi_cv_as_ascii_pseudo_op=no
14401a14184
> rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
14403,14407d14185
< rm -rf conftest.dSYM
< rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
<       conftest$ac_exeext conftest.$ac_ext
< 	CFLAGS="$save_CFLAGS"
< 	LDFLAGS="$save_LDFLAGS"
14409,14411c14187,14189
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_as_sparc_ua_pcrel" >&5
< $as_echo "$libffi_cv_as_sparc_ua_pcrel" >&6; }
<     if test "x$libffi_cv_as_sparc_ua_pcrel" = xyes; then
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_ascii_pseudo_op" >&5
> $as_echo "$libffi_cv_as_ascii_pseudo_op" >&6; }
>     if test "x$libffi_cv_as_ascii_pseudo_op" = xyes; then
14413,14415c14191
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_AS_SPARC_UA_PCREL 1
< _ACEOF
---
> $as_echo "#define HAVE_AS_ASCII_PSEUDO_OP 1" >>confdefs.h
14419,14421c14195,14197
<     { $as_echo "$as_me:$LINENO: checking assembler .register pseudo-op support" >&5
< $as_echo_n "checking assembler .register pseudo-op support... " >&6; }
< if test "${libffi_cv_as_register_pseudo_op+set}" = set; then
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler .string pseudo-op support" >&5
> $as_echo_n "checking assembler .string pseudo-op support... " >&6; }
> if ${libffi_cv_as_string_pseudo_op+:} false; then :
14425,14431c14201,14203
<        libffi_cv_as_register_pseudo_op=unknown
<        # Check if we have .register
<        cat >conftest.$ac_ext <<_ACEOF
< /* confdefs.h.  */
< _ACEOF
< cat confdefs.h >>conftest.$ac_ext
< cat >>conftest.$ac_ext <<_ACEOF
---
>        libffi_cv_as_string_pseudo_op=unknown
>        # Check if we have .string
>        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
14433c14205
< asm (".register %g2, #scratch");
---
> asm (".string \\"string\\"");
14442,14460c14214,14215
< rm -f conftest.$ac_objext
< if { (ac_try="$ac_compile"
< case "(($ac_try" in
<   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
<   *) ac_try_echo=$ac_try;;
< esac
< eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
< $as_echo "$ac_try_echo") >&5
<   (eval "$ac_compile") 2>conftest.er1
<   ac_status=$?
<   grep -v '^ *+' conftest.er1 >conftest.err
<   rm -f conftest.er1
<   cat conftest.err >&5
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); } && {
< 	 test -z "$ac_c_werror_flag" ||
< 	 test ! -s conftest.err
<        } && test -s conftest.$ac_objext; then
<   libffi_cv_as_register_pseudo_op=yes
---
> if ac_fn_c_try_compile "$LINENO"; then :
>   libffi_cv_as_string_pseudo_op=yes
14462,14465c14217
<   $as_echo "$as_me: failed program was:" >&5
< sed 's/^/| /' conftest.$ac_ext >&5
< 
< 	libffi_cv_as_register_pseudo_op=no
---
>   libffi_cv_as_string_pseudo_op=no
14467d14218
< 
14471,14473c14222,14224
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_as_register_pseudo_op" >&5
< $as_echo "$libffi_cv_as_register_pseudo_op" >&6; }
<     if test "x$libffi_cv_as_register_pseudo_op" = xyes; then
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_string_pseudo_op" >&5
> $as_echo "$libffi_cv_as_string_pseudo_op" >&6; }
>     if test "x$libffi_cv_as_string_pseudo_op" = xyes; then
14475,14477c14226
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_AS_REGISTER_PSEUDO_OP 1
< _ACEOF
---
> $as_echo "#define HAVE_AS_STRING_PSEUDO_OP 1" >>confdefs.h
14482,14485c14231,14234
< if test x$TARGET = xX86 || test x$TARGET = xX86_WIN32 || test x$TARGET = xX86_64; then
<     { $as_echo "$as_me:$LINENO: checking assembler supports pc related relocs" >&5
< $as_echo_n "checking assembler supports pc related relocs... " >&6; }
< if test "${libffi_cv_as_x86_pcrel+set}" = set; then
---
> if test x$TARGET = xX86_WIN64; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _ prefix in compiled symbols" >&5
> $as_echo_n "checking for _ prefix in compiled symbols... " >&6; }
> if ${lt_cv_sys_symbol_underscore+:} false; then :
14488,14492c14237,14265
< 
< 	libffi_cv_as_x86_pcrel=yes
< 	echo '.text; foo: nop; .data; .long foo-.; .text' > conftest.s
< 	if $CC $CFLAGS -c conftest.s 2>&1 | grep -i warning > /dev/null; then
< 	    libffi_cv_as_x86_pcrel=no
---
>   lt_cv_sys_symbol_underscore=no
>   cat > conftest.$ac_ext <<_LT_EOF
> void nm_test_func(){}
> int main(){nm_test_func;return 0;}
> _LT_EOF
>   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
>   (eval $ac_compile) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; then
>     # Now try to grab the symbols.
>     ac_nlist=conftest.nm
>     if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $ac_nlist\""; } >&5
>   (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $ac_nlist) 2>&5
>   ac_status=$?
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; } && test -s "$ac_nlist"; then
>       # See whether the symbols have a leading underscore.
>       if grep '^. _nm_test_func' "$ac_nlist" >/dev/null; then
>         lt_cv_sys_symbol_underscore=yes
>       else
>         if grep '^. nm_test_func ' "$ac_nlist" >/dev/null; then
> 	  :
>         else
> 	  echo "configure: cannot find nm_test_func in $ac_nlist" >&5
>         fi
>       fi
>     else
>       echo "configure: cannot run $lt_cv_sys_global_symbol_pipe" >&5
14493a14267,14271
>   else
>     echo "configure: failed program was:" >&5
>     cat conftest.c >&5
>   fi
>   rm -rf conftest*
14496,14498c14274,14276
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_as_x86_pcrel" >&5
< $as_echo "$libffi_cv_as_x86_pcrel" >&6; }
<     if test "x$libffi_cv_as_x86_pcrel" = xyes; then
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sys_symbol_underscore" >&5
> $as_echo "$lt_cv_sys_symbol_underscore" >&6; }
>   sys_symbol_underscore=$lt_cv_sys_symbol_underscore
14500,14502c14278,14281
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_AS_X86_PCREL 1
< _ACEOF
---
> 
>     if test "x$sys_symbol_underscore" = xyes; then
> 
> $as_echo "#define SYMBOL_UNDERSCORE 1" >>confdefs.h
14506a14286,14287
> 
> FFI_EXEC_TRAMPOLINE_TABLE=0
14507a14289,14294
>      *arm*-apple-darwin*)
>        FFI_EXEC_TRAMPOLINE_TABLE=1
> 
> $as_echo "#define FFI_EXEC_TRAMPOLINE_TABLE 1" >>confdefs.h
> 
>      ;;
14510,14512c14297
< cat >>confdefs.h <<\_ACEOF
< #define FFI_MMAP_EXEC_WRIT 1
< _ACEOF
---
> $as_echo "#define FFI_MMAP_EXEC_WRIT 1" >>confdefs.h
14515a14301,14322
>  if test x$FFI_EXEC_TRAMPOLINE_TABLE = x1; then
>   FFI_EXEC_TRAMPOLINE_TABLE_TRUE=
>   FFI_EXEC_TRAMPOLINE_TABLE_FALSE='#'
> else
>   FFI_EXEC_TRAMPOLINE_TABLE_TRUE='#'
>   FFI_EXEC_TRAMPOLINE_TABLE_FALSE=
> fi
> 
> 
> 
> if test x$TARGET = xX86_64; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: checking assembler supports unwind section type" >&5
> $as_echo_n "checking assembler supports unwind section type... " >&6; }
> if ${libffi_cv_as_x86_64_unwind_section_type+:} false; then :
>   $as_echo_n "(cached) " >&6
> else
> 
> 	libffi_cv_as_x86_64_unwind_section_type=yes
> 	echo '.section .eh_frame,"a",@unwind' > conftest.s
> 	if $CC $CFLAGS -c conftest.s 2>&1 | grep -i warning > /dev/null; then
> 	    libffi_cv_as_x86_64_unwind_section_type=no
> 	fi
14517c14324,14335
< { $as_echo "$as_me:$LINENO: checking whether .eh_frame section should be read-only" >&5
---
> fi
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_as_x86_64_unwind_section_type" >&5
> $as_echo "$libffi_cv_as_x86_64_unwind_section_type" >&6; }
>     if test "x$libffi_cv_as_x86_64_unwind_section_type" = xyes; then
> 
> $as_echo "#define HAVE_AS_X86_64_UNWIND_SECTION_TYPE 1" >>confdefs.h
> 
>     fi
> fi
> 
> if test "x$GCC" = "xyes"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether .eh_frame section should be read-only" >&5
14519c14337
< if test "${libffi_cv_ro_eh_frame+set}" = set; then
---
> if ${libffi_cv_ro_eh_frame+:} false; then :
14536c14354
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_ro_eh_frame" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_ro_eh_frame" >&5
14540,14542c14358
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_RO_EH_FRAME 1
< _ACEOF
---
> $as_echo "#define HAVE_RO_EH_FRAME 1" >>confdefs.h
14545,14547c14361
< cat >>confdefs.h <<\_ACEOF
< #define EH_FRAME_FLAGS "a"
< _ACEOF
---
> $as_echo "#define EH_FRAME_FLAGS \"a\"" >>confdefs.h
14551,14553c14365
< cat >>confdefs.h <<\_ACEOF
< #define EH_FRAME_FLAGS "aw"
< _ACEOF
---
> $as_echo "#define EH_FRAME_FLAGS \"aw\"" >>confdefs.h
14557c14369
< { $as_echo "$as_me:$LINENO: checking for __attribute__((visibility(\"hidden\")))" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __attribute__((visibility(\"hidden\")))" >&5
14559c14371
< if test "${libffi_cv_hidden_visibility_attribute+set}" = set; then
---
> if ${libffi_cv_hidden_visibility_attribute+:} false; then :
14566c14378
<   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
---
>   { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_try\""; } >&5
14569,14570c14381,14382
<   $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
<   (exit $ac_status); }; }; then
---
>   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
>   test $ac_status = 0; }; }; then
14578c14390
< { $as_echo "$as_me:$LINENO: result: $libffi_cv_hidden_visibility_attribute" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: result: $libffi_cv_hidden_visibility_attribute" >&5
14582,14584c14394
< cat >>confdefs.h <<\_ACEOF
< #define HAVE_HIDDEN_VISIBILITY_ATTRIBUTE 1
< _ACEOF
---
> $as_echo "#define HAVE_HIDDEN_VISIBILITY_ATTRIBUTE 1" >>confdefs.h
14587c14397
< 
---
> fi
14597c14407
< if test "${enable_debug+set}" = set; then
---
> if test "${enable_debug+set}" = set; then :
14600,14602c14410
< cat >>confdefs.h <<\_ACEOF
< #define FFI_DEBUG 1
< _ACEOF
---
> $as_echo "#define FFI_DEBUG 1" >>confdefs.h
14606a14415,14422
>  if test "$enable_debug" = "yes"; then
>   FFI_DEBUG_TRUE=
>   FFI_DEBUG_FALSE='#'
> else
>   FFI_DEBUG_TRUE='#'
>   FFI_DEBUG_FALSE=
> fi
> 
14609c14425
< if test "${enable_structs+set}" = set; then
---
> if test "${enable_structs+set}" = set; then :
14612,14614c14428
< cat >>confdefs.h <<\_ACEOF
< #define FFI_NO_STRUCTS 1
< _ACEOF
---
> $as_echo "#define FFI_NO_STRUCTS 1" >>confdefs.h
14621c14435
< if test "${enable_raw_api+set}" = set; then
---
> if test "${enable_raw_api+set}" = set; then :
14624,14626c14438
< cat >>confdefs.h <<\_ACEOF
< #define FFI_NO_RAW_API 1
< _ACEOF
---
> $as_echo "#define FFI_NO_RAW_API 1" >>confdefs.h
14633c14445
< if test "${enable_purify_safety+set}" = set; then
---
> if test "${enable_purify_safety+set}" = set; then :
14636,14638c14448
< cat >>confdefs.h <<\_ACEOF
< #define USING_PURIFY 1
< _ACEOF
---
> $as_echo "#define USING_PURIFY 1" >>confdefs.h
14643a14454,14456
> # These variables are only ever used when we cross-build to X86_WIN32.
> # And we only support this with GCC, so...
> if test x"$GCC" != x"no"; then
14658a14472
> fi
14704c14518
<       *_cv_*) { $as_echo "$as_me:$LINENO: WARNING: cache variable $ac_var contains a newline" >&5
---
>       *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
14710c14524
<       *) $as_unset $ac_var ;;
---
>       *) { eval $ac_var=; unset $ac_var;} ;;
14718,14719c14532,14533
<       # `set' does not quote correctly, so add quotes (double-quote
<       # substitution turns \\\\ into \\, and sed turns \\ into \).
---
>       # `set' does not quote correctly, so add quotes: double-quote
>       # substitution turns \\\\ into \\, and sed turns \\ into \.
14741,14742c14555,14556
<     test "x$cache_file" != "x/dev/null" &&
<       { $as_echo "$as_me:$LINENO: updating cache $cache_file" >&5
---
>     if test "x$cache_file" != "x/dev/null"; then
>       { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
14744c14558,14569
<     cat confcache >$cache_file
---
>       if test ! -f "$cache_file" || test -h "$cache_file"; then
> 	cat confcache >"$cache_file"
>       else
>         case $cache_file in #(
>         */* | ?:*)
> 	  mv -f confcache "$cache_file"$$ &&
> 	  mv -f "$cache_file"$$ "$cache_file" ;; #(
>         *)
> 	  mv -f confcache "$cache_file" ;;
> 	esac
>       fi
>     fi
14746c14571
<     { $as_echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
14759a14585
> U=
14766,14767c14592,14593
<   ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
<   ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
---
>   as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
>   as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
14783,14787c14609,14610
<   { { $as_echo "$as_me:$LINENO: error: conditional \"AMDEP\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"AMDEP\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"AMDEP\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14790,14794c14613,14614
<   { { $as_echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"am__fastdepCC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14797,14801c14617,14618
<   { { $as_echo "$as_me:$LINENO: error: conditional \"am__fastdepCCAS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"am__fastdepCCAS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"am__fastdepCCAS\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14804,14808c14621,14622
<   { { $as_echo "$as_me:$LINENO: error: conditional \"MAINTAINER_MODE\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"MAINTAINER_MODE\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"MAINTAINER_MODE\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14811,14815c14625,14626
<   { { $as_echo "$as_me:$LINENO: error: conditional \"TESTSUBDIR\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"TESTSUBDIR\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"TESTSUBDIR\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14818,14822c14629,14630
<   { { $as_echo "$as_me:$LINENO: error: conditional \"MIPS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"MIPS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"MIPS\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14825,14829c14633,14634
<   { { $as_echo "$as_me:$LINENO: error: conditional \"SPARC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"SPARC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"SPARC\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14832,14836c14637,14638
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14839,14843c14641,14642
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86_FREEBSD\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86_FREEBSD\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86_FREEBSD\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14846,14850c14645,14646
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86_WIN32\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86_WIN32\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86_WIN32\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14853,14857c14649,14650
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86_WIN64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86_WIN64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86_WIN64\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14860,14864c14653,14654
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86_DARWIN\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86_DARWIN\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86_DARWIN\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14867,14871c14657,14658
<   { { $as_echo "$as_me:$LINENO: error: conditional \"ALPHA\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"ALPHA\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"ALPHA\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14874,14878c14661,14662
<   { { $as_echo "$as_me:$LINENO: error: conditional \"IA64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"IA64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"IA64\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14881,14885c14665,14666
<   { { $as_echo "$as_me:$LINENO: error: conditional \"M32R\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"M32R\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"M32R\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14888,14892c14669,14674
<   { { $as_echo "$as_me:$LINENO: error: conditional \"M68K\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"M68K\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"M68K\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
> fi
> if test -z "${MOXIE_TRUE}" && test -z "${MOXIE_FALSE}"; then
>   as_fn_error $? "conditional \"MOXIE\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14895,14899c14677,14678
<   { { $as_echo "$as_me:$LINENO: error: conditional \"POWERPC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"POWERPC\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"POWERPC\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14902,14906c14681,14682
<   { { $as_echo "$as_me:$LINENO: error: conditional \"POWERPC_AIX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"POWERPC_AIX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"POWERPC_AIX\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14909,14913c14685,14686
<   { { $as_echo "$as_me:$LINENO: error: conditional \"POWERPC_DARWIN\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"POWERPC_DARWIN\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"POWERPC_DARWIN\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14916,14920c14689,14690
<   { { $as_echo "$as_me:$LINENO: error: conditional \"POWERPC_FREEBSD\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"POWERPC_FREEBSD\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"POWERPC_FREEBSD\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14923,14927c14693,14694
<   { { $as_echo "$as_me:$LINENO: error: conditional \"ARM\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"ARM\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"ARM\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14930,14934c14697,14698
<   { { $as_echo "$as_me:$LINENO: error: conditional \"AVR32\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"AVR32\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"AVR32\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14937,14941c14701,14702
<   { { $as_echo "$as_me:$LINENO: error: conditional \"LIBFFI_CRIS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"LIBFFI_CRIS\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"LIBFFI_CRIS\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14944,14948c14705,14706
<   { { $as_echo "$as_me:$LINENO: error: conditional \"FRV\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"FRV\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"FRV\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14951,14955c14709,14710
<   { { $as_echo "$as_me:$LINENO: error: conditional \"S390\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"S390\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"S390\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14958,14962c14713,14714
<   { { $as_echo "$as_me:$LINENO: error: conditional \"X86_64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"X86_64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"X86_64\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14965,14969c14717,14718
<   { { $as_echo "$as_me:$LINENO: error: conditional \"SH\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"SH\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"SH\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14972,14976c14721,14722
<   { { $as_echo "$as_me:$LINENO: error: conditional \"SH64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"SH64\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"SH64\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14979,14983c14725,14726
<   { { $as_echo "$as_me:$LINENO: error: conditional \"PA_LINUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"PA_LINUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"PA_LINUX\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14986,14990c14729,14730
<   { { $as_echo "$as_me:$LINENO: error: conditional \"PA_HPUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"PA_HPUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"PA_HPUX\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14993,14997c14733,14734
<   { { $as_echo "$as_me:$LINENO: error: conditional \"PA64_HPUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&5
< $as_echo "$as_me: error: conditional \"PA64_HPUX\" was never defined.
< Usually this means the macro was only invoked conditionally." >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "conditional \"PA64_HPUX\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
14999a14737,14744
> if test -z "${FFI_EXEC_TRAMPOLINE_TABLE_TRUE}" && test -z "${FFI_EXEC_TRAMPOLINE_TABLE_FALSE}"; then
>   as_fn_error $? "conditional \"FFI_EXEC_TRAMPOLINE_TABLE\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
> fi
> if test -z "${FFI_DEBUG_TRUE}" && test -z "${FFI_DEBUG_FALSE}"; then
>   as_fn_error $? "conditional \"FFI_DEBUG\" was never defined.
> Usually this means the macro was only invoked conditionally." "$LINENO" 5
> fi
15001c14746
< : ${CONFIG_STATUS=./config.status}
---
> : "${CONFIG_STATUS=./config.status}"
15005c14750
< { $as_echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
---
> { $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
15007c14752,14753
< cat >$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
---
> as_write_fail=0
> cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
15017,15018d14762
< SHELL=\${CONFIG_SHELL-$SHELL}
< _ACEOF
15020,15021c14764,14768
< cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
< ## --------------------- ##
---
> SHELL=\${CONFIG_SHELL-$SHELL}
> export SHELL
> _ASEOF
> cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
> ## -------------------- ##
15023c14770
< ## --------------------- ##
---
> ## -------------------- ##
15027c14774
< if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
---
> if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
15035,15036c14782,14786
<   case `(set -o) 2>/dev/null` in
<   *posix*) set -o posix ;;
---
>   case `(set -o) 2>/dev/null` in #(
>   *posix*) :
>     set -o posix ;; #(
>   *) :
>      ;;
15038d14787
< 
15042,15051d14790
< 
< 
< # PATH needs CR
< # Avoid depending upon Character Ranges.
< as_cr_letters='abcdefghijklmnopqrstuvwxyz'
< as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
< as_cr_Letters=$as_cr_letters$as_cr_LETTERS
< as_cr_digits='0123456789'
< as_cr_alnum=$as_cr_Letters$as_cr_digits
< 
15059c14798,14804
< if (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
---
> # Prefer a ksh shell builtin over an external printf program on Solaris,
> # but without wasting forks for bash or zsh.
> if test -z "$BASH_VERSION$ZSH_VERSION" \
>     && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
>   as_echo='print -r --'
>   as_echo_n='print -rn --'
> elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
15070c14815
<       case $arg in
---
>       case $arg in #(
15093,15099d14837
< # Support unset when possible.
< if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
<   as_unset=unset
< else
<   as_unset=false
< fi
< 
15109c14847,14848
< case $0 in
---
> as_myself=
> case $0 in #((
15129c14868
<   { (exit 1); exit 1; }
---
>   exit 1
15132,15134c14871,14877
< # Work around bugs in pre-3.0 UWIN ksh.
< for as_var in ENV MAIL MAILPATH
< do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
---
> # Unset variables that we do not need and which cause bugs (e.g. in
> # pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
> # suppresses any "Segmentation fault" message there.  '((' could
> # trigger a bug in pdksh 5.2.14.
> for as_var in BASH_ENV ENV MAIL MAILPATH
> do eval test x\${$as_var+set} = xset \
>   && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
15146c14889,14971
< # Required to use basename.
---
> # CDPATH.
> (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
> 
> 
> # as_fn_error STATUS ERROR [LINENO LOG_FD]
> # ----------------------------------------
> # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
> # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
> # script with STATUS, using 1 if that was 0.
> as_fn_error ()
> {
>   as_status=$1; test $as_status -eq 0 && as_status=1
>   if test "$4"; then
>     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
>     $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
>   fi
>   $as_echo "$as_me: error: $2" >&2
>   as_fn_exit $as_status
> } # as_fn_error
> 
> 
> # as_fn_set_status STATUS
> # -----------------------
> # Set $? to STATUS, without forking.
> as_fn_set_status ()
> {
>   return $1
> } # as_fn_set_status
> 
> # as_fn_exit STATUS
> # -----------------
> # Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
> as_fn_exit ()
> {
>   set +e
>   as_fn_set_status $1
>   exit $1
> } # as_fn_exit
> 
> # as_fn_unset VAR
> # ---------------
> # Portably unset VAR.
> as_fn_unset ()
> {
>   { eval $1=; unset $1;}
> }
> as_unset=as_fn_unset
> # as_fn_append VAR VALUE
> # ----------------------
> # Append the text in VALUE to the end of the definition contained in VAR. Take
> # advantage of any shell optimizations that allow amortized linear growth over
> # repeated appends, instead of the typical quadratic growth present in naive
> # implementations.
> if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
>   eval 'as_fn_append ()
>   {
>     eval $1+=\$2
>   }'
> else
>   as_fn_append ()
>   {
>     eval $1=\$$1\$2
>   }
> fi # as_fn_append
> 
> # as_fn_arith ARG...
> # ------------------
> # Perform arithmetic evaluation on the ARGs, and store the result in the
> # global $as_val. Take advantage of shells that can avoid forks. The arguments
> # must be portable across $(()) and expr.
> if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
>   eval 'as_fn_arith ()
>   {
>     as_val=$(( $* ))
>   }'
> else
>   as_fn_arith ()
>   {
>     as_val=`expr "$@" || test $? -eq 1`
>   }
> fi # as_fn_arith
> 
> 
15159a14985,14989
> if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
>   as_dirname=dirname
> else
>   as_dirname=false
> fi
15161d14990
< # Name of the executable.
15181,15233c15010,15015
< # CDPATH.
< $as_unset CDPATH
< 
< 
< 
<   as_lineno_1=$LINENO
<   as_lineno_2=$LINENO
<   test "x$as_lineno_1" != "x$as_lineno_2" &&
<   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
< 
<   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
<   # uniformly replaced by the line number.  The first 'sed' inserts a
<   # line-number line after each line using $LINENO; the second 'sed'
<   # does the real work.  The second script uses 'N' to pair each
<   # line-number line with the line containing $LINENO, and appends
<   # trailing '-' during substitution so that $LINENO is not a special
<   # case at line end.
<   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
<   # scripts with optimization help from Paolo Bonzini.  Blame Lee
<   # E. McMahon (1931-1989) for sed's syntax.  :-)
<   sed -n '
<     p
<     /[$]LINENO/=
<   ' <$as_myself |
<     sed '
<       s/[$]LINENO.*/&-/
<       t lineno
<       b
<       :lineno
<       N
<       :loop
<       s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
<       t loop
<       s/-\n.*//
<     ' >$as_me.lineno &&
<   chmod +x "$as_me.lineno" ||
<     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
<    { (exit 1); exit 1; }; }
< 
<   # Don't try to exec as it changes $[0], causing all sort of problems
<   # (the dirname of $[0] is not the place where we might find the
<   # original and so on.  Autoconf is especially sensitive to this).
<   . "./$as_me.lineno"
<   # Exit status is that of the last command.
<   exit
< }
< 
< 
< if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
<   as_dirname=dirname
< else
<   as_dirname=false
< fi
---
> # Avoid depending upon Character Ranges.
> as_cr_letters='abcdefghijklmnopqrstuvwxyz'
> as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
> as_cr_Letters=$as_cr_letters$as_cr_LETTERS
> as_cr_digits='0123456789'
> as_cr_alnum=$as_cr_Letters$as_cr_digits
15236c15018
< case `echo -n x` in
---
> case `echo -n x` in #(((((
15238c15020
<   case `echo 'x\c'` in
---
>   case `echo 'xy\c'` in
15240c15022,15024
<   *)   ECHO_C='\c';;
---
>   xy)  ECHO_C='\c';;
>   *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
>        ECHO_T='	';;
15245,15247c15029,15032
< if expr a : '\(a\)' >/dev/null 2>&1 &&
<    test "X`expr 00001 : '.*\(...\)'`" = X001; then
<   as_expr=expr
---
> 
> rm -f conf$$ conf$$.exe conf$$.file
> if test -d conf$$.dir; then
>   rm -f conf$$.dir/conf$$.file
15249c15034,15052
<   as_expr=false
---
>   rm -f conf$$.dir
>   mkdir conf$$.dir 2>/dev/null
> fi
> if (echo >conf$$.file) 2>/dev/null; then
>   if ln -s conf$$.file conf$$ 2>/dev/null; then
>     as_ln_s='ln -s'
>     # ... but there are two gotchas:
>     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
>     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
>     # In both cases, we have to default to `cp -p'.
>     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
>       as_ln_s='cp -p'
>   elif ln conf$$.file conf$$ 2>/dev/null; then
>     as_ln_s=ln
>   else
>     as_ln_s='cp -p'
>   fi
> else
>   as_ln_s='cp -p'
15250a15054,15101
> rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
> rmdir conf$$.dir 2>/dev/null
> 
> 
> # as_fn_mkdir_p
> # -------------
> # Create "$as_dir" as a directory, including parents if necessary.
> as_fn_mkdir_p ()
> {
> 
>   case $as_dir in #(
>   -*) as_dir=./$as_dir;;
>   esac
>   test -d "$as_dir" || eval $as_mkdir_p || {
>     as_dirs=
>     while :; do
>       case $as_dir in #(
>       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
>       *) as_qdir=$as_dir;;
>       esac
>       as_dirs="'$as_qdir' $as_dirs"
>       as_dir=`$as_dirname -- "$as_dir" ||
> $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
> 	 X"$as_dir" : 'X\(//\)[^/]' \| \
> 	 X"$as_dir" : 'X\(//\)$' \| \
> 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
> $as_echo X"$as_dir" |
>     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
> 	    s//\1/
> 	    q
> 	  }
> 	  /^X\(\/\/\)[^/].*/{
> 	    s//\1/
> 	    q
> 	  }
> 	  /^X\(\/\/\)$/{
> 	    s//\1/
> 	    q
> 	  }
> 	  /^X\(\/\).*/{
> 	    s//\1/
> 	    q
> 	  }
> 	  s/.*/./; q'`
>       test -d "$as_dir" && break
>     done
>     test -z "$as_dirs" || eval "mkdir $as_dirs"
>   } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
15252,15277d15102
< rm -f conf$$ conf$$.exe conf$$.file
< if test -d conf$$.dir; then
<   rm -f conf$$.dir/conf$$.file
< else
<   rm -f conf$$.dir
<   mkdir conf$$.dir 2>/dev/null
< fi
< if (echo >conf$$.file) 2>/dev/null; then
<   if ln -s conf$$.file conf$$ 2>/dev/null; then
<     as_ln_s='ln -s'
<     # ... but there are two gotchas:
<     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
<     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
<     # In both cases, we have to default to `cp -p'.
<     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
<       as_ln_s='cp -p'
<   elif ln conf$$.file conf$$ 2>/dev/null; then
<     as_ln_s=ln
<   else
<     as_ln_s='cp -p'
<   fi
< else
<   as_ln_s='cp -p'
< fi
< rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
< rmdir conf$$.dir 2>/dev/null
15278a15104
> } # as_fn_mkdir_p
15280c15106
<   as_mkdir_p=:
---
>   as_mkdir_p='mkdir -p "$as_dir"'
15299c15125
< 	case $1 in
---
> 	case $1 in #(
15302c15128
< 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
---
> 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
15316a15143,15147
> ## ----------------------------------- ##
> ## Main body of $CONFIG_STATUS script. ##
> ## ----------------------------------- ##
> _ASEOF
> test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1
15318c15149,15150
< # Save the log message, to keep $[0] and so on meaningful, and to
---
> cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
> # Save the log message, to keep $0 and so on meaningful, and to
15322,15323c15154,15155
< This file was extended by libffi $as_me 3.0.10rc0, which was
< generated by GNU Autoconf 2.63.  Invocation command line was
---
> This file was extended by libffi $as_me 3.0.10rc8, which was
> generated by GNU Autoconf 2.68.  Invocation command line was
15356,15357c15188,15190
< \`$as_me' instantiates files from templates according to the
< current configuration.
---
> \`$as_me' instantiates files and other configuration actions
> from templates according to the current configuration.  Unless the files
> and actions are specified as TAGs, all are instantiated by default.
15359c15192
< Usage: $0 [OPTION]... [FILE]...
---
> Usage: $0 [OPTION]... [TAG]...
15362a15196
>       --config     print configuration, then exit
15384c15218
< Report bugs to <bug-autoconf@gnu.org>."
---
> Report bugs to <http://sourceware.org/libffi.html>."
15387a15222
> ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
15389,15391c15224,15226
< libffi config.status 3.0.10rc0
< configured by $0, generated by GNU Autoconf 2.63,
<   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
---
> libffi config.status 3.0.10rc8
> configured by $0, generated by GNU Autoconf 2.68,
>   with options \\"\$ac_cs_config\\"
15393c15228
< Copyright (C) 2008 Free Software Foundation, Inc.
---
> Copyright (C) 2010 Free Software Foundation, Inc.
15411c15246
<   --*=*)
---
>   --*=?*)
15415a15251,15255
>   --*=)
>     ac_option=`expr "X$1" : 'X\([^=]*\)='`
>     ac_optarg=
>     ac_shift=:
>     ;;
15428a15269,15270
>   --config | --confi | --conf | --con | --co | --c )
>     $as_echo "$ac_cs_config"; exit ;;
15434a15277
>     '') as_fn_error $? "missing file argument" ;;
15436c15279
<     CONFIG_FILES="$CONFIG_FILES '$ac_optarg'"
---
>     as_fn_append CONFIG_FILES " '$ac_optarg'"
15443c15286
<     CONFIG_HEADERS="$CONFIG_HEADERS '$ac_optarg'"
---
>     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
15447,15449c15290,15291
<     { $as_echo "$as_me: error: ambiguous option: $1
< Try \`$0 --help' for more information." >&2
<    { (exit 1); exit 1; }; };;
---
>     as_fn_error $? "ambiguous option: \`$1'
> Try \`$0 --help' for more information.";;
15457,15459c15299,15300
<   -*) { $as_echo "$as_me: error: unrecognized option: $1
< Try \`$0 --help' for more information." >&2
<    { (exit 1); exit 1; }; } ;;
---
>   -*) as_fn_error $? "unrecognized option: \`$1'
> Try \`$0 --help' for more information." ;;
15461c15302
<   *) ac_config_targets="$ac_config_targets $1"
---
>   *) as_fn_append ac_config_targets " $1"
15501a15343,15350
> ax_enable_builddir_srcdir="$srcdir"                    # $srcdir
> ax_enable_builddir_host="$HOST"                        # $HOST / $host
> ax_enable_builddir_version="$VERSION"                  # $VERSION
> ax_enable_builddir_package="$PACKAGE"                  # $PACKAGE
> ax_enable_builddir_auxdir="$ax_enable_builddir_auxdir" # $AUX
> ax_enable_builddir_sed="$ax_enable_builddir_sed"       # $SED
> ax_enable_builddir="$ax_enable_builddir"               # $SUB
> 
15512,15629c15361,15490
< macro_version='`$ECHO "X$macro_version" | $Xsed -e "$delay_single_quote_subst"`'
< macro_revision='`$ECHO "X$macro_revision" | $Xsed -e "$delay_single_quote_subst"`'
< enable_shared='`$ECHO "X$enable_shared" | $Xsed -e "$delay_single_quote_subst"`'
< enable_static='`$ECHO "X$enable_static" | $Xsed -e "$delay_single_quote_subst"`'
< pic_mode='`$ECHO "X$pic_mode" | $Xsed -e "$delay_single_quote_subst"`'
< enable_fast_install='`$ECHO "X$enable_fast_install" | $Xsed -e "$delay_single_quote_subst"`'
< host_alias='`$ECHO "X$host_alias" | $Xsed -e "$delay_single_quote_subst"`'
< host='`$ECHO "X$host" | $Xsed -e "$delay_single_quote_subst"`'
< host_os='`$ECHO "X$host_os" | $Xsed -e "$delay_single_quote_subst"`'
< build_alias='`$ECHO "X$build_alias" | $Xsed -e "$delay_single_quote_subst"`'
< build='`$ECHO "X$build" | $Xsed -e "$delay_single_quote_subst"`'
< build_os='`$ECHO "X$build_os" | $Xsed -e "$delay_single_quote_subst"`'
< SED='`$ECHO "X$SED" | $Xsed -e "$delay_single_quote_subst"`'
< Xsed='`$ECHO "X$Xsed" | $Xsed -e "$delay_single_quote_subst"`'
< GREP='`$ECHO "X$GREP" | $Xsed -e "$delay_single_quote_subst"`'
< EGREP='`$ECHO "X$EGREP" | $Xsed -e "$delay_single_quote_subst"`'
< FGREP='`$ECHO "X$FGREP" | $Xsed -e "$delay_single_quote_subst"`'
< LD='`$ECHO "X$LD" | $Xsed -e "$delay_single_quote_subst"`'
< NM='`$ECHO "X$NM" | $Xsed -e "$delay_single_quote_subst"`'
< LN_S='`$ECHO "X$LN_S" | $Xsed -e "$delay_single_quote_subst"`'
< max_cmd_len='`$ECHO "X$max_cmd_len" | $Xsed -e "$delay_single_quote_subst"`'
< ac_objext='`$ECHO "X$ac_objext" | $Xsed -e "$delay_single_quote_subst"`'
< exeext='`$ECHO "X$exeext" | $Xsed -e "$delay_single_quote_subst"`'
< lt_unset='`$ECHO "X$lt_unset" | $Xsed -e "$delay_single_quote_subst"`'
< lt_SP2NL='`$ECHO "X$lt_SP2NL" | $Xsed -e "$delay_single_quote_subst"`'
< lt_NL2SP='`$ECHO "X$lt_NL2SP" | $Xsed -e "$delay_single_quote_subst"`'
< reload_flag='`$ECHO "X$reload_flag" | $Xsed -e "$delay_single_quote_subst"`'
< reload_cmds='`$ECHO "X$reload_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< OBJDUMP='`$ECHO "X$OBJDUMP" | $Xsed -e "$delay_single_quote_subst"`'
< deplibs_check_method='`$ECHO "X$deplibs_check_method" | $Xsed -e "$delay_single_quote_subst"`'
< file_magic_cmd='`$ECHO "X$file_magic_cmd" | $Xsed -e "$delay_single_quote_subst"`'
< AR='`$ECHO "X$AR" | $Xsed -e "$delay_single_quote_subst"`'
< AR_FLAGS='`$ECHO "X$AR_FLAGS" | $Xsed -e "$delay_single_quote_subst"`'
< STRIP='`$ECHO "X$STRIP" | $Xsed -e "$delay_single_quote_subst"`'
< RANLIB='`$ECHO "X$RANLIB" | $Xsed -e "$delay_single_quote_subst"`'
< old_postinstall_cmds='`$ECHO "X$old_postinstall_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< old_postuninstall_cmds='`$ECHO "X$old_postuninstall_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< old_archive_cmds='`$ECHO "X$old_archive_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< CC='`$ECHO "X$CC" | $Xsed -e "$delay_single_quote_subst"`'
< CFLAGS='`$ECHO "X$CFLAGS" | $Xsed -e "$delay_single_quote_subst"`'
< compiler='`$ECHO "X$compiler" | $Xsed -e "$delay_single_quote_subst"`'
< GCC='`$ECHO "X$GCC" | $Xsed -e "$delay_single_quote_subst"`'
< lt_cv_sys_global_symbol_pipe='`$ECHO "X$lt_cv_sys_global_symbol_pipe" | $Xsed -e "$delay_single_quote_subst"`'
< lt_cv_sys_global_symbol_to_cdecl='`$ECHO "X$lt_cv_sys_global_symbol_to_cdecl" | $Xsed -e "$delay_single_quote_subst"`'
< lt_cv_sys_global_symbol_to_c_name_address='`$ECHO "X$lt_cv_sys_global_symbol_to_c_name_address" | $Xsed -e "$delay_single_quote_subst"`'
< lt_cv_sys_global_symbol_to_c_name_address_lib_prefix='`$ECHO "X$lt_cv_sys_global_symbol_to_c_name_address_lib_prefix" | $Xsed -e "$delay_single_quote_subst"`'
< objdir='`$ECHO "X$objdir" | $Xsed -e "$delay_single_quote_subst"`'
< SHELL='`$ECHO "X$SHELL" | $Xsed -e "$delay_single_quote_subst"`'
< ECHO='`$ECHO "X$ECHO" | $Xsed -e "$delay_single_quote_subst"`'
< MAGIC_CMD='`$ECHO "X$MAGIC_CMD" | $Xsed -e "$delay_single_quote_subst"`'
< lt_prog_compiler_no_builtin_flag='`$ECHO "X$lt_prog_compiler_no_builtin_flag" | $Xsed -e "$delay_single_quote_subst"`'
< lt_prog_compiler_wl='`$ECHO "X$lt_prog_compiler_wl" | $Xsed -e "$delay_single_quote_subst"`'
< lt_prog_compiler_pic='`$ECHO "X$lt_prog_compiler_pic" | $Xsed -e "$delay_single_quote_subst"`'
< lt_prog_compiler_static='`$ECHO "X$lt_prog_compiler_static" | $Xsed -e "$delay_single_quote_subst"`'
< lt_cv_prog_compiler_c_o='`$ECHO "X$lt_cv_prog_compiler_c_o" | $Xsed -e "$delay_single_quote_subst"`'
< need_locks='`$ECHO "X$need_locks" | $Xsed -e "$delay_single_quote_subst"`'
< DSYMUTIL='`$ECHO "X$DSYMUTIL" | $Xsed -e "$delay_single_quote_subst"`'
< NMEDIT='`$ECHO "X$NMEDIT" | $Xsed -e "$delay_single_quote_subst"`'
< LIPO='`$ECHO "X$LIPO" | $Xsed -e "$delay_single_quote_subst"`'
< OTOOL='`$ECHO "X$OTOOL" | $Xsed -e "$delay_single_quote_subst"`'
< OTOOL64='`$ECHO "X$OTOOL64" | $Xsed -e "$delay_single_quote_subst"`'
< libext='`$ECHO "X$libext" | $Xsed -e "$delay_single_quote_subst"`'
< shrext_cmds='`$ECHO "X$shrext_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< extract_expsyms_cmds='`$ECHO "X$extract_expsyms_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< archive_cmds_need_lc='`$ECHO "X$archive_cmds_need_lc" | $Xsed -e "$delay_single_quote_subst"`'
< enable_shared_with_static_runtimes='`$ECHO "X$enable_shared_with_static_runtimes" | $Xsed -e "$delay_single_quote_subst"`'
< export_dynamic_flag_spec='`$ECHO "X$export_dynamic_flag_spec" | $Xsed -e "$delay_single_quote_subst"`'
< whole_archive_flag_spec='`$ECHO "X$whole_archive_flag_spec" | $Xsed -e "$delay_single_quote_subst"`'
< compiler_needs_object='`$ECHO "X$compiler_needs_object" | $Xsed -e "$delay_single_quote_subst"`'
< old_archive_from_new_cmds='`$ECHO "X$old_archive_from_new_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< old_archive_from_expsyms_cmds='`$ECHO "X$old_archive_from_expsyms_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< archive_cmds='`$ECHO "X$archive_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< archive_expsym_cmds='`$ECHO "X$archive_expsym_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< module_cmds='`$ECHO "X$module_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< module_expsym_cmds='`$ECHO "X$module_expsym_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< with_gnu_ld='`$ECHO "X$with_gnu_ld" | $Xsed -e "$delay_single_quote_subst"`'
< allow_undefined_flag='`$ECHO "X$allow_undefined_flag" | $Xsed -e "$delay_single_quote_subst"`'
< no_undefined_flag='`$ECHO "X$no_undefined_flag" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_libdir_flag_spec='`$ECHO "X$hardcode_libdir_flag_spec" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_libdir_flag_spec_ld='`$ECHO "X$hardcode_libdir_flag_spec_ld" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_libdir_separator='`$ECHO "X$hardcode_libdir_separator" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_direct='`$ECHO "X$hardcode_direct" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_direct_absolute='`$ECHO "X$hardcode_direct_absolute" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_minus_L='`$ECHO "X$hardcode_minus_L" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_shlibpath_var='`$ECHO "X$hardcode_shlibpath_var" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_automatic='`$ECHO "X$hardcode_automatic" | $Xsed -e "$delay_single_quote_subst"`'
< inherit_rpath='`$ECHO "X$inherit_rpath" | $Xsed -e "$delay_single_quote_subst"`'
< link_all_deplibs='`$ECHO "X$link_all_deplibs" | $Xsed -e "$delay_single_quote_subst"`'
< fix_srcfile_path='`$ECHO "X$fix_srcfile_path" | $Xsed -e "$delay_single_quote_subst"`'
< always_export_symbols='`$ECHO "X$always_export_symbols" | $Xsed -e "$delay_single_quote_subst"`'
< export_symbols_cmds='`$ECHO "X$export_symbols_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< exclude_expsyms='`$ECHO "X$exclude_expsyms" | $Xsed -e "$delay_single_quote_subst"`'
< include_expsyms='`$ECHO "X$include_expsyms" | $Xsed -e "$delay_single_quote_subst"`'
< prelink_cmds='`$ECHO "X$prelink_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< file_list_spec='`$ECHO "X$file_list_spec" | $Xsed -e "$delay_single_quote_subst"`'
< variables_saved_for_relink='`$ECHO "X$variables_saved_for_relink" | $Xsed -e "$delay_single_quote_subst"`'
< need_lib_prefix='`$ECHO "X$need_lib_prefix" | $Xsed -e "$delay_single_quote_subst"`'
< need_version='`$ECHO "X$need_version" | $Xsed -e "$delay_single_quote_subst"`'
< version_type='`$ECHO "X$version_type" | $Xsed -e "$delay_single_quote_subst"`'
< runpath_var='`$ECHO "X$runpath_var" | $Xsed -e "$delay_single_quote_subst"`'
< shlibpath_var='`$ECHO "X$shlibpath_var" | $Xsed -e "$delay_single_quote_subst"`'
< shlibpath_overrides_runpath='`$ECHO "X$shlibpath_overrides_runpath" | $Xsed -e "$delay_single_quote_subst"`'
< libname_spec='`$ECHO "X$libname_spec" | $Xsed -e "$delay_single_quote_subst"`'
< library_names_spec='`$ECHO "X$library_names_spec" | $Xsed -e "$delay_single_quote_subst"`'
< soname_spec='`$ECHO "X$soname_spec" | $Xsed -e "$delay_single_quote_subst"`'
< postinstall_cmds='`$ECHO "X$postinstall_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< postuninstall_cmds='`$ECHO "X$postuninstall_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< finish_cmds='`$ECHO "X$finish_cmds" | $Xsed -e "$delay_single_quote_subst"`'
< finish_eval='`$ECHO "X$finish_eval" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_into_libs='`$ECHO "X$hardcode_into_libs" | $Xsed -e "$delay_single_quote_subst"`'
< sys_lib_search_path_spec='`$ECHO "X$sys_lib_search_path_spec" | $Xsed -e "$delay_single_quote_subst"`'
< sys_lib_dlsearch_path_spec='`$ECHO "X$sys_lib_dlsearch_path_spec" | $Xsed -e "$delay_single_quote_subst"`'
< hardcode_action='`$ECHO "X$hardcode_action" | $Xsed -e "$delay_single_quote_subst"`'
< enable_dlopen='`$ECHO "X$enable_dlopen" | $Xsed -e "$delay_single_quote_subst"`'
< enable_dlopen_self='`$ECHO "X$enable_dlopen_self" | $Xsed -e "$delay_single_quote_subst"`'
< enable_dlopen_self_static='`$ECHO "X$enable_dlopen_self_static" | $Xsed -e "$delay_single_quote_subst"`'
< old_striplib='`$ECHO "X$old_striplib" | $Xsed -e "$delay_single_quote_subst"`'
< striplib='`$ECHO "X$striplib" | $Xsed -e "$delay_single_quote_subst"`'
---
> macro_version='`$ECHO "$macro_version" | $SED "$delay_single_quote_subst"`'
> macro_revision='`$ECHO "$macro_revision" | $SED "$delay_single_quote_subst"`'
> enable_shared='`$ECHO "$enable_shared" | $SED "$delay_single_quote_subst"`'
> enable_static='`$ECHO "$enable_static" | $SED "$delay_single_quote_subst"`'
> pic_mode='`$ECHO "$pic_mode" | $SED "$delay_single_quote_subst"`'
> enable_fast_install='`$ECHO "$enable_fast_install" | $SED "$delay_single_quote_subst"`'
> SHELL='`$ECHO "$SHELL" | $SED "$delay_single_quote_subst"`'
> ECHO='`$ECHO "$ECHO" | $SED "$delay_single_quote_subst"`'
> host_alias='`$ECHO "$host_alias" | $SED "$delay_single_quote_subst"`'
> host='`$ECHO "$host" | $SED "$delay_single_quote_subst"`'
> host_os='`$ECHO "$host_os" | $SED "$delay_single_quote_subst"`'
> build_alias='`$ECHO "$build_alias" | $SED "$delay_single_quote_subst"`'
> build='`$ECHO "$build" | $SED "$delay_single_quote_subst"`'
> build_os='`$ECHO "$build_os" | $SED "$delay_single_quote_subst"`'
> SED='`$ECHO "$SED" | $SED "$delay_single_quote_subst"`'
> Xsed='`$ECHO "$Xsed" | $SED "$delay_single_quote_subst"`'
> GREP='`$ECHO "$GREP" | $SED "$delay_single_quote_subst"`'
> EGREP='`$ECHO "$EGREP" | $SED "$delay_single_quote_subst"`'
> FGREP='`$ECHO "$FGREP" | $SED "$delay_single_quote_subst"`'
> LD='`$ECHO "$LD" | $SED "$delay_single_quote_subst"`'
> NM='`$ECHO "$NM" | $SED "$delay_single_quote_subst"`'
> LN_S='`$ECHO "$LN_S" | $SED "$delay_single_quote_subst"`'
> max_cmd_len='`$ECHO "$max_cmd_len" | $SED "$delay_single_quote_subst"`'
> ac_objext='`$ECHO "$ac_objext" | $SED "$delay_single_quote_subst"`'
> exeext='`$ECHO "$exeext" | $SED "$delay_single_quote_subst"`'
> lt_unset='`$ECHO "$lt_unset" | $SED "$delay_single_quote_subst"`'
> lt_SP2NL='`$ECHO "$lt_SP2NL" | $SED "$delay_single_quote_subst"`'
> lt_NL2SP='`$ECHO "$lt_NL2SP" | $SED "$delay_single_quote_subst"`'
> lt_cv_to_host_file_cmd='`$ECHO "$lt_cv_to_host_file_cmd" | $SED "$delay_single_quote_subst"`'
> lt_cv_to_tool_file_cmd='`$ECHO "$lt_cv_to_tool_file_cmd" | $SED "$delay_single_quote_subst"`'
> reload_flag='`$ECHO "$reload_flag" | $SED "$delay_single_quote_subst"`'
> reload_cmds='`$ECHO "$reload_cmds" | $SED "$delay_single_quote_subst"`'
> OBJDUMP='`$ECHO "$OBJDUMP" | $SED "$delay_single_quote_subst"`'
> deplibs_check_method='`$ECHO "$deplibs_check_method" | $SED "$delay_single_quote_subst"`'
> file_magic_cmd='`$ECHO "$file_magic_cmd" | $SED "$delay_single_quote_subst"`'
> file_magic_glob='`$ECHO "$file_magic_glob" | $SED "$delay_single_quote_subst"`'
> want_nocaseglob='`$ECHO "$want_nocaseglob" | $SED "$delay_single_quote_subst"`'
> DLLTOOL='`$ECHO "$DLLTOOL" | $SED "$delay_single_quote_subst"`'
> sharedlib_from_linklib_cmd='`$ECHO "$sharedlib_from_linklib_cmd" | $SED "$delay_single_quote_subst"`'
> AR='`$ECHO "$AR" | $SED "$delay_single_quote_subst"`'
> AR_FLAGS='`$ECHO "$AR_FLAGS" | $SED "$delay_single_quote_subst"`'
> archiver_list_spec='`$ECHO "$archiver_list_spec" | $SED "$delay_single_quote_subst"`'
> STRIP='`$ECHO "$STRIP" | $SED "$delay_single_quote_subst"`'
> RANLIB='`$ECHO "$RANLIB" | $SED "$delay_single_quote_subst"`'
> old_postinstall_cmds='`$ECHO "$old_postinstall_cmds" | $SED "$delay_single_quote_subst"`'
> old_postuninstall_cmds='`$ECHO "$old_postuninstall_cmds" | $SED "$delay_single_quote_subst"`'
> old_archive_cmds='`$ECHO "$old_archive_cmds" | $SED "$delay_single_quote_subst"`'
> lock_old_archive_extraction='`$ECHO "$lock_old_archive_extraction" | $SED "$delay_single_quote_subst"`'
> CC='`$ECHO "$CC" | $SED "$delay_single_quote_subst"`'
> CFLAGS='`$ECHO "$CFLAGS" | $SED "$delay_single_quote_subst"`'
> compiler='`$ECHO "$compiler" | $SED "$delay_single_quote_subst"`'
> GCC='`$ECHO "$GCC" | $SED "$delay_single_quote_subst"`'
> lt_cv_sys_global_symbol_pipe='`$ECHO "$lt_cv_sys_global_symbol_pipe" | $SED "$delay_single_quote_subst"`'
> lt_cv_sys_global_symbol_to_cdecl='`$ECHO "$lt_cv_sys_global_symbol_to_cdecl" | $SED "$delay_single_quote_subst"`'
> lt_cv_sys_global_symbol_to_c_name_address='`$ECHO "$lt_cv_sys_global_symbol_to_c_name_address" | $SED "$delay_single_quote_subst"`'
> lt_cv_sys_global_symbol_to_c_name_address_lib_prefix='`$ECHO "$lt_cv_sys_global_symbol_to_c_name_address_lib_prefix" | $SED "$delay_single_quote_subst"`'
> nm_file_list_spec='`$ECHO "$nm_file_list_spec" | $SED "$delay_single_quote_subst"`'
> lt_sysroot='`$ECHO "$lt_sysroot" | $SED "$delay_single_quote_subst"`'
> objdir='`$ECHO "$objdir" | $SED "$delay_single_quote_subst"`'
> MAGIC_CMD='`$ECHO "$MAGIC_CMD" | $SED "$delay_single_quote_subst"`'
> lt_prog_compiler_no_builtin_flag='`$ECHO "$lt_prog_compiler_no_builtin_flag" | $SED "$delay_single_quote_subst"`'
> lt_prog_compiler_pic='`$ECHO "$lt_prog_compiler_pic" | $SED "$delay_single_quote_subst"`'
> lt_prog_compiler_wl='`$ECHO "$lt_prog_compiler_wl" | $SED "$delay_single_quote_subst"`'
> lt_prog_compiler_static='`$ECHO "$lt_prog_compiler_static" | $SED "$delay_single_quote_subst"`'
> lt_cv_prog_compiler_c_o='`$ECHO "$lt_cv_prog_compiler_c_o" | $SED "$delay_single_quote_subst"`'
> need_locks='`$ECHO "$need_locks" | $SED "$delay_single_quote_subst"`'
> MANIFEST_TOOL='`$ECHO "$MANIFEST_TOOL" | $SED "$delay_single_quote_subst"`'
> DSYMUTIL='`$ECHO "$DSYMUTIL" | $SED "$delay_single_quote_subst"`'
> NMEDIT='`$ECHO "$NMEDIT" | $SED "$delay_single_quote_subst"`'
> LIPO='`$ECHO "$LIPO" | $SED "$delay_single_quote_subst"`'
> OTOOL='`$ECHO "$OTOOL" | $SED "$delay_single_quote_subst"`'
> OTOOL64='`$ECHO "$OTOOL64" | $SED "$delay_single_quote_subst"`'
> libext='`$ECHO "$libext" | $SED "$delay_single_quote_subst"`'
> shrext_cmds='`$ECHO "$shrext_cmds" | $SED "$delay_single_quote_subst"`'
> extract_expsyms_cmds='`$ECHO "$extract_expsyms_cmds" | $SED "$delay_single_quote_subst"`'
> archive_cmds_need_lc='`$ECHO "$archive_cmds_need_lc" | $SED "$delay_single_quote_subst"`'
> enable_shared_with_static_runtimes='`$ECHO "$enable_shared_with_static_runtimes" | $SED "$delay_single_quote_subst"`'
> export_dynamic_flag_spec='`$ECHO "$export_dynamic_flag_spec" | $SED "$delay_single_quote_subst"`'
> whole_archive_flag_spec='`$ECHO "$whole_archive_flag_spec" | $SED "$delay_single_quote_subst"`'
> compiler_needs_object='`$ECHO "$compiler_needs_object" | $SED "$delay_single_quote_subst"`'
> old_archive_from_new_cmds='`$ECHO "$old_archive_from_new_cmds" | $SED "$delay_single_quote_subst"`'
> old_archive_from_expsyms_cmds='`$ECHO "$old_archive_from_expsyms_cmds" | $SED "$delay_single_quote_subst"`'
> archive_cmds='`$ECHO "$archive_cmds" | $SED "$delay_single_quote_subst"`'
> archive_expsym_cmds='`$ECHO "$archive_expsym_cmds" | $SED "$delay_single_quote_subst"`'
> module_cmds='`$ECHO "$module_cmds" | $SED "$delay_single_quote_subst"`'
> module_expsym_cmds='`$ECHO "$module_expsym_cmds" | $SED "$delay_single_quote_subst"`'
> with_gnu_ld='`$ECHO "$with_gnu_ld" | $SED "$delay_single_quote_subst"`'
> allow_undefined_flag='`$ECHO "$allow_undefined_flag" | $SED "$delay_single_quote_subst"`'
> no_undefined_flag='`$ECHO "$no_undefined_flag" | $SED "$delay_single_quote_subst"`'
> hardcode_libdir_flag_spec='`$ECHO "$hardcode_libdir_flag_spec" | $SED "$delay_single_quote_subst"`'
> hardcode_libdir_flag_spec_ld='`$ECHO "$hardcode_libdir_flag_spec_ld" | $SED "$delay_single_quote_subst"`'
> hardcode_libdir_separator='`$ECHO "$hardcode_libdir_separator" | $SED "$delay_single_quote_subst"`'
> hardcode_direct='`$ECHO "$hardcode_direct" | $SED "$delay_single_quote_subst"`'
> hardcode_direct_absolute='`$ECHO "$hardcode_direct_absolute" | $SED "$delay_single_quote_subst"`'
> hardcode_minus_L='`$ECHO "$hardcode_minus_L" | $SED "$delay_single_quote_subst"`'
> hardcode_shlibpath_var='`$ECHO "$hardcode_shlibpath_var" | $SED "$delay_single_quote_subst"`'
> hardcode_automatic='`$ECHO "$hardcode_automatic" | $SED "$delay_single_quote_subst"`'
> inherit_rpath='`$ECHO "$inherit_rpath" | $SED "$delay_single_quote_subst"`'
> link_all_deplibs='`$ECHO "$link_all_deplibs" | $SED "$delay_single_quote_subst"`'
> always_export_symbols='`$ECHO "$always_export_symbols" | $SED "$delay_single_quote_subst"`'
> export_symbols_cmds='`$ECHO "$export_symbols_cmds" | $SED "$delay_single_quote_subst"`'
> exclude_expsyms='`$ECHO "$exclude_expsyms" | $SED "$delay_single_quote_subst"`'
> include_expsyms='`$ECHO "$include_expsyms" | $SED "$delay_single_quote_subst"`'
> prelink_cmds='`$ECHO "$prelink_cmds" | $SED "$delay_single_quote_subst"`'
> postlink_cmds='`$ECHO "$postlink_cmds" | $SED "$delay_single_quote_subst"`'
> file_list_spec='`$ECHO "$file_list_spec" | $SED "$delay_single_quote_subst"`'
> variables_saved_for_relink='`$ECHO "$variables_saved_for_relink" | $SED "$delay_single_quote_subst"`'
> need_lib_prefix='`$ECHO "$need_lib_prefix" | $SED "$delay_single_quote_subst"`'
> need_version='`$ECHO "$need_version" | $SED "$delay_single_quote_subst"`'
> version_type='`$ECHO "$version_type" | $SED "$delay_single_quote_subst"`'
> runpath_var='`$ECHO "$runpath_var" | $SED "$delay_single_quote_subst"`'
> shlibpath_var='`$ECHO "$shlibpath_var" | $SED "$delay_single_quote_subst"`'
> shlibpath_overrides_runpath='`$ECHO "$shlibpath_overrides_runpath" | $SED "$delay_single_quote_subst"`'
> libname_spec='`$ECHO "$libname_spec" | $SED "$delay_single_quote_subst"`'
> library_names_spec='`$ECHO "$library_names_spec" | $SED "$delay_single_quote_subst"`'
> soname_spec='`$ECHO "$soname_spec" | $SED "$delay_single_quote_subst"`'
> install_override_mode='`$ECHO "$install_override_mode" | $SED "$delay_single_quote_subst"`'
> postinstall_cmds='`$ECHO "$postinstall_cmds" | $SED "$delay_single_quote_subst"`'
> postuninstall_cmds='`$ECHO "$postuninstall_cmds" | $SED "$delay_single_quote_subst"`'
> finish_cmds='`$ECHO "$finish_cmds" | $SED "$delay_single_quote_subst"`'
> finish_eval='`$ECHO "$finish_eval" | $SED "$delay_single_quote_subst"`'
> hardcode_into_libs='`$ECHO "$hardcode_into_libs" | $SED "$delay_single_quote_subst"`'
> sys_lib_search_path_spec='`$ECHO "$sys_lib_search_path_spec" | $SED "$delay_single_quote_subst"`'
> sys_lib_dlsearch_path_spec='`$ECHO "$sys_lib_dlsearch_path_spec" | $SED "$delay_single_quote_subst"`'
> hardcode_action='`$ECHO "$hardcode_action" | $SED "$delay_single_quote_subst"`'
> enable_dlopen='`$ECHO "$enable_dlopen" | $SED "$delay_single_quote_subst"`'
> enable_dlopen_self='`$ECHO "$enable_dlopen_self" | $SED "$delay_single_quote_subst"`'
> enable_dlopen_self_static='`$ECHO "$enable_dlopen_self_static" | $SED "$delay_single_quote_subst"`'
> old_striplib='`$ECHO "$old_striplib" | $SED "$delay_single_quote_subst"`'
> striplib='`$ECHO "$striplib" | $SED "$delay_single_quote_subst"`'
15634a15496,15503
> # A function that is used when there is no print builtin or printf.
> func_fallback_echo ()
> {
>   eval 'cat <<_LTECHO_EOF
> \$1
> _LTECHO_EOF'
> }
> 
15636c15505,15507
< for var in SED \
---
> for var in SHELL \
> ECHO \
> SED \
15648a15520,15523
> file_magic_glob \
> want_nocaseglob \
> DLLTOOL \
> sharedlib_from_linklib_cmd \
15650a15526
> archiver_list_spec \
15660,15661c15536
< SHELL \
< ECHO \
---
> nm_file_list_spec \
15663d15537
< lt_prog_compiler_wl \
15664a15539
> lt_prog_compiler_wl \
15667a15543
> MANIFEST_TOOL \
15683d15558
< fix_srcfile_path \
15690a15566
> install_override_mode \
15694c15570
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
---
>     case \`eval \\\\\$ECHO \\\\""\\\\\$\$var"\\\\"\` in
15696c15572
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$sed_quote_subst\\"\\\`\\\\\\""
---
>       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"\\\$\$var\\" | \\\$SED \\"\\\$sed_quote_subst\\"\\\`\\\\\\""
15717a15594
> postlink_cmds \
15723c15600
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
---
>     case \`eval \\\\\$ECHO \\\\""\\\\\$\$var"\\\\"\` in
15725c15602
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$double_quote_subst\\" -e \\"\\\$sed_quote_subst\\" -e \\"\\\$delay_variable_subst\\"\\\`\\\\\\""
---
>       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"\\\$\$var\\" | \\\$SED -e \\"\\\$double_quote_subst\\" -e \\"\\\$sed_quote_subst\\" -e \\"\\\$delay_variable_subst\\"\\\`\\\\\\""
15733,15738d15609
< # Fix-up fallback echo if it was mangled by the above quoting rules.
< case \$lt_ECHO in
< *'\\\$0 --fallback-echo"')  lt_ECHO=\`\$ECHO "X\$lt_ECHO" | \$Xsed -e 's/\\\\\\\\\\\\\\\$0 --fallback-echo"\$/\$0 --fallback-echo"/'\`
<   ;;
< esac
< 
15768a15640
>     "buildir") CONFIG_COMMANDS="$CONFIG_COMMANDS buildir" ;;
15781,15783c15653
<   *) { { $as_echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
< $as_echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
<    { (exit 1); exit 1; }; };;
---
>   *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
15807c15677
<   tmp=
---
>   tmp= ac_tmp=
15809c15679,15680
<   { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
---
>   : "${ac_tmp:=$tmp}"
>   { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
15811c15682
<   trap '{ (exit 1); exit 1; }' 1 2 13 15
---
>   trap 'as_fn_exit 1' 1 2 13 15
15817c15688
<   test -n "$tmp" && test -d "$tmp"
---
>   test -d "$tmp"
15822,15826c15693,15694
< } ||
< {
<    $as_echo "$as_me: cannot create a temporary directory in ." >&2
<    { (exit 1); exit 1; }
< }
---
> } || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
> ac_tmp=$tmp
15834c15702,15708
< ac_cr=''
---
> ac_cr=`echo X | tr X '\015'`
> # On cygwin, bash can eat \r inside `` if the user requested igncr.
> # But we know of no other shell where ac_cr would be empty at this
> # point, so we can use a bashism as a fallback.
> if test "x$ac_cr" = x; then
>   eval ac_cr=\$\'\\r\'
> fi
15842c15716
< echo 'BEGIN {' >"$tmp/subs1.awk" &&
---
> echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
15851,15854c15725,15726
<   { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
< $as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
<    { (exit 1); exit 1; }; }
< ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
---
>   as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
> ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
15858,15860c15730
<     { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
< $as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
15866,15868c15736
<     { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
< $as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
15876c15744
< cat >>"\$tmp/subs1.awk" <<\\_ACAWK &&
---
> cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
15890c15758
< s/\(.\{148\}\).*/\1/
---
> s/\(.\{148\}\)..*/\1/
15904c15772
< s/\(.\{148\}\).*/\1/
---
> s/\(.\{148\}\)..*/\1/
15924c15792
< cat >>"\$tmp/subs1.awk" <<_ACAWK &&
---
> cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
15956,15959c15824,15825
< fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
<   || { { $as_echo "$as_me:$LINENO: error: could not setup config files machinery" >&5
< $as_echo "$as_me: error: could not setup config files machinery" >&2;}
<    { (exit 1); exit 1; }; }
---
> fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
>   || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
15962,15963c15828,15829
< # VPATH may cause trouble with some makes, so we remove $(srcdir),
< # ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
---
> # VPATH may cause trouble with some makes, so we remove sole $(srcdir),
> # ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
15967,15971c15833,15841
<   ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
< s/:*\$(srcdir):*/:/
< s/:*\${srcdir}:*/:/
< s/:*@srcdir@:*/:/
< s/^\([^=]*=[	 ]*\):*/\1/
---
>   ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
> h
> s///
> s/^/:/
> s/[	 ]*$/:/
> s/:\$(srcdir):/:/g
> s/:\${srcdir}:/:/g
> s/:@srcdir@:/:/g
> s/^:*//
15972a15843,15846
> x
> s/\(=[	 ]*\).*/\1/
> G
> s/\n//
15984c15858
< cat >"$tmp/defines.awk" <<\_ACAWK ||
---
> cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
15996,15997c15870,15871
<   ac_t=`sed -n "/$ac_delim/p" confdefs.h`
<   if test -z "$ac_t"; then
---
>   ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
>   if test -z "$ac_tt"; then
16000,16002c15874
<     { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_HEADERS" >&5
< $as_echo "$as_me: error: could not make $CONFIG_HEADERS" >&2;}
<    { (exit 1); exit 1; }; }
---
>     as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
16087,16089c15959
<   { { $as_echo "$as_me:$LINENO: error: could not setup config headers machinery" >&5
< $as_echo "$as_me: error: could not setup config headers machinery" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
16102,16104c15972
<   :L* | :C*:*) { { $as_echo "$as_me:$LINENO: error: invalid tag $ac_tag" >&5
< $as_echo "$as_me: error: invalid tag $ac_tag" >&2;}
<    { (exit 1); exit 1; }; };;
---
>   :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
16123c15991
<       -) ac_f="$tmp/stdin";;
---
>       -) ac_f="$ac_tmp/stdin";;
16132,16134c16000
< 	   { { $as_echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
< $as_echo "$as_me: error: cannot find input file: $ac_f" >&2;}
<    { (exit 1); exit 1; }; };;
---
> 	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
16137c16003
<       ac_file_inputs="$ac_file_inputs '$ac_f'"
---
>       as_fn_append ac_file_inputs " '$ac_f'"
16148c16014
<       { $as_echo "$as_me:$LINENO: creating $ac_file" >&5
---
>       { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
16160,16163c16026,16027
<     *:-:* | *:-) cat >"$tmp/stdin" \
<       || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
< $as_echo "$as_me: error: could not create $ac_file" >&2;}
<    { (exit 1); exit 1; }; } ;;
---
>     *:-:* | *:-) cat >"$ac_tmp/stdin" \
>       || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
16191,16231c16055
<   { as_dir="$ac_dir"
<   case $as_dir in #(
<   -*) as_dir=./$as_dir;;
<   esac
<   test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
<     as_dirs=
<     while :; do
<       case $as_dir in #(
<       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
<       *) as_qdir=$as_dir;;
<       esac
<       as_dirs="'$as_qdir' $as_dirs"
<       as_dir=`$as_dirname -- "$as_dir" ||
< $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
< 	 X"$as_dir" : 'X\(//\)[^/]' \| \
< 	 X"$as_dir" : 'X\(//\)$' \| \
< 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
< $as_echo X"$as_dir" |
<     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\/\)[^/].*/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\/\)$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\).*/{
< 	    s//\1/
< 	    q
< 	  }
< 	  s/.*/./; q'`
<       test -d "$as_dir" && break
<     done
<     test -z "$as_dirs" || eval "mkdir $as_dirs"
<   } || test -d "$as_dir" || { { $as_echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
< $as_echo "$as_me: error: cannot create directory $as_dir" >&2;}
<    { (exit 1); exit 1; }; }; }
---
>   as_dir="$ac_dir"; as_fn_mkdir_p
16288d16111
< 
16298,16299c16121
< /@mandir@/p
< '
---
> /@mandir@/p'
16303c16125
<   { $as_echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
16341,16344c16163,16164
< eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
<   || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
< $as_echo "$as_me: error: could not create $ac_file" >&2;}
<    { (exit 1); exit 1; }; }
---
> eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
>   >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
16347,16350c16167,16171
<   { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
<   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
<   { $as_echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
< which seems to be undefined.  Please make sure it is defined." >&5
---
>   { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
>   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
>       "$ac_tmp/out"`; test -z "$ac_out"; } &&
>   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
> which seems to be undefined.  Please make sure it is defined" >&5
16352c16173
< which seems to be undefined.  Please make sure it is defined." >&2;}
---
> which seems to be undefined.  Please make sure it is defined" >&2;}
16354c16175
<   rm -f "$tmp/stdin"
---
>   rm -f "$ac_tmp/stdin"
16356,16357c16177,16178
<   -) cat "$tmp/out" && rm -f "$tmp/out";;
<   *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
---
>   -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
>   *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
16359,16361c16180
<   || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
< $as_echo "$as_me: error: could not create $ac_file" >&2;}
<    { (exit 1); exit 1; }; }
---
>   || as_fn_error $? "could not create $ac_file" "$LINENO" 5
16370,16376c16189,16193
<       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
<     } >"$tmp/config.h" \
<       || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
< $as_echo "$as_me: error: could not create $ac_file" >&2;}
<    { (exit 1); exit 1; }; }
<     if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
<       { $as_echo "$as_me:$LINENO: $ac_file is unchanged" >&5
---
>       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
>     } >"$ac_tmp/config.h" \
>       || as_fn_error $? "could not create $ac_file" "$LINENO" 5
>     if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
>       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
16380,16383c16197,16198
<       mv "$tmp/config.h" "$ac_file" \
< 	|| { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
< $as_echo "$as_me: error: could not create $ac_file" >&2;}
<    { (exit 1); exit 1; }; }
---
>       mv "$ac_tmp/config.h" "$ac_file" \
> 	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
16387,16390c16202,16203
<       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
<       || { { $as_echo "$as_me:$LINENO: error: could not create -" >&5
< $as_echo "$as_me: error: could not create -" >&2;}
<    { (exit 1); exit 1; }; }
---
>       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
>       || as_fn_error $? "could not create -" "$LINENO" 5
16440c16253
<     { $as_echo "$as_me:$LINENO: linking $ac_source to $ac_file" >&5
---
>     { $as_echo "$as_me:${as_lineno-$LINENO}: linking $ac_source to $ac_file" >&5
16444,16446c16257
<       { { $as_echo "$as_me:$LINENO: error: $ac_source: file not found" >&5
< $as_echo "$as_me: error: $ac_source: file not found" >&2;}
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "$ac_source: file not found" "$LINENO" 5
16451c16262
<     case $srcdir in
---
>     case $ac_source in
16458,16460c16269
<       { { $as_echo "$as_me:$LINENO: error: cannot link or copy $ac_source to $ac_file" >&5
< $as_echo "$as_me: error: cannot link or copy $ac_source to $ac_file" >&2;}
<    { (exit 1); exit 1; }; }
---
>       as_fn_error $? "cannot link or copy $ac_source to $ac_file" "$LINENO" 5
16463c16272
<   :C)  { $as_echo "$as_me:$LINENO: executing $ac_file commands" >&5
---
>   :C)  { $as_echo "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
16469a16279,16422
>     "buildir":C)   ac_top_srcdir="$ax_enable_builddir_srcdir"
>   if test ".$ax_enable_builddir" = ".." ; then
>     if test -f "$top_srcdir/Makefile" ; then
>       { $as_echo "$as_me:${as_lineno-$LINENO}: skipping top_srcdir/Makefile - left untouched" >&5
> $as_echo "$as_me: skipping top_srcdir/Makefile - left untouched" >&6;}
>     else
>       { $as_echo "$as_me:${as_lineno-$LINENO}: skipping top_srcdir/Makefile - not created" >&5
> $as_echo "$as_me: skipping top_srcdir/Makefile - not created" >&6;}
>     fi
>   else
>     if test -f "$ac_top_srcdir/Makefile" ; then
>       a=`grep "^VERSION " "$ac_top_srcdir/Makefile"` ; b=`grep "^VERSION " Makefile`
>       test "$a" != "$b" && rm "$ac_top_srcdir/Makefile"
>     fi
>     if test -f "$ac_top_srcdir/Makefile" ; then
> 	echo "$ac_top_srcdir/Makefile : $ac_top_srcdir/Makefile.in" > $tmp/conftemp.mk
> 	echo "	@ echo 'REMOVED,,,' >\$@" >> $tmp/conftemp.mk
>       eval "${MAKE-make} -f $tmp/conftemp.mk 2>/dev/null >/dev/null"
>       if grep '^REMOVED,,,' "$ac_top_srcdir/Makefile" >/dev/null
>       then rm $ac_top_srcdir/Makefile ; fi
>       cp $tmp/conftemp.mk $ac_top_srcdir/makefiles.mk~      ## DEBUGGING
>     fi
>     if test ! -f "$ac_top_srcdir/Makefile" ; then
>       { $as_echo "$as_me:${as_lineno-$LINENO}: create top_srcdir/Makefile guessed from local Makefile" >&5
> $as_echo "$as_me: create top_srcdir/Makefile guessed from local Makefile" >&6;}
>       x='`' ; cat >$tmp/conftemp.sed <<_EOF
> /^\$/n
> x
> /^\$/bS
> x
> /\\\\\$/{H;d;}
> {H;s/.*//;x;}
> bM
> :S
> x
> /\\\\\$/{h;d;}
> {h;s/.*//;x;}
> :M
> s/\\(\\n\\)	/\\1 /g
> /^	/d
> /^[	 ]*[\\#]/d
> /^VPATH *=/d
> s/^srcdir *=.*/srcdir = ./
> s/^top_srcdir *=.*/top_srcdir = ./
> /[:=]/!d
> /^\\./d
> / = /b
> / .= /b
> /:/!b
> s/:.*/:/
> s/ /  /g
> s/ \\([a-z][a-z-]*[a-zA-Z0-9]\\)\\([ :]\\)/ \\1 \\1-all\\2/g
> s/^\\([a-z][a-z-]*[a-zA-Z0-9]\\)\\([ :]\\)/\\1 \\1-all\\2/
> s/  / /g
> /^all all-all[ :]/i\\
> all-configured : all-all
> s/ [a-zA-Z0-9-]*-all [a-zA-Z0-9-]*-all-all//g
> /-all-all/d
> a\\
> 	@ HOST="\$(HOST)\" \\\\\\
> 	; test ".\$\$HOST" = "." && HOST=$x sh $ax_enable_builddir_auxdir/config.guess $x \\\\\\
> 	; BUILD=$x grep "^#### \$\$HOST " Makefile | sed -e 's/.*|//' $x \\\\\\
> 	; use=$x basename "\$\@" -all $x; n=$x echo \$\$BUILD | wc -w $x \\\\\\
> 	; echo "MAKE \$\$HOST : \$\$n * \$\@"; if test "\$\$n" = "0" ; then : \\\\\\
> 	; BUILD=$x grep "^####.*|" Makefile |tail -1| sed -e 's/.*|//' $x ; fi \\\\\\
> 	; test ".\$\$BUILD" = "." && BUILD="." \\\\\\
> 	; test "\$\$use" = "\$\@" && BUILD=$x echo "\$\$BUILD" | tail -1 $x \\\\\\
> 	; for i in \$\$BUILD ; do test ".\$\$i" = "." && continue \\\\\\
> 	; (cd "\$\$i" && test ! -f configure && \$(MAKE) \$\$use) || exit; done
> /dist-all *:/a\\
> 	@ HOST="\$(HOST)\" \\\\\\
> 	; test ".\$\$HOST" = "." && HOST=$x sh $ax_enable_builddir_auxdir/config.guess $x \\\\\\
> 	; BUILD=$x grep "^#### \$\$HOST " Makefile | sed -e 's/.*|//' $x \\\\\\
> 	; found=$x echo \$\$BUILD | wc -w $x \\\\\\
> 	; echo "MAKE \$\$HOST : \$\$found \$(PACKAGE)-\$(VERSION).tar.*" \\\\\\
> 	; if test "\$\$found" = "0" ; then : \\\\\\
> 	; BUILD=$x grep "^#### .*|" Makefile |tail -1| sed -e 's/.*|//' $x \\\\\\
> 	; fi ; for i in \$\$BUILD ; do test ".\$\$i" = "." && continue \\\\\\
> 	; for f in \$\$i/\$(PACKAGE)-\$(VERSION).tar.* \\\\\\
> 	; do test -f "\$\$f" && mv "\$\$f" \$(PUB). ; done ; break ; done
> /dist-[a-zA-Z0-9]*-all *:/a\\
> 	@ HOST="\$(HOST)\" \\\\\\
> 	; test ".\$\$HOST" = "." && HOST=$x sh ./config.guess $x \\\\\\
> 	; BUILD=$x grep "^#### \$\$HOST " Makefile | sed -e 's/.*|//' $x \\\\\\
> 	; found=$x echo \$\$BUILD | wc -w $x \\\\\\
> 	; echo "MAKE \$\$HOST : \$\$found \$(PACKAGE)-\$(VERSION).*" \\\\\\
> 	; if test "\$\$found" = "0" ; then : \\\\\\
> 	; BUILD=$x grep "^#### .*|" Makefile |tail -1| sed -e 's/.*|//' $x \\\\\\
> 	; fi ; for i in \$\$BUILD ; do test ".\$\$i" = "." && continue \\\\\\
> 	; for f in \$\$i/\$(PACKAGE)-\$(VERSION).* \\\\\\
> 	; do test -f "\$\$f" && mv "\$\$f" \$(PUB). ; done ; break ; done
> /distclean-all *:/a\\
> 	@ HOST="\$(HOST)\" \\\\\\
> 	; test ".\$\$HOST" = "." && HOST=$x sh $ax_enable_builddir_auxdir/config.guess $x \\\\\\
> 	; BUILD=$x grep "^#### .*|" Makefile | sed -e 's/.*|//' $x \\\\\\
> 	; use=$x basename "\$\@" -all $x; n=$x echo \$\$BUILD | wc -w $x \\\\\\
> 	; echo "MAKE \$\$HOST : \$\$n * \$\@ (all local builds)" \\\\\\
> 	; test ".\$\$BUILD" = "." && BUILD="." \\\\\\
> 	; for i in \$\$BUILD ; do test ".\$\$i" = "." && continue \\\\\\
> 	; echo "# rm -r \$\$i"; done ; echo "# (sleep 3)" ; sleep 3 \\\\\\
> 	; for i in \$\$BUILD ; do test ".\$\$i" = "." && continue \\\\\\
> 	; echo "\$\$i" | grep "^/" > /dev/null && continue \\\\\\
> 	; echo "\$\$i" | grep "^../" > /dev/null && continue \\\\\\
> 	; echo "rm -r \$\$i"; (rm -r "\$\$i") ; done ; rm Makefile
> _EOF
>       cp "$tmp/conftemp.sed" "$ac_top_srcdir/makefile.sed~"            ## DEBUGGING
>       $ax_enable_builddir_sed -f $tmp/conftemp.sed Makefile >$ac_top_srcdir/Makefile
>       if test -f "$ac_top_srcdir/Makefile.mk" ; then
>         { $as_echo "$as_me:${as_lineno-$LINENO}: extend top_srcdir/Makefile with top_srcdir/Makefile.mk" >&5
> $as_echo "$as_me: extend top_srcdir/Makefile with top_srcdir/Makefile.mk" >&6;}
>         cat $ac_top_srcdir/Makefile.mk >>$ac_top_srcdir/Makefile
>       fi ; xxxx="####"
>       echo "$xxxx CONFIGURATIONS FOR TOPLEVEL MAKEFILE: " >>$ac_top_srcdir/Makefile
>       # sanity check
>       if grep '^; echo "MAKE ' $ac_top_srcdir/Makefile >/dev/null ; then
>         { $as_echo "$as_me:${as_lineno-$LINENO}: buggy sed found - it deletes tab in \"a\" text parts" >&5
> $as_echo "$as_me: buggy sed found - it deletes tab in \"a\" text parts" >&6;}
>         $ax_enable_builddir_sed -e '/^@ HOST=/s/^/	/' -e '/^; /s/^/	/' $ac_top_srcdir/Makefile \
>           >$ac_top_srcdir/Makefile~
>         (test -s $ac_top_srcdir/Makefile~ && mv $ac_top_srcdir/Makefile~ $ac_top_srcdir/Makefile) 2>/dev/null
>       fi
>     else
>       xxxx="\\#\\#\\#\\#"
>       # echo "/^$xxxx *$ax_enable_builddir_host /d" >$tmp/conftemp.sed
>       echo "s!^$xxxx [^|]* | *$ax_enable_builddir *\$!$xxxx ...... $ax_enable_builddir!" >$tmp/conftemp.sed
>       $ax_enable_builddir_sed -f "$tmp/conftemp.sed" "$ac_top_srcdir/Makefile" >$tmp/mkfile.tmp
>         cp "$tmp/conftemp.sed" "$ac_top_srcdir/makefiles.sed~"         ## DEBUGGING
>         cp "$tmp/mkfile.tmp"   "$ac_top_srcdir/makefiles.out~"         ## DEBUGGING
>       if cmp -s "$ac_top_srcdir/Makefile" "$tmp/mkfile.tmp" 2>/dev/null ; then
>         { $as_echo "$as_me:${as_lineno-$LINENO}: keeping top_srcdir/Makefile from earlier configure" >&5
> $as_echo "$as_me: keeping top_srcdir/Makefile from earlier configure" >&6;}
>         rm "$tmp/mkfile.tmp"
>       else
>         { $as_echo "$as_me:${as_lineno-$LINENO}: reusing top_srcdir/Makefile from earlier configure" >&5
> $as_echo "$as_me: reusing top_srcdir/Makefile from earlier configure" >&6;}
>         mv "$tmp/mkfile.tmp" "$ac_top_srcdir/Makefile"
>       fi
>     fi
>     { $as_echo "$as_me:${as_lineno-$LINENO}: build in $ax_enable_builddir (HOST=$ax_enable_builddir_host)" >&5
> $as_echo "$as_me: build in $ax_enable_builddir (HOST=$ax_enable_builddir_host)" >&6;}
>     xxxx="####"
>     echo "$xxxx" "$ax_enable_builddir_host" "|$ax_enable_builddir" >>$ac_top_srcdir/Makefile
>   fi
>  ;;
16558,16598c16511
<       { as_dir=$dirpart/$fdir
<   case $as_dir in #(
<   -*) as_dir=./$as_dir;;
<   esac
<   test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
<     as_dirs=
<     while :; do
<       case $as_dir in #(
<       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
<       *) as_qdir=$as_dir;;
<       esac
<       as_dirs="'$as_qdir' $as_dirs"
<       as_dir=`$as_dirname -- "$as_dir" ||
< $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
< 	 X"$as_dir" : 'X\(//\)[^/]' \| \
< 	 X"$as_dir" : 'X\(//\)$' \| \
< 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
< $as_echo X"$as_dir" |
<     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\/\)[^/].*/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\/\)$/{
< 	    s//\1/
< 	    q
< 	  }
< 	  /^X\(\/\).*/{
< 	    s//\1/
< 	    q
< 	  }
< 	  s/.*/./; q'`
<       test -d "$as_dir" && break
<     done
<     test -z "$as_dirs" || eval "mkdir $as_dirs"
<   } || test -d "$as_dir" || { { $as_echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
< $as_echo "$as_me: error: cannot create directory $as_dir" >&2;}
<    { (exit 1); exit 1; }; }; }
---
>       as_dir=$dirpart/$fdir; as_fn_mkdir_p
16626c16539,16540
< #                 2006, 2007, 2008 Free Software Foundation, Inc.
---
> #                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,
> #                 Inc.
16673a16588,16593
> # Shell to use when invoking shell scripts.
> SHELL=$lt_SHELL
> 
> # An echo program that protects backslashes.
> ECHO=$lt_ECHO
> 
16723,16725c16643,16647
< # How to create reloadable object files.
< reload_flag=$lt_reload_flag
< reload_cmds=$lt_reload_cmds
---
> # convert \$build file names to \$host format.
> to_host_file_cmd=$lt_cv_to_host_file_cmd
> 
> # convert \$build files to toolchain format.
> to_tool_file_cmd=$lt_cv_to_tool_file_cmd
16733c16655
< # Command to use when deplibs_check_method == "file_magic".
---
> # Command to use when deplibs_check_method = "file_magic".
16735a16658,16669
> # How to find potential files when deplibs_check_method = "file_magic".
> file_magic_glob=$lt_file_magic_glob
> 
> # Find potential files using nocaseglob when deplibs_check_method = "file_magic".
> want_nocaseglob=$lt_want_nocaseglob
> 
> # DLL creation program.
> DLLTOOL=$lt_DLLTOOL
> 
> # Command to associate shared and link libraries.
> sharedlib_from_linklib_cmd=$lt_sharedlib_from_linklib_cmd
> 
16737a16672,16673
> 
> # Flags to create an archive.
16739a16676,16678
> # How to feed a file listing to the archiver.
> archiver_list_spec=$lt_archiver_list_spec
> 
16747a16687,16689
> # Whether to use a lock for old archive extraction.
> lock_old_archive_extraction=$lock_old_archive_extraction
> 
16766,16767c16708,16709
< # The name of the directory that contains temporary libtool files.
< objdir=$objdir
---
> # Specify filename containing input files for \$NM.
> nm_file_list_spec=$lt_nm_file_list_spec
16769,16770c16711,16712
< # Shell to use when invoking shell scripts.
< SHELL=$lt_SHELL
---
> # The root where to search for dependent libraries,and in which our libraries should be installed.
> lt_sysroot=$lt_sysroot
16772,16773c16714,16715
< # An echo program that does not interpret backslashes.
< ECHO=$lt_ECHO
---
> # The name of the directory that contains temporary libtool files.
> objdir=$objdir
16780a16723,16725
> # Manifest tool.
> MANIFEST_TOOL=$lt_MANIFEST_TOOL
> 
16836a16782,16784
> # Permission mode override for installation of shared libraries.
> install_override_mode=$lt_install_override_mode
> 
16875a16824,16827
> # How to create reloadable object files.
> reload_flag=$lt_reload_flag
> reload_cmds=$lt_reload_cmds
> 
16888,16890d16839
< # How to pass a linker flag through the compiler.
< wl=$lt_lt_prog_compiler_wl
< 
16893a16843,16845
> # How to pass a linker flag through the compiler.
> wl=$lt_lt_prog_compiler_wl
> 
16980,16982d16931
< # Fix the shell variable \$srcfile for the compiler.
< fix_srcfile_path=$lt_fix_srcfile_path
< 
16997a16947,16949
> # Commands necessary for finishing linking programs.
> postlink_cmds=$lt_postlink_cmds
> 
17030c16982
<   sed '/^# Generated shell functions inserted here/q' "$ltmain" >> "$cfgfile" \
---
>   sed '$q' "$ltmain" >> "$cfgfile" \
17033,17139c16985,17140
<   case $xsi_shell in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
<   case ${1} in
<     */*) func_dirname_result="${1%/*}${2}" ;;
<     *  ) func_dirname_result="${3}" ;;
<   esac
< }
< 
< # func_basename file
< func_basename ()
< {
<   func_basename_result="${1##*/}"
< }
< 
< # func_dirname_and_basename file append nondir_replacement
< # perform func_basename and func_dirname in a single function
< # call:
< #   dirname:  Compute the dirname of FILE.  If nonempty,
< #             add APPEND to the result, otherwise set result
< #             to NONDIR_REPLACEMENT.
< #             value returned in "$func_dirname_result"
< #   basename: Compute filename of FILE.
< #             value retuned in "$func_basename_result"
< # Implementation must be kept synchronized with func_dirname
< # and func_basename. For efficiency, we do not delegate to
< # those functions but instead duplicate the functionality here.
< func_dirname_and_basename ()
< {
<   case ${1} in
<     */*) func_dirname_result="${1%/*}${2}" ;;
<     *  ) func_dirname_result="${3}" ;;
<   esac
<   func_basename_result="${1##*/}"
< }
< 
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< func_stripname ()
< {
<   # pdksh 5.2.14 does not do ${X%$Y} correctly if both X and Y are
<   # positional parameters, so assign one to ordinary parameter first.
<   func_stripname_result=${3}
<   func_stripname_result=${func_stripname_result#"${1}"}
<   func_stripname_result=${func_stripname_result%"${2}"}
< }
< 
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=${1%%=*}
<   func_opt_split_arg=${1#*=}
< }
< 
< # func_lo2o object
< func_lo2o ()
< {
<   case ${1} in
<     *.lo) func_lo2o_result=${1%.lo}.${objext} ;;
<     *)    func_lo2o_result=${1} ;;
<   esac
< }
< 
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=${1%.*}.lo
< }
< 
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=$(( $* ))
< }
< 
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=${#1}
< }
< 
< _LT_EOF
<     ;;
<   *) # Bourne compatible functions.
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
<   # Extract subdirectory from the argument.
<   func_dirname_result=`$ECHO "X${1}" | $Xsed -e "$dirname"`
<   if test "X$func_dirname_result" = "X${1}"; then
<     func_dirname_result="${3}"
<   else
<     func_dirname_result="$func_dirname_result${2}"
---
>   if test x"$xsi_shell" = xyes; then
>   sed -e '/^func_dirname ()$/,/^} # func_dirname /c\
> func_dirname ()\
> {\
> \    case ${1} in\
> \      */*) func_dirname_result="${1%/*}${2}" ;;\
> \      *  ) func_dirname_result="${3}" ;;\
> \    esac\
> } # Extended-shell func_dirname implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_basename ()$/,/^} # func_basename /c\
> func_basename ()\
> {\
> \    func_basename_result="${1##*/}"\
> } # Extended-shell func_basename implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_dirname_and_basename ()$/,/^} # func_dirname_and_basename /c\
> func_dirname_and_basename ()\
> {\
> \    case ${1} in\
> \      */*) func_dirname_result="${1%/*}${2}" ;;\
> \      *  ) func_dirname_result="${3}" ;;\
> \    esac\
> \    func_basename_result="${1##*/}"\
> } # Extended-shell func_dirname_and_basename implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_stripname ()$/,/^} # func_stripname /c\
> func_stripname ()\
> {\
> \    # pdksh 5.2.14 does not do ${X%$Y} correctly if both X and Y are\
> \    # positional parameters, so assign one to ordinary parameter first.\
> \    func_stripname_result=${3}\
> \    func_stripname_result=${func_stripname_result#"${1}"}\
> \    func_stripname_result=${func_stripname_result%"${2}"}\
> } # Extended-shell func_stripname implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_split_long_opt ()$/,/^} # func_split_long_opt /c\
> func_split_long_opt ()\
> {\
> \    func_split_long_opt_name=${1%%=*}\
> \    func_split_long_opt_arg=${1#*=}\
> } # Extended-shell func_split_long_opt implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_split_short_opt ()$/,/^} # func_split_short_opt /c\
> func_split_short_opt ()\
> {\
> \    func_split_short_opt_arg=${1#??}\
> \    func_split_short_opt_name=${1%"$func_split_short_opt_arg"}\
> } # Extended-shell func_split_short_opt implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_lo2o ()$/,/^} # func_lo2o /c\
> func_lo2o ()\
> {\
> \    case ${1} in\
> \      *.lo) func_lo2o_result=${1%.lo}.${objext} ;;\
> \      *)    func_lo2o_result=${1} ;;\
> \    esac\
> } # Extended-shell func_lo2o implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_xform ()$/,/^} # func_xform /c\
> func_xform ()\
> {\
>     func_xform_result=${1%.*}.lo\
> } # Extended-shell func_xform implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_arith ()$/,/^} # func_arith /c\
> func_arith ()\
> {\
>     func_arith_result=$(( $* ))\
> } # Extended-shell func_arith implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_len ()$/,/^} # func_len /c\
> func_len ()\
> {\
>     func_len_result=${#1}\
> } # Extended-shell func_len implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> fi
> 
> if test x"$lt_shell_append" = xyes; then
>   sed -e '/^func_append ()$/,/^} # func_append /c\
> func_append ()\
> {\
>     eval "${1}+=\\${2}"\
> } # Extended-shell func_append implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   sed -e '/^func_append_quoted ()$/,/^} # func_append_quoted /c\
> func_append_quoted ()\
> {\
> \    func_quote_for_eval "${2}"\
> \    eval "${1}+=\\\\ \\$func_quote_for_eval_result"\
> } # Extended-shell func_append_quoted implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> 
> 
>   # Save a `func_append' function call where possible by direct use of '+='
>   sed -e 's%func_append \([a-zA-Z_]\{1,\}\) "%\1+="%g' $cfgfile > $cfgfile.tmp \
>     && mv -f "$cfgfile.tmp" "$cfgfile" \
>       || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
>   test 0 -eq $? || _lt_function_replace_fail=:
> else
>   # Save a `func_append' function call even when '+=' is not available
>   sed -e 's%func_append \([a-zA-Z_]\{1,\}\) "%\1="$\1%g' $cfgfile > $cfgfile.tmp \
>     && mv -f "$cfgfile.tmp" "$cfgfile" \
>       || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
>   test 0 -eq $? || _lt_function_replace_fail=:
> fi
> 
> if test x"$_lt_function_replace_fail" = x":"; then
>   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Unable to substitute extended shell functions in $ofile" >&5
> $as_echo "$as_me: WARNING: Unable to substitute extended shell functions in $ofile" >&2;}
17141,17207d17141
< }
< 
< # func_basename file
< func_basename ()
< {
<   func_basename_result=`$ECHO "X${1}" | $Xsed -e "$basename"`
< }
< 
< 
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< # func_strip_suffix prefix name
< func_stripname ()
< {
<   case ${2} in
<     .*) func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%\\\\${2}\$%%"`;;
<     *)  func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%${2}\$%%"`;;
<   esac
< }
< 
< # sed scripts:
< my_sed_long_opt='1s/^\(-[^=]*\)=.*/\1/;q'
< my_sed_long_arg='1s/^-[^=]*=//'
< 
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_opt"`
<   func_opt_split_arg=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_arg"`
< }
< 
< # func_lo2o object
< func_lo2o ()
< {
<   func_lo2o_result=`$ECHO "X${1}" | $Xsed -e "$lo2o"`
< }
< 
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=`$ECHO "X${1}" | $Xsed -e 's/\.[^.]*$/.lo/'`
< }
< 
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=`expr "$@"`
< }
< 
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=`expr "$1" : ".*" 2>/dev/null || echo $max_cmd_len`
< }
< 
< _LT_EOF
< esac
< 
< case $lt_shell_append in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
17209,17233d17142
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$1+=\$2"
< }
< _LT_EOF
<     ;;
<   *)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$1=\$$1\$2"
< }
< 
< _LT_EOF
<     ;;
<   esac
< 
< 
<   sed -n '/^# Generated shell functions inserted here/,$p' "$ltmain" >> "$cfgfile" \
<     || (rm -f "$cfgfile"; exit 1)
17250c17159
< { (exit 0); exit 0; }
---
> as_fn_exit 0
17252d17160
< chmod +x $CONFIG_STATUS
17256,17258c17164
<   { { $as_echo "$as_me:$LINENO: error: write failure creating $CONFIG_STATUS" >&5
< $as_echo "$as_me: error: write failure creating $CONFIG_STATUS" >&2;}
<    { (exit 1); exit 1; }; }
---
>   as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
17279c17185
<   $ac_cs_success || { (exit 1); exit 1; }
---
>   $ac_cs_success || as_fn_exit 1
17282c17188
<   { $as_echo "$as_me:$LINENO: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
---
>   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
diff -rbw libffi.old/configure.ac libffi/configure.ac
5c5
< AC_INIT([libffi], [3.0.10rc0], [http://gcc.gnu.org/bugs.html])
---
> AC_INIT([libffi], [3.0.10rc8], [http://sourceware.org/libffi.html])
12a13,14
> AX_ENABLE_BUILDDIR
> 
18a21,22
> # Also save and restore CFLAGS, since AC_PROG_CC will come up with
> # defaults of its own if none are provided.
21a26
> save_CFLAGS=$CFLAGS
22a28
> CFLAGS=$save_CFLAGS
32a39,44
> AX_CC_MAXOPT
> AX_CFLAGS_WARN_ALL
> if test "x$GCC" = "xyes"; then
>   CFLAGS="$CFLAGS -fexceptions"
> fi
> 
46c58
< 	# Support 128-bit long double, changable via command-line switch.
---
> 	# Support 128-bit long double, changeable via command-line switch.
87c99
<   i?86-win32* | i?86-*-cygwin* | i?86-*-mingw*)
---
>   i?86-win32* | i?86-*-cygwin* | i?86-*-mingw* | i?86-*-os2* | i?86-*-interix*)
89,90c101,109
< 	# All mingw/cygwin/win32 builds require this for sharedlib
< 	AM_LTLDFLAGS="-no-undefined"
---
> 	# All mingw/cygwin/win32 builds require -no-undefined for sharedlib.
> 	# We must also check with_cross_host to decide if this is a native
> 	# or cross-build and select where to install dlls appropriately.
> 	if test -n "$with_cross_host" &&
> 	   test x"$with_cross_host" != x"no"; then
> 	  AM_LTLDFLAGS='-no-undefined -bindir "$(toolexeclibdir)"';
> 	else
> 	  AM_LTLDFLAGS='-no-undefined -bindir "$(bindir)"';
> 	fi
114c133
<   mips-sgi-irix5.* | mips-sgi-irix6.*)
---
>   mips-sgi-irix5.* | mips-sgi-irix6.* | mips*-*-rtems*)
129c148
<   powerpc-*-darwin*)
---
>   powerpc-*-darwin* | powerpc64-*-darwin*)
137a157,159
>   powerpc64-*-freebsd*)
> 	TARGET=POWERPC; TARGETDIR=powerpc
> 	;;
187a210
> AM_CONDITIONAL(MOXIE, test x$TARGET = xMOXIE)
271,273d293
< 	libffi_cv_as_x86_pcrel=yes
< 	echo '.text; foo: nop; .data; .long foo-.; .text' > conftest.s
< 	if $CC $CFLAGS -c conftest.s 2>&1 | grep -i warning > /dev/null; then
274a295,297
> 	echo '.text; foo: nop; .data; .long foo-.; .text' > conftest.s
> 	if $CC $CFLAGS -c conftest.s > /dev/null; then
> 	   libffi_cv_as_x86_pcrel=yes
280a304,329
> 
>     AC_CACHE_CHECK([assembler .ascii pseudo-op support],
>        libffi_cv_as_ascii_pseudo_op, [
>        libffi_cv_as_ascii_pseudo_op=unknown
>        # Check if we have .ascii
>        AC_TRY_COMPILE([asm (".ascii \\"string\\"");],,
> 		       [libffi_cv_as_ascii_pseudo_op=yes],
> 		       [libffi_cv_as_ascii_pseudo_op=no])
>     ])
>     if test "x$libffi_cv_as_ascii_pseudo_op" = xyes; then
>        AC_DEFINE(HAVE_AS_ASCII_PSEUDO_OP, 1,
> 	       [Define if your assembler supports .ascii.])
>     fi
> 
>     AC_CACHE_CHECK([assembler .string pseudo-op support],
>        libffi_cv_as_string_pseudo_op, [
>        libffi_cv_as_string_pseudo_op=unknown
>        # Check if we have .string
>        AC_TRY_COMPILE([asm (".string \\"string\\"");],,
> 		       [libffi_cv_as_string_pseudo_op=yes],
> 		       [libffi_cv_as_string_pseudo_op=no])
>     ])
>     if test "x$libffi_cv_as_string_pseudo_op" = xyes; then
>        AC_DEFINE(HAVE_AS_STRING_PSEUDO_OP, 1,
> 	       [Define if your assembler supports .string.])
>     fi
282a332,340
> if test x$TARGET = xX86_WIN64; then
>     LT_SYS_SYMBOL_USCORE
>     if test "x$sys_symbol_underscore" = xyes; then
>         AC_DEFINE(SYMBOL_UNDERSCORE, 1, [Define if symbols are underscored.])
>     fi
> fi
> 
> 
> FFI_EXEC_TRAMPOLINE_TABLE=0
283a342,347
>      *arm*-apple-darwin*)
>        FFI_EXEC_TRAMPOLINE_TABLE=1
>        AC_DEFINE(FFI_EXEC_TRAMPOLINE_TABLE, 1,
>                  [Cannot use PROT_EXEC on this target, so, we revert to
>                    alternative means])
>      ;;
289a354,355
> AM_CONDITIONAL(FFI_EXEC_TRAMPOLINE_TABLE, test x$FFI_EXEC_TRAMPOLINE_TABLE = x1)
> AC_SUBST(FFI_EXEC_TRAMPOLINE_TABLE)
290a357,372
> if test x$TARGET = xX86_64; then
>     AC_CACHE_CHECK([assembler supports unwind section type],
> 	libffi_cv_as_x86_64_unwind_section_type, [
> 	libffi_cv_as_x86_64_unwind_section_type=yes
> 	echo '.section .eh_frame,"a",@unwind' > conftest.s
> 	if $CC $CFLAGS -c conftest.s 2>&1 | grep -i warning > /dev/null; then
> 	    libffi_cv_as_x86_64_unwind_section_type=no
> 	fi
> 	])
>     if test "x$libffi_cv_as_x86_64_unwind_section_type" = xyes; then
> 	AC_DEFINE(HAVE_AS_X86_64_UNWIND_SECTION_TYPE, 1,
> 		  [Define if your assembler supports unwind section type.])
>     fi
> fi
> 
> if test "x$GCC" = "xyes"; then
329a412
> fi
356a440
> AM_CONDITIONAL(FFI_DEBUG, test "$enable_debug" = "yes")
375a460,462
> # These variables are only ever used when we cross-build to X86_WIN32.
> # And we only support this with GCC, so...
> if test x"$GCC" != x"no"; then
390a478
> fi
Only in libffi.old/doc: .svn
diff -rbw libffi.old/doc/libffi.info libffi/doc/libffi.info
1,2c1,2
< This is ../libffi/doc/libffi.info, produced by makeinfo version 4.13
< from ../libffi/doc/libffi.texi.
---
> This is /home/green/libffi/doc/libffi.info, produced by makeinfo
> version 4.13 from /home/green/libffi/doc/libffi.texi.
150c150,152
<      AVALUES is ignored.
---
>      AVALUES is ignored.  Note that argument values may be modified by
>      the callee (for instance, structs passed by value); the burden of
>      copying pass-by-value arguments is placed on the caller.
540c542
< * ffi_closure_alloca:                    The Closure API.      (line 19)
---
> * ffi_closure_alloc:                     The Closure API.      (line 19)
576,589c578,591
< Node: Top706
< Node: Introduction1448
< Node: Using libffi3084
< Node: The Basics3570
< Node: Simple Example6177
< Node: Types7204
< Node: Primitive Types7487
< Node: Structures9307
< Node: Type Example10167
< Node: Multiple ABIs11390
< Node: The Closure API11761
< Node: Closure Example14705
< Node: Missing Features16264
< Node: Index16757
---
> Node: Top724
> Node: Introduction1466
> Node: Using libffi3102
> Node: The Basics3588
> Node: Simple Example6374
> Node: Types7401
> Node: Primitive Types7684
> Node: Structures9504
> Node: Type Example10364
> Node: Multiple ABIs11587
> Node: The Closure API11958
> Node: Closure Example14902
> Node: Missing Features16461
> Node: Index16954
diff -rbw libffi.old/doc/libffi.texi libffi/doc/libffi.texi
174c174,176
< then @var{avalues} is ignored.
---
> then @var{avalues} is ignored.  Note that argument values may be
> modified by the callee (for instance, structs passed by value); the
> burden of copying pass-by-value arguments is placed on the caller.
441c443
< @findex ffi_closure_alloca
---
> @findex ffi_closure_alloc
diff -rbw libffi.old/doc/stamp-vti libffi/doc/stamp-vti
1,4c1,4
< @set UPDATED 14 February 2008
< @set UPDATED-MONTH February 2008
< @set EDITION 3.0.8
< @set VERSION 3.0.8
---
> @set UPDATED 25 February 2011
> @set UPDATED-MONTH February 2011
> @set EDITION 3.0.10rc8
> @set VERSION 3.0.10rc8
diff -rbw libffi.old/doc/version.texi libffi/doc/version.texi
1,4c1,4
< @set UPDATED 14 February 2008
< @set UPDATED-MONTH February 2008
< @set EDITION 3.0.8
< @set VERSION 3.0.8
---
> @set UPDATED 25 February 2011
> @set UPDATED-MONTH February 2011
> @set EDITION 3.0.10rc8
> @set VERSION 3.0.10rc8
diff -rbw libffi.old/fficonfig.h.in libffi/fficonfig.h.in
19a20,22
> /* Cannot use PROT_EXEC on this target, so, we revert to alternative means */
> #undef FFI_EXEC_TRAMPOLINE_TABLE
> 
35a39,41
> /* Define if your assembler supports .ascii. */
> #undef HAVE_AS_ASCII_PSEUDO_OP
> 
45a52,57
> /* Define if your assembler supports .string. */
> #undef HAVE_AS_STRING_PSEUDO_OP
> 
> /* Define if your assembler supports unwind section type. */
> #undef HAVE_AS_X86_64_UNWIND_SECTION_TYPE
> 
150a163,165
> /* Define if symbols are underscored. */
> #undef SYMBOL_UNDERSCORE
> 
169a185,187
> /* Define to `unsigned int' if <sys/types.h> does not define. */
> #undef size_t
> 
Only in libffi.old/include: .svn
diff -rbw libffi.old/include/Makefile.in libffi/include/Makefile.in
42c42,52
< am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
---
> am__aclocal_m4_deps = $(top_srcdir)/m4/ax_cc_maxopt.m4 \
> 	$(top_srcdir)/m4/ax_cflags_warn_all.m4 \
> 	$(top_srcdir)/m4/ax_check_compiler_flags.m4 \
> 	$(top_srcdir)/m4/ax_compiler_vendor.m4 \
> 	$(top_srcdir)/m4/ax_configure_args.m4 \
> 	$(top_srcdir)/m4/ax_enable_builddir.m4 \
> 	$(top_srcdir)/m4/ax_gcc_archflag.m4 \
> 	$(top_srcdir)/m4/ax_gcc_x86_cpuid.m4 \
> 	$(top_srcdir)/m4/libtool.m4 $(top_srcdir)/m4/ltoptions.m4 \
> 	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
> 	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/acinclude.m4 \
98a109
> DLLTOOL = @DLLTOOL@
105a117
> FFI_EXEC_TRAMPOLINE_TABLE = @FFI_EXEC_TRAMPOLINE_TABLE@
123a136
> MANIFEST_TOOL = @MANIFEST_TOOL@
135a149
> PACKAGE_URL = @PACKAGE_URL@
137a152
> PRTDIAG = @PRTDIAG@
149a165
> ac_ct_AR = @ac_ct_AR@
156a173
> ax_enable_builddir_sed = @ax_enable_builddir_sed@
182d198
< lt_ECHO = @lt_ECHO@
192a209
> sys_symbol_underscore = @sys_symbol_underscore@
diff -rbw libffi.old/include/ffi.h.in libffi/include/ffi.h.in
2c2,3
<    libffi @VERSION@ - Copyright (c) 1996-2003, 2007, 2008  Red Hat, Inc.
---
>    libffi @VERSION@ - Copyright (c) 2011 Anthony Green
>                     - Copyright (c) 1996-2003, 2007, 2008 Red Hat, Inc.
4,10c5,11
<    Permission is hereby granted, free of charge, to any person obtaining
<    a copy of this software and associated documentation files (the
<    ``Software''), to deal in the Software without restriction, including
<    without limitation the rights to use, copy, modify, merge, publish,
<    distribute, sublicense, and/or sell copies of the Software, and to
<    permit persons to whom the Software is furnished to do so, subject to
<    the following conditions:
---
>    Permission is hereby granted, free of charge, to any person
>    obtaining a copy of this software and associated documentation
>    files (the ``Software''), to deal in the Software without
>    restriction, including without limitation the rights to use, copy,
>    modify, merge, publish, distribute, sublicense, and/or sell copies
>    of the Software, and to permit persons to whom the Software is
>    furnished to do so, subject to the following conditions:
12,13c13,14
<    The above copyright notice and this permission notice shall be included
<    in all copies or substantial portions of the Software.
---
>    The above copyright notice and this permission notice shall be
>    included in all copies or substantial portions of the Software.
59a61
> #ifndef @TARGET@
60a63
> #endif
77a81,83
> 
> #define FFI_64_BIT_MAX 9223372036854775807
> 
86a93,101
> #  ifdef _AIX
> #   ifndef __PPC64__
> #    if defined (__IBMC__) || defined (__IBMCPP__)
> #     define FFI_LONG_LONG_MAX LONGLONG_MAX
> #    endif
> #   endif /* __PPC64__ */
> #   undef  FFI_64_BIT_MAX
> #   define FFI_64_BIT_MAX 9223372036854775807LL
> #  endif
133c148
< # if FFI_LONG_LONG_MAX != 9223372036854775807
---
> # if FFI_LONG_LONG_MAX != FFI_64_BIT_MAX
136c151
< #elif LONG_MAX != 9223372036854775807
---
> #elif LONG_MAX != FFI_64_BIT_MAX
143c158
< #elif LONG_MAX == 9223372036854775807
---
> #elif LONG_MAX == FFI_64_BIT_MAX
196c211
< # elif LONG_MAX == 9223372036854775807
---
> # elif LONG_MAX == FFI_64_BIT_MAX
265a281,283
> # ifdef __sgi
> #  pragma pack 0
> # endif
283a302,304
> #ifdef __sgi
> # pragma pack 8
> #endif
diff -rbw libffi.old/include/ffi_common.h libffi/include/ffi_common.h
2c2
<    ffi_common.h - Copyright (c) 1996  Red Hat, Inc.
---
>    ffi_common.h - Copyright (C) 2011  Anthony Green
3a4
>                   Copyright (c) 1996  Red Hat, Inc.
114a116,120
> #ifndef __GNUC__
> #define __builtin_expect(x, expected_value) (x)
> #endif
> #define LIKELY(x)    __builtin_expect((x),1)
> #define UNLIKELY(x)  __builtin_expect((x),1)
121,122d126
< 
< 
diff -rbw libffi.old/install-sh libffi/install-sh
4c4
< scriptversion=2004-12-17.09
---
> scriptversion=2009-04-28.21; # UTC
42,43c42,46
< # from scratch.  It can only install one file at a time, a restriction
< # shared with many OS's install programs.
---
> # from scratch.
> 
> nl='
> '
> IFS=" ""	$nl"
48c51,80
< doit="${DOITPROG-}"
---
> doit=${DOITPROG-}
> if test -z "$doit"; then
>   doit_exec=exec
> else
>   doit_exec=$doit
> fi
> 
> # Put in absolute file names if you don't have them in your path;
> # or use environment vars.
> 
> chgrpprog=${CHGRPPROG-chgrp}
> chmodprog=${CHMODPROG-chmod}
> chownprog=${CHOWNPROG-chown}
> cmpprog=${CMPPROG-cmp}
> cpprog=${CPPROG-cp}
> mkdirprog=${MKDIRPROG-mkdir}
> mvprog=${MVPROG-mv}
> rmprog=${RMPROG-rm}
> stripprog=${STRIPPROG-strip}
> 
> posix_glob='?'
> initialize_posix_glob='
>   test "$posix_glob" != "?" || {
>     if (set -f) 2>/dev/null; then
>       posix_glob=
>     else
>       posix_glob=:
>     fi
>   }
> '
50c82
< # put in absolute paths if you don't have them in your path; or use env. vars.
---
> posix_mkdir=
52,59c84,85
< mvprog="${MVPROG-mv}"
< cpprog="${CPPROG-cp}"
< chmodprog="${CHMODPROG-chmod}"
< chownprog="${CHOWNPROG-chown}"
< chgrpprog="${CHGRPPROG-chgrp}"
< stripprog="${STRIPPROG-strip}"
< rmprog="${RMPROG-rm}"
< mkdirprog="${MKDIRPROG-mkdir}"
---
> # Desired mode of installed file.
> mode=0755
61,62d86
< chmodcmd="$chmodprog 0755"
< chowncmd=
64c88,90
< stripcmd=
---
> chmodcmd=$chmodprog
> chowncmd=
> mvcmd=$mvprog
66c92,93
< mvcmd="$mvprog"
---
> stripcmd=
> 
70c97,99
< dstarg=
---
> dst_arg=
> 
> copy_on_change=false
73c102,103
< usage="Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
---
> usage="\
> Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
82a113,115
>      --help     display this help and exit.
>      --version  display version info and exit.
> 
83a117
>   -C            install only if different (preserve the last data modification time)
91,92d124
< --help     display this help and exit.
< --version  display version info and exit.
95c127,128
<   CHGRPPROG CHMODPROG CHOWNPROG CPPROG MKDIRPROG MVPROG RMPROG STRIPPROG
---
>   CHGRPPROG CHMODPROG CHOWNPROG CMPPROG CPPROG MKDIRPROG MVPROG
>   RMPROG STRIPPROG
98c131
< while test -n "$1"; do
---
> while test $# -ne 0; do
100,101c133
<     -c) shift
<         continue;;
---
>     -c) ;;
103,105c135,137
<     -d) dir_arg=true
<         shift
<         continue;;
---
>     -C) copy_on_change=true;;
> 
>     -d) dir_arg=true;;
108,110c140
<         shift
<         shift
<         continue;;
---
> 	shift;;
112c142
<     --help) echo "$usage"; exit 0;;
---
>     --help) echo "$usage"; exit $?;;
114,117c144,151
<     -m) chmodcmd="$chmodprog $2"
<         shift
<         shift
<         continue;;
---
>     -m) mode=$2
> 	case $mode in
> 	  *' '* | *'	'* | *'
> '*	  | *'*'* | *'?'* | *'['*)
> 	    echo "$0: invalid mode: $mode" >&2
> 	    exit 1;;
> 	esac
> 	shift;;
120,122c154
<         shift
<         shift
<         continue;;
---
> 	shift;;
124,126c156
<     -s) stripcmd=$stripprog
<         shift
<         continue;;
---
>     -s) stripcmd=$stripprog;;
128,131c158,159
<     -t) dstarg=$2
< 	shift
< 	shift
< 	continue;;
---
>     -t) dst_arg=$2
> 	shift;;
133,135c161
<     -T) no_target_directory=true
< 	shift
< 	continue;;
---
>     -T) no_target_directory=true;;
137c163,174
<     --version) echo "$0 $scriptversion"; exit 0;;
---
>     --version) echo "$0 $scriptversion"; exit $?;;
> 
>     --)	shift
> 	break;;
> 
>     -*)	echo "$0: invalid option: $1" >&2
> 	exit 1;;
> 
>     *)  break;;
>   esac
>   shift
> done
139c176,177
<     *)  # When -d is used, all remaining arguments are directories to create.
---
> if test $# -ne 0 && test -z "$dir_arg$dst_arg"; then
>   # When -d is used, all remaining arguments are directories to create.
141d178
< 	test -n "$dir_arg$dstarg" && break
145c182
<           if test -n "$dstarg"; then
---
>     if test -n "$dst_arg"; then
147c184
< 	    set fnord "$@" "$dstarg"
---
>       set fnord "$@" "$dst_arg"
151,154c188
< 	  dstarg=$arg
< 	done
< 	break;;
<   esac
---
>     dst_arg=$arg
155a190
> fi
157c192
< if test -z "$1"; then
---
> if test $# -eq 0; then
166a202,228
> if test -z "$dir_arg"; then
>   trap '(exit $?); exit' 1 2 13 15
> 
>   # Set umask so as not to create temps with too-generous modes.
>   # However, 'strip' requires both read and write access to temps.
>   case $mode in
>     # Optimize common cases.
>     *644) cp_umask=133;;
>     *755) cp_umask=22;;
> 
>     *[0-7])
>       if test -z "$stripcmd"; then
> 	u_plus_rw=
>       else
> 	u_plus_rw='% 200'
>       fi
>       cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;
>     *)
>       if test -z "$stripcmd"; then
> 	u_plus_rw=
>       else
> 	u_plus_rw=,u+rw
>       fi
>       cp_umask=$mode$u_plus_rw;;
>   esac
> fi
> 
176,183c238,240
<     src=
< 
<     if test -d "$dst"; then
<       mkdircmd=:
<       chmodcmd=
<     else
<       mkdircmd=$mkdirprog
<     fi
---
>     dstdir=$dst
>     test -d "$dstdir"
>     dstdir_status=$?
184a242
> 
193c251
<     if test -z "$dstarg"; then
---
>     if test -z "$dst_arg"; then
198c256
<     dst=$dstarg
---
>     dst=$dst_arg
208c266
< 	echo "$0: $dstarg: Is a directory" >&2
---
> 	echo "$0: $dst_arg: Is a directory" >&2
211c269,301
<       dst=$dst/`basename "$src"`
---
>       dstdir=$dst
>       dst=$dstdir/`basename "$src"`
>       dstdir_status=0
>     else
>       # Prefer dirname, but fall back on a substitute if dirname fails.
>       dstdir=`
> 	(dirname "$dst") 2>/dev/null ||
> 	expr X"$dst" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
> 	     X"$dst" : 'X\(//\)[^/]' \| \
> 	     X"$dst" : 'X\(//\)$' \| \
> 	     X"$dst" : 'X\(/\)' \| . 2>/dev/null ||
> 	echo X"$dst" |
> 	    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
> 		   s//\1/
> 		   q
> 		 }
> 		 /^X\(\/\/\)[^/].*/{
> 		   s//\1/
> 		   q
> 		 }
> 		 /^X\(\/\/\)$/{
> 		   s//\1/
> 		   q
> 		 }
> 		 /^X\(\/\).*/{
> 		   s//\1/
> 		   q
> 		 }
> 		 s/.*/./; q'
>       `
> 
>       test -d "$dstdir"
>       dstdir_status=$?
215,216c305,324
<   # This sed command emulates the dirname command.
<   dstdir=`echo "$dst" | sed -e 's,/*$,,;s,[^/]*$,,;s,/*$,,;s,^$,.,'`
---
>   obsolete_mkdir_used=false
> 
>   if test $dstdir_status != 0; then
>     case $posix_mkdir in
>       '')
> 	# Create intermediate dirs using mode 755 as modified by the umask.
> 	# This is like FreeBSD 'install' as of 1997-10-28.
> 	umask=`umask`
> 	case $stripcmd.$umask in
> 	  # Optimize common cases.
> 	  *[2367][2367]) mkdir_umask=$umask;;
> 	  .*0[02][02] | .[02][02] | .[02]) mkdir_umask=22;;
> 
> 	  *[0-7])
> 	    mkdir_umask=`expr $umask + 22 \
> 	      - $umask % 100 % 40 + $umask % 20 \
> 	      - $umask % 10 % 4 + $umask % 2
> 	    `;;
> 	  *) mkdir_umask=$umask,go-w;;
> 	esac
218c326,332
<   # Make sure that the destination directory exists.
---
> 	# With -d, create the new directory with the user-specified mode.
> 	# Otherwise, rely on $mkdir_umask.
> 	if test -n "$dir_arg"; then
> 	  mkdir_mode=-m$mode
> 	else
> 	  mkdir_mode=
> 	fi
220,224c334,392
<   # Skip lots of stat calls in the usual case.
<   if test ! -d "$dstdir"; then
<     defaultIFS='
< 	 '
<     IFS="${IFS-$defaultIFS}"
---
> 	posix_mkdir=false
> 	case $umask in
> 	  *[123567][0-7][0-7])
> 	    # POSIX mkdir -p sets u+wx bits regardless of umask, which
> 	    # is incompatible with FreeBSD 'install' when (umask & 300) != 0.
> 	    ;;
> 	  *)
> 	    tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$
> 	    trap 'ret=$?; rmdir "$tmpdir/d" "$tmpdir" 2>/dev/null; exit $ret' 0
> 
> 	    if (umask $mkdir_umask &&
> 		exec $mkdirprog $mkdir_mode -p -- "$tmpdir/d") >/dev/null 2>&1
> 	    then
> 	      if test -z "$dir_arg" || {
> 		   # Check for POSIX incompatibilities with -m.
> 		   # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or
> 		   # other-writeable bit of parent directory when it shouldn't.
> 		   # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.
> 		   ls_ld_tmpdir=`ls -ld "$tmpdir"`
> 		   case $ls_ld_tmpdir in
> 		     d????-?r-*) different_mode=700;;
> 		     d????-?--*) different_mode=755;;
> 		     *) false;;
> 		   esac &&
> 		   $mkdirprog -m$different_mode -p -- "$tmpdir" && {
> 		     ls_ld_tmpdir_1=`ls -ld "$tmpdir"`
> 		     test "$ls_ld_tmpdir" = "$ls_ld_tmpdir_1"
> 		   }
> 		 }
> 	      then posix_mkdir=:
> 	      fi
> 	      rmdir "$tmpdir/d" "$tmpdir"
> 	    else
> 	      # Remove any dirs left behind by ancient mkdir implementations.
> 	      rmdir ./$mkdir_mode ./-p ./-- 2>/dev/null
> 	    fi
> 	    trap '' 0;;
> 	esac;;
>     esac
> 
>     if
>       $posix_mkdir && (
> 	umask $mkdir_umask &&
> 	$doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir"
>       )
>     then :
>     else
> 
>       # The umask is ridiculous, or mkdir does not conform to POSIX,
>       # or it failed possibly due to a race condition.  Create the
>       # directory the slow way, step by step, checking for races as we go.
> 
>       case $dstdir in
> 	/*) prefix='/';;
> 	-*) prefix='./';;
> 	*)  prefix='';;
>       esac
> 
>       eval "$initialize_posix_glob"
227,229c395,397
<     # Some sh's can't handle IFS=/ for some reason.
<     IFS='%'
<     set x `echo "$dstdir" | sed -e 's@/@%@g' -e 's@^%@/@'`
---
>       IFS=/
>       $posix_glob set -f
>       set fnord $dstdir
230a399
>       $posix_glob set +f
233c402
<     pathcomp=
---
>       prefixes=
235,243c404,422
<     while test $# -ne 0 ; do
<       pathcomp=$pathcomp$1
<       shift
<       if test ! -d "$pathcomp"; then
<         $mkdirprog "$pathcomp"
< 	# mkdir can fail with a `File exist' error in case several
< 	# install-sh are creating the directory concurrently.  This
< 	# is OK.
< 	test -d "$pathcomp" || exit
---
>       for d
>       do
> 	test -z "$d" && continue
> 
> 	prefix=$prefix$d
> 	if test -d "$prefix"; then
> 	  prefixes=
> 	else
> 	  if $posix_mkdir; then
> 	    (umask=$mkdir_umask &&
> 	     $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir") && break
> 	    # Don't fail if two instances are running concurrently.
> 	    test -d "$prefix" || exit 1
> 	  else
> 	    case $prefix in
> 	      *\'*) qprefix=`echo "$prefix" | sed "s/'/'\\\\\\\\''/g"`;;
> 	      *) qprefix=$prefix;;
> 	    esac
> 	    prefixes="$prefixes '$qprefix'"
245c424,425
<       pathcomp=$pathcomp/
---
> 	fi
> 	prefix=$prefix/
246a427,435
> 
>       if test -n "$prefixes"; then
> 	# Don't fail if two instances are running concurrently.
> 	(umask $mkdir_umask &&
> 	 eval "\$doit_exec \$mkdirprog $prefixes") ||
> 	  test -d "$dstdir" || exit 1
> 	obsolete_mkdir_used=true
>       fi
>     fi
250,255c439,442
<     $doit $mkdircmd "$dst" \
<       && { test -z "$chowncmd" || $doit $chowncmd "$dst"; } \
<       && { test -z "$chgrpcmd" || $doit $chgrpcmd "$dst"; } \
<       && { test -z "$stripcmd" || $doit $stripcmd "$dst"; } \
<       && { test -z "$chmodcmd" || $doit $chmodcmd "$dst"; }
< 
---
>     { test -z "$chowncmd" || $doit $chowncmd "$dst"; } &&
>     { test -z "$chgrpcmd" || $doit $chgrpcmd "$dst"; } &&
>     { test "$obsolete_mkdir_used$chowncmd$chgrpcmd" = false ||
>       test -z "$chmodcmd" || $doit $chmodcmd $mode "$dst"; } || exit 1
257d443
<     dstfile=`basename "$dst"`
265d450
<     trap '(exit $?); exit' 1 2 13 15
268c453
<     $doit $cpprog "$src" "$dsttmp" &&
---
>     (umask $cp_umask && $doit_exec $cpprog "$src" "$dsttmp") &&
276,279c461,483
<     { test -z "$chowncmd" || $doit $chowncmd "$dsttmp"; } \
<       && { test -z "$chgrpcmd" || $doit $chgrpcmd "$dsttmp"; } \
<       && { test -z "$stripcmd" || $doit $stripcmd "$dsttmp"; } \
<       && { test -z "$chmodcmd" || $doit $chmodcmd "$dsttmp"; } &&
---
>     { test -z "$chowncmd" || $doit $chowncmd "$dsttmp"; } &&
>     { test -z "$chgrpcmd" || $doit $chgrpcmd "$dsttmp"; } &&
>     { test -z "$stripcmd" || $doit $stripcmd "$dsttmp"; } &&
>     { test -z "$chmodcmd" || $doit $chmodcmd $mode "$dsttmp"; } &&
> 
>     # If -C, don't bother to copy if it wouldn't change the file.
>     if $copy_on_change &&
>        old=`LC_ALL=C ls -dlL "$dst"	2>/dev/null` &&
>        new=`LC_ALL=C ls -dlL "$dsttmp"	2>/dev/null` &&
> 
>        eval "$initialize_posix_glob" &&
>        $posix_glob set -f &&
>        set X $old && old=:$2:$4:$5:$6 &&
>        set X $new && new=:$2:$4:$5:$6 &&
>        $posix_glob set +f &&
> 
>        test "$old" = "$new" &&
>        $cmpprog "$dst" "$dsttmp" >/dev/null 2>&1
>     then
>       rm -f "$dsttmp"
>     else
>       # Rename the file to the real destination.
>       $doit $mvcmd -f "$dsttmp" "$dst" 2>/dev/null ||
281,283d484
<     # Now rename the file to the real destination.
<     { $doit $mvcmd -f "$dsttmp" "$dstdir/$dstfile" 2>/dev/null \
<       || {
287c488
< 
---
>       {
294,298c495,500
< 	     if test -f "$dstdir/$dstfile"; then
< 	       $doit $rmcmd -f "$dstdir/$dstfile" 2>/dev/null \
< 	       || $doit $mvcmd -f "$dstdir/$dstfile" "$rmtmp" 2>/dev/null \
< 	       || {
< 		 echo "$0: cannot unlink or rename $dstdir/$dstfile" >&2
---
> 	  test ! -f "$dst" ||
> 	  $doit $rmcmd -f "$dst" 2>/dev/null ||
> 	  { $doit $mvcmd -f "$dst" "$rmtmp" 2>/dev/null &&
> 	    { $doit $rmcmd -f "$rmtmp" 2>/dev/null; :; }
> 	  } ||
> 	  { echo "$0: cannot unlink or rename $dst" >&2
301,303d502
< 	     else
< 	       :
< 	     fi
307c506
< 	   $doit $mvcmd "$dsttmp" "$dstdir/$dstfile"
---
> 	$doit $mvcmd "$dsttmp" "$dst"
309,311c508
<     }
<   fi || { (exit 1); exit 1; }
< done
---
>     fi || exit 1
313,316c510,512
< # The final little trick to "correctly" pass the exit status to the exit trap.
< {
<   (exit 0); exit 0
< }
---
>     trap '' 0
>   fi
> done
322c518,519
< # time-stamp-end: "$"
---
> # time-stamp-time-zone: "UTC"
> # time-stamp-end: "; # UTC"
diff -rbw libffi.old/libtool-version libffi/libtool-version
29c29
< 5:10:0
---
> 6:0:0
Only in libffi.old: ltcf-c.sh
Only in libffi.old: ltcf-cxx.sh
Only in libffi.old: ltcf-gcj.sh
Only in libffi.old: ltconfig
diff -rbw libffi.old/ltmain.sh libffi/ltmain.sh
1d0
< # Generated from ltmain.m4sh.
3c2
< # ltmain.sh (GNU libtool) 2.2.6
---
> # libtool (GNU libtool) 2.4
6c5,6
< # Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005, 2006, 2007 2008 Free Software Foundation, Inc.
---
> # Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005, 2006,
> # 2007, 2008, 2009, 2010 Free Software Foundation, Inc.
41a42,43
> #       --no-quiet, --no-silent
> #                            print informational messages (default)
43c45,46
< # -v, --verbose            print informational messages (default)
---
> #   -v, --verbose            print more informational messages than default
> #       --no-verbose         don't print the extra informational messages
45c48
< # -h, --help               print short or long help message
---
> #   -h, --help, --help-all   print short, long, or detailed help message
57c60,61
< # MODE-ARGS vary depending on the MODE.
---
> # MODE-ARGS vary depending on the MODE.  When passed as first option,
> # `--mode=MODE' may be abbreviated as `MODE' or a unique abbreviation of that.
68c72
< #       $progname:		(GNU libtool) 2.2.6
---
> #         $progname:	(GNU libtool) 2.4
72a77,78
> # GNU libtool home page: <http://www.gnu.org/software/libtool/>.
> # General help using GNU software: <http://www.gnu.org/gethelp/>.
74c80
< PROGRAM=ltmain.sh
---
> PROGRAM=libtool
76c82
< VERSION=2.2.6
---
> VERSION=2.4
78c84
< package_revision=1.3012
---
> package_revision=1.3293
93a100,107
> # A function that is used when there is no print builtin or printf.
> func_fallback_echo ()
> {
>   eval 'cat <<_LTECHO_EOF
> $1
> _LTECHO_EOF'
> }
> 
95,97d108
< # Only set LANG and LC_ALL to C if already set.
< # These must not be set unconditionally because not all systems understand
< # e.g. LANG=C (notably SCO).
109a121,123
> LC_ALL=C
> LANGUAGE=C
> export LANGUAGE LC_ALL
113a128,133
> # Work around backward compatibility issue on IRIX 6.5. On IRIX 6.4+, sh
> # is ksh but when the shell is invoked as "sh" and the current value of
> # the _XPG environment variable is not equal to 1 (one), the special
> # positional parameter $0, within a function call, is the name of the
> # function.
> progpath="$0"
118,121c138,141
< : ${ECHO="echo"}
< : ${EGREP="/bin/grep -E"}
< : ${FGREP="/bin/grep -F"}
< : ${GREP="/bin/grep"}
---
> test "${ECHO+set}" = set || ECHO=${as_echo-'printf %s\n'}
> : ${EGREP="grep -E"}
> : ${FGREP="grep -F"}
> : ${GREP="grep"}
127c147
< : ${SED="/bin/sed"}
---
> : ${SED="sed"}
146a167,187
> # func_dirname file append nondir_replacement
> # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
> # otherwise set result to NONDIR_REPLACEMENT.
> func_dirname ()
> {
>     func_dirname_result=`$ECHO "${1}" | $SED "$dirname"`
>     if test "X$func_dirname_result" = "X${1}"; then
>       func_dirname_result="${3}"
>     else
>       func_dirname_result="$func_dirname_result${2}"
>     fi
> } # func_dirname may be replaced by extended shell implementation
> 
> 
> # func_basename file
> func_basename ()
> {
>     func_basename_result=`$ECHO "${1}" | $SED "$basename"`
> } # func_basename may be replaced by extended shell implementation
> 
> 
162c203
<   func_dirname_result=`$ECHO "X${1}" | $Xsed -e "$dirname"`
---
>     func_dirname_result=`$ECHO "${1}" | $SED -e "$dirname"`
168c209,311
<   func_basename_result=`$ECHO "X${1}" | $Xsed -e "$basename"`
---
>     func_basename_result=`$ECHO "${1}" | $SED -e "$basename"`
> } # func_dirname_and_basename may be replaced by extended shell implementation
> 
> 
> # func_stripname prefix suffix name
> # strip PREFIX and SUFFIX off of NAME.
> # PREFIX and SUFFIX must not contain globbing or regex special
> # characters, hashes, percent signs, but SUFFIX may contain a leading
> # dot (in which case that matches only a dot).
> # func_strip_suffix prefix name
> func_stripname ()
> {
>     case ${2} in
>       .*) func_stripname_result=`$ECHO "${3}" | $SED "s%^${1}%%; s%\\\\${2}\$%%"`;;
>       *)  func_stripname_result=`$ECHO "${3}" | $SED "s%^${1}%%; s%${2}\$%%"`;;
>     esac
> } # func_stripname may be replaced by extended shell implementation
> 
> 
> # These SED scripts presuppose an absolute path with a trailing slash.
> pathcar='s,^/\([^/]*\).*$,\1,'
> pathcdr='s,^/[^/]*,,'
> removedotparts=':dotsl
> 		s@/\./@/@g
> 		t dotsl
> 		s,/\.$,/,'
> collapseslashes='s@/\{1,\}@/@g'
> finalslash='s,/*$,/,'
> 
> # func_normal_abspath PATH
> # Remove doubled-up and trailing slashes, "." path components,
> # and cancel out any ".." path components in PATH after making
> # it an absolute path.
> #             value returned in "$func_normal_abspath_result"
> func_normal_abspath ()
> {
>   # Start from root dir and reassemble the path.
>   func_normal_abspath_result=
>   func_normal_abspath_tpath=$1
>   func_normal_abspath_altnamespace=
>   case $func_normal_abspath_tpath in
>     "")
>       # Empty path, that just means $cwd.
>       func_stripname '' '/' "`pwd`"
>       func_normal_abspath_result=$func_stripname_result
>       return
>     ;;
>     # The next three entries are used to spot a run of precisely
>     # two leading slashes without using negated character classes;
>     # we take advantage of case's first-match behaviour.
>     ///*)
>       # Unusual form of absolute path, do nothing.
>     ;;
>     //*)
>       # Not necessarily an ordinary path; POSIX reserves leading '//'
>       # and for example Cygwin uses it to access remote file shares
>       # over CIFS/SMB, so we conserve a leading double slash if found.
>       func_normal_abspath_altnamespace=/
>     ;;
>     /*)
>       # Absolute path, do nothing.
>     ;;
>     *)
>       # Relative path, prepend $cwd.
>       func_normal_abspath_tpath=`pwd`/$func_normal_abspath_tpath
>     ;;
>   esac
>   # Cancel out all the simple stuff to save iterations.  We also want
>   # the path to end with a slash for ease of parsing, so make sure
>   # there is one (and only one) here.
>   func_normal_abspath_tpath=`$ECHO "$func_normal_abspath_tpath" | $SED \
>         -e "$removedotparts" -e "$collapseslashes" -e "$finalslash"`
>   while :; do
>     # Processed it all yet?
>     if test "$func_normal_abspath_tpath" = / ; then
>       # If we ascended to the root using ".." the result may be empty now.
>       if test -z "$func_normal_abspath_result" ; then
>         func_normal_abspath_result=/
>       fi
>       break
>     fi
>     func_normal_abspath_tcomponent=`$ECHO "$func_normal_abspath_tpath" | $SED \
>         -e "$pathcar"`
>     func_normal_abspath_tpath=`$ECHO "$func_normal_abspath_tpath" | $SED \
>         -e "$pathcdr"`
>     # Figure out what to do with it
>     case $func_normal_abspath_tcomponent in
>       "")
>         # Trailing empty path component, ignore it.
>       ;;
>       ..)
>         # Parent dir; strip last assembled component from result.
>         func_dirname "$func_normal_abspath_result"
>         func_normal_abspath_result=$func_dirname_result
>       ;;
>       *)
>         # Actual path component, append it.
>         func_normal_abspath_result=$func_normal_abspath_result/$func_normal_abspath_tcomponent
>       ;;
>     esac
>   done
>   # Restore leading double-slash if one was found on entry.
>   func_normal_abspath_result=$func_normal_abspath_altnamespace$func_normal_abspath_result
171c314,325
< # Generated shell functions inserted here.
---
> # func_relative_path SRCDIR DSTDIR
> # generates a relative path from SRCDIR to DSTDIR, with a trailing
> # slash if non-empty, suitable for immediately appending a filename
> # without needing to append a separator.
> #             value returned in "$func_relative_path_result"
> func_relative_path ()
> {
>   func_relative_path_result=
>   func_normal_abspath "$1"
>   func_relative_path_tlibdir=$func_normal_abspath_result
>   func_normal_abspath "$2"
>   func_relative_path_tbindir=$func_normal_abspath_result
173,178c327,374
< # Work around backward compatibility issue on IRIX 6.5. On IRIX 6.4+, sh
< # is ksh but when the shell is invoked as "sh" and the current value of
< # the _XPG environment variable is not equal to 1 (one), the special
< # positional parameter $0, within a function call, is the name of the
< # function.
< progpath="$0"
---
>   # Ascend the tree starting from libdir
>   while :; do
>     # check if we have found a prefix of bindir
>     case $func_relative_path_tbindir in
>       $func_relative_path_tlibdir)
>         # found an exact match
>         func_relative_path_tcancelled=
>         break
>         ;;
>       $func_relative_path_tlibdir*)
>         # found a matching prefix
>         func_stripname "$func_relative_path_tlibdir" '' "$func_relative_path_tbindir"
>         func_relative_path_tcancelled=$func_stripname_result
>         if test -z "$func_relative_path_result"; then
>           func_relative_path_result=.
>         fi
>         break
>         ;;
>       *)
>         func_dirname $func_relative_path_tlibdir
>         func_relative_path_tlibdir=${func_dirname_result}
>         if test "x$func_relative_path_tlibdir" = x ; then
>           # Have to descend all the way to the root!
>           func_relative_path_result=../$func_relative_path_result
>           func_relative_path_tcancelled=$func_relative_path_tbindir
>           break
>         fi
>         func_relative_path_result=../$func_relative_path_result
>         ;;
>     esac
>   done
> 
>   # Now calculate path; take care to avoid doubling-up slashes.
>   func_stripname '' '/' "$func_relative_path_result"
>   func_relative_path_result=$func_stripname_result
>   func_stripname '/' '/' "$func_relative_path_tcancelled"
>   if test "x$func_stripname_result" != x ; then
>     func_relative_path_result=${func_relative_path_result}/${func_stripname_result}
>   fi
> 
>   # Normalisation. If bindir is libdir, return empty string,
>   # else relative path ending with a slash; either way, target
>   # file name can be directly appended.
>   if test ! -z "$func_relative_path_result"; then
>     func_stripname './' '' "$func_relative_path_result/"
>     func_relative_path_result=$func_stripname_result
>   fi
> }
181,182d376
< # In the unlikely event $progname began with a '-', it would play havoc with
< # func_echo (imagine progname=-n), so we prepend ./ in that case:
185,187d378
< case $progname in
<   -*) progname=./$progname ;;
< esac
217a409,417
> # Sed substitution that turns a string into a regex matching for the
> # string literally.
> sed_make_literal_regex='s,[].[^$\\*\/],\\&,g'
> 
> # Sed substitution that converts a w32 file name or path
> # which contains forward slashes, into one that contains
> # (escaped) backslashes.  A very naive implementation.
> lt_sed_naive_backslashify='s|\\\\*|\\|g;s|/|\\|g;s|\\|\\\\|g'
> 
246c446
<     $ECHO "$progname${mode+: }$mode: $*"
---
>     $ECHO "$progname: ${opt_mode+$opt_mode: }$*"
260a461,467
> # func_echo_all arg...
> # Invoke $ECHO with all args, space-separated.
> func_echo_all ()
> {
>     $ECHO "$*"
> }
> 
265c472
<     $ECHO "$progname${mode+: }$mode: "${1+"$@"} 1>&2
---
>     $ECHO "$progname: ${opt_mode+$opt_mode: }"${1+"$@"} 1>&2
272c479
<     $opt_warning && $ECHO "$progname${mode+: }$mode: warning: "${1+"$@"} 1>&2
---
>     $opt_warning && $ECHO "$progname: ${opt_mode+$opt_mode: }warning: "${1+"$@"} 1>&2
329c536
<         my_directory_path=`$ECHO "X$my_directory_path" | $Xsed -e "$dirname"`
---
>         my_directory_path=`$ECHO "$my_directory_path" | $SED -e "$dirname"`
331c538
<       my_dir_list=`$ECHO "X$my_dir_list" | $Xsed -e 's,:*$,,'`
---
>       my_dir_list=`$ECHO "$my_dir_list" | $SED 's,:*$,,'`
381c588
<     $ECHO "X$my_tmpdir" | $Xsed
---
>     $ECHO "$my_tmpdir"
395c602
< 	func_quote_for_eval_unquoted_result=`$ECHO "X$1" | $Xsed -e "$sed_quote_subst"` ;;
---
> 	func_quote_for_eval_unquoted_result=`$ECHO "$1" | $SED "$sed_quote_subst"` ;;
422c629
< 	my_arg=`$ECHO "X$1" | $Xsed \
---
> 	my_arg=`$ECHO "$1" | $SED \
491,492c698,713
< 
< 
---
> # func_tr_sh
> # Turn $1 into a string suitable for a shell variable name.
> # Result is stored in $func_tr_sh_result.  All characters
> # not in the set a-zA-Z0-9_ are replaced with '_'. Further,
> # if $1 begins with a digit, a '_' is prepended as well.
> func_tr_sh ()
> {
>   case $1 in
>   [0-9]* | *[!a-zA-Z0-9_]*)
>     func_tr_sh_result=`$ECHO "$1" | $SED 's/^\([0-9]\)/_\1/; s/[^a-zA-Z0-9_]/_/g'`
>     ;;
>   * )
>     func_tr_sh_result=$1
>     ;;
>   esac
> }
499c720,730
<     $SED -n '/^# '$PROGRAM' (GNU /,/# warranty; / {
---
>     $opt_debug
> 
>     $SED -n '/(C)/!b go
> 	:more
> 	/\./!{
> 	  N
> 	  s/\n# / /
> 	  b more
> 	}
> 	:go
> 	/^# '$PROGRAM' (GNU /,/# warranty; / {
512c743,745
<     $SED -n '/^# Usage:/,/# -h/ {
---
>     $opt_debug
> 
>     $SED -n '/^# Usage:/,/^#  *.*--help/ {
518c751
<     $ECHO
---
>     echo
523,524c756,758
< # func_help
< # Echo long help message to standard output and exit.
---
> # func_help [NOEXIT]
> # Echo long help message to standard output and exit,
> # unless 'noexit' is passed as argument.
526a761,762
>     $opt_debug
> 
527a764
> 	:print
540,541c777,785
<      }' < "$progpath"
<     exit $?
---
> 	d
>      }
>      /^# .* home page:/b print
>      /^# General help using/b print
>      ' < "$progpath"
>     ret=$?
>     if test -z "$1"; then
>       exit $ret
>     fi
549c793,795
<     func_error "missing argument for $1"
---
>     $opt_debug
> 
>     func_error "missing argument for $1."
553d798
< exit_cmd=:
554a800,823
> # func_split_short_opt shortopt
> # Set func_split_short_opt_name and func_split_short_opt_arg shell
> # variables after splitting SHORTOPT after the 2nd character.
> func_split_short_opt ()
> {
>     my_sed_short_opt='1s/^\(..\).*$/\1/;q'
>     my_sed_short_rest='1s/^..\(.*\)$/\1/;q'
> 
>     func_split_short_opt_name=`$ECHO "$1" | $SED "$my_sed_short_opt"`
>     func_split_short_opt_arg=`$ECHO "$1" | $SED "$my_sed_short_rest"`
> } # func_split_short_opt may be replaced by extended shell implementation
> 
> 
> # func_split_long_opt longopt
> # Set func_split_long_opt_name and func_split_long_opt_arg shell
> # variables after splitting LONGOPT at the `=' sign.
> func_split_long_opt ()
> {
>     my_sed_long_opt='1s/^\(--[^=]*\)=.*/\1/;q'
>     my_sed_long_arg='1s/^--[^=]*=//'
> 
>     func_split_long_opt_name=`$ECHO "$1" | $SED "$my_sed_long_opt"`
>     func_split_long_opt_arg=`$ECHO "$1" | $SED "$my_sed_long_arg"`
> } # func_split_long_opt may be replaced by extended shell implementation
555a825
> exit_cmd=:
559,572d828
< # Check that we have a working $ECHO.
< if test "X$1" = X--no-reexec; then
<   # Discard the --no-reexec flag, and continue.
<   shift
< elif test "X$1" = X--fallback-echo; then
<   # Avoid inline document here, it may be left over
<   :
< elif test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t'; then
<   # Yippee, $ECHO works!
<   :
< else
<   # Restart under the correct shell, and then maybe $ECHO will work.
<   exec $SHELL "$progpath" --no-reexec ${1+"$@"}
< fi
574,581d829
< if test "X$1" = X--fallback-echo; then
<   # used as fallback echo
<   shift
<   cat <<EOF
< $*
< EOF
<   exit $EXIT_SUCCESS
< fi
587d834
< # $mode is unset
589d835
< execute_dlfiles=
596,600d841
< opt_dry_run=false
< opt_duplicate_deps=false
< opt_silent=false
< opt_debug=:
< 
605a847,892
> # func_append var value
> # Append VALUE to the end of shell variable VAR.
> func_append ()
> {
>     eval "${1}=\$${1}\${2}"
> } # func_append may be replaced by extended shell implementation
> 
> # func_append_quoted var value
> # Quote VALUE and append to the end of shell variable VAR, separated
> # by a space.
> func_append_quoted ()
> {
>     func_quote_for_eval "${2}"
>     eval "${1}=\$${1}\\ \$func_quote_for_eval_result"
> } # func_append_quoted may be replaced by extended shell implementation
> 
> 
> # func_arith arithmetic-term...
> func_arith ()
> {
>     func_arith_result=`expr "${@}"`
> } # func_arith may be replaced by extended shell implementation
> 
> 
> # func_len string
> # STRING may not start with a hyphen.
> func_len ()
> {
>     func_len_result=`expr "${1}" : ".*" 2>/dev/null || echo $max_cmd_len`
> } # func_len may be replaced by extended shell implementation
> 
> 
> # func_lo2o object
> func_lo2o ()
> {
>     func_lo2o_result=`$ECHO "${1}" | $SED "$lo2o"`
> } # func_lo2o may be replaced by extended shell implementation
> 
> 
> # func_xform libobj-or-source
> func_xform ()
> {
>     func_xform_result=`$ECHO "${1}" | $SED 's/\.[^.]*$/.lo/'`
> } # func_xform may be replaced by extended shell implementation
> 
> 
639c926
<     $ECHO "host: $host"
---
>     echo "host: $host"
641c928
<       $ECHO "enable shared libraries"
---
>       echo "enable shared libraries"
643c930
<       $ECHO "disable shared libraries"
---
>       echo "disable shared libraries"
646c933
<       $ECHO "enable static libraries"
---
>       echo "enable static libraries"
648c935
<       $ECHO "disable static libraries"
---
>       echo "disable static libraries"
695,696c982,985
< # Parse options once, thoroughly.  This comes as soon as possible in
< # the script to make things like `libtool --version' happen quickly.
---
> # func_check_version_match
> # Ensure that we are using m4 macros, and libtool script from the same
> # release of libtool.
> func_check_version_match ()
697a987,1016
>   if test "$package_revision" != "$macro_revision"; then
>     if test "$VERSION" != "$macro_version"; then
>       if test -z "$macro_version"; then
>         cat >&2 <<_LT_EOF
> $progname: Version mismatch error.  This is $PACKAGE $VERSION, but the
> $progname: definition of this LT_INIT comes from an older release.
> $progname: You should recreate aclocal.m4 with macros from $PACKAGE $VERSION
> $progname: and run autoconf again.
> _LT_EOF
>       else
>         cat >&2 <<_LT_EOF
> $progname: Version mismatch error.  This is $PACKAGE $VERSION, but the
> $progname: definition of this LT_INIT comes from $PACKAGE $macro_version.
> $progname: You should recreate aclocal.m4 with macros from $PACKAGE $VERSION
> $progname: and run autoconf again.
> _LT_EOF
>       fi
>     else
>       cat >&2 <<_LT_EOF
> $progname: Version mismatch error.  This is $PACKAGE $VERSION, revision $package_revision,
> $progname: but the definition of this LT_INIT comes from revision $macro_revision.
> $progname: You should recreate aclocal.m4 with macros from revision $package_revision
> $progname: of $PACKAGE $VERSION and run autoconf again.
> _LT_EOF
>     fi
> 
>     exit $EXIT_MISMATCH
>   fi
> }
> 
724,725c1043,1064
<   # Parse non-mode specific arguments:
<   while test "$#" -gt 0; do
---
> 
> 
> # Option defaults:
> opt_debug=:
> opt_dry_run=false
> opt_config=false
> opt_preserve_dup_deps=false
> opt_features=false
> opt_finish=false
> opt_help=false
> opt_help_all=false
> opt_silent=:
> opt_verbose=:
> opt_silent=false
> opt_verbose=false
> 
> 
> # Parse options once, thoroughly.  This comes as soon as possible in the
> # script to make things like `--version' happen as quickly as we can.
> {
>   # this just eases exit handling
>   while test $# -gt 0; do
728d1066
< 
730,732c1068
<       --config)		func_config					;;
< 
<       --debug)		preserve_args="$preserve_args $opt"
---
>       --debug|-x)	opt_debug='set -x'
734d1069
< 			opt_debug='set -x'
737,739c1072,1082
< 
<       -dlopen)		test "$#" -eq 0 && func_missing_arg "$opt" && break
< 			execute_dlfiles="$execute_dlfiles $1"
---
>       --dry-run|--dryrun|-n)
> 			opt_dry_run=:
> 			;;
>       --config)
> 			opt_config=:
> func_config
> 			;;
>       --dlopen|-dlopen)
> 			optarg="$1"
> 			opt_dlopen="${opt_dlopen+$opt_dlopen
> }$optarg"
742,748c1085,1107
< 
<       --dry-run | -n)	opt_dry_run=:					;;
<       --features)       func_features					;;
<       --finish)		mode="finish"					;;
< 
<       --mode)		test "$#" -eq 0 && func_missing_arg "$opt" && break
< 			case $1 in
---
>       --preserve-dup-deps)
> 			opt_preserve_dup_deps=:
> 			;;
>       --features)
> 			opt_features=:
> func_features
> 			;;
>       --finish)
> 			opt_finish=:
> set dummy --mode finish ${1+"$@"}; shift
> 			;;
>       --help)
> 			opt_help=:
> 			;;
>       --help-all)
> 			opt_help_all=:
> opt_help=': help-all'
> 			;;
>       --mode)
> 			test $# = 0 && func_missing_arg $opt && break
> 			optarg="$1"
> 			opt_mode="$optarg"
> case $optarg in
750,757c1109
< 			  clean)	;;
< 			  compile)	;;
< 			  execute)	;;
< 			  finish)	;;
< 			  install)	;;
< 			  link)		;;
< 			  relink)	;;
< 			  uninstall)	;;
---
>   clean|compile|execute|finish|install|link|relink|uninstall) ;;
765,766d1116
< 
< 			mode="$1"
769,773c1119,1127
< 
<       --preserve-dup-deps)
< 			opt_duplicate_deps=:				;;
< 
<       --quiet|--silent)	preserve_args="$preserve_args $opt"
---
>       --no-silent|--no-quiet)
> 			opt_silent=false
> func_append preserve_args " $opt"
> 			;;
>       --no-verbose)
> 			opt_verbose=false
> func_append preserve_args " $opt"
> 			;;
>       --silent|--quiet)
774a1129,1130
> func_append preserve_args " $opt"
>         opt_verbose=false
776,777c1132,1134
< 
<       --verbose| -v)	preserve_args="$preserve_args $opt"
---
>       --verbose|-v)
> 			opt_verbose=:
> func_append preserve_args " $opt"
780,783c1137,1142
< 
<       --tag)		test "$#" -eq 0 && func_missing_arg "$opt" && break
< 			preserve_args="$preserve_args $opt $1"
< 			func_enable_tag "$1"	# tagname is set here
---
>       --tag)
> 			test $# = 0 && func_missing_arg $opt && break
> 			optarg="$1"
> 			opt_tag="$optarg"
> func_append preserve_args " $opt $optarg"
> func_enable_tag "$optarg"
786a1146,1149
>       -\?|-h)		func_usage				;;
>       --help)		func_help				;;
>       --version)	func_version				;;
> 
788,790c1151,1153
<       -dlopen=*|--mode=*|--tag=*)
< 			func_opt_split "$opt"
< 			set dummy "$func_opt_split_opt" "$func_opt_split_arg" ${1+"$@"}
---
>       --*=*)
> 			func_split_long_opt "$opt"
> 			set dummy "$func_split_long_opt_name" "$func_split_long_opt_arg" ${1+"$@"}
794,796c1157,1162
<       -\?|-h)		func_usage					;;
<       --help)		opt_help=:					;;
<       --version)	func_version					;;
---
>       # Separate non-argument short options:
>       -\?*|-h*|-n*|-v*)
> 			func_split_short_opt "$opt"
> 			set dummy "$func_split_short_opt_name" "-$func_split_short_opt_arg" ${1+"$@"}
> 			shift
> 			;;
797a1164
>       --)		break					;;
799,802c1166
< 
<       *)		nonopt="$opt"
< 			break
< 			;;
---
>       *)		set dummy "$opt" ${1+"$@"};	shift; break  ;;
805a1170,1179
>   # Validate options:
> 
>   # save first non-option argument
>   if test "$#" -gt 0; then
>     nonopt="$opt"
>     shift
>   fi
> 
>   # preserve --debug
>   test "$opt_debug" = : || func_append preserve_args " --debug"
813c1187
<       opt_duplicate_compiler_generated_deps=$opt_duplicate_deps
---
>       opt_duplicate_compiler_generated_deps=$opt_preserve_dup_deps
817,861d1190
<   # Having warned about all mis-specified options, bail out if
<   # anything was wrong.
<   $exit_cmd $EXIT_FAILURE
< }
< 
< # func_check_version_match
< # Ensure that we are using m4 macros, and libtool script from the same
< # release of libtool.
< func_check_version_match ()
< {
<   if test "$package_revision" != "$macro_revision"; then
<     if test "$VERSION" != "$macro_version"; then
<       if test -z "$macro_version"; then
<         cat >&2 <<_LT_EOF
< $progname: Version mismatch error.  This is $PACKAGE $VERSION, but the
< $progname: definition of this LT_INIT comes from an older release.
< $progname: You should recreate aclocal.m4 with macros from $PACKAGE $VERSION
< $progname: and run autoconf again.
< _LT_EOF
<       else
<         cat >&2 <<_LT_EOF
< $progname: Version mismatch error.  This is $PACKAGE $VERSION, but the
< $progname: definition of this LT_INIT comes from $PACKAGE $macro_version.
< $progname: You should recreate aclocal.m4 with macros from $PACKAGE $VERSION
< $progname: and run autoconf again.
< _LT_EOF
<       fi
<     else
<       cat >&2 <<_LT_EOF
< $progname: Version mismatch error.  This is $PACKAGE $VERSION, revision $package_revision,
< $progname: but the definition of this LT_INIT comes from revision $macro_revision.
< $progname: You should recreate aclocal.m4 with macros from revision $package_revision
< $progname: of $PACKAGE $VERSION and run autoconf again.
< _LT_EOF
<     fi
< 
<     exit $EXIT_MISMATCH
<   fi
< }
< 
< 
< ## ----------- ##
< ##    Main.    ##
< ## ----------- ##
< 
870,872d1198
<   test -z "$mode" && func_fatal_error "error: you must specify a MODE."
< 
< 
876d1201
< 
878c1203
<   if test -n "$execute_dlfiles" && test "$mode" != execute; then
---
>     if test -n "$opt_dlopen" && test "$opt_mode" != execute; then
886c1211,1216
<   help="Try \`$progname --help --mode=$mode' for more information."
---
>     help="Try \`$progname --help --mode=$opt_mode' for more information."
>   }
> 
> 
>   # Bail if the options were screwed
>   $exit_cmd $EXIT_FAILURE
889a1220,1225
> 
> 
> ## ----------- ##
> ##    Main.    ##
> ## ----------- ##
> 
953,954d1288
<     func_ltwrapper_scriptname_result=""
<     if func_ltwrapper_executable_p "$1"; then
958d1291
<     fi
1003a1337,1367
> # func_resolve_sysroot PATH
> # Replace a leading = in PATH with a sysroot.  Store the result into
> # func_resolve_sysroot_result
> func_resolve_sysroot ()
> {
>   func_resolve_sysroot_result=$1
>   case $func_resolve_sysroot_result in
>   =*)
>     func_stripname '=' '' "$func_resolve_sysroot_result"
>     func_resolve_sysroot_result=$lt_sysroot$func_stripname_result
>     ;;
>   esac
> }
> 
> # func_replace_sysroot PATH
> # If PATH begins with the sysroot, replace it with = and
> # store the result into func_replace_sysroot_result.
> func_replace_sysroot ()
> {
>   case "$lt_sysroot:$1" in
>   ?*:"$lt_sysroot"*)
>     func_stripname "$lt_sysroot" '' "$1"
>     func_replace_sysroot_result="=$func_stripname_result"
>     ;;
>   *)
>     # Including no sysroot.
>     func_replace_sysroot_result=$1
>     ;;
>   esac
> }
> 
1016,1017c1380
<         func_quote_for_eval "$arg"
< 	CC_quoted="$CC_quoted $func_quote_for_eval_result"
---
> 	func_append_quoted CC_quoted "$arg"
1018a1382,1383
>       CC_expanded=`func_echo_all $CC`
>       CC_quoted_expanded=`func_echo_all $CC_quoted`
1022c1387,1388
<       " $CC "* | "$CC "* | " `$ECHO $CC` "* | "`$ECHO $CC` "* | " $CC_quoted"* | "$CC_quoted "* | " `$ECHO $CC_quoted` "* | "`$ECHO $CC_quoted` "*) ;;
---
>       " $CC "* | "$CC "* | " $CC_expanded "* | "$CC_expanded "* | \
>       " $CC_quoted"* | "$CC_quoted "* | " $CC_quoted_expanded "* | "$CC_quoted_expanded "*) ;;
1033,1034c1399
< 	      func_quote_for_eval "$arg"
< 	      CC_quoted="$CC_quoted $func_quote_for_eval_result"
---
> 	      func_append_quoted CC_quoted "$arg"
1035a1401,1402
> 	    CC_expanded=`func_echo_all $CC`
> 	    CC_quoted_expanded=`func_echo_all $CC_quoted`
1037c1404,1405
< 	      " $CC "* | "$CC "* | " `$ECHO $CC` "* | "`$ECHO $CC` "* | " $CC_quoted"* | "$CC_quoted "* | " `$ECHO $CC_quoted` "* | "`$ECHO $CC_quoted` "*)
---
> 	    " $CC "* | "$CC "* | " $CC_expanded "* | "$CC_expanded "* | \
> 	    " $CC_quoted"* | "$CC_quoted "* | " $CC_quoted_expanded "* | "$CC_quoted_expanded "*)
1099a1468,1947
> 
> ##################################################
> # FILE NAME AND PATH CONVERSION HELPER FUNCTIONS #
> ##################################################
> 
> # func_convert_core_file_wine_to_w32 ARG
> # Helper function used by file name conversion functions when $build is *nix,
> # and $host is mingw, cygwin, or some other w32 environment. Relies on a
> # correctly configured wine environment available, with the winepath program
> # in $build's $PATH.
> #
> # ARG is the $build file name to be converted to w32 format.
> # Result is available in $func_convert_core_file_wine_to_w32_result, and will
> # be empty on error (or when ARG is empty)
> func_convert_core_file_wine_to_w32 ()
> {
>   $opt_debug
>   func_convert_core_file_wine_to_w32_result="$1"
>   if test -n "$1"; then
>     # Unfortunately, winepath does not exit with a non-zero error code, so we
>     # are forced to check the contents of stdout. On the other hand, if the
>     # command is not found, the shell will set an exit code of 127 and print
>     # *an error message* to stdout. So we must check for both error code of
>     # zero AND non-empty stdout, which explains the odd construction:
>     func_convert_core_file_wine_to_w32_tmp=`winepath -w "$1" 2>/dev/null`
>     if test "$?" -eq 0 && test -n "${func_convert_core_file_wine_to_w32_tmp}"; then
>       func_convert_core_file_wine_to_w32_result=`$ECHO "$func_convert_core_file_wine_to_w32_tmp" |
>         $SED -e "$lt_sed_naive_backslashify"`
>     else
>       func_convert_core_file_wine_to_w32_result=
>     fi
>   fi
> }
> # end: func_convert_core_file_wine_to_w32
> 
> 
> # func_convert_core_path_wine_to_w32 ARG
> # Helper function used by path conversion functions when $build is *nix, and
> # $host is mingw, cygwin, or some other w32 environment. Relies on a correctly
> # configured wine environment available, with the winepath program in $build's
> # $PATH. Assumes ARG has no leading or trailing path separator characters.
> #
> # ARG is path to be converted from $build format to win32.
> # Result is available in $func_convert_core_path_wine_to_w32_result.
> # Unconvertible file (directory) names in ARG are skipped; if no directory names
> # are convertible, then the result may be empty.
> func_convert_core_path_wine_to_w32 ()
> {
>   $opt_debug
>   # unfortunately, winepath doesn't convert paths, only file names
>   func_convert_core_path_wine_to_w32_result=""
>   if test -n "$1"; then
>     oldIFS=$IFS
>     IFS=:
>     for func_convert_core_path_wine_to_w32_f in $1; do
>       IFS=$oldIFS
>       func_convert_core_file_wine_to_w32 "$func_convert_core_path_wine_to_w32_f"
>       if test -n "$func_convert_core_file_wine_to_w32_result" ; then
>         if test -z "$func_convert_core_path_wine_to_w32_result"; then
>           func_convert_core_path_wine_to_w32_result="$func_convert_core_file_wine_to_w32_result"
>         else
>           func_append func_convert_core_path_wine_to_w32_result ";$func_convert_core_file_wine_to_w32_result"
>         fi
>       fi
>     done
>     IFS=$oldIFS
>   fi
> }
> # end: func_convert_core_path_wine_to_w32
> 
> 
> # func_cygpath ARGS...
> # Wrapper around calling the cygpath program via LT_CYGPATH. This is used when
> # when (1) $build is *nix and Cygwin is hosted via a wine environment; or (2)
> # $build is MSYS and $host is Cygwin, or (3) $build is Cygwin. In case (1) or
> # (2), returns the Cygwin file name or path in func_cygpath_result (input
> # file name or path is assumed to be in w32 format, as previously converted
> # from $build's *nix or MSYS format). In case (3), returns the w32 file name
> # or path in func_cygpath_result (input file name or path is assumed to be in
> # Cygwin format). Returns an empty string on error.
> #
> # ARGS are passed to cygpath, with the last one being the file name or path to
> # be converted.
> #
> # Specify the absolute *nix (or w32) name to cygpath in the LT_CYGPATH
> # environment variable; do not put it in $PATH.
> func_cygpath ()
> {
>   $opt_debug
>   if test -n "$LT_CYGPATH" && test -f "$LT_CYGPATH"; then
>     func_cygpath_result=`$LT_CYGPATH "$@" 2>/dev/null`
>     if test "$?" -ne 0; then
>       # on failure, ensure result is empty
>       func_cygpath_result=
>     fi
>   else
>     func_cygpath_result=
>     func_error "LT_CYGPATH is empty or specifies non-existent file: \`$LT_CYGPATH'"
>   fi
> }
> #end: func_cygpath
> 
> 
> # func_convert_core_msys_to_w32 ARG
> # Convert file name or path ARG from MSYS format to w32 format.  Return
> # result in func_convert_core_msys_to_w32_result.
> func_convert_core_msys_to_w32 ()
> {
>   $opt_debug
>   # awkward: cmd appends spaces to result
>   func_convert_core_msys_to_w32_result=`( cmd //c echo "$1" ) 2>/dev/null |
>     $SED -e 's/[ ]*$//' -e "$lt_sed_naive_backslashify"`
> }
> #end: func_convert_core_msys_to_w32
> 
> 
> # func_convert_file_check ARG1 ARG2
> # Verify that ARG1 (a file name in $build format) was converted to $host
> # format in ARG2. Otherwise, emit an error message, but continue (resetting
> # func_to_host_file_result to ARG1).
> func_convert_file_check ()
> {
>   $opt_debug
>   if test -z "$2" && test -n "$1" ; then
>     func_error "Could not determine host file name corresponding to"
>     func_error "  \`$1'"
>     func_error "Continuing, but uninstalled executables may not work."
>     # Fallback:
>     func_to_host_file_result="$1"
>   fi
> }
> # end func_convert_file_check
> 
> 
> # func_convert_path_check FROM_PATHSEP TO_PATHSEP FROM_PATH TO_PATH
> # Verify that FROM_PATH (a path in $build format) was converted to $host
> # format in TO_PATH. Otherwise, emit an error message, but continue, resetting
> # func_to_host_file_result to a simplistic fallback value (see below).
> func_convert_path_check ()
> {
>   $opt_debug
>   if test -z "$4" && test -n "$3"; then
>     func_error "Could not determine the host path corresponding to"
>     func_error "  \`$3'"
>     func_error "Continuing, but uninstalled executables may not work."
>     # Fallback.  This is a deliberately simplistic "conversion" and
>     # should not be "improved".  See libtool.info.
>     if test "x$1" != "x$2"; then
>       lt_replace_pathsep_chars="s|$1|$2|g"
>       func_to_host_path_result=`echo "$3" |
>         $SED -e "$lt_replace_pathsep_chars"`
>     else
>       func_to_host_path_result="$3"
>     fi
>   fi
> }
> # end func_convert_path_check
> 
> 
> # func_convert_path_front_back_pathsep FRONTPAT BACKPAT REPL ORIG
> # Modifies func_to_host_path_result by prepending REPL if ORIG matches FRONTPAT
> # and appending REPL if ORIG matches BACKPAT.
> func_convert_path_front_back_pathsep ()
> {
>   $opt_debug
>   case $4 in
>   $1 ) func_to_host_path_result="$3$func_to_host_path_result"
>     ;;
>   esac
>   case $4 in
>   $2 ) func_append func_to_host_path_result "$3"
>     ;;
>   esac
> }
> # end func_convert_path_front_back_pathsep
> 
> 
> ##################################################
> # $build to $host FILE NAME CONVERSION FUNCTIONS #
> ##################################################
> # invoked via `$to_host_file_cmd ARG'
> #
> # In each case, ARG is the path to be converted from $build to $host format.
> # Result will be available in $func_to_host_file_result.
> 
> 
> # func_to_host_file ARG
> # Converts the file name ARG from $build format to $host format. Return result
> # in func_to_host_file_result.
> func_to_host_file ()
> {
>   $opt_debug
>   $to_host_file_cmd "$1"
> }
> # end func_to_host_file
> 
> 
> # func_to_tool_file ARG LAZY
> # converts the file name ARG from $build format to toolchain format. Return
> # result in func_to_tool_file_result.  If the conversion in use is listed
> # in (the comma separated) LAZY, no conversion takes place.
> func_to_tool_file ()
> {
>   $opt_debug
>   case ,$2, in
>     *,"$to_tool_file_cmd",*)
>       func_to_tool_file_result=$1
>       ;;
>     *)
>       $to_tool_file_cmd "$1"
>       func_to_tool_file_result=$func_to_host_file_result
>       ;;
>   esac
> }
> # end func_to_tool_file
> 
> 
> # func_convert_file_noop ARG
> # Copy ARG to func_to_host_file_result.
> func_convert_file_noop ()
> {
>   func_to_host_file_result="$1"
> }
> # end func_convert_file_noop
> 
> 
> # func_convert_file_msys_to_w32 ARG
> # Convert file name ARG from (mingw) MSYS to (mingw) w32 format; automatic
> # conversion to w32 is not available inside the cwrapper.  Returns result in
> # func_to_host_file_result.
> func_convert_file_msys_to_w32 ()
> {
>   $opt_debug
>   func_to_host_file_result="$1"
>   if test -n "$1"; then
>     func_convert_core_msys_to_w32 "$1"
>     func_to_host_file_result="$func_convert_core_msys_to_w32_result"
>   fi
>   func_convert_file_check "$1" "$func_to_host_file_result"
> }
> # end func_convert_file_msys_to_w32
> 
> 
> # func_convert_file_cygwin_to_w32 ARG
> # Convert file name ARG from Cygwin to w32 format.  Returns result in
> # func_to_host_file_result.
> func_convert_file_cygwin_to_w32 ()
> {
>   $opt_debug
>   func_to_host_file_result="$1"
>   if test -n "$1"; then
>     # because $build is cygwin, we call "the" cygpath in $PATH; no need to use
>     # LT_CYGPATH in this case.
>     func_to_host_file_result=`cygpath -m "$1"`
>   fi
>   func_convert_file_check "$1" "$func_to_host_file_result"
> }
> # end func_convert_file_cygwin_to_w32
> 
> 
> # func_convert_file_nix_to_w32 ARG
> # Convert file name ARG from *nix to w32 format.  Requires a wine environment
> # and a working winepath. Returns result in func_to_host_file_result.
> func_convert_file_nix_to_w32 ()
> {
>   $opt_debug
>   func_to_host_file_result="$1"
>   if test -n "$1"; then
>     func_convert_core_file_wine_to_w32 "$1"
>     func_to_host_file_result="$func_convert_core_file_wine_to_w32_result"
>   fi
>   func_convert_file_check "$1" "$func_to_host_file_result"
> }
> # end func_convert_file_nix_to_w32
> 
> 
> # func_convert_file_msys_to_cygwin ARG
> # Convert file name ARG from MSYS to Cygwin format.  Requires LT_CYGPATH set.
> # Returns result in func_to_host_file_result.
> func_convert_file_msys_to_cygwin ()
> {
>   $opt_debug
>   func_to_host_file_result="$1"
>   if test -n "$1"; then
>     func_convert_core_msys_to_w32 "$1"
>     func_cygpath -u "$func_convert_core_msys_to_w32_result"
>     func_to_host_file_result="$func_cygpath_result"
>   fi
>   func_convert_file_check "$1" "$func_to_host_file_result"
> }
> # end func_convert_file_msys_to_cygwin
> 
> 
> # func_convert_file_nix_to_cygwin ARG
> # Convert file name ARG from *nix to Cygwin format.  Requires Cygwin installed
> # in a wine environment, working winepath, and LT_CYGPATH set.  Returns result
> # in func_to_host_file_result.
> func_convert_file_nix_to_cygwin ()
> {
>   $opt_debug
>   func_to_host_file_result="$1"
>   if test -n "$1"; then
>     # convert from *nix to w32, then use cygpath to convert from w32 to cygwin.
>     func_convert_core_file_wine_to_w32 "$1"
>     func_cygpath -u "$func_convert_core_file_wine_to_w32_result"
>     func_to_host_file_result="$func_cygpath_result"
>   fi
>   func_convert_file_check "$1" "$func_to_host_file_result"
> }
> # end func_convert_file_nix_to_cygwin
> 
> 
> #############################################
> # $build to $host PATH CONVERSION FUNCTIONS #
> #############################################
> # invoked via `$to_host_path_cmd ARG'
> #
> # In each case, ARG is the path to be converted from $build to $host format.
> # The result will be available in $func_to_host_path_result.
> #
> # Path separators are also converted from $build format to $host format.  If
> # ARG begins or ends with a path separator character, it is preserved (but
> # converted to $host format) on output.
> #
> # All path conversion functions are named using the following convention:
> #   file name conversion function    : func_convert_file_X_to_Y ()
> #   path conversion function         : func_convert_path_X_to_Y ()
> # where, for any given $build/$host combination the 'X_to_Y' value is the
> # same.  If conversion functions are added for new $build/$host combinations,
> # the two new functions must follow this pattern, or func_init_to_host_path_cmd
> # will break.
> 
> 
> # func_init_to_host_path_cmd
> # Ensures that function "pointer" variable $to_host_path_cmd is set to the
> # appropriate value, based on the value of $to_host_file_cmd.
> to_host_path_cmd=
> func_init_to_host_path_cmd ()
> {
>   $opt_debug
>   if test -z "$to_host_path_cmd"; then
>     func_stripname 'func_convert_file_' '' "$to_host_file_cmd"
>     to_host_path_cmd="func_convert_path_${func_stripname_result}"
>   fi
> }
> 
> 
> # func_to_host_path ARG
> # Converts the path ARG from $build format to $host format. Return result
> # in func_to_host_path_result.
> func_to_host_path ()
> {
>   $opt_debug
>   func_init_to_host_path_cmd
>   $to_host_path_cmd "$1"
> }
> # end func_to_host_path
> 
> 
> # func_convert_path_noop ARG
> # Copy ARG to func_to_host_path_result.
> func_convert_path_noop ()
> {
>   func_to_host_path_result="$1"
> }
> # end func_convert_path_noop
> 
> 
> # func_convert_path_msys_to_w32 ARG
> # Convert path ARG from (mingw) MSYS to (mingw) w32 format; automatic
> # conversion to w32 is not available inside the cwrapper.  Returns result in
> # func_to_host_path_result.
> func_convert_path_msys_to_w32 ()
> {
>   $opt_debug
>   func_to_host_path_result="$1"
>   if test -n "$1"; then
>     # Remove leading and trailing path separator characters from ARG.  MSYS
>     # behavior is inconsistent here; cygpath turns them into '.;' and ';.';
>     # and winepath ignores them completely.
>     func_stripname : : "$1"
>     func_to_host_path_tmp1=$func_stripname_result
>     func_convert_core_msys_to_w32 "$func_to_host_path_tmp1"
>     func_to_host_path_result="$func_convert_core_msys_to_w32_result"
>     func_convert_path_check : ";" \
>       "$func_to_host_path_tmp1" "$func_to_host_path_result"
>     func_convert_path_front_back_pathsep ":*" "*:" ";" "$1"
>   fi
> }
> # end func_convert_path_msys_to_w32
> 
> 
> # func_convert_path_cygwin_to_w32 ARG
> # Convert path ARG from Cygwin to w32 format.  Returns result in
> # func_to_host_file_result.
> func_convert_path_cygwin_to_w32 ()
> {
>   $opt_debug
>   func_to_host_path_result="$1"
>   if test -n "$1"; then
>     # See func_convert_path_msys_to_w32:
>     func_stripname : : "$1"
>     func_to_host_path_tmp1=$func_stripname_result
>     func_to_host_path_result=`cygpath -m -p "$func_to_host_path_tmp1"`
>     func_convert_path_check : ";" \
>       "$func_to_host_path_tmp1" "$func_to_host_path_result"
>     func_convert_path_front_back_pathsep ":*" "*:" ";" "$1"
>   fi
> }
> # end func_convert_path_cygwin_to_w32
> 
> 
> # func_convert_path_nix_to_w32 ARG
> # Convert path ARG from *nix to w32 format.  Requires a wine environment and
> # a working winepath.  Returns result in func_to_host_file_result.
> func_convert_path_nix_to_w32 ()
> {
>   $opt_debug
>   func_to_host_path_result="$1"
>   if test -n "$1"; then
>     # See func_convert_path_msys_to_w32:
>     func_stripname : : "$1"
>     func_to_host_path_tmp1=$func_stripname_result
>     func_convert_core_path_wine_to_w32 "$func_to_host_path_tmp1"
>     func_to_host_path_result="$func_convert_core_path_wine_to_w32_result"
>     func_convert_path_check : ";" \
>       "$func_to_host_path_tmp1" "$func_to_host_path_result"
>     func_convert_path_front_back_pathsep ":*" "*:" ";" "$1"
>   fi
> }
> # end func_convert_path_nix_to_w32
> 
> 
> # func_convert_path_msys_to_cygwin ARG
> # Convert path ARG from MSYS to Cygwin format.  Requires LT_CYGPATH set.
> # Returns result in func_to_host_file_result.
> func_convert_path_msys_to_cygwin ()
> {
>   $opt_debug
>   func_to_host_path_result="$1"
>   if test -n "$1"; then
>     # See func_convert_path_msys_to_w32:
>     func_stripname : : "$1"
>     func_to_host_path_tmp1=$func_stripname_result
>     func_convert_core_msys_to_w32 "$func_to_host_path_tmp1"
>     func_cygpath -u -p "$func_convert_core_msys_to_w32_result"
>     func_to_host_path_result="$func_cygpath_result"
>     func_convert_path_check : : \
>       "$func_to_host_path_tmp1" "$func_to_host_path_result"
>     func_convert_path_front_back_pathsep ":*" "*:" : "$1"
>   fi
> }
> # end func_convert_path_msys_to_cygwin
> 
> 
> # func_convert_path_nix_to_cygwin ARG
> # Convert path ARG from *nix to Cygwin format.  Requires Cygwin installed in a
> # a wine environment, working winepath, and LT_CYGPATH set.  Returns result in
> # func_to_host_file_result.
> func_convert_path_nix_to_cygwin ()
> {
>   $opt_debug
>   func_to_host_path_result="$1"
>   if test -n "$1"; then
>     # Remove leading and trailing path separator characters from
>     # ARG. msys behavior is inconsistent here, cygpath turns them
>     # into '.;' and ';.', and winepath ignores them completely.
>     func_stripname : : "$1"
>     func_to_host_path_tmp1=$func_stripname_result
>     func_convert_core_path_wine_to_w32 "$func_to_host_path_tmp1"
>     func_cygpath -u -p "$func_convert_core_path_wine_to_w32_result"
>     func_to_host_path_result="$func_cygpath_result"
>     func_convert_path_check : : \
>       "$func_to_host_path_tmp1" "$func_to_host_path_result"
>     func_convert_path_front_back_pathsep ":*" "*:" : "$1"
>   fi
> }
> # end func_convert_path_nix_to_cygwin
> 
> 
1140c1988
<           pie_flag="$pie_flag $arg"
---
>           func_append pie_flag " $arg"
1145c1993
< 	  later="$later $arg"
---
> 	  func_append later " $arg"
1166,1167c2014
< 	    func_quote_for_eval "$arg"
< 	    lastarg="$lastarg $func_quote_for_eval_result"
---
> 	    func_append_quoted lastarg "$arg"
1174c2021
< 	  base_compile="$base_compile $lastarg"
---
> 	  func_append base_compile " $lastarg"
1190,1191c2037
<       func_quote_for_eval "$lastarg"
<       base_compile="$base_compile $func_quote_for_eval_result"
---
>       func_append_quoted base_compile "$lastarg"
1216c2062
<     *.[fF][09]? | *.for | *.java | *.obj | *.sx)
---
>     *.[fF][09]? | *.for | *.java | *.obj | *.sx | *.cu | *.cup)
1291c2137
<       output_obj=`$ECHO "X$srcfile" | $Xsed -e 's%^.*/%%' -e 's%\.[^.]*$%%'`.${objext}
---
>       output_obj=`$ECHO "$srcfile" | $SED 's%^.*/%%; s%\.[^.]*$%%'`.${objext}
1322c2168
<       removelist="$removelist $output_obj"
---
>       func_append removelist " $output_obj"
1327c2173
<     removelist="$removelist $lockfile"
---
>     func_append removelist " $lockfile"
1330,1332c2176,2177
<     if test -n "$fix_srcfile_path"; then
<       eval srcfile=\"$fix_srcfile_path\"
<     fi
---
>     func_to_tool_file "$srcfile" func_convert_file_msys_to_w32
>     srcfile=$func_to_tool_file_result
1352c2197
< 	command="$command -o $lobj"
---
> 	func_append command " -o $lobj"
1399c2244
< 	command="$command -o $obj"
---
> 	func_append command " -o $obj"
1403c2248
<       command="$command$suppress_output"
---
>       func_append command "$suppress_output"
1448c2293
< test "$mode" = compile && func_mode_compile ${1+"$@"}
---
>   test "$opt_mode" = compile && func_mode_compile ${1+"$@"}
1454c2299
<     case $mode in
---
>     case $opt_mode in
1485,1486c2330,2331
<   -prefer-pic       try to building PIC objects only
<   -prefer-non-pic   try to building non-PIC objects only
---
>   -prefer-pic       try to build PIC objects only
>   -prefer-non-pic   try to build non-PIC objects only
1488a2334
>   -Wc,FLAG          pass FLAG directly to the compiler
1541c2387
<   -inst-prefix PREFIX-DIR  Use PREFIX-DIR as a staging area for installation
---
>   -inst-prefix-dir PREFIX-DIR  Use PREFIX-DIR as a staging area for installation
1560a2407,2408
>   -bindir BINDIR    specify path to binaries directory (for systems where
>                     libraries must be found in the PATH setting at runtime)
1588a2437,2441
>   -Wc,FLAG
>   -Xcompiler FLAG   pass linker-specific FLAG directly to the compiler
>   -Wl,FLAG
>   -Xlinker FLAG     pass linker-specific FLAG directly to the linker
>   -XCClinker FLAG   pass link-specific FLAG to the compiler driver (CC)
1622c2475
<         func_fatal_help "invalid operation mode \`$mode'"
---
>         func_fatal_help "invalid operation mode \`$opt_mode'"
1626c2479
<     $ECHO
---
>     echo
1628,1629d2480
< 
<     exit $?
1633c2484,2512
<   $opt_help && func_mode_help
---
> if $opt_help; then
>   if test "$opt_help" = :; then
>     func_mode_help
>   else
>     {
>       func_help noexit
>       for opt_mode in compile link execute install finish uninstall clean; do
> 	func_mode_help
>       done
>     } | sed -n '1p; 2,$s/^Usage:/  or: /p'
>     {
>       func_help noexit
>       for opt_mode in compile link execute install finish uninstall clean; do
> 	echo
> 	func_mode_help
>       done
>     } |
>     sed '1d
>       /^When reporting/,/^Report/{
> 	H
> 	d
>       }
>       $x
>       /information about other modes/d
>       /more detailed .*MODE/d
>       s/^Usage:.*--mode=\([^ ]*\) .*/Description of \1 mode:/'
>   fi
>   exit $?
> fi
1646c2525
<     for file in $execute_dlfiles; do
---
>     for file in $opt_dlopen; do
1652a2532,2534
> 	func_resolve_sysroot "$file"
> 	file=$func_resolve_sysroot_result
> 
1674c2556
< 	  dir="$dir/$objdir"
---
> 	  func_append dir "/$objdir"
1715c2597
<       -*) ;;
---
>       -* | *.la | *.lo ) ;;
1731,1732c2613
<       func_quote_for_eval "$file"
<       args="$args $func_quote_for_eval_result"
---
>       func_append_quoted args "$file"
1757c2638
< 	$ECHO "export $shlibpath_var"
---
> 	echo "export $shlibpath_var"
1764c2645
< test "$mode" = execute && func_mode_execute ${1+"$@"}
---
> test "$opt_mode" = execute && func_mode_execute ${1+"$@"}
1771c2652,2653
<     libdirs="$nonopt"
---
>     libs=
>     libdirs=
1774,1775c2656
<     if test -n "$finish_cmds$finish_eval" && test -n "$libdirs"; then
<       for dir
---
>     for opt in "$nonopt" ${1+"$@"}
1777c2658,2691
< 	libdirs="$libdirs $dir"
---
>       if test -d "$opt"; then
> 	func_append libdirs " $opt"
> 
>       elif test -f "$opt"; then
> 	if func_lalib_unsafe_p "$opt"; then
> 	  func_append libs " $opt"
> 	else
> 	  func_warning "\`$opt' is not a valid libtool archive"
> 	fi
> 
>       else
> 	func_fatal_error "invalid argument \`$opt'"
>       fi
>     done
> 
>     if test -n "$libs"; then
>       if test -n "$lt_sysroot"; then
>         sysroot_regex=`$ECHO "$lt_sysroot" | $SED "$sed_make_literal_regex"`
>         sysroot_cmd="s/\([ ']\)$sysroot_regex/\1/g;"
>       else
>         sysroot_cmd=
>       fi
> 
>       # Remove sysroot references
>       if $opt_dry_run; then
>         for lib in $libs; do
>           echo "removing references to $lt_sysroot and \`=' prefixes from $lib"
>         done
>       else
>         tmpdir=`func_mktempdir`
>         for lib in $libs; do
> 	  sed -e "${sysroot_cmd} s/\([ ']-[LR]\)=/\1/g; s/\([ ']\)=/\1/g" $lib \
> 	    > $tmpdir/tmp-la
> 	  mv -f $tmpdir/tmp-la $lib
1778a2693,2695
>         ${RM}r "$tmpdir"
>       fi
>     fi
1779a2697
>     if test -n "$finish_cmds$finish_eval" && test -n "$libdirs"; then
1789c2707
< 	  $opt_dry_run || eval "$cmds" || admincmds="$admincmds
---
> 	  $opt_dry_run || eval "$cmds" || func_append admincmds "
1798,1799c2716,2718
<     $ECHO "X----------------------------------------------------------------------" | $Xsed
<     $ECHO "Libraries have been installed in:"
---
>     if test -n "$finish_cmds$finish_eval" && test -n "$libdirs"; then
>       echo "----------------------------------------------------------------------"
>       echo "Libraries have been installed in:"
1803,1807c2722,2726
<     $ECHO
<     $ECHO "If you ever happen to want to link against installed libraries"
<     $ECHO "in a given directory, LIBDIR, you must either use libtool, and"
<     $ECHO "specify the full pathname of the library, or use the \`-LLIBDIR'"
<     $ECHO "flag during linking and do at least one of the following:"
---
>       echo
>       echo "If you ever happen to want to link against installed libraries"
>       echo "in a given directory, LIBDIR, you must either use libtool, and"
>       echo "specify the full pathname of the library, or use the \`-LLIBDIR'"
>       echo "flag during linking and do at least one of the following:"
1809,1810c2728,2729
<       $ECHO "   - add LIBDIR to the \`$shlibpath_var' environment variable"
<       $ECHO "     during execution"
---
> 	echo "   - add LIBDIR to the \`$shlibpath_var' environment variable"
> 	echo "     during execution"
1813,1814c2732,2733
<       $ECHO "   - add LIBDIR to the \`$runpath_var' environment variable"
<       $ECHO "     during linking"
---
> 	echo "   - add LIBDIR to the \`$runpath_var' environment variable"
> 	echo "     during linking"
1826c2745
<       $ECHO "   - have your system administrator add LIBDIR to \`/etc/ld.so.conf'"
---
> 	echo "   - have your system administrator add LIBDIR to \`/etc/ld.so.conf'"
1828c2747
<     $ECHO
---
>       echo
1830c2749
<     $ECHO "See any operating system documentation about shared libraries for"
---
>       echo "See any operating system documentation about shared libraries for"
1833,1834c2752,2753
<         $ECHO "more information, such as the ld(1), crle(1) and ld.so(8) manual"
< 	$ECHO "pages."
---
> 	  echo "more information, such as the ld(1), crle(1) and ld.so(8) manual"
> 	  echo "pages."
1837c2756
<         $ECHO "more information, such as the ld(1) and ld.so(8) manual pages."
---
> 	  echo "more information, such as the ld(1) and ld.so(8) manual pages."
1840c2759,2760
<     $ECHO "X----------------------------------------------------------------------" | $Xsed
---
>       echo "----------------------------------------------------------------------"
>     fi
1844c2764
< test "$mode" = finish && func_mode_finish ${1+"$@"}
---
> test "$opt_mode" = finish && func_mode_finish ${1+"$@"}
1855c2775
<        $ECHO "X$nonopt" | $GREP shtool >/dev/null; then
---
>        case $nonopt in *shtool*) :;; *) false;; esac; then
1869c2789,2794
<     install_prog="$install_prog$func_quote_for_eval_result"
---
>     func_append install_prog "$func_quote_for_eval_result"
>     install_shared_prog=$install_prog
>     case " $install_prog " in
>       *[\\\ /]cp\ *) install_cp=: ;;
>       *) install_cp=false ;;
>     esac
1878a2804
>     no_mode=:
1880a2807
>       arg2=
1882c2809
< 	files="$files $dest"
---
> 	func_append files " $dest"
1890,1893c2817,2819
< 	case " $install_prog " in
< 	*[\\\ /]cp\ *) ;;
< 	*) prev=$arg ;;
< 	esac
---
> 	if $install_cp; then :; else
> 	  prev=$arg
> 	fi
1906a2833,2836
> 	  if test "x$prev" = x-m && test -n "$install_override_mode"; then
> 	    arg2=$install_override_mode
> 	    no_mode=false
> 	  fi
1917c2847,2851
<       install_prog="$install_prog $func_quote_for_eval_result"
---
>       func_append install_prog " $func_quote_for_eval_result"
>       if test -n "$arg2"; then
> 	func_quote_for_eval "$arg2"
>       fi
>       func_append install_shared_prog " $func_quote_for_eval_result"
1925a2860,2866
>     if test -n "$install_override_mode" && $no_mode; then
>       if $install_cp; then :; else
> 	func_quote_for_eval "$install_override_mode"
> 	func_append install_shared_prog " -m $func_quote_for_eval_result"
>       fi
>     fi
> 
1980c2921
< 	staticlibs="$staticlibs $file"
---
> 	func_append staticlibs " $file"
1983a2925,2927
> 	func_resolve_sysroot "$file"
> 	file=$func_resolve_sysroot_result
> 
1997c2941
< 	  *) current_libdirs="$current_libdirs $libdir" ;;
---
> 	  *) func_append current_libdirs " $libdir" ;;
2003c2947
< 	  *) future_libdirs="$future_libdirs $libdir" ;;
---
> 	  *) func_append future_libdirs " $libdir" ;;
2009c2953
< 	dir="$dir$objdir"
---
> 	func_append dir "$objdir"
2013c2957
< 	  inst_prefix_dir=`$ECHO "X$destdir" | $Xsed -e "s%$libdir\$%%"`
---
> 	  inst_prefix_dir=`$ECHO "$destdir" | $SED -e "s%$libdir\$%%"`
2026c2970
< 	    relink_command=`$ECHO "X$relink_command" | $Xsed -e "s%@inst_prefix_dir@%-inst-prefix-dir $inst_prefix_dir%"`
---
> 	    relink_command=`$ECHO "$relink_command" | $SED "s%@inst_prefix_dir@%-inst-prefix-dir $inst_prefix_dir%"`
2028c2972
< 	    relink_command=`$ECHO "X$relink_command" | $Xsed -e "s%@inst_prefix_dir@%%"`
---
> 	    relink_command=`$ECHO "$relink_command" | $SED "s%@inst_prefix_dir@%%"`
2046c2990
< 	  func_show_eval "$install_prog $dir/$srcname $destdir/$realname" \
---
> 	  func_show_eval "$install_shared_prog $dir/$srcname $destdir/$realname" \
2086c3030
< 	test -n "$old_library" && staticlibs="$staticlibs $dir/$old_library"
---
> 	test -n "$old_library" && func_append staticlibs " $dir/$old_library"
2186c3130
< 	    libfile="$libdir/"`$ECHO "X$lib" | $Xsed -e 's%^.*/%%g'` ### testsuite: skip nested quoting test
---
> 	    libfile="$libdir/"`$ECHO "$lib" | $SED 's%^.*/%%g'` ### testsuite: skip nested quoting test
2205c3149
< 	        relink_command=`$ECHO "X$relink_command" | $Xsed -e 's%@OUTPUT@%'"$outputname"'%g'`
---
> 	        relink_command=`$ECHO "$relink_command" | $SED 's%@OUTPUT@%'"$outputname"'%g'`
2224c3168
< 	    file=`$ECHO "X$file$stripped_ext" | $Xsed -e "s%\([^/]*\)$%$objdir/\1%"`
---
> 	    file=`$ECHO "$file$stripped_ext" | $SED "s%\([^/]*\)$%$objdir/\1%"`
2283c3227
< test "$mode" = install && func_mode_install ${1+"$@"}
---
> test "$opt_mode" = install && func_mode_install ${1+"$@"}
2325a3270,3285
> #if defined(__GNUC__) && (((__GNUC__ == 4) && (__GNUC_MINOR__ >= 4)) || (__GNUC__ > 4))
> #pragma GCC diagnostic ignored \"-Wstrict-prototypes\"
> #endif
> 
> /* Keep this code in sync between libtool.m4, ltmain, lt_system.h, and tests.  */
> #if defined(_WIN32) || defined(__CYGWIN__) || defined(_WIN32_WCE)
> /* DATA imports from DLLs on WIN32 con't be const, because runtime
>    relocations are performed -- see ld's documentation on pseudo-relocs.  */
> # define LT_DLSYM_CONST
> #elif defined(__osf__)
> /* This system does not cope well with relocations in const data.  */
> # define LT_DLSYM_CONST
> #else
> # define LT_DLSYM_CONST const
> #endif
> 
2335c3295
< 	  progfiles=`$ECHO "X$objs$old_deplibs" | $SP2NL | $Xsed -e "$lo2o" | $NL2SP`
---
> 	  progfiles=`$ECHO "$objs$old_deplibs" | $SP2NL | $SED "$lo2o" | $NL2SP`
2337,2338c3297,3299
< 	    func_verbose "extracting global C symbols from \`$progfile'"
< 	    $opt_dry_run || eval "$NM $progfile | $global_symbol_pipe >> '$nlist'"
---
> 	    func_to_tool_file "$progfile" func_convert_file_msys_to_w32
> 	    func_verbose "extracting global C symbols from \`$func_to_tool_file_result'"
> 	    $opt_dry_run || eval "$NM $func_to_tool_file_result | $global_symbol_pipe >> '$nlist'"
2374c3335
< 	        *cygwin | *mingw* | *cegcc* )
---
> 	        *cygwin* | *mingw* | *cegcc* )
2386a3348,3386
>           case $host in
> 	    *cygwin* | *mingw* | *cegcc* )
> 	      # if an import library, we need to obtain dlname
> 	      if func_win32_import_lib_p "$dlprefile"; then
> 	        func_tr_sh "$dlprefile"
> 	        eval "curr_lafile=\$libfile_$func_tr_sh_result"
> 	        dlprefile_dlbasename=""
> 	        if test -n "$curr_lafile" && func_lalib_p "$curr_lafile"; then
> 	          # Use subshell, to avoid clobbering current variable values
> 	          dlprefile_dlname=`source "$curr_lafile" && echo "$dlname"`
> 	          if test -n "$dlprefile_dlname" ; then
> 	            func_basename "$dlprefile_dlname"
> 	            dlprefile_dlbasename="$func_basename_result"
> 	          else
> 	            # no lafile. user explicitly requested -dlpreopen <import library>.
> 	            $sharedlib_from_linklib_cmd "$dlprefile"
> 	            dlprefile_dlbasename=$sharedlib_from_linklib_result
> 	          fi
> 	        fi
> 	        $opt_dry_run || {
> 	          if test -n "$dlprefile_dlbasename" ; then
> 	            eval '$ECHO ": $dlprefile_dlbasename" >> "$nlist"'
> 	          else
> 	            func_warning "Could not compute DLL name from $name"
> 	            eval '$ECHO ": $name " >> "$nlist"'
> 	          fi
> 	          func_to_tool_file "$dlprefile" func_convert_file_msys_to_w32
> 	          eval "$NM \"$func_to_tool_file_result\" 2>/dev/null | $global_symbol_pipe |
> 	            $SED -e '/I __imp/d' -e 's/I __nm_/D /;s/_nm__//' >> '$nlist'"
> 	        }
> 	      else # not an import lib
> 	        $opt_dry_run || {
> 	          eval '$ECHO ": $name " >> "$nlist"'
> 	          func_to_tool_file "$dlprefile" func_convert_file_msys_to_w32
> 	          eval "$NM \"$func_to_tool_file_result\" 2>/dev/null | $global_symbol_pipe >> '$nlist'"
> 	        }
> 	      fi
> 	    ;;
> 	    *)
2389c3389,3390
< 	    eval "$NM $dlprefile 2>/dev/null | $global_symbol_pipe >> '$nlist'"
---
> 	        func_to_tool_file "$dlprefile" func_convert_file_msys_to_w32
> 	        eval "$NM \"$func_to_tool_file_result\" 2>/dev/null | $global_symbol_pipe >> '$nlist'"
2390a3392,3393
> 	    ;;
>           esac
2418c3421
< 	    $ECHO '/* NONE */' >> "$output_objdir/$my_dlsyms"
---
> 	    echo '/* NONE */' >> "$output_objdir/$my_dlsyms"
2421c3424
< 	  $ECHO >> "$output_objdir/$my_dlsyms" "\
---
> 	  echo >> "$output_objdir/$my_dlsyms" "\
2428,2445c3431
< "
< 	  case $host in
< 	  *cygwin* | *mingw* | *cegcc* )
< 	    $ECHO >> "$output_objdir/$my_dlsyms" "\
< /* DATA imports from DLLs on WIN32 con't be const, because
<    runtime relocations are performed -- see ld's documentation
<    on pseudo-relocs.  */"
< 	    lt_dlsym_const= ;;
< 	  *osf5*)
< 	    echo >> "$output_objdir/$my_dlsyms" "\
< /* This system does not cope well with relocations in const data */"
< 	    lt_dlsym_const= ;;
< 	  *)
< 	    lt_dlsym_const=const ;;
< 	  esac
< 
< 	  $ECHO >> "$output_objdir/$my_dlsyms" "\
< extern $lt_dlsym_const lt_dlsymlist
---
> extern LT_DLSYM_CONST lt_dlsymlist
2447c3433
< $lt_dlsym_const lt_dlsymlist
---
> LT_DLSYM_CONST lt_dlsymlist
2460c3446
< 	  $ECHO >> "$output_objdir/$my_dlsyms" "\
---
> 	  echo >> "$output_objdir/$my_dlsyms" "\
2503c3489
< 	  *) symtab_cflags="$symtab_cflags $arg" ;;
---
> 	  *) func_append symtab_cflags " $arg" ;;
2518,2519c3504,3505
< 	    compile_command=`$ECHO "X$compile_command" | $Xsed -e "s%@SYMFILE@%$output_objdir/$my_outputname.def $symfileobj%"`
< 	    finalize_command=`$ECHO "X$finalize_command" | $Xsed -e "s%@SYMFILE@%$output_objdir/$my_outputname.def $symfileobj%"`
---
> 	    compile_command=`$ECHO "$compile_command" | $SED "s%@SYMFILE@%$output_objdir/$my_outputname.def $symfileobj%"`
> 	    finalize_command=`$ECHO "$finalize_command" | $SED "s%@SYMFILE@%$output_objdir/$my_outputname.def $symfileobj%"`
2521,2522c3507,3508
< 	    compile_command=`$ECHO "X$compile_command" | $Xsed -e "s%@SYMFILE@%$symfileobj%"`
< 	    finalize_command=`$ECHO "X$finalize_command" | $Xsed -e "s%@SYMFILE@%$symfileobj%"`
---
> 	    compile_command=`$ECHO "$compile_command" | $SED "s%@SYMFILE@%$symfileobj%"`
> 	    finalize_command=`$ECHO "$finalize_command" | $SED "s%@SYMFILE@%$symfileobj%"`
2526,2527c3512,3513
< 	  compile_command=`$ECHO "X$compile_command" | $Xsed -e "s%@SYMFILE@%$symfileobj%"`
< 	  finalize_command=`$ECHO "X$finalize_command" | $Xsed -e "s%@SYMFILE@%$symfileobj%"`
---
> 	  compile_command=`$ECHO "$compile_command" | $SED "s%@SYMFILE@%$symfileobj%"`
> 	  finalize_command=`$ECHO "$finalize_command" | $SED "s%@SYMFILE@%$symfileobj%"`
2541,2542c3527,3528
<       compile_command=`$ECHO "X$compile_command" | $Xsed -e "s% @SYMFILE@%%"`
<       finalize_command=`$ECHO "X$finalize_command" | $Xsed -e "s% @SYMFILE@%%"`
---
>       compile_command=`$ECHO "$compile_command" | $SED "s% @SYMFILE@%%"`
>       finalize_command=`$ECHO "$finalize_command" | $SED "s% @SYMFILE@%%"`
2551a3538
> # Despite the name, also deal with 64 bit binaries.
2561a3549
>     # Keep the egrep pattern in sync with the one in _LT_CHECK_MAGIC_METHOD.
2563,2564c3551,3553
<        $EGREP 'file format pe-i386(.*architecture: i386)?' >/dev/null ; then
<       win32_nmres=`eval $NM -f posix -A $1 |
---
>        $EGREP 'file format (pei*-i386(.*architecture: i386)?|pe-arm-wince|pe-x86-64)' >/dev/null; then
>       func_to_tool_file "$1" func_convert_file_msys_to_w32
>       win32_nmres=`eval $NM -f posix -A \"$func_to_tool_file_result\" |
2592a3582,3706
> # func_cygming_dll_for_implib ARG
> #
> # Platform-specific function to extract the
> # name of the DLL associated with the specified
> # import library ARG.
> # Invoked by eval'ing the libtool variable
> #    $sharedlib_from_linklib_cmd
> # Result is available in the variable
> #    $sharedlib_from_linklib_result
> func_cygming_dll_for_implib ()
> {
>   $opt_debug
>   sharedlib_from_linklib_result=`$DLLTOOL --identify-strict --identify "$1"`
> }
> 
> # func_cygming_dll_for_implib_fallback_core SECTION_NAME LIBNAMEs
> #
> # The is the core of a fallback implementation of a
> # platform-specific function to extract the name of the
> # DLL associated with the specified import library LIBNAME.
> #
> # SECTION_NAME is either .idata$6 or .idata$7, depending
> # on the platform and compiler that created the implib.
> #
> # Echos the name of the DLL associated with the
> # specified import library.
> func_cygming_dll_for_implib_fallback_core ()
> {
>   $opt_debug
>   match_literal=`$ECHO "$1" | $SED "$sed_make_literal_regex"`
>   $OBJDUMP -s --section "$1" "$2" 2>/dev/null |
>     $SED '/^Contents of section '"$match_literal"':/{
>       # Place marker at beginning of archive member dllname section
>       s/.*/====MARK====/
>       p
>       d
>     }
>     # These lines can sometimes be longer than 43 characters, but
>     # are always uninteresting
>     /:[	 ]*file format pe[i]\{,1\}-/d
>     /^In archive [^:]*:/d
>     # Ensure marker is printed
>     /^====MARK====/p
>     # Remove all lines with less than 43 characters
>     /^.\{43\}/!d
>     # From remaining lines, remove first 43 characters
>     s/^.\{43\}//' |
>     $SED -n '
>       # Join marker and all lines until next marker into a single line
>       /^====MARK====/ b para
>       H
>       $ b para
>       b
>       :para
>       x
>       s/\n//g
>       # Remove the marker
>       s/^====MARK====//
>       # Remove trailing dots and whitespace
>       s/[\. \t]*$//
>       # Print
>       /./p' |
>     # we now have a list, one entry per line, of the stringified
>     # contents of the appropriate section of all members of the
>     # archive which possess that section. Heuristic: eliminate
>     # all those which have a first or second character that is
>     # a '.' (that is, objdump's representation of an unprintable
>     # character.) This should work for all archives with less than
>     # 0x302f exports -- but will fail for DLLs whose name actually
>     # begins with a literal '.' or a single character followed by
>     # a '.'.
>     #
>     # Of those that remain, print the first one.
>     $SED -e '/^\./d;/^.\./d;q'
> }
> 
> # func_cygming_gnu_implib_p ARG
> # This predicate returns with zero status (TRUE) if
> # ARG is a GNU/binutils-style import library. Returns
> # with nonzero status (FALSE) otherwise.
> func_cygming_gnu_implib_p ()
> {
>   $opt_debug
>   func_to_tool_file "$1" func_convert_file_msys_to_w32
>   func_cygming_gnu_implib_tmp=`$NM "$func_to_tool_file_result" | eval "$global_symbol_pipe" | $EGREP ' (_head_[A-Za-z0-9_]+_[ad]l*|[A-Za-z0-9_]+_[ad]l*_iname)$'`
>   test -n "$func_cygming_gnu_implib_tmp"
> }
> 
> # func_cygming_ms_implib_p ARG
> # This predicate returns with zero status (TRUE) if
> # ARG is an MS-style import library. Returns
> # with nonzero status (FALSE) otherwise.
> func_cygming_ms_implib_p ()
> {
>   $opt_debug
>   func_to_tool_file "$1" func_convert_file_msys_to_w32
>   func_cygming_ms_implib_tmp=`$NM "$func_to_tool_file_result" | eval "$global_symbol_pipe" | $GREP '_NULL_IMPORT_DESCRIPTOR'`
>   test -n "$func_cygming_ms_implib_tmp"
> }
> 
> # func_cygming_dll_for_implib_fallback ARG
> # Platform-specific function to extract the
> # name of the DLL associated with the specified
> # import library ARG.
> #
> # This fallback implementation is for use when $DLLTOOL
> # does not support the --identify-strict option.
> # Invoked by eval'ing the libtool variable
> #    $sharedlib_from_linklib_cmd
> # Result is available in the variable
> #    $sharedlib_from_linklib_result
> func_cygming_dll_for_implib_fallback ()
> {
>   $opt_debug
>   if func_cygming_gnu_implib_p "$1" ; then
>     # binutils import library
>     sharedlib_from_linklib_result=`func_cygming_dll_for_implib_fallback_core '.idata$7' "$1"`
>   elif func_cygming_ms_implib_p "$1" ; then
>     # ms-generated import library
>     sharedlib_from_linklib_result=`func_cygming_dll_for_implib_fallback_core '.idata$6' "$1"`
>   else
>     # unknown
>     sharedlib_from_linklib_result=""
>   fi
> }
2601c3715,3726
<     func_show_eval "(cd \$f_ex_an_ar_dir && $AR x \"\$f_ex_an_ar_oldlib\")" 'exit $?'
---
>     if test "$lock_old_archive_extraction" = yes; then
>       lockfile=$f_ex_an_ar_oldlib.lock
>       until $opt_dry_run || ln "$progpath" "$lockfile" 2>/dev/null; do
> 	func_echo "Waiting for $lockfile to be removed"
> 	sleep 2
>       done
>     fi
>     func_show_eval "(cd \$f_ex_an_ar_dir && $AR x \"\$f_ex_an_ar_oldlib\")" \
> 		   'stat=$?; rm -f "$lockfile"; exit $stat'
>     if test "$lock_old_archive_extraction" = yes; then
>       $opt_dry_run || rm -f "$lockfile"
>     fi
2672c3797
< 	      darwin_files=`find unfat-$$ -name $darwin_file -print | $NL2SP`
---
> 	      darwin_files=`find unfat-$$ -name $darwin_file -print | sort | $NL2SP`
2687c3812
<       my_oldobjs="$my_oldobjs "`find $my_xdir -name \*.$objext -print -o -name \*.lo -print | $NL2SP`
---
>       my_oldobjs="$my_oldobjs "`find $my_xdir -name \*.$objext -print -o -name \*.lo -print | sort | $NL2SP`
2694,2695c3819,3826
< 
< # func_emit_wrapper_part1 [arg=no]
---
> # func_emit_wrapper [arg=no]
> #
> # Emit a libtool wrapper script on stdout.
> # Don't directly open a file because we may want to
> # incorporate the script contents within a cygwin/mingw
> # wrapper executable.  Must ONLY be called from within
> # func_mode_link because it depends on a number of variables
> # set therein.
2697,2700c3828,3833
< # Emit the first part of a libtool wrapper script on stdout.
< # For more information, see the description associated with
< # func_emit_wrapper(), below.
< func_emit_wrapper_part1 ()
---
> # ARG is the value that the WRAPPER_SCRIPT_BELONGS_IN_OBJDIR
> # variable will take.  If 'yes', then the emitted script
> # will assume that the directory in which it is stored is
> # the $objdir directory.  This is a cygwin/mingw-specific
> # behavior.
> func_emit_wrapper ()
2702,2705c3835
< 	func_emit_wrapper_part1_arg1=no
< 	if test -n "$1" ; then
< 	  func_emit_wrapper_part1_arg1=$1
< 	fi
---
> 	func_emit_wrapper_arg1=${1-no}
2721d3850
< Xsed='${SED} -e 1s/^X//'
2752,2756c3881,3911
<     ECHO=\"$qecho\"
<     file=\"\$0\"
<     # Make sure echo works.
<     if test \"X\$1\" = X--no-reexec; then
<       # Discard the --no-reexec flag, and continue.
---
>     file=\"\$0\""
> 
>     qECHO=`$ECHO "$ECHO" | $SED "$sed_quote_subst"`
>     $ECHO "\
> 
> # A function that is used when there is no print builtin or printf.
> func_fallback_echo ()
> {
>   eval 'cat <<_LTECHO_EOF
> \$1
> _LTECHO_EOF'
> }
>     ECHO=\"$qECHO\"
>   fi
> 
> # Very basic option parsing. These options are (a) specific to
> # the libtool wrapper, (b) are identical between the wrapper
> # /script/ and the wrapper /executable/ which is used only on
> # windows platforms, and (c) all begin with the string "--lt-"
> # (application programs are unlikely to have options which match
> # this pattern).
> #
> # There are only two supported options: --lt-debug and
> # --lt-dump-script. There is, deliberately, no --lt-help.
> #
> # The first argument to this parsing function should be the
> # script's $0 value, followed by "$@".
> lt_option_debug=
> func_parse_lt_options ()
> {
>   lt_script_arg0=\$0
2758,2763c3913,3933
<     elif test \"X\`{ \$ECHO '\t'; } 2>/dev/null\`\" = 'X\t'; then
<       # Yippee, \$ECHO works!
<       :
<     else
<       # Restart under the correct shell, and then maybe \$ECHO will work.
<       exec $SHELL \"\$0\" --no-reexec \${1+\"\$@\"}
---
>   for lt_opt
>   do
>     case \"\$lt_opt\" in
>     --lt-debug) lt_option_debug=1 ;;
>     --lt-dump-script)
>         lt_dump_D=\`\$ECHO \"X\$lt_script_arg0\" | $SED -e 's/^X//' -e 's%/[^/]*$%%'\`
>         test \"X\$lt_dump_D\" = \"X\$lt_script_arg0\" && lt_dump_D=.
>         lt_dump_F=\`\$ECHO \"X\$lt_script_arg0\" | $SED -e 's/^X//' -e 's%^.*/%%'\`
>         cat \"\$lt_dump_D/\$lt_dump_F\"
>         exit 0
>       ;;
>     --lt-*)
>         \$ECHO \"Unrecognized --lt- option: '\$lt_opt'\" 1>&2
>         exit 1
>       ;;
>     esac
>   done
> 
>   # Print the debug banner immediately:
>   if test -n \"\$lt_option_debug\"; then
>     echo \"${outputname}:${output}:\${LINENO}: libtool wrapper (GNU $PACKAGE$TIMESTAMP) $VERSION\" 1>&2
2765c3935,3951
<   fi\
---
> }
> 
> # Used when --lt-debug. Prints its arguments to stdout
> # (redirection is the responsibility of the caller)
> func_lt_dump_args ()
> {
>   lt_dump_args_N=1;
>   for lt_arg
>   do
>     \$ECHO \"${outputname}:${output}:\${LINENO}: newargv[\$lt_dump_args_N]: \$lt_arg\"
>     lt_dump_args_N=\`expr \$lt_dump_args_N + 1\`
>   done
> }
> 
> # Core function for launching the target application
> func_exec_program_core ()
> {
2766a3953,3955
>   case $host in
>   # Backslashes separate directories on plain windows
>   *-*-mingw | *-*-os2* | *-cegcc*)
2767a3957,3997
>       if test -n \"\$lt_option_debug\"; then
>         \$ECHO \"${outputname}:${output}:\${LINENO}: newargv[0]: \$progdir\\\\\$program\" 1>&2
>         func_lt_dump_args \${1+\"\$@\"} 1>&2
>       fi
>       exec \"\$progdir\\\\\$program\" \${1+\"\$@\"}
> "
>     ;;
> 
>   *)
>     $ECHO "\
>       if test -n \"\$lt_option_debug\"; then
>         \$ECHO \"${outputname}:${output}:\${LINENO}: newargv[0]: \$progdir/\$program\" 1>&2
>         func_lt_dump_args \${1+\"\$@\"} 1>&2
>       fi
>       exec \"\$progdir/\$program\" \${1+\"\$@\"}
> "
>     ;;
>   esac
>   $ECHO "\
>       \$ECHO \"\$0: cannot exec \$program \$*\" 1>&2
>       exit 1
> }
> 
> # A function to encapsulate launching the target application
> # Strips options in the --lt-* namespace from \$@ and
> # launches target application with the remaining arguments.
> func_exec_program ()
> {
>   for lt_wr_arg
>   do
>     case \$lt_wr_arg in
>     --lt-*) ;;
>     *) set x \"\$@\" \"\$lt_wr_arg\"; shift;;
>     esac
>     shift
>   done
>   func_exec_program_core \${1+\"\$@\"}
> }
> 
>   # Parse options
>   func_parse_lt_options \"\$0\" \${1+\"\$@\"}
2770c4000
<   thisdir=\`\$ECHO \"X\$file\" | \$Xsed -e 's%/[^/]*$%%'\`
---
>   thisdir=\`\$ECHO \"\$file\" | $SED 's%/[^/]*$%%'\`
2774c4004
<   file=\`ls -ld \"\$file\" | ${SED} -n 's/.*-> //p'\`
---
>   file=\`ls -ld \"\$file\" | $SED -n 's/.*-> //p'\`
2776c4006
<     destdir=\`\$ECHO \"X\$file\" | \$Xsed -e 's%/[^/]*\$%%'\`
---
>     destdir=\`\$ECHO \"\$file\" | $SED 's%/[^/]*\$%%'\`
2786,2787c4016,4017
<     file=\`\$ECHO \"X\$file\" | \$Xsed -e 's%^.*/%%'\`
<     file=\`ls -ld \"\$thisdir/\$file\" | ${SED} -n 's/.*-> //p'\`
---
>     file=\`\$ECHO \"\$file\" | $SED 's%^.*/%%'\`
>     file=\`ls -ld \"\$thisdir/\$file\" | $SED -n 's/.*-> //p'\`
2789,2805d4018
< "
< }
< # end: func_emit_wrapper_part1
< 
< # func_emit_wrapper_part2 [arg=no]
< #
< # Emit the second part of a libtool wrapper script on stdout.
< # For more information, see the description associated with
< # func_emit_wrapper(), below.
< func_emit_wrapper_part2 ()
< {
< 	func_emit_wrapper_part2_arg1=no
< 	if test -n "$1" ; then
< 	  func_emit_wrapper_part2_arg1=$1
< 	fi
< 
< 	$ECHO "\
2809c4022
<   WRAPPER_SCRIPT_BELONGS_IN_OBJDIR=$func_emit_wrapper_part2_arg1
---
>   WRAPPER_SCRIPT_BELONGS_IN_OBJDIR=$func_emit_wrapper_arg1
2817c4030
<     *[\\\\/]$objdir ) thisdir=\`\$ECHO \"X\$thisdir\" | \$Xsed -e 's%[\\\\/][^\\\\/]*$%%'\` ;;
---
>     *[\\\\/]$objdir ) thisdir=\`\$ECHO \"\$thisdir\" | $SED 's%[\\\\/][^\\\\/]*$%%'\` ;;
2871a4085,4096
> 	# fixup the dll searchpath if we need to.
> 	#
> 	# Fix the DLL searchpath if we need to.  Do this before prepending
> 	# to shlibpath, because on Windows, both are PATH and uninstalled
> 	# libraries must come first.
> 	if test -n "$dllsearchpath"; then
> 	  $ECHO "\
>     # Add the dll search path components to the executable PATH
>     PATH=$dllsearchpath:\$PATH
> "
> 	fi
> 
2880c4105
<     $shlibpath_var=\`\$ECHO \"X\$$shlibpath_var\" | \$Xsed -e 's/::*\$//'\`
---
>     $shlibpath_var=\`\$ECHO \"\$$shlibpath_var\" | $SED 's/::*\$//'\`
2886,2893d4110
< 	# fixup the dll searchpath if we need to.
< 	if test -n "$dllsearchpath"; then
< 	  $ECHO "\
<     # Add the dll search path components to the executable PATH
<     PATH=$dllsearchpath:\$PATH
< "
< 	fi
< 
2897,2914c4114
< "
< 	case $host in
< 	# Backslashes separate directories on plain windows
< 	*-*-mingw | *-*-os2* | *-cegcc*)
< 	  $ECHO "\
<       exec \"\$progdir\\\\\$program\" \${1+\"\$@\"}
< "
< 	  ;;
< 
< 	*)
< 	  $ECHO "\
<       exec \"\$progdir/\$program\" \${1+\"\$@\"}
< "
< 	  ;;
< 	esac
< 	$ECHO "\
<       \$ECHO \"\$0: cannot exec \$program \$*\" 1>&2
<       exit 1
---
>       func_exec_program \${1+\"\$@\"}
2920c4120
<     $ECHO \"See the $PACKAGE documentation for more information.\" 1>&2
---
>     \$ECHO \"See the $PACKAGE documentation for more information.\" 1>&2
2926d4125
< # end: func_emit_wrapper_part2
2929,3127d4127
< # func_emit_wrapper [arg=no]
< #
< # Emit a libtool wrapper script on stdout.
< # Don't directly open a file because we may want to
< # incorporate the script contents within a cygwin/mingw
< # wrapper executable.  Must ONLY be called from within
< # func_mode_link because it depends on a number of variables
< # set therein.
< #
< # ARG is the value that the WRAPPER_SCRIPT_BELONGS_IN_OBJDIR
< # variable will take.  If 'yes', then the emitted script
< # will assume that the directory in which it is stored is
< # the $objdir directory.  This is a cygwin/mingw-specific
< # behavior.
< func_emit_wrapper ()
< {
< 	func_emit_wrapper_arg1=no
< 	if test -n "$1" ; then
< 	  func_emit_wrapper_arg1=$1
< 	fi
< 
< 	# split this up so that func_emit_cwrapperexe_src
< 	# can call each part independently.
< 	func_emit_wrapper_part1 "${func_emit_wrapper_arg1}"
< 	func_emit_wrapper_part2 "${func_emit_wrapper_arg1}"
< }
< 
< 
< # func_to_host_path arg
< #
< # Convert paths to host format when used with build tools.
< # Intended for use with "native" mingw (where libtool itself
< # is running under the msys shell), or in the following cross-
< # build environments:
< #    $build          $host
< #    mingw (msys)    mingw  [e.g. native]
< #    cygwin          mingw
< #    *nix + wine     mingw
< # where wine is equipped with the `winepath' executable.
< # In the native mingw case, the (msys) shell automatically
< # converts paths for any non-msys applications it launches,
< # but that facility isn't available from inside the cwrapper.
< # Similar accommodations are necessary for $host mingw and
< # $build cygwin.  Calling this function does no harm for other
< # $host/$build combinations not listed above.
< #
< # ARG is the path (on $build) that should be converted to
< # the proper representation for $host. The result is stored
< # in $func_to_host_path_result.
< func_to_host_path ()
< {
<   func_to_host_path_result="$1"
<   if test -n "$1" ; then
<     case $host in
<       *mingw* )
<         lt_sed_naive_backslashify='s|\\\\*|\\|g;s|/|\\|g;s|\\|\\\\|g'
<         case $build in
<           *mingw* ) # actually, msys
<             # awkward: cmd appends spaces to result
<             lt_sed_strip_trailing_spaces="s/[ ]*\$//"
<             func_to_host_path_tmp1=`( cmd //c echo "$1" |\
<               $SED -e "$lt_sed_strip_trailing_spaces" ) 2>/dev/null || echo ""`
<             func_to_host_path_result=`echo "$func_to_host_path_tmp1" |\
<               $SED -e "$lt_sed_naive_backslashify"`
<             ;;
<           *cygwin* )
<             func_to_host_path_tmp1=`cygpath -w "$1"`
<             func_to_host_path_result=`echo "$func_to_host_path_tmp1" |\
<               $SED -e "$lt_sed_naive_backslashify"`
<             ;;
<           * )
<             # Unfortunately, winepath does not exit with a non-zero
<             # error code, so we are forced to check the contents of
<             # stdout. On the other hand, if the command is not
<             # found, the shell will set an exit code of 127 and print
<             # *an error message* to stdout. So we must check for both
<             # error code of zero AND non-empty stdout, which explains
<             # the odd construction:
<             func_to_host_path_tmp1=`winepath -w "$1" 2>/dev/null`
<             if test "$?" -eq 0 && test -n "${func_to_host_path_tmp1}"; then
<               func_to_host_path_result=`echo "$func_to_host_path_tmp1" |\
<                 $SED -e "$lt_sed_naive_backslashify"`
<             else
<               # Allow warning below.
<               func_to_host_path_result=""
<             fi
<             ;;
<         esac
<         if test -z "$func_to_host_path_result" ; then
<           func_error "Could not determine host path corresponding to"
<           func_error "  '$1'"
<           func_error "Continuing, but uninstalled executables may not work."
<           # Fallback:
<           func_to_host_path_result="$1"
<         fi
<         ;;
<     esac
<   fi
< }
< # end: func_to_host_path
< 
< # func_to_host_pathlist arg
< #
< # Convert pathlists to host format when used with build tools.
< # See func_to_host_path(), above. This function supports the
< # following $build/$host combinations (but does no harm for
< # combinations not listed here):
< #    $build          $host
< #    mingw (msys)    mingw  [e.g. native]
< #    cygwin          mingw
< #    *nix + wine     mingw
< #
< # Path separators are also converted from $build format to
< # $host format. If ARG begins or ends with a path separator
< # character, it is preserved (but converted to $host format)
< # on output.
< #
< # ARG is a pathlist (on $build) that should be converted to
< # the proper representation on $host. The result is stored
< # in $func_to_host_pathlist_result.
< func_to_host_pathlist ()
< {
<   func_to_host_pathlist_result="$1"
<   if test -n "$1" ; then
<     case $host in
<       *mingw* )
<         lt_sed_naive_backslashify='s|\\\\*|\\|g;s|/|\\|g;s|\\|\\\\|g'
<         # Remove leading and trailing path separator characters from
<         # ARG. msys behavior is inconsistent here, cygpath turns them
<         # into '.;' and ';.', and winepath ignores them completely.
<         func_to_host_pathlist_tmp2="$1"
<         # Once set for this call, this variable should not be
<         # reassigned. It is used in tha fallback case.
<         func_to_host_pathlist_tmp1=`echo "$func_to_host_pathlist_tmp2" |\
<           $SED -e 's|^:*||' -e 's|:*$||'`
<         case $build in
<           *mingw* ) # Actually, msys.
<             # Awkward: cmd appends spaces to result.
<             lt_sed_strip_trailing_spaces="s/[ ]*\$//"
<             func_to_host_pathlist_tmp2=`( cmd //c echo "$func_to_host_pathlist_tmp1" |\
<               $SED -e "$lt_sed_strip_trailing_spaces" ) 2>/dev/null || echo ""`
<             func_to_host_pathlist_result=`echo "$func_to_host_pathlist_tmp2" |\
<               $SED -e "$lt_sed_naive_backslashify"`
<             ;;
<           *cygwin* )
<             func_to_host_pathlist_tmp2=`cygpath -w -p "$func_to_host_pathlist_tmp1"`
<             func_to_host_pathlist_result=`echo "$func_to_host_pathlist_tmp2" |\
<               $SED -e "$lt_sed_naive_backslashify"`
<             ;;
<           * )
<             # unfortunately, winepath doesn't convert pathlists
<             func_to_host_pathlist_result=""
<             func_to_host_pathlist_oldIFS=$IFS
<             IFS=:
<             for func_to_host_pathlist_f in $func_to_host_pathlist_tmp1 ; do
<               IFS=$func_to_host_pathlist_oldIFS
<               if test -n "$func_to_host_pathlist_f" ; then
<                 func_to_host_path "$func_to_host_pathlist_f"
<                 if test -n "$func_to_host_path_result" ; then
<                   if test -z "$func_to_host_pathlist_result" ; then
<                     func_to_host_pathlist_result="$func_to_host_path_result"
<                   else
<                     func_to_host_pathlist_result="$func_to_host_pathlist_result;$func_to_host_path_result"
<                   fi
<                 fi
<               fi
<               IFS=:
<             done
<             IFS=$func_to_host_pathlist_oldIFS
<             ;;
<         esac
<         if test -z "$func_to_host_pathlist_result" ; then
<           func_error "Could not determine the host path(s) corresponding to"
<           func_error "  '$1'"
<           func_error "Continuing, but uninstalled executables may not work."
<           # Fallback. This may break if $1 contains DOS-style drive
<           # specifications. The fix is not to complicate the expression
<           # below, but for the user to provide a working wine installation
<           # with winepath so that path translation in the cross-to-mingw
<           # case works properly.
<           lt_replace_pathsep_nix_to_dos="s|:|;|g"
<           func_to_host_pathlist_result=`echo "$func_to_host_pathlist_tmp1" |\
<             $SED -e "$lt_replace_pathsep_nix_to_dos"`
<         fi
<         # Now, add the leading and trailing path separators back
<         case "$1" in
<           :* ) func_to_host_pathlist_result=";$func_to_host_pathlist_result"
<             ;;
<         esac
<         case "$1" in
<           *: ) func_to_host_pathlist_result="$func_to_host_pathlist_result;"
<             ;;
<         esac
<         ;;
<     esac
<   fi
< }
< # end: func_to_host_pathlist
< 
3144,3147d4143
< 
<    Currently, it simply execs the wrapper *script* "$SHELL $output",
<    but could eventually absorb all of the scripts functionality and
<    exec $objdir/$outputname directly.
3150a4147,4149
> #ifdef _MSC_VER
> # define _CRT_SECURE_NO_DEPRECATE 1
> #endif
3157d4155
< # define setmode _setmode
3163,3168d4160
< #  define HAVE_SETENV
< #  ifdef __STRICT_ANSI__
< char *realpath (const char *, char *);
< int putenv (char *);
< int setenv (const char *, const char *, int);
< #  endif
3179a4172,4209
> /* declarations of non-ANSI functions */
> #if defined(__MINGW32__)
> # ifdef __STRICT_ANSI__
> int _putenv (const char *);
> # endif
> #elif defined(__CYGWIN__)
> # ifdef __STRICT_ANSI__
> char *realpath (const char *, char *);
> int putenv (char *);
> int setenv (const char *, const char *, int);
> # endif
> /* #elif defined (other platforms) ... */
> #endif
> 
> /* portability defines, excluding path handling macros */
> #if defined(_MSC_VER)
> # define setmode _setmode
> # define stat    _stat
> # define chmod   _chmod
> # define getcwd  _getcwd
> # define putenv  _putenv
> # define S_IXUSR _S_IEXEC
> # ifndef _INTPTR_T_DEFINED
> #  define _INTPTR_T_DEFINED
> #  define intptr_t int
> # endif
> #elif defined(__MINGW32__)
> # define setmode _setmode
> # define stat    _stat
> # define chmod   _chmod
> # define getcwd  _getcwd
> # define putenv  _putenv
> #elif defined(__CYGWIN__)
> # define HAVE_SETENV
> # define FOPEN_WB "wb"
> /* #elif defined (other platforms) ... */
> #endif
> 
3195,3202c4225
< #ifdef _MSC_VER
< # define S_IXUSR _S_IEXEC
< # define stat _stat
< # ifndef _INTPTR_T_DEFINED
< #  define intptr_t int
< # endif
< #endif
< 
---
> /* path handling portability macros */
3233,3236d4255
< #ifdef __CYGWIN__
< # define FOPEN_WB "wb"
< #endif
< 
3248,3259c4267,4269
< 
< #undef LTWRAPPER_DEBUGPRINTF
< #if defined DEBUGWRAPPER
< # define LTWRAPPER_DEBUGPRINTF(args) ltwrapper_debugprintf args
< static void
< ltwrapper_debugprintf (const char *fmt, ...)
< {
<     va_list args;
<     va_start (args, fmt);
<     (void) vfprintf (stderr, fmt, args);
<     va_end (args);
< }
---
> 
> #if defined(LT_DEBUGWRAPPER)
> static int lt_debug = 1;
3261c4271
< # define LTWRAPPER_DEBUGPRINTF(args)
---
> static int lt_debug = 0;
3264c4274
< const char *program_name = NULL;
---
> const char *program_name = "libtool-wrapper"; /* in case xstrdup fails */
3274c4284,4287
< void lt_fatal (const char *message, ...);
---
> void lt_debugprintf (const char *file, int line, const char *fmt, ...);
> void lt_fatal (const char *file, int line, const char *message, ...);
> static const char *nonnull (const char *s);
> static const char *nonempty (const char *s);
3277,3280d4289
< void lt_opt_process_env_set (const char *arg);
< void lt_opt_process_env_prepend (const char *arg);
< void lt_opt_process_env_append (const char *arg);
< int lt_split_name_value (const char *arg, char** name, char** value);
3283,3293c4292,4293
< 
< static const char *script_text_part1 =
< EOF
< 
< 	    func_emit_wrapper_part1 yes |
< 	        $SED -e 's/\([\\"]\)/\\\1/g' \
< 	             -e 's/^/  "/' -e 's/$/\\n"/'
< 	    echo ";"
< 	    cat <<EOF
< 
< static const char *script_text_part2 =
---
> char **prepare_spawn (char **argv);
> void lt_dump_script (FILE *f);
3295,3298d4294
< 	    func_emit_wrapper_part2 yes |
< 	        $SED -e 's/\([\\"]\)/\\\1/g' \
< 	             -e 's/^/  "/' -e 's/$/\\n"/'
< 	    echo ";"
3301c4297
< const char * MAGIC_EXE = "$magic_exe";
---
> volatile const char * MAGIC_EXE = "$magic_exe";
3306c4302
<               func_to_host_pathlist "$temp_rpath"
---
>               func_to_host_path "$temp_rpath"
3308c4304
< const char * LIB_PATH_VALUE   = "$func_to_host_pathlist_result";
---
> const char * LIB_PATH_VALUE   = "$func_to_host_path_result";
3317c4313
<               func_to_host_pathlist "$dllsearchpath:"
---
>               func_to_host_path "$dllsearchpath:"
3320c4316
< const char * EXE_PATH_VALUE   = "$func_to_host_pathlist_result";
---
> const char * EXE_PATH_VALUE   = "$func_to_host_path_result";
3343d4338
< #define LTWRAPPER_OPTION_PREFIX_LENGTH  5
3345d4339
< static const size_t opt_prefix_len         = LTWRAPPER_OPTION_PREFIX_LENGTH;
3347d4340
< 
3349,3360c4342
< 
< static const size_t env_set_opt_len     = LTWRAPPER_OPTION_PREFIX_LENGTH + 7;
< static const char *env_set_opt          = LTWRAPPER_OPTION_PREFIX "env-set";
<   /* argument is putenv-style "foo=bar", value of foo is set to bar */
< 
< static const size_t env_prepend_opt_len = LTWRAPPER_OPTION_PREFIX_LENGTH + 11;
< static const char *env_prepend_opt      = LTWRAPPER_OPTION_PREFIX "env-prepend";
<   /* argument is putenv-style "foo=bar", new value of foo is bar${foo} */
< 
< static const size_t env_append_opt_len  = LTWRAPPER_OPTION_PREFIX_LENGTH + 10;
< static const char *env_append_opt       = LTWRAPPER_OPTION_PREFIX "env-append";
<   /* argument is putenv-style "foo=bar", new value of foo is ${foo}bar */
---
> static const char *debug_opt            = LTWRAPPER_OPTION_PREFIX "debug";
3377,3378c4359
<   LTWRAPPER_DEBUGPRINTF (("(main) argv[0]      : %s\n", argv[0]));
<   LTWRAPPER_DEBUGPRINTF (("(main) program_name : %s\n", program_name));
---
>   newargz = XMALLOC (char *, argc + 1);
3380c4361,4365
<   /* very simple arg parsing; don't want to rely on getopt */
---
>   /* very simple arg parsing; don't want to rely on getopt
>    * also, copy all non cwrapper options to newargz, except
>    * argz[0], which is handled differently
>    */
>   newargc=0;
3394,3395c4379
< 	  printf ("%s", script_text_part1);
< 	  printf ("%s", script_text_part2);
---
> 	  lt_dump_script (stdout);
3397a4382,4403
>       if (strcmp (argv[i], debug_opt) == 0)
> 	{
>           lt_debug = 1;
>           continue;
> 	}
>       if (strcmp (argv[i], ltwrapper_option_prefix) == 0)
>         {
>           /* however, if there is an option in the LTWRAPPER_OPTION_PREFIX
>              namespace, but it is not one of the ones we know about and
>              have already dealt with, above (inluding dump-script), then
>              report an error. Otherwise, targets might begin to believe
>              they are allowed to use options in the LTWRAPPER_OPTION_PREFIX
>              namespace. The first time any user complains about this, we'll
>              need to make LTWRAPPER_OPTION_PREFIX a configure-time option
>              or a configure.ac-settable value.
>            */
>           lt_fatal (__FILE__, __LINE__,
> 		    "unrecognized %s option: '%s'",
>                     ltwrapper_option_prefix, argv[i]);
>         }
>       /* otherwise ... */
>       newargz[++newargc] = xstrdup (argv[i]);
3398a4405,4414
>   newargz[++newargc] = NULL;
> 
> EOF
> 	    cat <<EOF
>   /* The GNU banner must be the first non-error debug message */
>   lt_debugprintf (__FILE__, __LINE__, "libtool wrapper (GNU $PACKAGE$TIMESTAMP) $VERSION\n");
> EOF
> 	    cat <<"EOF"
>   lt_debugprintf (__FILE__, __LINE__, "(main) argv[0]: %s\n", argv[0]);
>   lt_debugprintf (__FILE__, __LINE__, "(main) program_name: %s\n", program_name);
3400d4415
<   newargz = XMALLOC (char *, argc + 1);
3403,3405c4418,4421
<     lt_fatal ("Couldn't find %s", argv[0]);
<   LTWRAPPER_DEBUGPRINTF (("(main) found exe (before symlink chase) at : %s\n",
< 			  tmp_pathspec));
---
>     lt_fatal (__FILE__, __LINE__, "couldn't find %s", argv[0]);
>   lt_debugprintf (__FILE__, __LINE__,
>                   "(main) found exe (before symlink chase) at: %s\n",
> 		  tmp_pathspec);
3408,3409c4424,4426
<   LTWRAPPER_DEBUGPRINTF (("(main) found exe (after symlink chase) at : %s\n",
< 			  actual_cwrapper_path));
---
>   lt_debugprintf (__FILE__, __LINE__,
>                   "(main) found exe (after symlink chase) at: %s\n",
> 		  actual_cwrapper_path);
3430,3431c4447,4449
<   LTWRAPPER_DEBUGPRINTF (("(main) libtool target name: %s\n",
< 			  target_name));
---
>   lt_debugprintf (__FILE__, __LINE__,
> 		  "(main) libtool target name: %s\n",
> 		  target_name);
3481c4499,4502
<   lt_update_lib_path (LIB_PATH_VARNAME, LIB_PATH_VALUE);
---
>   /* Update the DLL searchpath.  EXE_PATH_VALUE ($dllsearchpath) must
>      be prepended before (that is, appear after) LIB_PATH_VALUE ($temp_rpath)
>      because on Windows, both *_VARNAMEs are PATH but uninstalled
>      libraries must come first. */
3482a4504
>   lt_update_lib_path (LIB_PATH_VARNAME, LIB_PATH_VALUE);
3484,3551c4506,4507
<   newargc=0;
<   for (i = 1; i < argc; i++)
<     {
<       if (strncmp (argv[i], env_set_opt, env_set_opt_len) == 0)
<         {
<           if (argv[i][env_set_opt_len] == '=')
<             {
<               const char *p = argv[i] + env_set_opt_len + 1;
<               lt_opt_process_env_set (p);
<             }
<           else if (argv[i][env_set_opt_len] == '\0' && i + 1 < argc)
<             {
<               lt_opt_process_env_set (argv[++i]); /* don't copy */
<             }
<           else
<             lt_fatal ("%s missing required argument", env_set_opt);
<           continue;
<         }
<       if (strncmp (argv[i], env_prepend_opt, env_prepend_opt_len) == 0)
<         {
<           if (argv[i][env_prepend_opt_len] == '=')
<             {
<               const char *p = argv[i] + env_prepend_opt_len + 1;
<               lt_opt_process_env_prepend (p);
<             }
<           else if (argv[i][env_prepend_opt_len] == '\0' && i + 1 < argc)
<             {
<               lt_opt_process_env_prepend (argv[++i]); /* don't copy */
<             }
<           else
<             lt_fatal ("%s missing required argument", env_prepend_opt);
<           continue;
<         }
<       if (strncmp (argv[i], env_append_opt, env_append_opt_len) == 0)
<         {
<           if (argv[i][env_append_opt_len] == '=')
<             {
<               const char *p = argv[i] + env_append_opt_len + 1;
<               lt_opt_process_env_append (p);
<             }
<           else if (argv[i][env_append_opt_len] == '\0' && i + 1 < argc)
<             {
<               lt_opt_process_env_append (argv[++i]); /* don't copy */
<             }
<           else
<             lt_fatal ("%s missing required argument", env_append_opt);
<           continue;
<         }
<       if (strncmp (argv[i], ltwrapper_option_prefix, opt_prefix_len) == 0)
<         {
<           /* however, if there is an option in the LTWRAPPER_OPTION_PREFIX
<              namespace, but it is not one of the ones we know about and
<              have already dealt with, above (inluding dump-script), then
<              report an error. Otherwise, targets might begin to believe
<              they are allowed to use options in the LTWRAPPER_OPTION_PREFIX
<              namespace. The first time any user complains about this, we'll
<              need to make LTWRAPPER_OPTION_PREFIX a configure-time option
<              or a configure.ac-settable value.
<            */
<           lt_fatal ("Unrecognized option in %s namespace: '%s'",
<                     ltwrapper_option_prefix, argv[i]);
<         }
<       /* otherwise ... */
<       newargz[++newargc] = xstrdup (argv[i]);
<     }
<   newargz[++newargc] = NULL;
< 
<   LTWRAPPER_DEBUGPRINTF     (("(main) lt_argv_zero : %s\n", (lt_argv_zero ? lt_argv_zero : "<NULL>")));
---
>   lt_debugprintf (__FILE__, __LINE__, "(main) lt_argv_zero: %s\n",
> 		  nonnull (lt_argv_zero));
3554c4510,4511
<       LTWRAPPER_DEBUGPRINTF (("(main) newargz[%d]   : %s\n", i, (newargz[i] ? newargz[i] : "<NULL>")));
---
>       lt_debugprintf (__FILE__, __LINE__, "(main) newargz[%d]: %s\n",
> 		      i, nonnull (newargz[i]));
3562a4520
>   newargz = prepare_spawn (newargz);
3567c4525,4527
<       LTWRAPPER_DEBUGPRINTF (("(main) failed to launch target \"%s\": errno = %d\n", lt_argv_zero, errno));
---
>       lt_debugprintf (__FILE__, __LINE__,
> 		      "(main) failed to launch target \"%s\": %s\n",
> 		      lt_argv_zero, nonnull (strerror (errno)));
3589c4549
<     lt_fatal ("Memory exhausted");
---
>     lt_fatal (__FILE__, __LINE__, "memory exhausted");
3623,3624c4583,4584
<   LTWRAPPER_DEBUGPRINTF (("(check_executable)  : %s\n",
< 			  path ? (*path ? path : "EMPTY!") : "NULL!"));
---
>   lt_debugprintf (__FILE__, __LINE__, "(check_executable): %s\n",
>                   nonempty (path));
3641,3642c4601,4602
<   LTWRAPPER_DEBUGPRINTF (("(make_executable)   : %s\n",
< 			  path ? (*path ? path : "EMPTY!") : "NULL!"));
---
>   lt_debugprintf (__FILE__, __LINE__, "(make_executable): %s\n",
>                   nonempty (path));
3668,3669c4628,4629
<   LTWRAPPER_DEBUGPRINTF (("(find_executable)   : %s\n",
< 			  wrapper ? (*wrapper ? wrapper : "EMPTY!") : "NULL!"));
---
>   lt_debugprintf (__FILE__, __LINE__, "(find_executable): %s\n",
>                   nonempty (wrapper));
3722c4682,4683
< 		    lt_fatal ("getcwd failed");
---
> 		    lt_fatal (__FILE__, __LINE__, "getcwd failed: %s",
>                               nonnull (strerror (errno)));
3747c4708,4709
<     lt_fatal ("getcwd failed");
---
>     lt_fatal (__FILE__, __LINE__, "getcwd failed: %s",
>               nonnull (strerror (errno)));
3773,3774c4735,4737
<       LTWRAPPER_DEBUGPRINTF (("checking path component for symlinks: %s\n",
< 			      tmp_pathspec));
---
>       lt_debugprintf (__FILE__, __LINE__,
> 		      "checking path component for symlinks: %s\n",
> 		      tmp_pathspec);
3796,3797c4759,4761
< 	  char *errstr = strerror (errno);
< 	  lt_fatal ("Error accessing file %s (%s)", tmp_pathspec, errstr);
---
> 	  lt_fatal (__FILE__, __LINE__,
> 		    "error accessing file \"%s\": %s",
> 		    tmp_pathspec, nonnull (strerror (errno)));
3810c4774,4775
<       lt_fatal ("Could not follow symlinks for %s", pathspec);
---
>       lt_fatal (__FILE__, __LINE__,
> 		"could not follow symlinks for %s", pathspec);
3835a4801,4813
> void
> lt_debugprintf (const char *file, int line, const char *fmt, ...)
> {
>   va_list args;
>   if (lt_debug)
>     {
>       (void) fprintf (stderr, "%s:%s:%d: ", program_name, file, line);
>       va_start (args, fmt);
>       (void) vfprintf (stderr, fmt, args);
>       va_end (args);
>     }
> }
> 
3837c4815,4816
< lt_error_core (int exit_status, const char *mode,
---
> lt_error_core (int exit_status, const char *file,
> 	       int line, const char *mode,
3840c4819
<   fprintf (stderr, "%s: %s: ", program_name, mode);
---
>   fprintf (stderr, "%s:%s:%d: %s: ", program_name, file, line, mode);
3849c4828
< lt_fatal (const char *message, ...)
---
> lt_fatal (const char *file, int line, const char *message, ...)
3853c4832
<   lt_error_core (EXIT_FAILURE, "FATAL", message, ap);
---
>   lt_error_core (EXIT_FAILURE, file, line, "FATAL", message, ap);
3856a4836,4847
> static const char *
> nonnull (const char *s)
> {
>   return s ? s : "(null)";
> }
> 
> static const char *
> nonempty (const char *s)
> {
>   return (s && !*s) ? "(empty)" : nonnull (s);
> }
> 
3860,3862c4851,4853
<   LTWRAPPER_DEBUGPRINTF (("(lt_setenv) setting '%s' to '%s'\n",
<                           (name ? name : "<NULL>"),
<                           (value ? value : "<NULL>")));
---
>   lt_debugprintf (__FILE__, __LINE__,
> 		  "(lt_setenv) setting '%s' to '%s'\n",
>                   nonnull (name), nonnull (value));
3907,3989d4897
< int
< lt_split_name_value (const char *arg, char** name, char** value)
< {
<   const char *p;
<   int len;
<   if (!arg || !*arg)
<     return 1;
< 
<   p = strchr (arg, (int)'=');
< 
<   if (!p)
<     return 1;
< 
<   *value = xstrdup (++p);
< 
<   len = strlen (arg) - strlen (*value);
<   *name = XMALLOC (char, len);
<   strncpy (*name, arg, len-1);
<   (*name)[len - 1] = '\0';
< 
<   return 0;
< }
< 
< void
< lt_opt_process_env_set (const char *arg)
< {
<   char *name = NULL;
<   char *value = NULL;
< 
<   if (lt_split_name_value (arg, &name, &value) != 0)
<     {
<       XFREE (name);
<       XFREE (value);
<       lt_fatal ("bad argument for %s: '%s'", env_set_opt, arg);
<     }
< 
<   lt_setenv (name, value);
<   XFREE (name);
<   XFREE (value);
< }
< 
< void
< lt_opt_process_env_prepend (const char *arg)
< {
<   char *name = NULL;
<   char *value = NULL;
<   char *new_value = NULL;
< 
<   if (lt_split_name_value (arg, &name, &value) != 0)
<     {
<       XFREE (name);
<       XFREE (value);
<       lt_fatal ("bad argument for %s: '%s'", env_prepend_opt, arg);
<     }
< 
<   new_value = lt_extend_str (getenv (name), value, 0);
<   lt_setenv (name, new_value);
<   XFREE (new_value);
<   XFREE (name);
<   XFREE (value);
< }
< 
< void
< lt_opt_process_env_append (const char *arg)
< {
<   char *name = NULL;
<   char *value = NULL;
<   char *new_value = NULL;
< 
<   if (lt_split_name_value (arg, &name, &value) != 0)
<     {
<       XFREE (name);
<       XFREE (value);
<       lt_fatal ("bad argument for %s: '%s'", env_append_opt, arg);
<     }
< 
<   new_value = lt_extend_str (getenv (name), value, 1);
<   lt_setenv (name, new_value);
<   XFREE (new_value);
<   XFREE (name);
<   XFREE (value);
< }
< 
3993,3995c4901,4903
<   LTWRAPPER_DEBUGPRINTF (("(lt_update_exe_path) modifying '%s' by prepending '%s'\n",
<                           (name ? name : "<NULL>"),
<                           (value ? value : "<NULL>")));
---
>   lt_debugprintf (__FILE__, __LINE__,
> 		  "(lt_update_exe_path) modifying '%s' by prepending '%s'\n",
>                   nonnull (name), nonnull (value));
4014,4016c4922,4924
<   LTWRAPPER_DEBUGPRINTF (("(lt_update_lib_path) modifying '%s' by prepending '%s'\n",
<                           (name ? name : "<NULL>"),
<                           (value ? value : "<NULL>")));
---
>   lt_debugprintf (__FILE__, __LINE__,
> 		  "(lt_update_lib_path) modifying '%s' by prepending '%s'\n",
>                   nonnull (name), nonnull (value));
4025a4934,5061
> EOF
> 	    case $host_os in
> 	      mingw*)
> 		cat <<"EOF"
> 
> /* Prepares an argument vector before calling spawn().
>    Note that spawn() does not by itself call the command interpreter
>      (getenv ("COMSPEC") != NULL ? getenv ("COMSPEC") :
>       ({ OSVERSIONINFO v; v.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);
>          GetVersionEx(&v);
>          v.dwPlatformId == VER_PLATFORM_WIN32_NT;
>       }) ? "cmd.exe" : "command.com").
>    Instead it simply concatenates the arguments, separated by ' ', and calls
>    CreateProcess().  We must quote the arguments since Win32 CreateProcess()
>    interprets characters like ' ', '\t', '\\', '"' (but not '<' and '>') in a
>    special way:
>    - Space and tab are interpreted as delimiters. They are not treated as
>      delimiters if they are surrounded by double quotes: "...".
>    - Unescaped double quotes are removed from the input. Their only effect is
>      that within double quotes, space and tab are treated like normal
>      characters.
>    - Backslashes not followed by double quotes are not special.
>    - But 2*n+1 backslashes followed by a double quote become
>      n backslashes followed by a double quote (n >= 0):
>        \" -> "
>        \\\" -> \"
>        \\\\\" -> \\"
>  */
> #define SHELL_SPECIAL_CHARS "\"\\ \001\002\003\004\005\006\007\010\011\012\013\014\015\016\017\020\021\022\023\024\025\026\027\030\031\032\033\034\035\036\037"
> #define SHELL_SPACE_CHARS " \001\002\003\004\005\006\007\010\011\012\013\014\015\016\017\020\021\022\023\024\025\026\027\030\031\032\033\034\035\036\037"
> char **
> prepare_spawn (char **argv)
> {
>   size_t argc;
>   char **new_argv;
>   size_t i;
> 
>   /* Count number of arguments.  */
>   for (argc = 0; argv[argc] != NULL; argc++)
>     ;
> 
>   /* Allocate new argument vector.  */
>   new_argv = XMALLOC (char *, argc + 1);
> 
>   /* Put quoted arguments into the new argument vector.  */
>   for (i = 0; i < argc; i++)
>     {
>       const char *string = argv[i];
> 
>       if (string[0] == '\0')
> 	new_argv[i] = xstrdup ("\"\"");
>       else if (strpbrk (string, SHELL_SPECIAL_CHARS) != NULL)
> 	{
> 	  int quote_around = (strpbrk (string, SHELL_SPACE_CHARS) != NULL);
> 	  size_t length;
> 	  unsigned int backslashes;
> 	  const char *s;
> 	  char *quoted_string;
> 	  char *p;
> 
> 	  length = 0;
> 	  backslashes = 0;
> 	  if (quote_around)
> 	    length++;
> 	  for (s = string; *s != '\0'; s++)
> 	    {
> 	      char c = *s;
> 	      if (c == '"')
> 		length += backslashes + 1;
> 	      length++;
> 	      if (c == '\\')
> 		backslashes++;
> 	      else
> 		backslashes = 0;
> 	    }
> 	  if (quote_around)
> 	    length += backslashes + 1;
> 
> 	  quoted_string = XMALLOC (char, length + 1);
> 
> 	  p = quoted_string;
> 	  backslashes = 0;
> 	  if (quote_around)
> 	    *p++ = '"';
> 	  for (s = string; *s != '\0'; s++)
> 	    {
> 	      char c = *s;
> 	      if (c == '"')
> 		{
> 		  unsigned int j;
> 		  for (j = backslashes + 1; j > 0; j--)
> 		    *p++ = '\\';
> 		}
> 	      *p++ = c;
> 	      if (c == '\\')
> 		backslashes++;
> 	      else
> 		backslashes = 0;
> 	    }
> 	  if (quote_around)
> 	    {
> 	      unsigned int j;
> 	      for (j = backslashes; j > 0; j--)
> 		*p++ = '\\';
> 	      *p++ = '"';
> 	    }
> 	  *p = '\0';
> 
> 	  new_argv[i] = quoted_string;
> 	}
>       else
> 	new_argv[i] = (char *) string;
>     }
>   new_argv[argc] = NULL;
> 
>   return new_argv;
> }
> EOF
> 		;;
> 	    esac
> 
>             cat <<"EOF"
> void lt_dump_script (FILE* f)
> {
> EOF
> 	    func_emit_wrapper yes |
>               $SED -e 's/\([\\"]\)/\\\1/g' \
> 	           -e 's/^/  fputs ("/' -e 's/$/\\n", f);/'
4026a5063,5064
>             cat <<"EOF"
> }
4030a5069,5079
> # func_win32_import_lib_p ARG
> # True if ARG is an import lib, as indicated by $file_magic_cmd
> func_win32_import_lib_p ()
> {
>     $opt_debug
>     case `eval $file_magic_cmd \"\$1\" 2>/dev/null | $SED -e 10q` in
>     *import*) : ;;
>     *) false ;;
>     esac
> }
> 
4074a5124
>     bindir=
4166a5217,5221
> 	bindir)
> 	  bindir="$arg"
> 	  prev=
> 	  continue
> 	  ;;
4198c5253
< 	      dlfiles="$dlfiles $arg"
---
> 	      func_append dlfiles " $arg"
4200c5255
< 	      dlprefiles="$dlprefiles $arg"
---
> 	      func_append dlprefiles " $arg"
4224c5279
< 		*) deplibs="$deplibs $qarg.ltframework" # this is fixed later
---
> 		*) func_append deplibs " $qarg.ltframework" # this is fixed later
4243c5298
< #	      moreargs="$moreargs $fil"
---
> #	      func_append moreargs " $fil"
4272c5327
< 		      dlfiles="$dlfiles $pic_object"
---
> 		      func_append dlfiles " $pic_object"
4284c5339
< 		    dlprefiles="$dlprefiles $pic_object"
---
> 		    func_append dlprefiles " $pic_object"
4354c5409
< 	    *) rpath="$rpath $arg" ;;
---
> 	    *) func_append rpath " $arg" ;;
4359c5414
< 	    *) xrpath="$xrpath $arg" ;;
---
> 	    *) func_append xrpath " $arg" ;;
4371c5426
< 	  weak_libs="$weak_libs $arg"
---
> 	  func_append weak_libs " $arg"
4376,4377c5431,5432
< 	  linker_flags="$linker_flags $qarg"
< 	  compiler_flags="$compiler_flags $qarg"
---
> 	  func_append linker_flags " $qarg"
> 	  func_append compiler_flags " $qarg"
4384c5439
< 	  compiler_flags="$compiler_flags $qarg"
---
> 	  func_append compiler_flags " $qarg"
4391,4392c5446,5447
< 	  linker_flags="$linker_flags $qarg"
< 	  compiler_flags="$compiler_flags $wl$qarg"
---
> 	  func_append linker_flags " $qarg"
> 	  func_append compiler_flags " $wl$qarg"
4427a5483,5487
>       -bindir)
> 	prev=bindir
> 	continue
> 	;;
> 
4478,4480c5538,5539
< 	func_stripname '-L' '' "$arg"
< 	dir=$func_stripname_result
< 	if test -z "$dir"; then
---
> 	func_stripname "-L" '' "$arg"
> 	if test -z "$func_stripname_result"; then
4486a5546,5547
> 	func_resolve_sysroot "$func_stripname_result"
> 	dir=$func_resolve_sysroot_result
4498c5559,5561
< 	*" -L$dir "*) ;;
---
> 	*" -L$dir "* | *" $arg "*)
> 	  # Will only happen for absolute or sysroot arguments
> 	  ;;
4500,4501c5563,5568
< 	  deplibs="$deplibs -L$dir"
< 	  lib_search_path="$lib_search_path $dir"
---
> 	  # Preserve sysroot, but never include relative directories
> 	  case $dir in
> 	    [\\/]* | [A-Za-z]:[\\/]* | =*) func_append deplibs " $arg" ;;
> 	    *) func_append deplibs " -L$dir" ;;
> 	  esac
> 	  func_append lib_search_path " $dir"
4506c5573
< 	  testbindir=`$ECHO "X$dir" | $Xsed -e 's*/lib$*/bin*'`
---
> 	  testbindir=`$ECHO "$dir" | $SED 's*/lib$*/bin*'`
4510c5577
< 	  *) dllsearchpath="$dllsearchpath:$dir";;
---
> 	  *) func_append dllsearchpath ":$dir";;
4515c5582
< 	  *) dllsearchpath="$dllsearchpath:$testbindir";;
---
> 	  *) func_append dllsearchpath ":$testbindir";;
4525c5592
< 	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-beos* | *-cegcc*)
---
> 	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-beos* | *-cegcc* | *-*-haiku*)
4539c5606
< 	    deplibs="$deplibs System.ltframework"
---
> 	    func_append deplibs " System.ltframework"
4559c5626
< 	deplibs="$deplibs $arg"
---
> 	func_append deplibs " $arg"
4571,4572c5638,5639
<       -model|-arch|-isysroot)
< 	compiler_flags="$compiler_flags $arg"
---
>       -model|-arch|-isysroot|--sysroot)
> 	func_append compiler_flags " $arg"
4580c5647
< 	compiler_flags="$compiler_flags $arg"
---
> 	func_append compiler_flags " $arg"
4585c5652
< 	    * ) new_inherited_linker_flags="$new_inherited_linker_flags $arg" ;;
---
> 	    * ) func_append new_inherited_linker_flags " $arg" ;;
4651a5719,5722
> 	=*)
> 	  func_stripname '=' '' "$dir"
> 	  dir=$lt_sysroot$func_stripname_result
> 	  ;;
4658c5729
< 	*) xrpath="$xrpath $dir" ;;
---
> 	*) func_append xrpath " $dir" ;;
4711,4712c5782,5783
< 	  arg="$arg $wl$func_quote_for_eval_result"
< 	  compiler_flags="$compiler_flags $func_quote_for_eval_result"
---
> 	  func_append arg " $func_quote_for_eval_result"
> 	  func_append compiler_flags " $func_quote_for_eval_result"
4727,4729c5798,5800
< 	  arg="$arg $wl$func_quote_for_eval_result"
< 	  compiler_flags="$compiler_flags $wl$func_quote_for_eval_result"
< 	  linker_flags="$linker_flags $func_quote_for_eval_result"
---
> 	  func_append arg " $wl$func_quote_for_eval_result"
> 	  func_append compiler_flags " $wl$func_quote_for_eval_result"
> 	  func_append linker_flags " $func_quote_for_eval_result"
4757,4765c5828,5836
<       # -64, -mips[0-9] enable 64-bit mode on the SGI compiler
<       # -r[0-9][0-9]* specifies the processor on the SGI compiler
<       # -xarch=*, -xtarget=* enable 64-bit mode on the Sun compiler
<       # +DA*, +DD* enable 64-bit mode on the HP compiler
<       # -q* pass through compiler args for the IBM compiler
<       # -m*, -t[45]*, -txscale* pass through architecture-specific
<       # compiler args for GCC
<       # -F/path gives path to uninstalled frameworks, gcc on darwin
<       # -p, -pg, --coverage, -fprofile-* pass through profiling flag for GCC
---
>       # Flags to be passed through unchanged, with rationale:
>       # -64, -mips[0-9]      enable 64-bit mode for the SGI compiler
>       # -r[0-9][0-9]*        specify processor for the SGI compiler
>       # -xarch=*, -xtarget=* enable 64-bit mode for the Sun compiler
>       # +DA*, +DD*           enable 64-bit mode for the HP compiler
>       # -q*                  compiler args for the IBM compiler
>       # -m*, -t[45]*, -txscale* architecture-specific flags for GCC
>       # -F/path              path to uninstalled frameworks, gcc on darwin
>       # -p, -pg, --coverage, -fprofile-*  profiling flags for GCC
4766a5838,5840
>       # -tp=*                Portland pgcc target processor selection
>       # --sysroot=*          for sysroot support
>       # -O*, -flto*, -fwhopr*, -fuse-linker-plugin GCC link-time optimization
4768c5842,5843
<       -t[45]*|-txscale*|-p|-pg|--coverage|-fprofile-*|-F*|@*)
---
>       -t[45]*|-txscale*|-p|-pg|--coverage|-fprofile-*|-F*|@*|-tp=*|--sysroot=*| \
>       -O*|-flto*|-fwhopr*|-fuse-linker-plugin)
4773c5848
<         compiler_flags="$compiler_flags $arg"
---
>         func_append compiler_flags " $arg"
4785c5860
< 	objs="$objs $arg"
---
> 	func_append objs " $arg"
4816c5891
< 		dlfiles="$dlfiles $pic_object"
---
> 		func_append dlfiles " $pic_object"
4828c5903
< 	      dlprefiles="$dlprefiles $pic_object"
---
> 	      func_append dlprefiles " $pic_object"
4873,4874c5948,5949
< 	deplibs="$deplibs $arg"
< 	old_deplibs="$old_deplibs $arg"
---
> 	func_append deplibs " $arg"
> 	func_append old_deplibs " $arg"
4880a5956
> 	func_resolve_sysroot "$arg"
4883c5959
< 	  dlfiles="$dlfiles $arg"
---
> 	  func_append dlfiles " $func_resolve_sysroot_result"
4887c5963
< 	  dlprefiles="$dlprefiles $arg"
---
> 	  func_append dlprefiles " $func_resolve_sysroot_result"
4890c5966
< 	  deplibs="$deplibs $arg"
---
> 	  func_append deplibs " $func_resolve_sysroot_result"
4928c6004
<       eval shlib_search_path=\`\$ECHO \"X\${$shlibpath_var}\" \| \$Xsed -e \'s/:/ /g\'\`
---
>       eval shlib_search_path=\`\$ECHO \"\${$shlibpath_var}\" \| \$SED \'s/:/ /g\'\`
4936a6013,6014
>     func_to_tool_file "$output_objdir/"
>     tool_output_objdir=$func_to_tool_file_result
4957c6035
<       if $opt_duplicate_deps ; then
---
>       if $opt_preserve_dup_deps ; then
4959c6037
< 	*" $deplib "*) specialdeplibs="$specialdeplibs $deplib" ;;
---
> 	*" $deplib "*) func_append specialdeplibs " $deplib" ;;
4962c6040
<       libs="$libs $deplib"
---
>       func_append libs " $deplib"
4975c6053
< 	  *" $pre_post_dep "*) specialdeplibs="$specialdeplibs $pre_post_deps" ;;
---
> 	  *" $pre_post_dep "*) func_append specialdeplibs " $pre_post_deps" ;;
4977c6055
< 	  pre_post_deps="$pre_post_deps $pre_post_dep"
---
> 	  func_append pre_post_deps " $pre_post_dep"
5043a6122
> 	  func_resolve_sysroot "$lib"
5045c6124
< 	  *.la)	func_source "$lib" ;;
---
> 	  *.la)	func_source "$func_resolve_sysroot_result" ;;
5051c6130,6131
<             deplib_base=`$ECHO "X$deplib" | $Xsed -e "$basename"`
---
> 	    func_basename "$deplib"
>             deplib_base=$func_basename_result
5054c6134
< 	    *) deplibs="$deplibs $deplib" ;;
---
> 	    *) func_append deplibs " $deplib" ;;
5075c6155
< 	    compiler_flags="$compiler_flags $deplib"
---
> 	    func_append compiler_flags " $deplib"
5079c6159
< 		    * ) new_inherited_linker_flags="$new_inherited_linker_flags $deplib" ;;
---
> 		    * ) func_append new_inherited_linker_flags " $deplib" ;;
5164c6244
< 		    * ) new_inherited_linker_flags="$new_inherited_linker_flags $deplib" ;;
---
> 		    * ) func_append new_inherited_linker_flags " $deplib" ;;
5177c6257,6258
< 	    newlib_search_path="$newlib_search_path $func_stripname_result"
---
> 	    func_resolve_sysroot "$func_stripname_result"
> 	    func_append newlib_search_path " $func_resolve_sysroot_result"
5191c6272,6273
< 	    newlib_search_path="$newlib_search_path $func_stripname_result"
---
> 	    func_resolve_sysroot "$func_stripname_result"
> 	    func_append newlib_search_path " $func_resolve_sysroot_result"
5202c6284,6285
< 	    dir=$func_stripname_result
---
> 	    func_resolve_sysroot "$func_stripname_result"
> 	    dir=$func_resolve_sysroot_result
5206c6289
< 	    *) xrpath="$xrpath $dir" ;;
---
> 	    *) func_append xrpath " $dir" ;;
5212c6295,6298
< 	*.la) lib="$deplib" ;;
---
> 	*.la)
> 	  func_resolve_sysroot "$deplib"
> 	  lib=$func_resolve_sysroot_result
> 	  ;;
5230c6316
< 		  if eval "\$ECHO \"X$deplib\"" 2>/dev/null | $Xsed -e 10q \
---
> 		  if eval "\$ECHO \"$deplib\"" 2>/dev/null | $SED 10q \
5240c6326
< 		$ECHO
---
> 		echo
5242,5246c6328,6332
< 		$ECHO "*** I have the capability to make that library automatically link in when"
< 		$ECHO "*** you link to this library.  But I can only do this if you have a"
< 		$ECHO "*** shared version of the library, which you do not appear to have"
< 		$ECHO "*** because the file extensions .$libext of this argument makes me believe"
< 		$ECHO "*** that it is just a static archive that I should not use here."
---
> 		echo "*** I have the capability to make that library automatically link in when"
> 		echo "*** you link to this library.  But I can only do this if you have a"
> 		echo "*** shared version of the library, which you do not appear to have"
> 		echo "*** because the file extensions .$libext of this argument makes me believe"
> 		echo "*** that it is just a static archive that I should not use here."
5248c6334
< 		$ECHO
---
> 		echo
5275c6361
< 	      newdlprefiles="$newdlprefiles $deplib"
---
> 	      func_append newdlprefiles " $deplib"
5279c6365
< 	      newdlfiles="$newdlfiles $deplib"
---
> 	      func_append newdlfiles " $deplib"
5321c6407
< 	  tmp_inherited_linker_flags=`$ECHO "X$inherited_linker_flags" | $Xsed -e 's/-framework \([^ $]*\)/\1.ltframework/g'`
---
> 	  tmp_inherited_linker_flags=`$ECHO "$inherited_linker_flags" | $SED 's/-framework \([^ $]*\)/\1.ltframework/g'`
5325c6411
< 	      *) new_inherited_linker_flags="$new_inherited_linker_flags $tmp_inherited_linker_flag";;
---
> 	      *) func_append new_inherited_linker_flags " $tmp_inherited_linker_flag";;
5329c6415
< 	dependency_libs=`$ECHO "X $dependency_libs" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
---
> 	dependency_libs=`$ECHO " $dependency_libs" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
5333,5334c6419,6420
< 	  test -n "$dlopen" && dlfiles="$dlfiles $dlopen"
< 	  test -n "$dlpreopen" && dlprefiles="$dlprefiles $dlpreopen"
---
> 	  test -n "$dlopen" && func_append dlfiles " $dlopen"
> 	  test -n "$dlpreopen" && func_append dlprefiles " $dlpreopen"
5345,5346c6431,6432
< 	    convenience="$convenience $ladir/$objdir/$old_library"
< 	    old_convenience="$old_convenience $ladir/$objdir/$old_library"
---
> 	    func_append convenience " $ladir/$objdir/$old_library"
> 	    func_append old_convenience " $ladir/$objdir/$old_library"
5353c6439
< 	    if $opt_duplicate_deps ; then
---
> 	    if $opt_preserve_dup_deps ; then
5355c6441
< 	      *" $deplib "*) specialdeplibs="$specialdeplibs $deplib" ;;
---
> 	      *" $deplib "*) func_append specialdeplibs " $deplib" ;;
5358c6444
< 	    tmp_libs="$tmp_libs $deplib"
---
> 	    func_append tmp_libs " $deplib"
5365a6452,6456
> 	if test -n "$old_library" &&
> 	   { test "$prefer_static_libs" = yes ||
> 	     test "$prefer_static_libs,$installed" = "built,no"; }; then
> 	  linklib=$old_library
> 	else
5368a6460
> 	fi
5385c6477
< 	    dlprefiles="$dlprefiles $lib $dependency_libs"
---
> 	    func_append dlprefiles " $lib $dependency_libs"
5387c6479
< 	    newdlfiles="$newdlfiles $lib"
---
> 	    func_append newdlfiles " $lib"
5409c6501
< 	  if test ! -f "$libdir/$linklib" && test -f "$abs_ladir/$linklib"; then
---
> 	  if test ! -f "$lt_sysroot$libdir/$linklib" && test -f "$abs_ladir/$linklib"; then
5415,5416c6507,6508
< 	    dir="$libdir"
< 	    absdir="$libdir"
---
> 	    dir="$lt_sysroot$libdir"
> 	    absdir="$lt_sysroot$libdir"
5424c6516
< 	    notinst_path="$notinst_path $abs_ladir"
---
> 	    func_append notinst_path " $abs_ladir"
5429c6521
< 	    notinst_path="$notinst_path $abs_ladir"
---
> 	    func_append notinst_path " $abs_ladir"
5439a6532,6555
> 	  case "$host" in
> 	    # special handling for platforms with PE-DLLs.
> 	    *cygwin* | *mingw* | *cegcc* )
> 	      # Linker will automatically link against shared library if both
> 	      # static and shared are present.  Therefore, ensure we extract
> 	      # symbols from the import library if a shared library is present
> 	      # (otherwise, the dlopen module name will be incorrect).  We do
> 	      # this by putting the import library name into $newdlprefiles.
> 	      # We recover the dlopen module name by 'saving' the la file
> 	      # name in a special purpose variable, and (later) extracting the
> 	      # dlname from the la file.
> 	      if test -n "$dlname"; then
> 	        func_tr_sh "$dir/$linklib"
> 	        eval "libfile_$func_tr_sh_result=\$abs_ladir/\$laname"
> 	        func_append newdlprefiles " $dir/$linklib"
> 	      else
> 	        func_append newdlprefiles " $dir/$old_library"
> 	        # Keep a list of preopened convenience libraries to check
> 	        # that they are being used correctly in the link pass.
> 	        test -z "$libdir" && \
> 	          func_append dlpreconveniencelibs " $dir/$old_library"
> 	      fi
> 	    ;;
> 	    * )
5443c6559
< 	    newdlprefiles="$newdlprefiles $dir/$old_library"
---
> 	        func_append newdlprefiles " $dir/$old_library"
5447c6563
< 		dlpreconveniencelibs="$dlpreconveniencelibs $dir/$old_library"
---
> 	          func_append dlpreconveniencelibs " $dir/$old_library"
5450c6566
< 	    newdlprefiles="$newdlprefiles $dir/$dlname"
---
> 	        func_append newdlprefiles " $dir/$dlname"
5452c6568
< 	    newdlprefiles="$newdlprefiles $dir/$linklib"
---
> 	        func_append newdlprefiles " $dir/$linklib"
5453a6570,6571
> 	    ;;
> 	  esac
5471c6589
< 	  newlib_search_path="$newlib_search_path $ladir"
---
> 	  func_append newlib_search_path " $ladir"
5484c6602,6603
< 	         newlib_search_path="$newlib_search_path $func_stripname_result"
---
> 	         func_resolve_sysroot "$func_stripname_result"
> 	         func_append newlib_search_path " $func_resolve_sysroot_result"
5495c6614
< 	    if $opt_duplicate_deps ; then
---
> 	    if $opt_preserve_dup_deps ; then
5497c6616
< 	      *" $deplib "*) specialdeplibs="$specialdeplibs $deplib" ;;
---
> 	      *" $deplib "*) func_append specialdeplibs " $deplib" ;;
5500c6619
< 	    tmp_libs="$tmp_libs $deplib"
---
> 	    func_append tmp_libs " $deplib"
5515c6634
< 	      *) temp_rpath="$temp_rpath$absdir:" ;;
---
> 	      *) func_append temp_rpath "$absdir:" ;;
5527c6646
< 	      *) compile_rpath="$compile_rpath $absdir"
---
> 	      *) func_append compile_rpath " $absdir" ;;
5536c6655
< 	      *) finalize_rpath="$finalize_rpath $libdir"
---
> 	      *) func_append finalize_rpath " $libdir" ;;
5561c6680
< 	      notinst_deplibs="$notinst_deplibs $lib"
---
> 	      func_append notinst_deplibs " $lib"
5566c6685
< 	      notinst_deplibs="$notinst_deplibs $lib"
---
> 	      func_append notinst_deplibs " $lib"
5583c6702
< 	    $ECHO
---
> 	    echo
5601c6720
< 	      *) compile_rpath="$compile_rpath $absdir"
---
> 	      *) func_append compile_rpath " $absdir" ;;
5610c6729
< 	      *) finalize_rpath="$finalize_rpath $libdir"
---
> 	      *) func_append finalize_rpath " $libdir" ;;
5664c6783
< 	  if test "$linkmode" = prog || test "$mode" != relink; then
---
> 	  if test "$linkmode" = prog || test "$opt_mode" != relink; then
5686,5688c6805,6807
< 			  $ECHO
< 			  $ECHO "*** And there doesn't seem to be a static archive available"
< 			  $ECHO "*** The link will probably fail, sorry"
---
> 			  echo
> 			  echo "*** And there doesn't seem to be a static archive available"
> 			  echo "*** The link will probably fail, sorry"
5720c6839
< 		      add_dir="$add_dir -L$inst_prefix_dir$libdir"
---
> 		      func_append add_dir " -L$inst_prefix_dir$libdir"
5742c6861
< 	      *) compile_shlibpath="$compile_shlibpath$add_shlibpath:" ;;
---
> 	      *) func_append compile_shlibpath "$add_shlibpath:" ;;
5756c6875
< 		*) finalize_shlibpath="$finalize_shlibpath$libdir:" ;;
---
> 		*) func_append finalize_shlibpath "$libdir:" ;;
5762c6881
< 	  if test "$linkmode" = prog || test "$mode" = relink; then
---
> 	  if test "$linkmode" = prog || test "$opt_mode" = relink; then
5776c6895
< 	      *) finalize_shlibpath="$finalize_shlibpath$libdir:" ;;
---
> 	      *) func_append finalize_shlibpath "$libdir:" ;;
5793c6912
< 		    add_dir="$add_dir -L$inst_prefix_dir$libdir"
---
> 		    func_append add_dir " -L$inst_prefix_dir$libdir"
5828c6947
< 	    $ECHO
---
> 	    echo
5830,5832c6949,6951
< 	    $ECHO "*** I have the capability to make that library automatically link in when"
< 	    $ECHO "*** you link to this library.  But I can only do this if you have a"
< 	    $ECHO "*** shared version of the library, which you do not appear to have."
---
> 	    echo "*** I have the capability to make that library automatically link in when"
> 	    echo "*** you link to this library.  But I can only do this if you have a"
> 	    echo "*** shared version of the library, which you do not appear to have."
5834,5836c6953,6955
< 	      $ECHO "*** But as you try to build a module library, libtool will still create "
< 	      $ECHO "*** a static module, that should work as long as the dlopening application"
< 	      $ECHO "*** is linked with the -dlopen flag to resolve symbols at runtime."
---
> 	      echo "*** But as you try to build a module library, libtool will still create "
> 	      echo "*** a static module, that should work as long as the dlopening application"
> 	      echo "*** is linked with the -dlopen flag to resolve symbols at runtime."
5838,5842c6957,6961
< 		$ECHO
< 		$ECHO "*** However, this would only work if libtool was able to extract symbol"
< 		$ECHO "*** lists from a program, using \`nm' or equivalent, but libtool could"
< 		$ECHO "*** not find such a program.  So, this module is probably useless."
< 		$ECHO "*** \`nm' from GNU binutils and a full rebuild may help."
---
> 		echo
> 		echo "*** However, this would only work if libtool was able to extract symbol"
> 		echo "*** lists from a program, using \`nm' or equivalent, but libtool could"
> 		echo "*** not find such a program.  So, this module is probably useless."
> 		echo "*** \`nm' from GNU binutils and a full rebuild may help."
5870c6989
< 		   *) xrpath="$xrpath $temp_xrpath";;
---
> 		   *) func_append xrpath " $temp_xrpath";;
5872c6991
< 	      *) temp_deplibs="$temp_deplibs $libdir";;
---
> 	      *) func_append temp_deplibs " $libdir";;
5878c6997
< 	  newlib_search_path="$newlib_search_path $absdir"
---
> 	  func_append newlib_search_path " $absdir"
5885c7004,7009
< 	    if $opt_duplicate_deps ; then
---
> 	    case $deplib in
>               -L*) func_stripname '-L' '' "$deplib"
>                    func_resolve_sysroot "$func_stripname_result";;
>               *) func_resolve_sysroot "$deplib" ;;
>             esac
> 	    if $opt_preserve_dup_deps ; then
5887c7011,7012
< 	      *" $deplib "*) specialdeplibs="$specialdeplibs $deplib" ;;
---
> 	      *" $func_resolve_sysroot_result "*)
>                 func_append specialdeplibs " $func_resolve_sysroot_result" ;;
5890c7015
< 	    tmp_libs="$tmp_libs $deplib"
---
> 	    func_append tmp_libs " $func_resolve_sysroot_result"
5895a7021
> 	      path=
5898a7025,7026
> 	        func_resolve_sysroot "$deplib"
> 	        deplib=$func_resolve_sysroot_result
5900c7028
< 		dir="$func_dirname_result"
---
> 		dir=$func_dirname_result
5927,5928c7055,7056
< 		      compiler_flags="$compiler_flags ${wl}-dylib_file ${wl}${darwin_install_name}:${depdepl}"
< 		      linker_flags="$linker_flags -dylib_file ${darwin_install_name}:${depdepl}"
---
> 		      func_append compiler_flags " ${wl}-dylib_file ${wl}${darwin_install_name}:${depdepl}"
> 		      func_append linker_flags " -dylib_file ${darwin_install_name}:${depdepl}"
5961c7089
< 	  compiler_flags="$compiler_flags "`$ECHO "X $new_inherited_linker_flags" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
---
> 	  compiler_flags="$compiler_flags "`$ECHO " $new_inherited_linker_flags" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
5978c7106
< 	    *) lib_search_path="$lib_search_path $dir" ;;
---
> 	    *) func_append lib_search_path " $dir" ;;
6036c7164
< 	      *) tmp_libs="$tmp_libs $deplib" ;;
---
> 	      *) func_append tmp_libs " $deplib" ;;
6039c7167
< 	    *) tmp_libs="$tmp_libs $deplib" ;;
---
> 	    *) func_append tmp_libs " $deplib" ;;
6055c7183
< 	  tmp_libs="$tmp_libs $i"
---
> 	  func_append tmp_libs " $i"
6096c7224
<       objs="$objs$old_deplibs"
---
>       func_append objs "$old_deplibs"
6129c7257
< 	  $ECHO
---
> 	  echo
6132c7260
< 	  libobjs="$libobjs $objs"
---
> 	  func_append libobjs " $objs"
6197c7325
< 	  freebsd-aout|freebsd-elf|sunos)
---
> 	  freebsd-aout|freebsd-elf|qnx|sunos)
6330c7458
< 	  verstring="$verstring:${current}.0"
---
> 	  func_append verstring ":${current}.0"
6398c7526
<       libobjs="$libobjs $symfileobj"
---
>       func_append libobjs " $symfileobj"
6401c7529
<       if test "$mode" != relink; then
---
>       if test "$opt_mode" != relink; then
6417c7545
< 	       removelist="$removelist $p"
---
> 	       func_append removelist " $p"
6428c7556
< 	oldlibs="$oldlibs $output_objdir/$libname.$libext"
---
> 	func_append oldlibs " $output_objdir/$libname.$libext"
6431c7559
< 	oldobjs="$objs "`$ECHO "X$libobjs" | $SP2NL | $Xsed -e '/\.'${libext}'$/d' -e "$lo2o" | $NL2SP`
---
> 	oldobjs="$objs "`$ECHO "$libobjs" | $SP2NL | $SED "/\.${libext}$/d; $lo2o" | $NL2SP`
6436,6438c7564,7566
<       #	lib_search_path=`$ECHO "X$lib_search_path " | $Xsed -e "s% $path % %g"`
<       #	deplibs=`$ECHO "X$deplibs " | $Xsed -e "s% -L$path % %g"`
<       #	dependency_libs=`$ECHO "X$dependency_libs " | $Xsed -e "s% -L$path % %g"`
---
>       #	lib_search_path=`$ECHO "$lib_search_path " | $SED "s% $path % %g"`
>       #	deplibs=`$ECHO "$deplibs " | $SED "s% -L$path % %g"`
>       #	dependency_libs=`$ECHO "$dependency_libs " | $SED "s% -L$path % %g"`
6445c7573,7574
< 	  temp_xrpath="$temp_xrpath -R$libdir"
---
> 	  func_replace_sysroot "$libdir"
> 	  func_append temp_xrpath " -R$func_replace_sysroot_result"
6448c7577
< 	  *) finalize_rpath="$finalize_rpath $libdir" ;;
---
> 	  *) func_append finalize_rpath " $libdir" ;;
6462c7591
< 	*) dlfiles="$dlfiles $lib" ;;
---
> 	*) func_append dlfiles " $lib" ;;
6472c7601
< 	*) dlprefiles="$dlprefiles $lib" ;;
---
> 	*) func_append dlprefiles " $lib" ;;
6479c7608
< 	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos* | *-cegcc*)
---
> 	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos* | *-cegcc* | *-*-haiku*)
6484c7613
< 	    deplibs="$deplibs System.ltframework"
---
> 	    func_append deplibs " System.ltframework"
6501c7630
< 	      deplibs="$deplibs -lc"
---
> 	      func_append deplibs " -lc"
6550c7679
< 		    newdeplibs="$newdeplibs $i"
---
> 		    func_append newdeplibs " $i"
6561c7690
< 		    newdeplibs="$newdeplibs $i"
---
> 		    func_append newdeplibs " $i"
6564c7693
< 		    $ECHO
---
> 		    echo
6566,6570c7695,7699
< 		    $ECHO "*** I have the capability to make that library automatically link in when"
< 		    $ECHO "*** you link to this library.  But I can only do this if you have a"
< 		    $ECHO "*** shared version of the library, which I believe you do not have"
< 		    $ECHO "*** because a test_compile did reveal that the linker did not use it for"
< 		    $ECHO "*** its dynamic dependency list that programs get resolved with at runtime."
---
> 		    echo "*** I have the capability to make that library automatically link in when"
> 		    echo "*** you link to this library.  But I can only do this if you have a"
> 		    echo "*** shared version of the library, which I believe you do not have"
> 		    echo "*** because a test_compile did reveal that the linker did not use it for"
> 		    echo "*** its dynamic dependency list that programs get resolved with at runtime."
6575c7704
< 		newdeplibs="$newdeplibs $i"
---
> 		func_append newdeplibs " $i"
6593c7722
< 		      newdeplibs="$newdeplibs $i"
---
> 		      func_append newdeplibs " $i"
6604c7733
< 		      newdeplibs="$newdeplibs $i"
---
> 		      func_append newdeplibs " $i"
6607c7736
< 		      $ECHO
---
> 		      echo
6609,6613c7738,7742
< 		      $ECHO "*** I have the capability to make that library automatically link in when"
< 		      $ECHO "*** you link to this library.  But I can only do this if you have a"
< 		      $ECHO "*** shared version of the library, which you do not appear to have"
< 		      $ECHO "*** because a test_compile did reveal that the linker did not use this one"
< 		      $ECHO "*** as a dynamic dependency that programs can get resolved with at runtime."
---
> 		      echo "*** I have the capability to make that library automatically link in when"
> 		      echo "*** you link to this library.  But I can only do this if you have a"
> 		      echo "*** shared version of the library, which you do not appear to have"
> 		      echo "*** because a test_compile did reveal that the linker did not use this one"
> 		      echo "*** as a dynamic dependency that programs can get resolved with at runtime."
6618c7747
< 		  $ECHO
---
> 		  echo
6620,6622c7749,7751
< 		  $ECHO "*** make it link in!  You will probably need to install it or some"
< 		  $ECHO "*** library that it depends on before this library will be fully"
< 		  $ECHO "*** functional.  Installing it before continuing would be even better."
---
> 		  echo "*** make it link in!  You will probably need to install it or some"
> 		  echo "*** library that it depends on before this library will be fully"
> 		  echo "*** functional.  Installing it before continuing would be even better."
6626c7755
< 		newdeplibs="$newdeplibs $i"
---
> 		func_append newdeplibs " $i"
6643c7772
< 		  newdeplibs="$newdeplibs $a_deplib"
---
> 		  func_append newdeplibs " $a_deplib"
6649a7779,7784
> 		if test -n "$file_magic_glob"; then
> 		  libnameglob=`func_echo_all "$libname" | $SED -e $file_magic_glob`
> 		else
> 		  libnameglob=$libname
> 		fi
> 		test "$want_nocaseglob" = yes && nocaseglob=`shopt -p nocaseglob`
6651c7786,7792
< 		  potential_libs=`ls $i/$libname[.-]* 2>/dev/null`
---
> 		  if test "$want_nocaseglob" = yes; then
> 		    shopt -s nocaseglob
> 		    potential_libs=`ls $i/$libnameglob[.-]* 2>/dev/null`
> 		    $nocaseglob
> 		  else
> 		    potential_libs=`ls $i/$libnameglob[.-]* 2>/dev/null`
> 		  fi
6668c7809
< 			*) potlib=`$ECHO "X$potlib" | $Xsed -e 's,[^/]*$,,'`"$potliblink";;
---
> 			*) potlib=`$ECHO "$potlib" | $SED 's,[^/]*$,,'`"$potliblink";;
6674c7815
< 			newdeplibs="$newdeplibs $a_deplib"
---
> 			func_append newdeplibs " $a_deplib"
6683c7824
< 		$ECHO
---
> 		echo
6685,6688c7826,7829
< 		$ECHO "*** I have the capability to make that library automatically link in when"
< 		$ECHO "*** you link to this library.  But I can only do this if you have a"
< 		$ECHO "*** shared version of the library, which you do not appear to have"
< 		$ECHO "*** because I did check the linker path looking for a file starting"
---
> 		echo "*** I have the capability to make that library automatically link in when"
> 		echo "*** you link to this library.  But I can only do this if you have a"
> 		echo "*** shared version of the library, which you do not appear to have"
> 		echo "*** because I did check the linker path looking for a file starting"
6699c7840
< 	      newdeplibs="$newdeplibs $a_deplib"
---
> 	      func_append newdeplibs " $a_deplib"
6715c7856
< 		  newdeplibs="$newdeplibs $a_deplib"
---
> 		  func_append newdeplibs " $a_deplib"
6726c7867
< 		    if eval "\$ECHO \"X$potent_lib\"" 2>/dev/null | $Xsed -e 10q | \
---
> 		    if eval "\$ECHO \"$potent_lib\"" 2>/dev/null | $SED 10q | \
6728c7869
< 		      newdeplibs="$newdeplibs $a_deplib"
---
> 		      func_append newdeplibs " $a_deplib"
6737c7878
< 		$ECHO
---
> 		echo
6739,6742c7880,7883
< 		$ECHO "*** I have the capability to make that library automatically link in when"
< 		$ECHO "*** you link to this library.  But I can only do this if you have a"
< 		$ECHO "*** shared version of the library, which you do not appear to have"
< 		$ECHO "*** because I did check the linker path looking for a file starting"
---
> 		echo "*** I have the capability to make that library automatically link in when"
> 		echo "*** you link to this library.  But I can only do this if you have a"
> 		echo "*** shared version of the library, which you do not appear to have"
> 		echo "*** because I did check the linker path looking for a file starting"
6753c7894
< 	      newdeplibs="$newdeplibs $a_deplib"
---
> 	      func_append newdeplibs " $a_deplib"
6760,6761c7901
< 	  tmp_deplibs=`$ECHO "X $deplibs" | $Xsed \
< 	      -e 's/ -lc$//' -e 's/ -[LR][^ ]*//g'`
---
> 	  tmp_deplibs=`$ECHO " $deplibs" | $SED 's/ -lc$//; s/ -[LR][^ ]*//g'`
6765c7905
< 	      tmp_deplibs=`$ECHO "X $tmp_deplibs" | $Xsed -e "s,$i,,"`
---
> 	      tmp_deplibs=`$ECHO " $tmp_deplibs" | $SED "s,$i,,"`
6768,6770c7908,7910
< 	  if $ECHO "X $tmp_deplibs" | $Xsed -e 's/[	 ]//g' |
< 	     $GREP . >/dev/null; then
< 	    $ECHO
---
> 	  case $tmp_deplibs in
> 	  *[!\	\ ]*)
> 	    echo
6772c7912
< 	      $ECHO "*** Warning: inter-library dependencies are not supported in this platform."
---
> 	      echo "*** Warning: inter-library dependencies are not supported in this platform."
6774c7914
< 	      $ECHO "*** Warning: inter-library dependencies are not known to be supported."
---
> 	      echo "*** Warning: inter-library dependencies are not known to be supported."
6776c7916
< 	    $ECHO "*** All declared inter-library dependencies are being dropped."
---
> 	    echo "*** All declared inter-library dependencies are being dropped."
6778c7918,7919
< 	  fi
---
> 	    ;;
> 	  esac
6790c7931
< 	  newdeplibs=`$ECHO "X $newdeplibs" | $Xsed -e 's/ -lc / System.ltframework /'`
---
> 	  newdeplibs=`$ECHO " $newdeplibs" | $SED 's/ -lc / System.ltframework /'`
6796,6797c7937,7938
< 	    $ECHO
< 	    $ECHO "*** Warning: libtool could not satisfy all declared inter-library"
---
> 	    echo
> 	    echo "*** Warning: libtool could not satisfy all declared inter-library"
6799,6800c7940,7941
< 	    $ECHO "*** a static module, that should work as long as the dlopening"
< 	    $ECHO "*** application is linked with the -dlopen flag."
---
> 	    echo "*** a static module, that should work as long as the dlopening"
> 	    echo "*** application is linked with the -dlopen flag."
6802,6806c7943,7947
< 	      $ECHO
< 	      $ECHO "*** However, this would only work if libtool was able to extract symbol"
< 	      $ECHO "*** lists from a program, using \`nm' or equivalent, but libtool could"
< 	      $ECHO "*** not find such a program.  So, this module is probably useless."
< 	      $ECHO "*** \`nm' from GNU binutils and a full rebuild may help."
---
> 	      echo
> 	      echo "*** However, this would only work if libtool was able to extract symbol"
> 	      echo "*** lists from a program, using \`nm' or equivalent, but libtool could"
> 	      echo "*** not find such a program.  So, this module is probably useless."
> 	      echo "*** \`nm' from GNU binutils and a full rebuild may help."
6816,6818c7957,7959
< 	    $ECHO "*** The inter-library dependencies that have been dropped here will be"
< 	    $ECHO "*** automatically added whenever a program is linked with this library"
< 	    $ECHO "*** or is declared to -dlopen it."
---
> 	    echo "*** The inter-library dependencies that have been dropped here will be"
> 	    echo "*** automatically added whenever a program is linked with this library"
> 	    echo "*** or is declared to -dlopen it."
6821,6825c7962,7966
< 	      $ECHO
< 	      $ECHO "*** Since this library must not contain undefined symbols,"
< 	      $ECHO "*** because either the platform does not support them or"
< 	      $ECHO "*** it was explicitly requested with -no-undefined,"
< 	      $ECHO "*** libtool will only create a static version of it."
---
> 	      echo
> 	      echo "*** Since this library must not contain undefined symbols,"
> 	      echo "*** because either the platform does not support them or"
> 	      echo "*** it was explicitly requested with -no-undefined,"
> 	      echo "*** libtool will only create a static version of it."
6842,6844c7983,7985
< 	  newdeplibs=`$ECHO "X $newdeplibs" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
< 	  new_inherited_linker_flags=`$ECHO "X $new_inherited_linker_flags" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
< 	  deplibs=`$ECHO "X $deplibs" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
---
> 	  newdeplibs=`$ECHO " $newdeplibs" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
> 	  new_inherited_linker_flags=`$ECHO " $new_inherited_linker_flags" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
> 	  deplibs=`$ECHO " $deplibs" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
6857c7998
< 	    new_libs="$new_libs -L$path/$objdir" ;;
---
> 	    func_append new_libs " -L$path/$objdir" ;;
6867c8008
< 	  *) new_libs="$new_libs $deplib" ;;
---
> 	  *) func_append new_libs " $deplib" ;;
6870c8011
< 	*) new_libs="$new_libs $deplib" ;;
---
> 	*) func_append new_libs " $deplib" ;;
6887c8028
< 	  test "$mode" != relink && rpath="$compile_rpath$rpath"
---
> 	  test "$opt_mode" != relink && rpath="$compile_rpath$rpath"
6890a8032,8033
> 		func_replace_sysroot "$libdir"
> 		libdir=$func_replace_sysroot_result
6899c8042
< 		    hardcode_libdirs="$hardcode_libdirs$hardcode_libdir_separator$libdir"
---
> 		    func_append hardcode_libdirs "$hardcode_libdir_separator$libdir"
6905c8048
< 		dep_rpath="$dep_rpath $flag"
---
> 		func_append dep_rpath " $flag"
6910c8053
< 	      *) perm_rpath="$perm_rpath $libdir" ;;
---
> 	      *) func_apped perm_rpath " $libdir" ;;
6928c8071
< 	      rpath="$rpath$dir:"
---
> 	      func_append rpath "$dir:"
6936c8079
< 	test "$mode" != relink && shlibpath="$compile_shlibpath$shlibpath"
---
> 	test "$opt_mode" != relink && shlibpath="$compile_shlibpath$shlibpath"
6962c8105
< 	  linknames="$linknames $link"
---
> 	  func_append linknames " $link"
6966c8109
< 	test -z "$pic_flag" && libobjs=`$ECHO "X$libobjs" | $SP2NL | $Xsed -e "$lo2o" | $NL2SP`
---
> 	test -z "$pic_flag" && libobjs=`$ECHO "$libobjs" | $SP2NL | $SED "$lo2o" | $NL2SP`
6973c8116
< 	  delfiles="$delfiles $export_symbols"
---
> 	  func_append delfiles " $export_symbols"
7004c8147
< 	    for cmd in $cmds; do
---
> 	    for cmd1 in $cmds; do
7006c8149,8154
< 	      eval cmd=\"$cmd\"
---
> 	      # Take the normal branch if the nm_file_list_spec branch
> 	      # doesn't work or if tool conversion is not needed.
> 	      case $nm_file_list_spec~$to_tool_file_cmd in
> 		*~func_convert_file_noop | *~func_convert_file_msys_to_w32 | ~*)
> 		  try_normal_branch=yes
> 		  eval cmd=\"$cmd1\"
7009c8157,8182
< 	      if test "$len" -lt "$max_cmd_len" || test "$max_cmd_len" -le -1; then
---
> 		  ;;
> 		*)
> 		  try_normal_branch=no
> 		  ;;
> 	      esac
> 	      if test "$try_normal_branch" = yes \
> 		 && { test "$len" -lt "$max_cmd_len" \
> 		      || test "$max_cmd_len" -le -1; }
> 	      then
> 		func_show_eval "$cmd" 'exit $?'
> 		skipped_export=false
> 	      elif test -n "$nm_file_list_spec"; then
> 		func_basename "$output"
> 		output_la=$func_basename_result
> 		save_libobjs=$libobjs
> 		save_output=$output
> 		output=${output_objdir}/${output_la}.nm
> 		func_to_tool_file "$output"
> 		libobjs=$nm_file_list_spec$func_to_tool_file_result
> 		func_append delfiles " $output"
> 		func_verbose "creating $NM input file list: $output"
> 		for obj in $save_libobjs; do
> 		  func_to_tool_file "$obj"
> 		  $ECHO "$func_to_tool_file_result"
> 		done > "$output"
> 		eval cmd=\"$cmd1\"
7010a8184,8185
> 		output=$save_output
> 		libobjs=$save_libobjs
7032c8207
< 	  $opt_dry_run || eval '$ECHO "X$include_expsyms" | $Xsed | $SP2NL >> "$tmp_export_symbols"'
---
> 	  $opt_dry_run || eval '$ECHO "$include_expsyms" | $SP2NL >> "$tmp_export_symbols"'
7044c8219
< 	  delfiles="$delfiles $export_symbols $output_objdir/$libname.filter"
---
> 	  func_append delfiles " $export_symbols $output_objdir/$libname.filter"
7054c8229
< 	    tmp_deplibs="$tmp_deplibs $test_deplib"
---
> 	    func_append tmp_deplibs " $test_deplib"
7074c8249
< 	    generated="$generated $gentop"
---
> 	    func_append generated " $gentop"
7077c8252
< 	    libobjs="$libobjs $func_extract_archives_result"
---
> 	    func_append libobjs " $func_extract_archives_result"
7084c8259
< 	  linker_flags="$linker_flags $flag"
---
> 	  func_append linker_flags " $flag"
7088c8263
< 	if test "$mode" = relink; then
---
> 	if test "$opt_mode" = relink; then
7133c8308,8309
< 	  output_la=`$ECHO "X$output" | $Xsed -e "$basename"`
---
> 	  func_basename "$output"
> 	  output_la=$func_basename_result
7146c8322
< 	    $ECHO 'INPUT (' > $output
---
> 	    echo 'INPUT (' > $output
7149c8325,8326
< 	      $ECHO "$obj" >> $output
---
> 	      func_to_tool_file "$obj"
> 	      $ECHO "$func_to_tool_file_result" >> $output
7151,7152c8328,8331
< 	    $ECHO ')' >> $output
< 	    delfiles="$delfiles $output"
---
> 	    echo ')' >> $output
> 	    func_append delfiles " $output"
> 	    func_to_tool_file "$output"
> 	    output=$func_to_tool_file_result
7166c8345,8346
< 	      $ECHO "$obj" >> $output
---
> 	      func_to_tool_file "$obj"
> 	      $ECHO "$func_to_tool_file_result" >> $output
7168,7169c8348,8350
< 	    delfiles="$delfiles $output"
< 	    output=$firstobj\"$file_list_spec$output\"
---
> 	    func_append delfiles " $output"
> 	    func_to_tool_file "$output"
> 	    output=$firstobj\"$file_list_spec$func_to_tool_file_result\"
7193c8374,8375
< 		    eval concat_cmds=\"$reload_cmds $objlist $last_robj\"
---
> 		    reload_objs=$objlist
> 		    eval concat_cmds=\"$reload_cmds\"
7197c8379,8380
< 		    eval concat_cmds=\"\$concat_cmds~$reload_cmds $objlist $last_robj~\$RM $last_robj\"
---
> 		    reload_objs="$objlist $last_robj"
> 		    eval concat_cmds=\"\$concat_cmds~$reload_cmds~\$RM $last_robj\"
7203c8386
< 		  objlist=$obj
---
> 		  objlist=" $obj"
7213c8396,8397
< 	      eval concat_cmds=\"\${concat_cmds}$reload_cmds $objlist $last_robj\"
---
> 	      reload_objs="$objlist $last_robj"
> 	      eval concat_cmds=\"\${concat_cmds}$reload_cmds\"
7217c8401
< 	      delfiles="$delfiles $output"
---
> 	      func_append delfiles " $output"
7251c8435
< 		if test "$mode" = relink; then
---
> 		if test "$opt_mode" = relink; then
7272c8456
< 	      $opt_dry_run || eval '$ECHO "X$include_expsyms" | $Xsed | $SP2NL >> "$tmp_export_symbols"'
---
> 	      $opt_dry_run || eval '$ECHO "$include_expsyms" | $SP2NL >> "$tmp_export_symbols"'
7284c8468
< 	      delfiles="$delfiles $export_symbols $output_objdir/$libname.filter"
---
> 	      func_append delfiles " $export_symbols $output_objdir/$libname.filter"
7325c8509
< 	  generated="$generated $gentop"
---
> 	  func_append generated " $gentop"
7328c8512
< 	  libobjs="$libobjs $func_extract_archives_result"
---
> 	  func_append libobjs " $func_extract_archives_result"
7344c8528
< 	    if test "$mode" = relink; then
---
> 	    if test "$opt_mode" = relink; then
7356c8540
< 	if test "$mode" = relink; then
---
> 	if test "$opt_mode" = relink; then
7437c8621
< 	  reload_conv_objs=$reload_objs\ `$ECHO "X$tmp_whole_archive_flags" | $Xsed -e 's|,| |g'`
---
> 	  reload_conv_objs=$reload_objs\ `$ECHO "$tmp_whole_archive_flags" | $SED 's|,| |g'`
7440c8624
< 	  generated="$generated $gentop"
---
> 	  func_append generated " $gentop"
7446a8631,8633
>       # If we're not building shared, we need to use non_pic_objs
>       test "$build_libtool_libs" != yes && libobjs="$non_pic_objects"
> 
7448c8635
<       reload_objs="$objs$old_deplibs "`$ECHO "X$libobjs" | $SP2NL | $Xsed -e '/\.'${libext}$'/d' -e '/\.lib$/d' -e "$lo2o" | $NL2SP`" $reload_conv_objs" ### testsuite: skip nested quoting test
---
>       reload_objs="$objs$old_deplibs "`$ECHO "$libobjs" | $SP2NL | $SED "/\.${libext}$/d; /\.lib$/d; $lo2o" | $NL2SP`" $reload_conv_objs" ### testsuite: skip nested quoting test
7508,7509c8695,8696
< 	compile_deplibs=`$ECHO "X $compile_deplibs" | $Xsed -e 's/ -lc / System.ltframework /'`
< 	finalize_deplibs=`$ECHO "X $finalize_deplibs" | $Xsed -e 's/ -lc / System.ltframework /'`
---
> 	compile_deplibs=`$ECHO " $compile_deplibs" | $SED 's/ -lc / System.ltframework /'`
> 	finalize_deplibs=`$ECHO " $finalize_deplibs" | $SED 's/ -lc / System.ltframework /'`
7520,7521c8707,8708
< 	      compile_command="$compile_command ${wl}-bind_at_load"
< 	      finalize_command="$finalize_command ${wl}-bind_at_load"
---
> 	      func_append compile_command " ${wl}-bind_at_load"
> 	      func_append finalize_command " ${wl}-bind_at_load"
7526,7527c8713,8714
< 	compile_deplibs=`$ECHO "X $compile_deplibs" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
< 	finalize_deplibs=`$ECHO "X $finalize_deplibs" | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
---
> 	compile_deplibs=`$ECHO " $compile_deplibs" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
> 	finalize_deplibs=`$ECHO " $finalize_deplibs" | $SED 's% \([^ $]*\).ltframework% -framework \1%g'`
7541c8728
< 	    new_libs="$new_libs -L$path/$objdir" ;;
---
> 	    func_append new_libs " -L$path/$objdir" ;;
7551c8738
< 	  *) new_libs="$new_libs $deplib" ;;
---
> 	  *) func_append new_libs " $deplib" ;;
7554c8741
< 	*) new_libs="$new_libs $deplib" ;;
---
> 	*) func_append new_libs " $deplib" ;;
7560,7561c8747,8748
<       compile_command="$compile_command $compile_deplibs"
<       finalize_command="$finalize_command $finalize_deplibs"
---
>       func_append compile_command " $compile_deplibs"
>       func_append finalize_command " $finalize_deplibs"
7569c8756
< 	  *) finalize_rpath="$finalize_rpath $libdir" ;;
---
> 	  *) func_append finalize_rpath " $libdir" ;;
7588c8775
< 		hardcode_libdirs="$hardcode_libdirs$hardcode_libdir_separator$libdir"
---
> 		func_append hardcode_libdirs "$hardcode_libdir_separator$libdir"
7594c8781
< 	    rpath="$rpath $flag"
---
> 	    func_append rpath " $flag"
7599c8786
< 	  *) perm_rpath="$perm_rpath $libdir" ;;
---
> 	  *) func_append perm_rpath " $libdir" ;;
7608c8795
< 	  *) dllsearchpath="$dllsearchpath:$libdir";;
---
> 	  *) func_append dllsearchpath ":$libdir";;
7613c8800
< 	  *) dllsearchpath="$dllsearchpath:$testbindir";;
---
> 	  *) func_append dllsearchpath ":$testbindir";;
7639c8826
< 		hardcode_libdirs="$hardcode_libdirs$hardcode_libdir_separator$libdir"
---
> 		func_append hardcode_libdirs "$hardcode_libdir_separator$libdir"
7645c8832
< 	    rpath="$rpath $flag"
---
> 	    func_append rpath " $flag"
7650c8837
< 	  *) finalize_perm_rpath="$finalize_perm_rpath $libdir" ;;
---
> 	  *) func_append finalize_perm_rpath " $libdir" ;;
7664,7665c8851,8852
< 	compile_command=`$ECHO "X$compile_command" | $SP2NL | $Xsed -e "$lo2o" | $NL2SP`
< 	finalize_command=`$ECHO "X$finalize_command" | $SP2NL | $Xsed -e "$lo2o" | $NL2SP`
---
> 	compile_command=`$ECHO "$compile_command" | $SP2NL | $SED "$lo2o" | $NL2SP`
> 	finalize_command=`$ECHO "$finalize_command" | $SP2NL | $SED "$lo2o" | $NL2SP`
7676a8864,8867
>       *cegcc* | *mingw32ce*)
>         # Disable wrappers for cegcc and mingw32ce hosts, we are cross compiling anyway.
>         wrappers_required=no
>         ;;
7682,7685d8872
<       *cegcc)
<         # Disable wrappers for cegcc, we are cross compiling anyway.
<         wrappers_required=no
<         ;;
7694c8881
< 	compile_command=`$ECHO "X$compile_command" | $Xsed -e 's%@OUTPUT@%'"$output"'%g'`
---
> 	compile_command=`$ECHO "$compile_command" | $SED 's%@OUTPUT@%'"$output"'%g'`
7700a8888,8893
> 	if test -n "$postlink_cmds"; then
> 	  func_to_tool_file "$output"
> 	  postlink_cmds=`func_echo_all "$postlink_cmds" | $SED -e 's%@OUTPUT@%'"$output"'%g' -e 's%@TOOL_OUTPUT@%'"$func_to_tool_file_result"'%g'`
> 	  func_execute_cmds "$postlink_cmds" 'exit $?'
> 	fi
> 
7723c8916
< 	    rpath="$rpath$dir:"
---
> 	    func_append rpath "$dir:"
7731c8924
< 	    rpath="$rpath$dir:"
---
> 	    func_append rpath "$dir:"
7741c8934
< 	link_command=`$ECHO "X$link_command" | $Xsed -e 's%@OUTPUT@%'"$output"'%g'`
---
> 	link_command=`$ECHO "$link_command" | $SED 's%@OUTPUT@%'"$output"'%g'`
7745a8939,8945
> 
> 	if test -n "$postlink_cmds"; then
> 	  func_to_tool_file "$output"
> 	  postlink_cmds=`func_echo_all "$postlink_cmds" | $SED -e 's%@OUTPUT@%'"$output"'%g' -e 's%@TOOL_OUTPUT@%'"$func_to_tool_file_result"'%g'`
> 	  func_execute_cmds "$postlink_cmds" 'exit $?'
> 	fi
> 
7760c8960
< 	    relink_command=`$ECHO "X$compile_var$compile_command$compile_rpath" | $Xsed -e 's%@OUTPUT@%\$progdir/\$file%g'`
---
> 	    relink_command=`$ECHO "$compile_var$compile_command$compile_rpath" | $SED 's%@OUTPUT@%\$progdir/\$file%g'`
7772c8972
<       link_command=`$ECHO "X$link_command" | $Xsed -e 's%@OUTPUT@%'"$output_objdir/$outputname"'%g'`
---
>       link_command=`$ECHO "$link_command" | $SED 's%@OUTPUT@%'"$output_objdir/$outputname"'%g'`
7778a8979,8984
>       if test -n "$postlink_cmds"; then
> 	func_to_tool_file "$output_objdir/$outputname"
> 	postlink_cmds=`func_echo_all "$postlink_cmds" | $SED -e 's%@OUTPUT@%'"$output_objdir/$outputname"'%g' -e 's%@TOOL_OUTPUT@%'"$func_to_tool_file_result"'%g'`
> 	func_execute_cmds "$postlink_cmds" 'exit $?'
>       fi
> 
7796,7807c9002
< 	relink_command=`$ECHO "X$relink_command" | $Xsed -e "$sed_quote_subst"`
<       fi
< 
<       # Quote $ECHO for shipping.
<       if test "X$ECHO" = "X$SHELL $progpath --fallback-echo"; then
< 	case $progpath in
< 	[\\/]* | [A-Za-z]:[\\/]*) qecho="$SHELL $progpath --fallback-echo";;
< 	*) qecho="$SHELL `pwd`/$progpath --fallback-echo";;
< 	esac
< 	qecho=`$ECHO "X$qecho" | $Xsed -e "$sed_quote_subst"`
<       else
< 	qecho=`$ECHO "X$ECHO" | $Xsed -e "$sed_quote_subst"`
---
> 	relink_command=`$ECHO "$relink_command" | $SED "$sed_quote_subst"`
7887c9082
< 	    oldobjs="$oldobjs $symfileobj"
---
> 	    func_append oldobjs " $symfileobj"
7895c9090
< 	generated="$generated $gentop"
---
> 	func_append generated " $gentop"
7898c9093
< 	oldobjs="$oldobjs $func_extract_archives_result"
---
> 	func_append oldobjs " $func_extract_archives_result"
7909c9104
< 	  generated="$generated $gentop"
---
> 	  func_append generated " $gentop"
7912c9107
< 	  oldobjs="$oldobjs $func_extract_archives_result"
---
> 	  func_append oldobjs " $func_extract_archives_result"
7928c9123
< 	  $ECHO "copying selected object files to avoid basename conflicts..."
---
> 	  echo "copying selected object files to avoid basename conflicts..."
7930c9125
< 	  generated="$generated $gentop"
---
> 	  func_append generated " $gentop"
7954c9149
< 	      oldobjs="$oldobjs $gentop/$newobj"
---
> 	      func_append oldobjs " $gentop/$newobj"
7956c9151
< 	    *) oldobjs="$oldobjs $obj" ;;
---
> 	    *) func_append oldobjs " $obj" ;;
7965a9161,9170
> 	elif test -n "$archiver_list_spec"; then
> 	  func_verbose "using command file archive linking..."
> 	  for obj in $oldobjs
> 	  do
> 	    func_to_tool_file "$obj"
> 	    $ECHO "$func_to_tool_file_result"
> 	  done > $output_objdir/$libname.libcmd
> 	  func_to_tool_file "$output_objdir/$libname.libcmd"
> 	  oldobjs=" $archiver_list_spec$func_to_tool_file_result"
> 	  cmds=$old_archive_cmds
8039c9244
<       relink_command=`$ECHO "X$relink_command" | $Xsed -e "$sed_quote_subst"`
---
>       relink_command=`$ECHO "$relink_command" | $SED "$sed_quote_subst"`
8062c9267
< 		newdependency_libs="$newdependency_libs $libdir/$name"
---
> 		func_append newdependency_libs " ${lt_sysroot:+=}$libdir/$name"
8064c9269,9279
< 	      *) newdependency_libs="$newdependency_libs $deplib" ;;
---
> 	      -L*)
> 		func_stripname -L '' "$deplib"
> 		func_replace_sysroot "$func_stripname_result"
> 		func_append newdependency_libs " -L$func_replace_sysroot_result"
> 		;;
> 	      -R*)
> 		func_stripname -R '' "$deplib"
> 		func_replace_sysroot "$func_stripname_result"
> 		func_append newdependency_libs " -R$func_replace_sysroot_result"
> 		;;
> 	      *) func_append newdependency_libs " $deplib" ;;
8078c9293
< 		newdlfiles="$newdlfiles $libdir/$name"
---
> 		func_append newdlfiles " ${lt_sysroot:+=}$libdir/$name"
8080c9295
< 	      *) newdlfiles="$newdlfiles $lib" ;;
---
> 	      *) func_append newdlfiles " $lib" ;;
8097c9312
< 		newdlprefiles="$newdlprefiles $libdir/$name"
---
> 		func_append newdlprefiles " ${lt_sysroot:+=}$libdir/$name"
8109c9324
< 	      newdlfiles="$newdlfiles $abs"
---
> 	      func_append newdlfiles " $abs"
8118c9333
< 	      newdlprefiles="$newdlprefiles $abs"
---
> 	      func_append newdlprefiles " $abs"
8123a9339,9346
> 	  # In fact, it would be nice if we could use this code for all target
> 	  # systems that can't hard-code library paths into their executables
> 	  # and that have no shared library path variable independent of PATH,
> 	  # but it turns out we can't easily determine that from inspecting
> 	  # libtool variables, so we have to hard-code the OSs to which it
> 	  # applies here; at the moment, that means platforms that use the PE
> 	  # object format with DLL files.  See the long comment at the top of
> 	  # tests/bindir.at for full details.
8126c9349,9359
< 	    *cygwin*,*lai,yes,no,*.dll | *mingw*,*lai,yes,no,*.dll | *cegcc*,*lai,yes,no,*.dll) tdlname=../bin/$dlname ;;
---
> 	    *cygwin*,*lai,yes,no,*.dll | *mingw*,*lai,yes,no,*.dll | *cegcc*,*lai,yes,no,*.dll)
> 	      # If a -bindir argument was supplied, place the dll there.
> 	      if test "x$bindir" != x ;
> 	      then
> 		func_relative_path "$install_libdir" "$bindir"
> 		tdlname=$func_relative_path_result$dlname
> 	      else
> 		# Otherwise fall back on heuristic.
> 		tdlname=../bin/$dlname
> 	      fi
> 	      ;;
8185c9418
< { test "$mode" = link || test "$mode" = relink; } &&
---
> { test "$opt_mode" = link || test "$opt_mode" = relink; } &&
8205,8207c9438,9440
<       -f) RM="$RM $arg"; rmforce=yes ;;
<       -*) RM="$RM $arg" ;;
<       *) files="$files $arg" ;;
---
>       -f) func_append RM " $arg"; rmforce=yes ;;
>       -*) func_append RM " $arg" ;;
>       *) func_append files " $arg" ;;
8216d9448
<     origobjdir="$objdir"
8221c9453
< 	objdir="$origobjdir"
---
> 	odir="$objdir"
8223c9455
< 	objdir="$dir/$origobjdir"
---
> 	odir="$dir/$objdir"
8227c9459
<       test "$mode" = uninstall && objdir="$dir"
---
>       test "$opt_mode" = uninstall && odir="$dir"
8229,8230c9461,9462
<       # Remember objdir for removal later, being careful to avoid duplicates
<       if test "$mode" = clean; then
---
>       # Remember odir for removal later, being careful to avoid duplicates
>       if test "$opt_mode" = clean; then
8232,8233c9464,9465
< 	  *" $objdir "*) ;;
< 	  *) rmdirs="$rmdirs $objdir" ;;
---
> 	  *" $odir "*) ;;
> 	  *) func_append rmdirs " $odir" ;;
8259c9491
< 	    rmfiles="$rmfiles $objdir/$n"
---
> 	    func_append rmfiles " $odir/$n"
8261c9493
< 	  test -n "$old_library" && rmfiles="$rmfiles $objdir/$old_library"
---
> 	  test -n "$old_library" && func_append rmfiles " $odir/$old_library"
8263c9495
< 	  case "$mode" in
---
> 	  case "$opt_mode" in
8266d9497
< 	    # "  " in the beginning catches empty $dlname
8268c9499
< 	    *) rmfiles="$rmfiles $objdir/$dlname" ;;
---
> 	    *) test -n "$dlname" && func_append rmfiles " $odir/$dlname" ;;
8270c9501
< 	    test -n "$libdir" && rmfiles="$rmfiles $objdir/$name $objdir/${name}i"
---
> 	    test -n "$libdir" && func_append rmfiles " $odir/$name $odir/${name}i"
8298c9529
< 	    rmfiles="$rmfiles $dir/$pic_object"
---
> 	    func_append rmfiles " $dir/$pic_object"
8304c9535
< 	    rmfiles="$rmfiles $dir/$non_pic_object"
---
> 	    func_append rmfiles " $dir/$non_pic_object"
8310c9541
< 	if test "$mode" = clean ; then
---
> 	if test "$opt_mode" = clean ; then
8320c9551
< 	    rmfiles="$rmfiles $file"
---
> 	    func_append rmfiles " $file"
8329c9560
< 	      rmfiles="$rmfiles $func_ltwrapper_scriptname_result"
---
> 	      func_append rmfiles " $func_ltwrapper_scriptname_result"
8337c9568
< 	    rmfiles="$rmfiles $objdir/$name $objdir/${name}S.${objext}"
---
> 	    func_append rmfiles " $odir/$name $odir/${name}S.${objext}"
8339c9570
< 	      rmfiles="$rmfiles $objdir/lt-$name"
---
> 	      func_append rmfiles " $odir/lt-$name"
8342c9573
< 	      rmfiles="$rmfiles $objdir/lt-${noexename}.c"
---
> 	      func_append rmfiles " $odir/lt-${noexename}.c"
8350d9580
<     objdir="$origobjdir"
8362c9592
< { test "$mode" = uninstall || test "$mode" = clean; } &&
---
> { test "$opt_mode" = uninstall || test "$opt_mode" = clean; } &&
8365c9595
< test -z "$mode" && {
---
> test -z "$opt_mode" && {
8371c9601
<   func_fatal_help "invalid operation mode \`$mode'"
---
>   func_fatal_help "invalid operation mode \`$opt_mode'"
Only in libffi.old/m4: .svn
Only in libffi/m4: ax_cc_maxopt.m4
Only in libffi/m4: ax_cflags_warn_all.m4
Only in libffi/m4: ax_check_compiler_flags.m4
Only in libffi/m4: ax_compiler_vendor.m4
Only in libffi/m4: ax_configure_args.m4
Only in libffi/m4: ax_enable_builddir.m4
Only in libffi/m4: ax_gcc_archflag.m4
Only in libffi/m4: ax_gcc_x86_cpuid.m4
diff -rbw libffi.old/m4/libtool.m4 libffi/m4/libtool.m4
4c4,5
< #                 2006, 2007, 2008 Free Software Foundation, Inc.
---
> #                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,
> #                 Inc.
13c14,15
< #                 2006, 2007, 2008 Free Software Foundation, Inc.
---
> #                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,
> #                 Inc.
40c42
< # serial 56 LT_INIT
---
> # serial 57 LT_INIT
68a71
> AC_REQUIRE([AC_CONFIG_AUX_DIR_DEFAULT])dnl
84a88,89
> _LT_SHELL_INIT([SHELL=${CONFIG_SHELL-/bin/sh}])
> 
121c126
< cc_basename=`$ECHO "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`
---
> cc_basename=`$ECHO "$cc_temp" | $SED "s%.*/%%; s%^$host_alias-%%"`
140a146,148
> AC_REQUIRE([_LT_PREPARE_SED_QUOTE_VARS])dnl
> AC_REQUIRE([_LT_PROG_ECHO_BACKSLASH])dnl
> 
162a171
> m4_require([_LT_PATH_CONVERSION_FUNCTIONS])dnl
164a174
> m4_require([_LT_CHECK_SHAREDLIB_FROM_LINKLIB])dnl
166a177
> m4_require([_LT_WITH_SYSROOT])dnl
182d192
< _LT_PROG_ECHO_BACKSLASH
196,212d205
< # Sed substitution that helps us do robust quoting.  It backslashifies
< # metacharacters that are still active within double-quoted strings.
< sed_quote_subst='s/\([["`$\\]]\)/\\\1/g'
< 
< # Same as above, but do not quote variable references.
< double_quote_subst='s/\([["`\\]]\)/\\\1/g'
< 
< # Sed substitution to delay expansion of an escaped shell variable in a
< # double_quote_subst'ed string.
< delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
< 
< # Sed substitution to delay expansion of an escaped single quote.
< delay_single_quote_subst='s/'\''/'\'\\\\\\\'\''/g'
< 
< # Sed substitution to avoid accidental globbing in evaled expressions
< no_glob_subst='s/\*/\\\*/g'
< 
252a246,267
> # _LT_PREPARE_SED_QUOTE_VARS
> # --------------------------
> # Define a few sed substitution that help us do robust quoting.
> m4_defun([_LT_PREPARE_SED_QUOTE_VARS],
> [# Backslashify metacharacters that are still active within
> # double-quoted strings.
> sed_quote_subst='s/\([["`$\\]]\)/\\\1/g'
> 
> # Same as above, but do not quote variable references.
> double_quote_subst='s/\([["`\\]]\)/\\\1/g'
> 
> # Sed substitution to delay expansion of an escaped shell variable in a
> # double_quote_subst'ed string.
> delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
> 
> # Sed substitution to delay expansion of an escaped single quote.
> delay_single_quote_subst='s/'\''/'\'\\\\\\\'\''/g'
> 
> # Sed substitution to avoid accidental globbing in evaled expressions
> no_glob_subst='s/\*/\\\*/g'
> ])
> 
411c426
< [$1='`$ECHO "X$][$1" | $Xsed -e "$delay_single_quote_subst"`'])
---
> [$1='`$ECHO "$][$1" | $SED "$delay_single_quote_subst"`'])
421c436
< #    <var>='`$ECHO "X$<var>" | $Xsed -e "$delay_single_quote_subst"`'
---
> #    <var>='`$ECHO "$<var>" | $SED "$delay_single_quote_subst"`'
519a535,542
> # A function that is used when there is no print builtin or printf.
> func_fallback_echo ()
> {
>   eval 'cat <<_LTECHO_EOF
> \$[]1
> _LTECHO_EOF'
> }
> 
523c546
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
---
>     case \`eval \\\\\$ECHO \\\\""\\\\\$\$var"\\\\"\` in
525c548
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$sed_quote_subst\\"\\\`\\\\\\""
---
>       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"\\\$\$var\\" | \\\$SED \\"\\\$sed_quote_subst\\"\\\`\\\\\\""
536c559
<     case \`eval \\\\\$ECHO "X\\\\\$\$var"\` in
---
>     case \`eval \\\\\$ECHO \\\\""\\\\\$\$var"\\\\"\` in
538c561
<       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"X\\\$\$var\\" | \\\$Xsed -e \\"\\\$double_quote_subst\\" -e \\"\\\$sed_quote_subst\\" -e \\"\\\$delay_variable_subst\\"\\\`\\\\\\""
---
>       eval "lt_\$var=\\\\\\"\\\`\\\$ECHO \\"\\\$\$var\\" | \\\$SED -e \\"\\\$double_quote_subst\\" -e \\"\\\$sed_quote_subst\\" -e \\"\\\$delay_variable_subst\\"\\\`\\\\\\""
546,552d568
< # Fix-up fallback echo if it was mangled by the above quoting rules.
< case \$lt_ECHO in
< *'\\\[$]0 --fallback-echo"')dnl "
<   lt_ECHO=\`\$ECHO "X\$lt_ECHO" | \$Xsed -e 's/\\\\\\\\\\\\\\\[$]0 --fallback-echo"\[$]/\[$]0 --fallback-echo"/'\`
<   ;;
< esac
< 
555a572,600
> # _LT_GENERATED_FILE_INIT(FILE, [COMMENT])
> # ------------------------------------
> # Generate a child script FILE with all initialization necessary to
> # reuse the environment learned by the parent script, and make the
> # file executable.  If COMMENT is supplied, it is inserted after the
> # `#!' sequence but before initialization text begins.  After this
> # macro, additional text can be appended to FILE to form the body of
> # the child script.  The macro ends with non-zero status if the
> # file could not be fully written (such as if the disk is full).
> m4_ifdef([AS_INIT_GENERATED],
> [m4_defun([_LT_GENERATED_FILE_INIT],[AS_INIT_GENERATED($@)])],
> [m4_defun([_LT_GENERATED_FILE_INIT],
> [m4_require([AS_PREPARE])]dnl
> [m4_pushdef([AS_MESSAGE_LOG_FD])]dnl
> [lt_write_fail=0
> cat >$1 <<_ASEOF || lt_write_fail=1
> #! $SHELL
> # Generated by $as_me.
> $2
> SHELL=\${CONFIG_SHELL-$SHELL}
> export SHELL
> _ASEOF
> cat >>$1 <<\_ASEOF || lt_write_fail=1
> AS_SHELL_SANITIZE
> _AS_PREPARE
> exec AS_MESSAGE_FD>&1
> _ASEOF
> test $lt_write_fail = 0 && chmod +x $1[]dnl
> m4_popdef([AS_MESSAGE_LOG_FD])])])# _LT_GENERATED_FILE_INIT
565,572c610,611
< cat >"$CONFIG_LT" <<_LTEOF
< #! $SHELL
< # Generated by $as_me.
< # Run this file to recreate a libtool stub with the current configuration.
< 
< lt_cl_silent=false
< SHELL=\${CONFIG_SHELL-$SHELL}
< _LTEOF
---
> _LT_GENERATED_FILE_INIT(["$CONFIG_LT"],
> [# Run this file to recreate a libtool stub with the current configuration.])
575,578c614
< AS_SHELL_SANITIZE
< _AS_PREPARE
< 
< exec AS_MESSAGE_FD>&1
---
> lt_cl_silent=false
604c640
< Copyright (C) 2008 Free Software Foundation, Inc.
---
> Copyright (C) 2010 Free Software Foundation, Inc.
649d684
< if test "$no_create" != yes; then
657d691
< fi
720c754
<   sed '/^# Generated shell functions inserted here/q' "$ltmain" >> "$cfgfile" \
---
>   sed '$q' "$ltmain" >> "$cfgfile" \
723,726c757
<   _LT_PROG_XSI_SHELLFNS
< 
<   sed -n '/^# Generated shell functions inserted here/,$p' "$ltmain" >> "$cfgfile" \
<     || (rm -f "$cfgfile"; exit 1)
---
>   _LT_PROG_REPLACE_SHELLFNS
833a865
> AU_DEFUN([AC_LIBTOOL_RC], [LT_LANG(Windows Resource)])
838a871
> dnl AC_DEFUN([AC_LIBTOOL_RC], [])
942a976,1000
>     AC_CACHE_CHECK([for -force_load linker flag],[lt_cv_ld_force_load],
>       [lt_cv_ld_force_load=no
>       cat > conftest.c << _LT_EOF
> int forced_loaded() { return 2;}
> _LT_EOF
>       echo "$LTCC $LTCFLAGS -c -o conftest.o conftest.c" >&AS_MESSAGE_LOG_FD
>       $LTCC $LTCFLAGS -c -o conftest.o conftest.c 2>&AS_MESSAGE_LOG_FD
>       echo "$AR cru libconftest.a conftest.o" >&AS_MESSAGE_LOG_FD
>       $AR cru libconftest.a conftest.o 2>&AS_MESSAGE_LOG_FD
>       echo "$RANLIB libconftest.a" >&AS_MESSAGE_LOG_FD
>       $RANLIB libconftest.a 2>&AS_MESSAGE_LOG_FD
>       cat > conftest.c << _LT_EOF
> int main() { return 0;}
> _LT_EOF
>       echo "$LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a" >&AS_MESSAGE_LOG_FD
>       $LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a 2>conftest.err
>       _lt_result=$?
>       if test -f conftest && test ! -s conftest.err && test $_lt_result = 0 && $GREP forced_load conftest 2>&1 >/dev/null; then
> 	lt_cv_ld_force_load=yes
>       else
> 	cat conftest.err >&AS_MESSAGE_LOG_FD
>       fi
>         rm -f conftest.err libconftest.a conftest conftest.c
>         rm -rf conftest.dSYM
>     ])
970c1028
<     if test "$DSYMUTIL" != ":"; then
---
>     if test "$DSYMUTIL" != ":" && test "$lt_cv_ld_force_load" = "no"; then
989a1048,1050
>   if test "$lt_cv_ld_force_load" = "yes"; then
>     _LT_TAGVAR(whole_archive_flag_spec, $1)='`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience ${wl}-force_load,$conv\"; done; func_echo_all \"$new_convenience\"`'
>   else
990a1052
>   fi
998c1060
<     output_verbose_link_cmd=echo
---
>     output_verbose_link_cmd=func_echo_all
1014,1015c1076,1077
< # _LT_SYS_MODULE_PATH_AIX
< # -----------------------
---
> # _LT_SYS_MODULE_PATH_AIX([TAGNAME])
> # ----------------------------------
1021a1084,1085
> # Store the results from the different compilers for each TAGNAME.
> # Allow to override them for all tags through lt_cv_aix_libpath.
1024,1025c1088,1093
< AC_LINK_IFELSE(AC_LANG_PROGRAM,[
< lt_aix_libpath_sed='
---
> if test "${lt_cv_aix_libpath+set}" = set; then
>   aix_libpath=$lt_cv_aix_libpath
> else
>   AC_CACHE_VAL([_LT_TAGVAR([lt_cv_aix_libpath_], [$1])],
>   [AC_LINK_IFELSE([AC_LANG_PROGRAM],[
>   lt_aix_libpath_sed='[
1028c1096
< 	    s/^0  *\(.*\)$/\1/
---
> 	      s/^0  *\([^ ]*\) *$/\1/
1031,1032c1099,1100
<     }'
< aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>       }]'
>   _LT_TAGVAR([lt_cv_aix_libpath_], [$1])=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
1034,1035c1102,1103
< if test -z "$aix_libpath"; then
<   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
---
>   if test -z "$_LT_TAGVAR([lt_cv_aix_libpath_], [$1])"; then
>     _LT_TAGVAR([lt_cv_aix_libpath_], [$1])=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
1037c1105,1110
< if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
---
>   if test -z "$_LT_TAGVAR([lt_cv_aix_libpath_], [$1])"; then
>     _LT_TAGVAR([lt_cv_aix_libpath_], [$1])="/usr/lib:/lib"
>   fi
>   ])
>   aix_libpath=$_LT_TAGVAR([lt_cv_aix_libpath_], [$1])
> fi
1044,1049c1117,1119
< [ifdef([AC_DIVERSION_NOTICE],
< 	     [AC_DIVERT_PUSH(AC_DIVERSION_NOTICE)],
< 	 [AC_DIVERT_PUSH(NOTICE)])
< $1
< AC_DIVERT_POP
< ])# _LT_SHELL_INIT
---
> [m4_divert_text([M4SH-INIT], [$1
> ])])# _LT_SHELL_INIT
> 
1054,1055c1124,1127
< # Add some code to the start of the generated configure script which
< # will find an echo command which doesn't interpret backslashes.
---
> # Find how we can fake an echo command that does not interpret backslash.
> # In particular, with Autoconf 2.60 or later we add some code to the start
> # of the generated configure script which will find a shell with a builtin
> # printf (which we can use as an echo command).
1057,1077c1129,1139
< [_LT_SHELL_INIT([
< # Check that we are running under the correct shell.
< SHELL=${CONFIG_SHELL-/bin/sh}
< 
< case X$lt_ECHO in
< X*--fallback-echo)
<   # Remove one level of quotation (which was required for Make).
<   ECHO=`echo "$lt_ECHO" | sed 's,\\\\\[$]\\[$]0,'[$]0','`
<   ;;
< esac
< 
< ECHO=${lt_ECHO-echo}
< if test "X[$]1" = X--no-reexec; then
<   # Discard the --no-reexec flag, and continue.
<   shift
< elif test "X[$]1" = X--fallback-echo; then
<   # Avoid inline document here, it may be left over
<   :
< elif test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' ; then
<   # Yippee, $ECHO works!
<   :
---
> [ECHO='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
> ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO
> ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO$ECHO
> 
> AC_MSG_CHECKING([how to print strings])
> # Test print first, because it will be a builtin if present.
> if test "X`( print -r -- -n ) 2>/dev/null`" = X-n && \
>    test "X`print -r -- $ECHO 2>/dev/null`" = "X$ECHO"; then
>   ECHO='print -r --'
> elif test "X`printf %s $ECHO 2>/dev/null`" = "X$ECHO"; then
>   ECHO='printf %s\n'
1079,1106c1141,1148
<   # Restart under the correct shell.
<   exec $SHELL "[$]0" --no-reexec ${1+"[$]@"}
< fi
< 
< if test "X[$]1" = X--fallback-echo; then
<   # used as fallback echo
<   shift
<   cat <<_LT_EOF
< [$]*
< _LT_EOF
<   exit 0
< fi
< 
< # The HP-UX ksh and POSIX shell print the target directory to stdout
< # if CDPATH is set.
< (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
< 
< if test -z "$lt_ECHO"; then
<   if test "X${echo_test_string+set}" != Xset; then
<     # find a string as large as possible, as long as the shell can cope with it
<     for cmd in 'sed 50q "[$]0"' 'sed 20q "[$]0"' 'sed 10q "[$]0"' 'sed 2q "[$]0"' 'echo test'; do
<       # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
<       if { echo_test_string=`eval $cmd`; } 2>/dev/null &&
< 	 { test "X$echo_test_string" = "X$echo_test_string"; } 2>/dev/null
<       then
<         break
<       fi
<     done
---
>   # Use this function as a fallback that always works.
>   func_fallback_echo ()
>   {
>     eval 'cat <<_LTECHO_EOF
> $[]1
> _LTECHO_EOF'
>   }
>   ECHO='func_fallback_echo'
1109,1118c1151,1156
<   if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
<      echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
<      test "X$echo_testing_string" = "X$echo_test_string"; then
<     :
<   else
<     # The Solaris, AIX, and Digital Unix default echo programs unquote
<     # backslashes.  This makes it impossible to quote backslashes using
<     #   echo "$something" | sed 's/\\/\\\\/g'
<     #
<     # So, first we look for a working echo in the user's PATH.
---
> # func_echo_all arg...
> # Invoke $ECHO with all args, space-separated.
> func_echo_all ()
> {
>     $ECHO "$*" 
> }
1120,1131c1158,1162
<     lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
<     for dir in $PATH /usr/ucb; do
<       IFS="$lt_save_ifs"
<       if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
<          test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         ECHO="$dir/echo"
<         break
<       fi
<     done
<     IFS="$lt_save_ifs"
---
> case "$ECHO" in
>   printf*) AC_MSG_RESULT([printf]) ;;
>   print*) AC_MSG_RESULT([print -r]) ;;
>   *) AC_MSG_RESULT([cat]) ;;
> esac
1133,1172c1164,1172
<     if test "X$ECHO" = Xecho; then
<       # We didn't find a better echo, so look for alternatives.
<       if test "X`{ print -r '\t'; } 2>/dev/null`" = 'X\t' &&
<          echo_testing_string=`{ print -r "$echo_test_string"; } 2>/dev/null` &&
<          test "X$echo_testing_string" = "X$echo_test_string"; then
<         # This shell has a builtin print -r that does the trick.
<         ECHO='print -r'
<       elif { test -f /bin/ksh || test -f /bin/ksh$ac_exeext; } &&
< 	   test "X$CONFIG_SHELL" != X/bin/ksh; then
<         # If we have ksh, try running configure again with it.
<         ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
<         export ORIGINAL_CONFIG_SHELL
<         CONFIG_SHELL=/bin/ksh
<         export CONFIG_SHELL
<         exec $CONFIG_SHELL "[$]0" --no-reexec ${1+"[$]@"}
<       else
<         # Try using printf.
<         ECHO='printf %s\n'
<         if test "X`{ $ECHO '\t'; } 2>/dev/null`" = 'X\t' &&
< 	   echo_testing_string=`{ $ECHO "$echo_test_string"; } 2>/dev/null` &&
< 	   test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  # Cool, printf works
< 	  :
<         elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "[$]0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($ORIGINAL_CONFIG_SHELL "[$]0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
< 	  export CONFIG_SHELL
< 	  SHELL="$CONFIG_SHELL"
< 	  export SHELL
< 	  ECHO="$CONFIG_SHELL [$]0 --fallback-echo"
<         elif echo_testing_string=`($CONFIG_SHELL "[$]0" --fallback-echo '\t') 2>/dev/null` &&
< 	     test "X$echo_testing_string" = 'X\t' &&
< 	     echo_testing_string=`($CONFIG_SHELL "[$]0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
< 	     test "X$echo_testing_string" = "X$echo_test_string"; then
< 	  ECHO="$CONFIG_SHELL [$]0 --fallback-echo"
<         else
< 	  # maybe with a smaller string...
< 	  prev=:
---
> m4_ifdef([_AS_DETECT_SUGGESTED],
> [_AS_DETECT_SUGGESTED([
>   test -n "${ZSH_VERSION+set}${BASH_VERSION+set}" || (
>     ECHO='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
>     ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO
>     ECHO=$ECHO$ECHO$ECHO$ECHO$ECHO$ECHO
>     PATH=/empty FPATH=/empty; export PATH FPATH
>     test "X`printf %s $ECHO`" = "X$ECHO" \
>       || test "X`print -r -- $ECHO`" = "X$ECHO" )])])
1174,1180c1174,1176
< 	  for cmd in 'echo test' 'sed 2q "[$]0"' 'sed 10q "[$]0"' 'sed 20q "[$]0"' 'sed 50q "[$]0"'; do
< 	    if { test "X$echo_test_string" = "X`eval $cmd`"; } 2>/dev/null
< 	    then
< 	      break
< 	    fi
< 	    prev="$cmd"
< 	  done
---
> _LT_DECL([], [SHELL], [1], [Shell to use when invoking shell scripts])
> _LT_DECL([], [ECHO], [1], [An echo program that protects backslashes])
> ])# _LT_PROG_ECHO_BACKSLASH
1182,1194d1177
< 	  if test "$prev" != 'sed 50q "[$]0"'; then
< 	    echo_test_string=`eval $prev`
< 	    export echo_test_string
< 	    exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "[$]0" ${1+"[$]@"}
< 	  else
< 	    # Oops.  We lost completely, so just stick with echo.
< 	    ECHO=echo
< 	  fi
<         fi
<       fi
<     fi
<   fi
< fi
1196,1200c1179,1194
< # Copy echo and quote the copy suitably for passing to libtool from
< # the Makefile, instead of quoting the original, which is used later.
< lt_ECHO=$ECHO
< if test "X$lt_ECHO" = "X$CONFIG_SHELL [$]0 --fallback-echo"; then
<    lt_ECHO="$CONFIG_SHELL \\\$\[$]0 --fallback-echo"
---
> # _LT_WITH_SYSROOT
> # ----------------
> AC_DEFUN([_LT_WITH_SYSROOT],
> [AC_MSG_CHECKING([for sysroot])
> AC_ARG_WITH([sysroot],
> [  --with-sysroot[=DIR] Search for dependent libraries within DIR
>                         (or the compiler's sysroot if not specified).],
> [], [with_sysroot=no])
> 
> dnl lt_sysroot will always be passed unquoted.  We quote it here
> dnl in case the user passed a directory name.
> lt_sysroot=
> case ${with_sysroot} in #(
>  yes)
>    if test "$GCC" = yes; then
>      lt_sysroot=`$CC --print-sysroot 2>/dev/null`
1201a1196,1206
>    ;; #(
>  /*)
>    lt_sysroot=`echo "$with_sysroot" | sed -e "$sed_quote_subst"`
>    ;; #(
>  no|'')
>    ;; #(
>  *)
>    AC_MSG_RESULT([${with_sysroot}])
>    AC_MSG_ERROR([The sysroot must be an absolute path.])
>    ;;
> esac
1203,1209c1208,1210
< AC_SUBST(lt_ECHO)
< ])
< _LT_DECL([], [SHELL], [1], [Shell to use when invoking shell scripts])
< _LT_DECL([], [ECHO], [1],
<     [An echo program that does not interpret backslashes])
< ])# _LT_PROG_ECHO_BACKSLASH
< 
---
>  AC_MSG_RESULT([${lt_sysroot:-no}])
> _LT_DECL([], [lt_sysroot], [0], [The root where to search for ]dnl
> [dependent libraries, and in which our libraries should be installed.])])
1239c1240
<   echo '[#]line __oline__ "configure"' > conftest.$ac_ext
---
>   echo '[#]line '$LINENO' "configure"' > conftest.$ac_ext
1356a1358,1394
> # _LT_PROG_AR
> # -----------
> m4_defun([_LT_PROG_AR],
> [AC_CHECK_TOOLS(AR, [ar], false)
> : ${AR=ar}
> : ${AR_FLAGS=cru}
> _LT_DECL([], [AR], [1], [The archiver])
> _LT_DECL([], [AR_FLAGS], [1], [Flags to create an archive])
> 
> AC_CACHE_CHECK([for archiver @FILE support], [lt_cv_ar_at_file],
>   [lt_cv_ar_at_file=no
>    AC_COMPILE_IFELSE([AC_LANG_PROGRAM],
>      [echo conftest.$ac_objext > conftest.lst
>       lt_ar_try='$AR $AR_FLAGS libconftest.a @conftest.lst >&AS_MESSAGE_LOG_FD'
>       AC_TRY_EVAL([lt_ar_try])
>       if test "$ac_status" -eq 0; then
> 	# Ensure the archiver fails upon bogus file names.
> 	rm -f conftest.$ac_objext libconftest.a
> 	AC_TRY_EVAL([lt_ar_try])
> 	if test "$ac_status" -ne 0; then
>           lt_cv_ar_at_file=@
>         fi
>       fi
>       rm -f conftest.* libconftest.a
>      ])
>   ])
> 
> if test "x$lt_cv_ar_at_file" = xno; then
>   archiver_list_spec=
> else
>   archiver_list_spec=$lt_cv_ar_at_file
> fi
> _LT_DECL([], [archiver_list_spec], [1],
>   [How to feed a file listing to the archiver])
> ])# _LT_PROG_AR
> 
> 
1360,1364c1398
< [AC_CHECK_TOOL(AR, ar, false)
< test -z "$AR" && AR=ar
< test -z "$AR_FLAGS" && AR_FLAGS=cru
< _LT_DECL([], [AR], [1], [The archiver])
< _LT_DECL([], [AR_FLAGS], [1])
---
> [_LT_PROG_AR
1390a1425,1431
> 
> case $host_os in
>   darwin*)
>     lock_old_archive_extraction=yes ;;
>   *)
>     lock_old_archive_extraction=no ;;
> esac
1394a1436,1437
> _LT_DECL([], [lock_old_archive_extraction], [0],
>     [Whether to use a lock for old archive extraction])
1419c1462
<    (eval echo "\"\$as_me:__oline__: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
1423c1466
<    echo "$as_me:__oline__: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
1427c1470
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' >conftest.exp
1467c1510
<        $ECHO "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
---
>        $ECHO "$_lt_linker_boilerplate" | $SED '/^$/d' > conftest.exp
1529a1573,1577
>   mint*)
>     # On MiNT this can take a long time and run out of memory.
>     lt_cv_sys_max_cmd_len=8192;
>     ;;
> 
1594,1595c1642,1643
<       while { test "X"`$SHELL [$]0 --fallback-echo "X$teststring$teststring" 2>/dev/null` \
< 	         = "XX$teststring$teststring"; } >/dev/null 2>&1 &&
---
>       while { test "X"`func_fallback_echo "$teststring$teststring" 2>/dev/null` \
> 	         = "X$teststring$teststring"; } >/dev/null 2>&1 &&
1646c1694
< [#line __oline__ "configure"
---
> [#line $LINENO "configure"
1687c1735,1741
< void fnord() { int i=42;}
---
> /* When -fvisbility=hidden is used, assume the code has been annotated
>    correspondingly for the symbols needed.  */
> #if defined(__GNUC__) && (((__GNUC__ == 3) && (__GNUC_MINOR__ >= 3)) || (__GNUC__ > 3))
> int fnord () __attribute__((visibility("default")));
> #endif
> 
> int fnord () { return 42; }
1696c1750,1754
<       else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
---
>       else
>         {
> 	  if (dlsym( self,"_fnord"))  status = $lt_dlneed_uscore;
>           else puts (dlerror ());
> 	}
1872c1930
<    (eval echo "\"\$as_me:__oline__: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
---
>    (eval echo "\"\$as_me:$LINENO: $lt_compile\"" >&AS_MESSAGE_LOG_FD)
1876c1934
<    echo "$as_me:__oline__: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
---
>    echo "$as_me:$LINENO: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
1881c1939
<      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
---
>      $ECHO "$_lt_compiler_boilerplate" | $SED '/^$/d' > out/conftest.exp
2039a2098
> m4_require([_LT_CHECK_SHELL_FEATURES])dnl
2048,2049c2107,2113
<   lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e "s,=/,/,g"`
<   if $ECHO "$lt_search_path_spec" | $GREP ';' >/dev/null ; then
---
>   case $host_os in
>     mingw* | cegcc*) lt_sed_strip_eq="s,=\([[A-Za-z]]:\),\1,g" ;;
>     *) lt_sed_strip_eq="s,=/,/,g" ;;
>   esac
>   lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e $lt_sed_strip_eq`
>   case $lt_search_path_spec in
>   *\;*)
2054,2057c2118,2123
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED -e 's/;/ /g'`
<   else
<     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
<   fi
---
>     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED 's/;/ /g'`
>     ;;
>   *)
>     lt_search_path_spec=`$ECHO "$lt_search_path_spec" | $SED "s/$PATH_SEPARATOR/ /g"`
>     ;;
>   esac
2070c2136
<   lt_search_path_spec=`$ECHO $lt_tmp_lt_search_path_spec | awk '
---
>   lt_search_path_spec=`$ECHO "$lt_tmp_lt_search_path_spec" | awk '
2090c2156,2162
<   sys_lib_search_path_spec=`$ECHO $lt_search_path_spec`
---
>   # AWK program above erroneously prepends '/' to C:/dos/paths
>   # for these hosts.
>   case $host_os in
>     mingw* | cegcc*) lt_search_path_spec=`$ECHO "$lt_search_path_spec" |\
>       $SED 's,/\([[A-Za-z]]:\),\1,g'` ;;
>   esac
>   sys_lib_search_path_spec=`$ECHO "$lt_search_path_spec" | $lt_NL2SP`
2178c2250
<     finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$ECHO "X$lib" | $Xsed -e '\''s%^.*/\([[^/]]*\)\.ixlibrary$%\1%'\''`; test $RM /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
---
>     finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`func_echo_all "$lib" | $SED '\''s%^.*/\([[^/]]*\)\.ixlibrary$%\1%'\''`; test $RM /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
2209,2210c2281,2283
<   case $GCC,$host_os in
<   yes,cygwin* | yes,mingw* | yes,pw32* | yes,cegcc*)
---
>   case $GCC,$cc_basename in
>   yes,*)
>     # gcc
2231c2304,2305
<       sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
---
> m4_if([$1], [],[
>       sys_lib_search_path_spec="$sys_lib_search_path_spec /usr/lib/w32api"])
2236c2310,2350
<       sys_lib_search_path_spec=`$CC -print-search-dirs | $GREP "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
---
>       ;;
>     pw32*)
>       # pw32 DLLs use 'pw' prefix rather than 'lib'
>       library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
>       ;;
>     esac
>     dynamic_linker='Win32 ld.exe'
>     ;;
> 
>   *,cl*)
>     # Native MSVC
>     libname_spec='$name'
>     soname_spec='${libname}`echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
>     library_names_spec='${libname}.dll.lib'
> 
>     case $build_os in
>     mingw*)
>       sys_lib_search_path_spec=
>       lt_save_ifs=$IFS
>       IFS=';'
>       for lt_path in $LIB
>       do
>         IFS=$lt_save_ifs
>         # Let DOS variable expansion print the short 8.3 style file name.
>         lt_path=`cd "$lt_path" 2>/dev/null && cmd //C "for %i in (".") do @echo %~si"`
>         sys_lib_search_path_spec="$sys_lib_search_path_spec $lt_path"
>       done
>       IFS=$lt_save_ifs
>       # Convert to MSYS style.
>       sys_lib_search_path_spec=`$ECHO "$sys_lib_search_path_spec" | sed -e 's|\\\\|/|g' -e 's| \\([[a-zA-Z]]\\):| /\\1|g' -e 's|^ ||'`
>       ;;
>     cygwin*)
>       # Convert to unix form, then to dos form, then back to unix form
>       # but this time dos style (no spaces!) so that the unix form looks
>       # like /cygdrive/c/PROGRA~1:/cygdr...
>       sys_lib_search_path_spec=`cygpath --path --unix "$LIB"`
>       sys_lib_search_path_spec=`cygpath --path --dos "$sys_lib_search_path_spec" 2>/dev/null`
>       sys_lib_search_path_spec=`cygpath --path --unix "$sys_lib_search_path_spec" | $SED -e "s/$PATH_SEPARATOR/ /g"`
>       ;;
>     *)
>       sys_lib_search_path_spec="$LIB"
2238,2243c2352
<         # It is most probably a Windows format PATH printed by
<         # mingw gcc, but we are running on Cygwin. Gcc prints its search
<         # path with ; separators, and with drive letters. We can handle the
<         # drive letters (cygwin fileutils understands them), so leave them,
<         # especially as we might pass files found there to a mingw objdump,
<         # which wouldn't understand a cygwinified path. Ahh.
---
>         # It is most probably a Windows format PATH.
2248,2251c2357,2358
<       ;;
<     pw32*)
<       # pw32 DLLs use 'pw' prefix rather than 'lib'
<       library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
---
>       # FIXME: find the short name or the path components, as spaces are
>       # common. (e.g. "Program Files" -> "PROGRA~1")
2253a2361,2372
> 
>     # DLL is installed to $(libdir)/../bin by postinstall_cmds
>     postinstall_cmds='base_file=`basename \${file}`~
>       dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i; echo \$dlname'\''`~
>       dldir=$destdir/`dirname \$dlpath`~
>       test -d \$dldir || mkdir -p \$dldir~
>       $install_prog $dir/$dlname \$dldir/$dlname'
>     postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
>       dlpath=$dir/\$dldll~
>        $RM \$dlpath'
>     shlibpath_overrides_runpath=yes
>     dynamic_linker='Win32 link.exe'
2256a2376
>     # Assume MSVC wrapper
2257a2378
>     dynamic_linker='Win32 ld.exe'
2260d2380
<   dynamic_linker='Win32 ld.exe'
2346a2467,2479
> haiku*)
>   version_type=linux
>   need_lib_prefix=no
>   need_version=no
>   dynamic_linker="$host_os runtime_loader"
>   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
>   soname_spec='${libname}${release}${shared_ext}$major'
>   shlibpath_var=LIBRARY_PATH
>   shlibpath_overrides_runpath=yes
>   sys_lib_dlsearch_path_spec='/boot/home/config/lib /boot/common/lib /boot/system/lib'
>   hardcode_into_libs=yes
>   ;;
> 
2389c2522
<   # HP-UX runs *really* slowly unless shared libraries are mode 555.
---
>   # HP-UX runs *really* slowly unless shared libraries are mode 555, ...
2390a2524,2525
>   # or fails outright, so override atomically:
>   install_override_mode=555
2448c2583
< linux* | k*bsd*-gnu)
---
> linux* | k*bsd*-gnu | kopensolaris*-gnu)
2456a2592
> 
2457a2594,2595
>   AC_CACHE_VAL([lt_cv_shlibpath_overrides_runpath],
>     [lt_cv_shlibpath_overrides_runpath=no
2464c2602
<        [shlibpath_overrides_runpath=yes])])
---
> 	 [lt_cv_shlibpath_overrides_runpath=yes])])
2466a2605,2606
>     ])
>   shlibpath_overrides_runpath=$lt_cv_shlibpath_overrides_runpath
2473,2475d2612
<   # Add ABI-specific directories to the system library path.
<   sys_lib_dlsearch_path_spec="/lib64 /usr/lib64 /lib /usr/lib"
< 
2478,2479c2615,2616
<     lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \[$]2)); skip = 1; } { if (!skip) print \[$]0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[	 ]*hwcap[	 ]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
<     sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec $lt_ld_extra"
---
>     lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \[$]2)); skip = 1; } { if (!skip) print \[$]0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[	 ]*hwcap[	 ]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;s/"//g;/^$/d' | tr '\n' ' '`
>     sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
2710a2848,2849
> _LT_DECL([], [install_override_mode], [1],
>     [Permission mode override for installation of shared libraries])
2822a2962
> m4_require([_LT_PROG_ECHO_BACKSLASH])dnl
2943a3084,3088
>   cygwin* | mingw* | pw32* | cegcc*)
>     if test "$GCC" != yes; then
>       reload_cmds=false
>     fi
>     ;;
2952,2953c3097,3098
< _LT_DECL([], [reload_flag], [1], [How to create reloadable object files])dnl
< _LT_DECL([], [reload_cmds], [2])dnl
---
> _LT_TAGDECL([], [reload_flag], [1], [How to create reloadable object files])dnl
> _LT_TAGDECL([], [reload_cmds], [2])dnl
3005c3150,3151
<   if ( file / ) >/dev/null 2>&1; then
---
>   # func_win32_libid assumes BSD nm, so disallow it if using MS dumpbin.
>   if ( test "$lt_cv_nm_interface" = "BSD nm" && file / ) >/dev/null 2>&1; then
3009c3155,3156
<     lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
---
>     # Keep this pattern in sync with the one in func_win32_libid.
>     lt_cv_deplibs_check_method='file_magic file format (pei*-i386(.*architecture: i386)?|pe-arm-wince|pe-x86-64)'
3014c3161
< cegcc)
---
> cegcc*)
3043a3191,3194
> haiku*)
>   lt_cv_deplibs_check_method=pass_all
>   ;;
> 
3052c3203
<     [lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]']
---
>     [lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF[ -][0-9][0-9])(-bit)?( [LM]SB)? shared object( file)?[, -]* PA-RISC [0-9]\.[0-9]']
3056c3207
<     lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|PA-RISC[[0-9]].[[0-9]]) shared library'
---
>     lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|PA-RISC[[0-9]]\.[[0-9]]) shared library'
3078c3229
< linux* | k*bsd*-gnu)
---
> linux* | k*bsd*-gnu | kopensolaris*-gnu)
3155a3307,3321
> 
> file_magic_glob=
> want_nocaseglob=no
> if test "$build" = "$host"; then
>   case $host_os in
>   mingw* | pw32*)
>     if ( shopt | grep nocaseglob ) >/dev/null 2>&1; then
>       want_nocaseglob=yes
>     else
>       file_magic_glob=`echo aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ | $SED -e "s/\(..\)/s\/[[\1]]\/[[\1]]\/g;/g"`
>     fi
>     ;;
>   esac
> fi
> 
3163c3329,3333
<     [Command to use when deplibs_check_method == "file_magic"])
---
>     [Command to use when deplibs_check_method = "file_magic"])
> _LT_DECL([], [file_magic_glob], [1],
>     [How to find potential files when deplibs_check_method = "file_magic"])
> _LT_DECL([], [want_nocaseglob], [1],
>     [Find potential files using nocaseglob when deplibs_check_method = "file_magic"])
3220c3390,3402
<   AC_CHECK_TOOLS(DUMPBIN, ["dumpbin -symbols" "link -dump -symbols"], :)
---
>   if test -n "$DUMPBIN"; then :
>     # Let the user override the test.
>   else
>     AC_CHECK_TOOLS(DUMPBIN, [dumpbin "link -dump"], :)
>     case `$DUMPBIN -symbols /dev/null 2>&1 | sed '1q'` in
>     *COFF*)
>       DUMPBIN="$DUMPBIN -symbols"
>       ;;
>     *)
>       DUMPBIN=:
>       ;;
>     esac
>   fi
3233c3415
<   (eval echo "\"\$as_me:__oline__: $ac_compile\"" >&AS_MESSAGE_LOG_FD)
---
>   (eval echo "\"\$as_me:$LINENO: $ac_compile\"" >&AS_MESSAGE_LOG_FD)
3236c3418
<   (eval echo "\"\$as_me:__oline__: $NM \\\"conftest.$ac_objext\\\"\"" >&AS_MESSAGE_LOG_FD)
---
>   (eval echo "\"\$as_me:$LINENO: $NM \\\"conftest.$ac_objext\\\"\"" >&AS_MESSAGE_LOG_FD)
3239c3421
<   (eval echo "\"\$as_me:__oline__: output\"" >&AS_MESSAGE_LOG_FD)
---
>   (eval echo "\"\$as_me:$LINENO: output\"" >&AS_MESSAGE_LOG_FD)
3253a3436,3447
> # _LT_CHECK_SHAREDLIB_FROM_LINKLIB
> # --------------------------------
> # how to determine the name of the shared library
> # associated with a specific link library.
> #  -- PORTME fill in with the dynamic library characteristics
> m4_defun([_LT_CHECK_SHAREDLIB_FROM_LINKLIB],
> [m4_require([_LT_DECL_EGREP])
> m4_require([_LT_DECL_OBJDUMP])
> m4_require([_LT_DECL_DLLTOOL])
> AC_CACHE_CHECK([how to associate runtime and link libraries],
> lt_cv_sharedlib_from_linklib_cmd,
> [lt_cv_sharedlib_from_linklib_cmd='unknown'
3255c3449,3498
< # LT_LIB_M
---
> case $host_os in
> cygwin* | mingw* | pw32* | cegcc*)
>   # two different shell functions defined in ltmain.sh
>   # decide which to use based on capabilities of $DLLTOOL
>   case `$DLLTOOL --help 2>&1` in
>   *--identify-strict*)
>     lt_cv_sharedlib_from_linklib_cmd=func_cygming_dll_for_implib
>     ;;
>   *)
>     lt_cv_sharedlib_from_linklib_cmd=func_cygming_dll_for_implib_fallback
>     ;;
>   esac
>   ;;
> *)
>   # fallback: assume linklib IS sharedlib
>   lt_cv_sharedlib_from_linklib_cmd="$ECHO"
>   ;;
> esac
> ])
> sharedlib_from_linklib_cmd=$lt_cv_sharedlib_from_linklib_cmd
> test -z "$sharedlib_from_linklib_cmd" && sharedlib_from_linklib_cmd=$ECHO
> 
> _LT_DECL([], [sharedlib_from_linklib_cmd], [1],
>     [Command to associate shared and link libraries])
> ])# _LT_CHECK_SHAREDLIB_FROM_LINKLIB
> 
> 
> # _LT_PATH_MANIFEST_TOOL
> # ----------------------
> # locate the manifest tool
> m4_defun([_LT_PATH_MANIFEST_TOOL],
> [AC_CHECK_TOOL(MANIFEST_TOOL, mt, :)
> test -z "$MANIFEST_TOOL" && MANIFEST_TOOL=mt
> AC_CACHE_CHECK([if $MANIFEST_TOOL is a manifest tool], [lt_cv_path_mainfest_tool],
>   [lt_cv_path_mainfest_tool=no
>   echo "$as_me:$LINENO: $MANIFEST_TOOL '-?'" >&AS_MESSAGE_LOG_FD
>   $MANIFEST_TOOL '-?' 2>conftest.err > conftest.out
>   cat conftest.err >&AS_MESSAGE_LOG_FD
>   if $GREP 'Manifest Tool' conftest.out > /dev/null; then
>     lt_cv_path_mainfest_tool=yes
>   fi
>   rm -f conftest*])
> if test "x$lt_cv_path_mainfest_tool" != xyes; then
>   MANIFEST_TOOL=:
> fi
> _LT_DECL([], [MANIFEST_TOOL], [1], [Manifest tool])dnl
> ])# _LT_PATH_MANIFEST_TOOL
> 
> 
> # LT_LIB_M
3262c3505
< *-*-beos* | *-*-cygwin* | *-*-pw32* | *-*-darwin*)
---
> *-*-beos* | *-*-cegcc* | *-*-cygwin* | *-*-haiku* | *-*-pw32* | *-*-darwin*)
3290c3533,3538
<   _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin'
---
>   case $cc_basename in
>   nvcc*)
>     _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -Xcompiler -fno-builtin' ;;
>   *)
>     _LT_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin' ;;
>   esac
3306a3555
> AC_REQUIRE([AC_PROG_AWK])dnl
3374,3375c3623,3624
< lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([[^ ]]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p'"
< lt_cv_sys_global_symbol_to_c_name_address_lib_prefix="sed -n -e 's/^: \([[^ ]]*\) $/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \(lib[[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"lib\2\", (void *) \&\2},/p'"
---
> lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([[^ ]]*\)[[ ]]*$/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p'"
> lt_cv_sys_global_symbol_to_c_name_address_lib_prefix="sed -n -e 's/^: \([[^ ]]*\)[[ ]]*$/  {\\\"\1\\\", (void *) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \(lib[[^ ]]*\)$/  {\"\2\", (void *) \&\2},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\"lib\2\", (void *) \&\2},/p'"
3410a3660
>   lt_cv_sys_global_symbol_pipe="$lt_cv_sys_global_symbol_pipe | sed '/ __gnu_lto/d'"
3432c3682
<     if AC_TRY_EVAL(NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) && test -s "$nlist"; then
---
>     if AC_TRY_EVAL(NM conftest.$ac_objext \| "$lt_cv_sys_global_symbol_pipe" \> $nlist) && test -s "$nlist"; then
3443a3694,3705
> /* Keep this code in sync between libtool.m4, ltmain, lt_system.h, and tests.  */
> #if defined(_WIN32) || defined(__CYGWIN__) || defined(_WIN32_WCE)
> /* DATA imports from DLLs on WIN32 con't be const, because runtime
>    relocations are performed -- see ld's documentation on pseudo-relocs.  */
> # define LT@&t@_DLSYM_CONST
> #elif defined(__osf__)
> /* This system does not cope well with relocations in const data.  */
> # define LT@&t@_DLSYM_CONST
> #else
> # define LT@&t@_DLSYM_CONST const
> #endif
> 
3455c3717
< const struct {
---
> LT@&t@_DLSYM_CONST struct {
3481,3482c3743,3744
< 	  lt_save_LIBS="$LIBS"
< 	  lt_save_CFLAGS="$CFLAGS"
---
> 	  lt_globsym_save_LIBS=$LIBS
> 	  lt_globsym_save_CFLAGS=$CFLAGS
3488,3489c3750,3751
< 	  LIBS="$lt_save_LIBS"
< 	  CFLAGS="$lt_save_CFLAGS"
---
> 	  LIBS=$lt_globsym_save_LIBS
> 	  CFLAGS=$lt_globsym_save_CFLAGS
3521a3784,3790
> # Response file support.
> if test "$lt_cv_nm_interface" = "MS dumpbin"; then
>   nm_file_list_spec='@'
> elif $NM --help 2>/dev/null | grep '[[@]]FILE' >/dev/null; then
>   nm_file_list_spec='@'
> fi
> 
3531a3801,3802
> _LT_DECL([], [nm_file_list_spec], [1],
>     [Specify filename containing input files for $NM])
3543d3813
< AC_MSG_CHECKING([for $compiler option to produce PIC])
3593a3864,3868
>     haiku*)
>       # PIC is the default for Haiku.
>       # The "-static" flag exists, but is broken.
>       _LT_TAGVAR(lt_prog_compiler_static, $1)=
>       ;;
3642a3918,3923
>       mingw* | cygwin* | os2* | pw32* | cegcc*)
> 	# This hack is so that the source file can tell whether it is being
> 	# built for inclusion in a dll (and should export symbols for example).
> 	m4_if([$1], [GCJ], [],
> 	  [_LT_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'])
> 	;;
3699c3980
<       linux* | k*bsd*-gnu)
---
>       linux* | k*bsd*-gnu | kopensolaris*-gnu)
3732,3733c4013,4014
< 	  xlc* | xlC*)
< 	    # IBM XL 8.0 on PPC
---
> 	  xlc* | xlC* | bgxl[[cC]]* | mpixl[[cC]]*)
> 	    # IBM XL 8.0, 9.0 on PPC and BlueGene
3795c4076
< 	  CC*)
---
> 	  CC* | sunCC*)
3898a4180,4185
>     haiku*)
>       # PIC is the default for Haiku.
>       # The "-static" flag exists, but is broken.
>       _LT_TAGVAR(lt_prog_compiler_static, $1)=
>       ;;
> 
3940a4228,4234
> 
>     case $cc_basename in
>     nvcc*) # Cuda Compiler Driver 2.2
>       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Xlinker '
>       _LT_TAGVAR(lt_prog_compiler_pic, $1)='-Xcompiler -fPIC'
>       ;;
>     esac
3983c4277
<     linux* | k*bsd*-gnu)
---
>     linux* | k*bsd*-gnu | kopensolaris*-gnu)
4004c4298,4304
<       pgcc* | pgf77* | pgf90* | pgf95*)
---
>       nagfor*)
> 	# NAG Fortran compiler
> 	_LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,-Wl,,'
> 	_LT_TAGVAR(lt_prog_compiler_pic, $1)='-PIC'
> 	_LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
> 	;;
>       pgcc* | pgf77* | pgf90* | pgf95* | pgfortran*)
4016,4017c4316,4317
<       xl*)
< 	# IBM XL C 8.0/Fortran 10.1 on PPC
---
>       xl* | bgxl* | bgf* | mpixl*)
> 	# IBM XL C 8.0/Fortran 10.1, 11.1 on PPC and BlueGene
4024,4025c4324,4325
< 	*Sun\ C*)
< 	  # Sun C 5.9
---
> 	*Sun\ F* | *Sun*Fortran*)
> 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
4028c4328
< 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
---
> 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)=''
4030,4031c4330,4331
< 	*Sun\ F*)
< 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
---
> 	*Sun\ C*)
> 	  # Sun C 5.9
4034c4334
< 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)=''
---
> 	  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
4066c4366
<       f77* | f90* | f95*)
---
>       f77* | f90* | f95* | sunf77* | sunf90* | sunf95*)
4123,4125c4423,4427
< AC_MSG_RESULT([$_LT_TAGVAR(lt_prog_compiler_pic, $1)])
< _LT_TAGDECL([wl], [lt_prog_compiler_wl], [1],
< 	[How to pass a linker flag through the compiler])
---
> 
> AC_CACHE_CHECK([for $compiler option to produce PIC],
>   [_LT_TAGVAR(lt_cv_prog_compiler_pic, $1)],
>   [_LT_TAGVAR(lt_cv_prog_compiler_pic, $1)=$_LT_TAGVAR(lt_prog_compiler_pic, $1)])
> _LT_TAGVAR(lt_prog_compiler_pic, $1)=$_LT_TAGVAR(lt_cv_prog_compiler_pic, $1)
4143a4446,4447
> _LT_TAGDECL([wl], [lt_prog_compiler_wl], [1],
> 	[How to pass a linker flag through the compiler])
4163a4468
> m4_require([_LT_PATH_MANIFEST_TOOL])dnl
4171a4477
>   _LT_TAGVAR(exclude_expsyms, $1)=['_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*']
4175a4482,4483
>     # Also, AIX nm treats weak defined symbols like other global defined
>     # symbols, whereas GNU nm marks them as "W".
4177c4485
<       _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
---
>       _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B") || (\$ 2 == "W")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
4186c4494,4500
<     _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/;/^.*[[ ]]__nm__/s/^.*[[ ]]__nm__\([[^ ]]*\)[[ ]][[^ ]]*/\1 DATA/;/^I[[ ]]/d;/^[[AITW]][[ ]]/s/.* //'\'' | sort | uniq > $export_symbols'
---
>     case $cc_basename in
>     cl*) ;;
>     *)
>       _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/;s/^.*[[ ]]__nm__\([[^ ]]*\)[[ ]][[^ ]]*/\1 DATA/;/^I[[ ]]/d;/^[[AITW]][[ ]]/s/.* //'\'' | sort | uniq > $export_symbols'
>       _LT_TAGVAR(exclude_expsyms, $1)=['[_]+GLOBAL_OFFSET_TABLE_|[_]+GLOBAL__[FID]_.*|[_]+head_[A-Za-z0-9_]+_dll|[A-Za-z0-9_]+_dll_iname']
>       ;;
>     esac
4192d4505
<   _LT_TAGVAR(exclude_expsyms, $1)=['_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*']
4254a4568,4571
> 
>   # On some targets, GNU ld is compatible enough with the native linker
>   # that we're better off using the native interface for both.
>   lt_use_gnu_ld_interface=no
4255a4573,4594
>     case $host_os in
>       aix*)
> 	# The AIX port of GNU ld has always aspired to compatibility
> 	# with the native linker.  However, as the warning in the GNU ld
> 	# block says, versions before 2.19.5* couldn't really create working
> 	# shared libraries, regardless of the interface used.
> 	case `$LD -v 2>&1` in
> 	  *\ \(GNU\ Binutils\)\ 2.19.5*) ;;
> 	  *\ \(GNU\ Binutils\)\ 2.[[2-9]]*) ;;
> 	  *\ \(GNU\ Binutils\)\ [[3-9]]*) ;;
> 	  *)
> 	    lt_use_gnu_ld_interface=yes
> 	    ;;
> 	esac
> 	;;
>       *)
> 	lt_use_gnu_ld_interface=yes
> 	;;
>     esac
>   fi
> 
>   if test "$lt_use_gnu_ld_interface" = yes; then
4272a4612
>       *GNU\ gold*) supports_anon_versioning=yes ;;
4288c4628
< *** Warning: the GNU linker, at least up to release 2.9.1, is reported
---
> *** Warning: the GNU linker, at least up to release 2.19, is reported
4291,4292c4631,4633
< *** really care for shared libraries, you may want to modify your PATH
< *** so that a non-GNU linker is found, and then restart.
---
> *** really care for shared libraries, you may want to install binutils
> *** 2.20 or above, or modify your PATH so that a non-GNU linker is found.
> *** You will then need to restart the configuration process.
4327a4669
>       _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-all-symbols'
4331c4673,4674
<       _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/'\'' | $SED -e '\''/^[[AITW]][[ ]]/s/.*[[ ]]//'\'' | sort | uniq > $export_symbols'
---
>       _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1 DATA/;s/^.*[[ ]]__nm__\([[^ ]]*\)[[ ]][[^ ]]*/\1 DATA/;/^I[[ ]]/d;/^[[AITW]][[ ]]/s/.* //'\'' | sort | uniq > $export_symbols'
>       _LT_TAGVAR(exclude_expsyms, $1)=['[_]+GLOBAL_OFFSET_TABLE_|[_]+GLOBAL__[FID]_.*|[_]+head_[A-Za-z0-9_]+_dll|[A-Za-z0-9_]+_dll_iname']
4348a4692,4696
>     haiku*)
>       _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
>       _LT_TAGVAR(link_all_deplibs, $1)=yes
>       ;;
> 
4364c4712
<     gnu* | linux* | tpf* | k*bsd*-gnu)
---
>     gnu* | linux* | tpf* | k*bsd*-gnu | kopensolaris*-gnu)
4374c4722
< 	tmp_addflag=
---
> 	tmp_addflag=' $pic_flag'
4378c4726
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
4381,4382c4729,4731
< 	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	pgf77* | pgf90* | pgf95* | pgfortran*)
> 					# Portland Group f77 and f90 compilers
> 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
4393c4742
< 	xl[[cC]]*)			# IBM XL C 8.0 on PPC (deal with xlf below)
---
> 	xl[[cC]]* | bgxl[[cC]]* | mpixl[[cC]]*) # IBM XL C 8.0 on PPC (deal with xlf below)
4395a4745,4748
> 	nvcc*)	# Cuda Compiler Driver 2.2
> 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
> 	  _LT_TAGVAR(compiler_needs_object, $1)=yes
> 	  ;;
4399c4752
< 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	  _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
4415c4768
< 	xlf*)
---
> 	xlf* | bgf* | bgxlf* | mpixlf*)
4420c4773
< 	  _LT_TAGVAR(archive_cmds, $1)='$LD -shared $libobjs $deplibs $compiler_flags -soname $soname -o $lib'
---
> 	  _LT_TAGVAR(archive_cmds, $1)='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'
4425c4778
< 	      $LD -shared $libobjs $deplibs $compiler_flags -soname $soname -version-script $output_objdir/$libname.ver -o $lib'
---
> 	      $LD -shared $libobjs $deplibs $linker_flags -soname $soname -version-script $output_objdir/$libname.ver -o $lib'
4439,4440c4792,4793
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
4458,4459c4811,4812
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
4505,4506c4858,4859
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
> 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
4545a4899,4900
> 	# Also, AIX nm treats weak defined symbols like other global
> 	# defined symbols, whereas GNU nm marks them as "W".
4547c4902
< 	  _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
---
> 	  _LT_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$ 2 == "T") || (\$ 2 == "D") || (\$ 2 == "B") || (\$ 2 == "W")) && ([substr](\$ 3,1,1) != ".")) { print \$ 3 } }'\'' | sort -u > $export_symbols'
4634c4989
<         _LT_SYS_MODULE_PATH_AIX
---
>         _LT_SYS_MODULE_PATH_AIX([$1])
4636c4991
<         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then $ECHO "X${wl}${allow_undefined_flag}" | $Xsed; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
---
>         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then func_echo_all "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
4645c5000
< 	 _LT_SYS_MODULE_PATH_AIX
---
> 	 _LT_SYS_MODULE_PATH_AIX([$1])
4650a5006,5009
> 	  if test "$with_gnu_ld" = yes; then
> 	    # We only use this code for GNU lds that support --whole-archive.
> 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
> 	  else
4652a5012
> 	  fi
4683a5044,5046
>       case $cc_basename in
>       cl*)
> 	# Native MSVC
4685a5049,5050
> 	_LT_TAGVAR(always_export_symbols, $1)=yes
> 	_LT_TAGVAR(file_list_spec, $1)='@'
4691c5056,5093
<       _LT_TAGVAR(archive_cmds, $1)='$CC -o $lib $libobjs $compiler_flags `$ECHO "X$deplibs" | $Xsed -e '\''s/ -lc$//'\''` -link -dll~linknames='
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $compiler_flags $deplibs -Wl,-dll~linknames='
> 	_LT_TAGVAR(archive_expsym_cmds, $1)='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
> 	    sed -n -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' -e '1\\\!p' < $export_symbols > $output_objdir/$soname.exp;
> 	  else
> 	    sed -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' < $export_symbols > $output_objdir/$soname.exp;
> 	  fi~
> 	  $CC -o $tool_output_objdir$soname $libobjs $compiler_flags $deplibs "@$tool_output_objdir$soname.exp" -Wl,-DLL,-IMPLIB:"$tool_output_objdir$libname.dll.lib"~
> 	  linknames='
> 	# The linker will not automatically build a static lib if we build a DLL.
> 	# _LT_TAGVAR(old_archive_from_new_cmds, $1)='true'
> 	_LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
> 	_LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\([[^ ]]*\)/\1,DATA/'\'' | $SED -e '\''/^[[AITW]][[ ]]/s/.*[[ ]]//'\'' | sort | uniq > $export_symbols'
> 	# Don't use ranlib
> 	_LT_TAGVAR(old_postinstall_cmds, $1)='chmod 644 $oldlib'
> 	_LT_TAGVAR(postlink_cmds, $1)='lt_outputfile="@OUTPUT@"~
> 	  lt_tool_outputfile="@TOOL_OUTPUT@"~
> 	  case $lt_outputfile in
> 	    *.exe|*.EXE) ;;
> 	    *)
> 	      lt_outputfile="$lt_outputfile.exe"
> 	      lt_tool_outputfile="$lt_tool_outputfile.exe"
> 	      ;;
> 	  esac~
> 	  if test "$MANIFEST_TOOL" != ":" && test -f "$lt_outputfile.manifest"; then
> 	    $MANIFEST_TOOL -manifest "$lt_tool_outputfile.manifest" -outputresource:"$lt_tool_outputfile" || exit 1;
> 	    $RM "$lt_outputfile.manifest";
> 	  fi'
> 	;;
>       *)
> 	# Assume MSVC wrapper
> 	_LT_TAGVAR(hardcode_libdir_flag_spec, $1)=' '
> 	_LT_TAGVAR(allow_undefined_flag, $1)=unsupported
> 	# Tell ltmain to make .lib files, not .a files.
> 	libext=lib
> 	# Tell ltmain to make .dll files, not .so files.
> 	shrext_cmds=".dll"
> 	# FIXME: Setting linknames here is a bad hack.
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -o $lib $libobjs $compiler_flags `func_echo_all "$deplibs" | $SED '\''s/ -lc$//'\''` -link -dll~linknames='
4696d5097
<       _LT_TAGVAR(fix_srcfile_path, $1)='`cygpath -w "$srcfile"`'
4698a5100,5101
>       esac
>       ;;
4735c5138
<       _LT_TAGVAR(archive_cmds, $1)='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
---
>       _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
4743c5146
< 	_LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared $pic_flag ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
4758,4759c5161,5162
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
---
>       if test "$GCC" = yes && test "$with_gnu_ld" = no; then
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
4777c5180
<       if test "$GCC" = yes -a "$with_gnu_ld" = no; then
---
>       if test "$GCC" = yes && test "$with_gnu_ld" = no; then
4783c5186
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
---
> 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
4786c5189
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
---
> 	  _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
4798c5201,5208
< 	  _LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
---
> 	m4_if($1, [], [
> 	  # Older versions of the 11.00 compiler do not understand -b yet
> 	  # (HP92453-01 A.11.01.20 doesn't, HP92453-01 B.11.X.35175-35176.GP does)
> 	  _LT_LINKER_OPTION([if $CC understands -b],
> 	    _LT_TAGVAR(lt_cv_prog_compiler__b, $1), [-b],
> 	    [_LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'],
> 	    [_LT_TAGVAR(archive_cmds, $1)='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'])],
> 	  [_LT_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'])
4826c5236
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
4830c5240,5243
<         save_LDFLAGS="$LDFLAGS"
---
> 	# This should be the same for all languages, so no per-tag cache variable.
> 	AC_CACHE_CHECK([whether the $host_os linker accepts -exported_symbol],
> 	  [lt_cv_irix_exported_symbol],
> 	  [save_LDFLAGS="$LDFLAGS"
4832,4835c5245,5260
<         AC_LINK_IFELSE(int foo(void) {},
<           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
<         )
<         LDFLAGS="$save_LDFLAGS"
---
> 	   AC_LINK_IFELSE(
> 	     [AC_LANG_SOURCE(
> 	        [AC_LANG_CASE([C], [[int foo (void) { return 0; }]],
> 			      [C++], [[int foo (void) { return 0; }]],
> 			      [Fortran 77], [[
>       subroutine foo
>       end]],
> 			      [Fortran], [[
>       subroutine foo
>       end]])])],
> 	      [lt_cv_irix_exported_symbol=yes],
> 	      [lt_cv_irix_exported_symbol=no])
>            LDFLAGS="$save_LDFLAGS"])
> 	if test "$lt_cv_irix_exported_symbol" = yes; then
>           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
> 	fi
4837,4838c5262,5263
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
< 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -exports_file $export_symbols -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
> 	_LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -exports_file $export_symbols -o $lib'
4900c5325
<       _LT_TAGVAR(archive_cmds, $1)='$ECHO "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$ECHO "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$ECHO DATA >> $output_objdir/$libname.def~$ECHO " SINGLE NONSHARED" >> $output_objdir/$libname.def~$ECHO EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
---
>       _LT_TAGVAR(archive_cmds, $1)='$ECHO "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$ECHO "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~echo DATA >> $output_objdir/$libname.def~echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
4907c5332
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
4910c5335
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
4920c5345
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $pic_flag $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
4924c5349
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -msym -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags -msym -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
4926c5351
< 	$CC -shared${allow_undefined_flag} ${wl}-input ${wl}$lib.exp $compiler_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib~$RM $lib.exp'
---
> 	$CC -shared${allow_undefined_flag} ${wl}-input ${wl}$lib.exp $compiler_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && $ECHO "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib~$RM $lib.exp'
4939c5364
< 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-z ${wl}text ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
---
> 	_LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag ${wl}-z ${wl}text ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
4941c5366
< 	  $CC -shared ${wl}-z ${wl}text ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
---
> 	  $CC -shared $pic_flag ${wl}-z ${wl}text ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$RM $lib.exp'
5117,5118c5542,5544
<       AC_MSG_CHECKING([whether -lc should be explicitly linked in])
<       $RM conftest*
---
>       AC_CACHE_CHECK([whether -lc should be explicitly linked in],
> 	[lt_cv_]_LT_TAGVAR(archive_cmds_need_lc, $1),
> 	[$RM conftest*
5137c5563
< 	  _LT_TAGVAR(archive_cmds_need_lc, $1)=no
---
> 	    lt_cv_[]_LT_TAGVAR(archive_cmds_need_lc, $1)=no
5139c5565
< 	  _LT_TAGVAR(archive_cmds_need_lc, $1)=yes
---
> 	    lt_cv_[]_LT_TAGVAR(archive_cmds_need_lc, $1)=yes
5146c5572,5573
<       AC_MSG_RESULT([$_LT_TAGVAR(archive_cmds_need_lc, $1)])
---
> 	])
>       _LT_TAGVAR(archive_cmds_need_lc, $1)=$lt_cv_[]_LT_TAGVAR(archive_cmds_need_lc, $1)
5211,5212d5637
< _LT_TAGDECL([], [fix_srcfile_path], [1],
<     [Fix the shell variable $srcfile for the compiler])
5222a5648,5649
> _LT_TAGDECL([], [postlink_cmds], [2],
>     [Commands necessary for finishing linking programs])
5316,5337d5742
< # _LT_PROG_CXX
< # ------------
< # Since AC_PROG_CXX is broken, in that it returns g++ if there is no c++
< # compiler, we have our own version here.
< m4_defun([_LT_PROG_CXX],
< [
< pushdef([AC_MSG_ERROR], [_lt_caught_CXX_error=yes])
< AC_PROG_CXX
< if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
<     ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
<     (test "X$CXX" != "Xg++"))) ; then
<   AC_PROG_CXXCPP
< else
<   _lt_caught_CXX_error=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_CXX
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_CXX], [])
< 
< 
5344,5345c5749
< [AC_REQUIRE([_LT_PROG_CXX])dnl
< m4_require([_LT_FILEUTILS_DEFAULTS])dnl
---
> [m4_require([_LT_FILEUTILS_DEFAULTS])dnl
5346a5751,5758
> m4_require([_LT_PATH_MANIFEST_TOOL])dnl
> if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
>     ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
>     (test "X$CXX" != "Xg++"))) ; then
>   AC_PROG_CXXCPP
> else
>   _lt_caught_CXX_error=yes
> fi
5367a5780,5781
> _LT_TAGVAR(reload_flag, $1)=$reload_flag
> _LT_TAGVAR(reload_cmds, $1)=$reload_cmds
5398a5813
>   lt_save_CFLAGS=$CFLAGS
5415a5831
>   CFLAGS=$CXXFLAGS
5437,5438c5853,5854
<         _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
<         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
---
>         _LT_TAGVAR(archive_cmds, $1)='$CC $pic_flag -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
>         _LT_TAGVAR(archive_expsym_cmds, $1)='$CC $pic_flag -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
5470c5886
<       output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
---
>       output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP -v "^Configured with:" | $GREP "\-L"'
5579c5995
<           _LT_SYS_MODULE_PATH_AIX
---
>           _LT_SYS_MODULE_PATH_AIX([$1])
5582c5998
<           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then $ECHO "X${wl}${allow_undefined_flag}" | $Xsed; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
---
>           _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then func_echo_all "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
5591c6007
< 	    _LT_SYS_MODULE_PATH_AIX
---
> 	    _LT_SYS_MODULE_PATH_AIX([$1])
5596a6013,6016
> 	    if test "$with_gnu_ld" = yes; then
> 	      # We only use this code for GNU lds that support --whole-archive.
> 	      _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
> 	    else
5598a6019
> 	    fi
5627a6049,6092
> 	case $GXX,$cc_basename in
> 	,cl* | no,cl*)
> 	  # Native MSVC
> 	  # hardcode_libdir_flag_spec is actually meaningless, as there is
> 	  # no search path for DLLs.
> 	  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=' '
> 	  _LT_TAGVAR(allow_undefined_flag, $1)=unsupported
> 	  _LT_TAGVAR(always_export_symbols, $1)=yes
> 	  _LT_TAGVAR(file_list_spec, $1)='@'
> 	  # Tell ltmain to make .lib files, not .a files.
> 	  libext=lib
> 	  # Tell ltmain to make .dll files, not .so files.
> 	  shrext_cmds=".dll"
> 	  # FIXME: Setting linknames here is a bad hack.
> 	  _LT_TAGVAR(archive_cmds, $1)='$CC -o $output_objdir/$soname $libobjs $compiler_flags $deplibs -Wl,-dll~linknames='
> 	  _LT_TAGVAR(archive_expsym_cmds, $1)='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
> 	      $SED -n -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' -e '1\\\!p' < $export_symbols > $output_objdir/$soname.exp;
> 	    else
> 	      $SED -e 's/\\\\\\\(.*\\\\\\\)/-link\\\ -EXPORT:\\\\\\\1/' < $export_symbols > $output_objdir/$soname.exp;
> 	    fi~
> 	    $CC -o $tool_output_objdir$soname $libobjs $compiler_flags $deplibs "@$tool_output_objdir$soname.exp" -Wl,-DLL,-IMPLIB:"$tool_output_objdir$libname.dll.lib"~
> 	    linknames='
> 	  # The linker will not automatically build a static lib if we build a DLL.
> 	  # _LT_TAGVAR(old_archive_from_new_cmds, $1)='true'
> 	  _LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
> 	  # Don't use ranlib
> 	  _LT_TAGVAR(old_postinstall_cmds, $1)='chmod 644 $oldlib'
> 	  _LT_TAGVAR(postlink_cmds, $1)='lt_outputfile="@OUTPUT@"~
> 	    lt_tool_outputfile="@TOOL_OUTPUT@"~
> 	    case $lt_outputfile in
> 	      *.exe|*.EXE) ;;
> 	      *)
> 		lt_outputfile="$lt_outputfile.exe"
> 		lt_tool_outputfile="$lt_tool_outputfile.exe"
> 		;;
> 	    esac~
> 	    func_to_tool_file "$lt_outputfile"~
> 	    if test "$MANIFEST_TOOL" != ":" && test -f "$lt_outputfile.manifest"; then
> 	      $MANIFEST_TOOL -manifest "$lt_tool_outputfile.manifest" -outputresource:"$lt_tool_outputfile" || exit 1;
> 	      $RM "$lt_outputfile.manifest";
> 	    fi'
> 	  ;;
> 	*)
> 	  # g++
5630a6096
> 	  _LT_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-all-symbols'
5649a6116,6117
> 	esac
> 	;;
5690a6159,6163
>       haiku*)
>         _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
>         _LT_TAGVAR(link_all_deplibs, $1)=yes
>         ;;
> 
5715c6188
<             output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $EGREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
---
>             output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $EGREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; func_echo_all "$list"'
5719c6192
<               _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared -nostdlib -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
---
>               _LT_TAGVAR(archive_cmds, $1)='$RM $output_objdir/$soname~$CC -shared -nostdlib $pic_flag ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
5780c6253
< 	    output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $GREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
---
> 	    output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | $GREP "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; func_echo_all "$list"'
5790c6263
< 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
---
> 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $pic_flag ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
5793c6266
< 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
---
> 	            _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $pic_flag ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
5823c6296
< 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	    _LT_TAGVAR(archive_cmds, $1)='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
5834c6307
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
5836c6309
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` -o $lib'
---
> 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` -o $lib'
5847c6320
<       linux* | k*bsd*-gnu)
---
>       linux* | k*bsd*-gnu | kopensolaris*-gnu)
5865c6338
< 	    output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1 | $GREP "ld"`; rm -f libconftest$shared_ext; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
---
> 	    output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1 | $GREP "ld"`; rm -f libconftest$shared_ext; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; func_echo_all "$list"'
5902c6375
< 	    *pgCC\ [[1-5]]* | *pgcpp\ [[1-5]]*)
---
> 	    *pgCC\ [[1-5]].* | *pgcpp\ [[1-5]].*)
5906c6379
< 		compile_command="$compile_command `find $tpldir -name \*.o | $NL2SP`"'
---
> 		compile_command="$compile_command `find $tpldir -name \*.o | sort | $NL2SP`"'
5910c6383
< 		$AR $AR_FLAGS $oldlib$oldobjs$old_deplibs `find $tpldir -name \*.o | $NL2SP`~
---
> 		$AR $AR_FLAGS $oldlib$oldobjs$old_deplibs `find $tpldir -name \*.o | sort | $NL2SP`~
5915c6388
< 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
---
> 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | sort | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
5919c6392
< 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'
---
> 		$CC -shared $pic_flag $predep_objects $libobjs $deplibs `find $tpldir -name \*.o | sort | $NL2SP` $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'
5921c6394
< 	    *) # Version 6 will use weak symbols
---
> 	    *) # Version 6 and above use weak symbols
5929c6402
< 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	    _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
5948c6421
< 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld"`; templist=`$ECHO "X$templist" | $Xsed -e "s/\(^.*ld.*\)\( .*ld .*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
---
> 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld"`; templist=`func_echo_all "$templist" | $SED "s/\(^.*ld.*\)\( .*ld .*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; func_echo_all "X$list" | $Xsed'
5950c6423
< 	  xl*)
---
> 	  xl* | mpixl* | bgxl*)
5970c6443
< 	      _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $ECHO \"$new_convenience\"` ${wl}--no-whole-archive'
---
> 	      _LT_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; func_echo_all \"$new_convenience\"` ${wl}--no-whole-archive'
5976c6449
< 	      output_verbose_link_cmd='echo'
---
> 	      output_verbose_link_cmd='func_echo_all'
6045c6518
< 	  output_verbose_link_cmd=echo
---
> 	  output_verbose_link_cmd=func_echo_all
6080c6553
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $soname `test -n "$verstring" && $ECHO "X${wl}-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $soname `test -n "$verstring" && func_echo_all "${wl}-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
6085c6558
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
---
> 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname `test -n "$verstring" && func_echo_all "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib'
6088c6561
< 	          $CC -shared$allow_undefined_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname ${wl}-input ${wl}$lib.exp  `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib~
---
> 	          $CC -shared$allow_undefined_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname ${wl}-input ${wl}$lib.exp  `test -n "$verstring" && $ECHO "-set_version $verstring"` -update_registry ${output_objdir}/so_locations -o $lib~
6104c6577
< 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld" | $GREP -v "ld:"`; templist=`$ECHO "X$templist" | $Xsed -e "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; $ECHO "X$list" | $Xsed'
---
> 	    output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "ld" | $GREP -v "ld:"`; templist=`func_echo_all "$templist" | $SED "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; func_echo_all "$list"'
6111c6584
< 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
6114c6587
< 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
---
> 	          _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && func_echo_all "${wl}-set_version ${wl}$verstring"` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
6124c6597
< 	      output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
---
> 	      output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP -v "^Configured with:" | $GREP "\-L"'
6160c6633
<           CC*)
---
>           CC* | sunCC*)
6181c6654
< 	    output_verbose_link_cmd='echo'
---
> 	    output_verbose_link_cmd='func_echo_all'
6201c6674
< 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
---
> 	        _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
6203c6676
< 		  $CC -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$RM $lib.exp'
---
> 		  $CC -shared $pic_flag -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$RM $lib.exp'
6208c6681
< 	        output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
---
> 	        output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | $GREP -v "^Configured with:" | $GREP "\-L"'
6219c6692
< 	        output_verbose_link_cmd='$CC -G $CFLAGS -v conftest.$objext 2>&1 | $GREP "\-L"'
---
> 	        output_verbose_link_cmd='$CC -G $CFLAGS -v conftest.$objext 2>&1 | $GREP -v "^Configured with:" | $GREP "\-L"'
6272a6746,6749
> 	    _LT_TAGVAR(old_archive_cmds, $1)='$CC -Tprelink_objects $oldobjs~
> 	      '"$_LT_TAGVAR(old_archive_cmds, $1)"
> 	    _LT_TAGVAR(reload_cmds, $1)='$CC -Tprelink_objects $reload_objs~
> 	      '"$_LT_TAGVAR(reload_cmds, $1)"
6327a6805
>   CFLAGS=$lt_save_CFLAGS
6341a6820,6842
> # _LT_FUNC_STRIPNAME_CNF
> # ----------------------
> # func_stripname_cnf prefix suffix name
> # strip PREFIX and SUFFIX off of NAME.
> # PREFIX and SUFFIX must not contain globbing or regex special
> # characters, hashes, percent signs, but SUFFIX may contain a leading
> # dot (in which case that matches only a dot).
> #
> # This function is identical to the (non-XSI) version of func_stripname,
> # except this one can be used by m4 code that may be executed by configure,
> # rather than the libtool script.
> m4_defun([_LT_FUNC_STRIPNAME_CNF],[dnl
> AC_REQUIRE([_LT_DECL_SED])
> AC_REQUIRE([_LT_PROG_ECHO_BACKSLASH])
> func_stripname_cnf ()
> {
>   case ${2} in
>   .*) func_stripname_result=`$ECHO "${3}" | $SED "s%^${1}%%; s%\\\\${2}\$%%"`;;
>   *)  func_stripname_result=`$ECHO "${3}" | $SED "s%^${1}%%; s%${2}\$%%"`;;
>   esac
> } # func_stripname_cnf
> ])# _LT_FUNC_STRIPNAME_CNF
> 
6349a6851
> AC_REQUIRE([_LT_FUNC_STRIPNAME_CNF])dnl
6399a6902,6908
> 
> _lt_libdeps_save_CFLAGS=$CFLAGS
> case "$CC $CFLAGS " in #(
> *\ -flto*\ *) CFLAGS="$CFLAGS -fno-lto" ;;
> *\ -fwhopr*\ *) CFLAGS="$CFLAGS -fno-whopr" ;;
> esac
> 
6411c6920
<     case $p in
---
>     case ${prev}${p} in
6420,6421d6928
<        else
< 	 prev=
6424c6931,6932
<        if test "$pre_test_object_deps_done" = no; then
---
>        # Expand the sysroot to ease extracting the directories later.
>        if test -z "$prev"; then
6426c6934,6944
< 	 -L* | -R*)
---
>          -L*) func_stripname_cnf '-L' '' "$p"; prev=-L; p=$func_stripname_result ;;
>          -R*) func_stripname_cnf '-R' '' "$p"; prev=-R; p=$func_stripname_result ;;
>          -l*) func_stripname_cnf '-l' '' "$p"; prev=-l; p=$func_stripname_result ;;
>          esac
>        fi
>        case $p in
>        =*) func_stripname_cnf '=' '' "$p"; p=$lt_sysroot$func_stripname_result ;;
>        esac
>        if test "$pre_test_object_deps_done" = no; then
> 	 case ${prev} in
> 	 -L | -R)
6445a6964
>        prev=
6447a6967
>     *.lto.$objext) ;; # Ignore GCC LTO objects
6482a7003
> CFLAGS=$_lt_libdeps_save_CFLAGS
6519c7040
<   CC*)
---
>   CC* | sunCC*)
6563,6580d7083
< # _LT_PROG_F77
< # ------------
< # Since AC_PROG_F77 is broken, in that it returns the empty string
< # if there is no fortran compiler, we have our own version here.
< m4_defun([_LT_PROG_F77],
< [
< pushdef([AC_MSG_ERROR], [_lt_disable_F77=yes])
< AC_PROG_F77
< if test -z "$F77" || test "X$F77" = "Xno"; then
<   _lt_disable_F77=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_F77
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_F77], [])
< 
< 
6587,6588c7090,7093
< [AC_REQUIRE([_LT_PROG_F77])dnl
< AC_LANG_PUSH(Fortran 77)
---
> [AC_LANG_PUSH(Fortran 77)
> if test -z "$F77" || test "X$F77" = "Xno"; then
>   _lt_disable_F77=yes
> fi
6606a7112,7113
> _LT_TAGVAR(reload_flag, $1)=$reload_flag
> _LT_TAGVAR(reload_cmds, $1)=$reload_cmds
6645a7153
>   lt_save_CFLAGS=$CFLAGS
6646a7155
>   CFLAGS=$FFLAGS
6699a7209
>   CFLAGS="$lt_save_CFLAGS"
6706,6723d7215
< # _LT_PROG_FC
< # -----------
< # Since AC_PROG_FC is broken, in that it returns the empty string
< # if there is no fortran compiler, we have our own version here.
< m4_defun([_LT_PROG_FC],
< [
< pushdef([AC_MSG_ERROR], [_lt_disable_FC=yes])
< AC_PROG_FC
< if test -z "$FC" || test "X$FC" = "Xno"; then
<   _lt_disable_FC=yes
< fi
< popdef([AC_MSG_ERROR])
< ])# _LT_PROG_FC
< 
< dnl aclocal-1.4 backwards compatibility:
< dnl AC_DEFUN([_LT_PROG_FC], [])
< 
< 
6730,6731c7222,7226
< [AC_REQUIRE([_LT_PROG_FC])dnl
< AC_LANG_PUSH(Fortran)
---
> [AC_LANG_PUSH(Fortran)
> 
> if test -z "$FC" || test "X$FC" = "Xno"; then
>   _lt_disable_FC=yes
> fi
6749a7245,7246
> _LT_TAGVAR(reload_flag, $1)=$reload_flag
> _LT_TAGVAR(reload_cmds, $1)=$reload_cmds
6788a7286
>   lt_save_CFLAGS=$CFLAGS
6789a7288
>   CFLAGS=$FCFLAGS
6845c7344,7345
<   CC="$lt_save_CC"
---
>   CC=$lt_save_CC
>   CFLAGS=$lt_save_CFLAGS
6882c7382,7383
< lt_save_CC="$CC"
---
> lt_save_CC=$CC
> lt_save_CFLAGS=$CFLAGS
6885a7387
> CFLAGS=$GCJFLAGS
6894a7397,7398
> _LT_TAGVAR(reload_flag, $1)=$reload_flag
> _LT_TAGVAR(reload_cmds, $1)=$reload_cmds
6914c7418,7419
< CC="$lt_save_CC"
---
> CC=$lt_save_CC
> CFLAGS=$lt_save_CFLAGS
6948a7454
> lt_save_CFLAGS=$CFLAGS
6951a7458
> CFLAGS=
6964c7471,7472
< CC="$lt_save_CC"
---
> CC=$lt_save_CC
> CFLAGS=$lt_save_CFLAGS
7022a7531,7539
> # _LT_DECL_DLLTOOL
> # ----------------
> # Ensure DLLTOOL variable is set.
> m4_defun([_LT_DECL_DLLTOOL],
> [AC_CHECK_TOOL(DLLTOOL, dlltool, false)
> test -z "$DLLTOOL" && DLLTOOL=dlltool
> _LT_DECL([], [DLLTOOL], [1], [DLL creation program])
> AC_SUBST([DLLTOOL])
> ])
7116,7117c7633,7634
<   test "${_lt_dummy##*/},${_lt_dummy%/*},"${_lt_dummy%"$_lt_dummy"}, \
<       = c,a/b,, \
---
>   test "${_lt_dummy##*/},${_lt_dummy%/*},${_lt_dummy#??}"${_lt_dummy%"$_lt_dummy"}, \
>       = c,a/b,b/c, \
7156,7162c7673,7687
< # _LT_PROG_XSI_SHELLFNS
< # ---------------------
< # Bourne and XSI compatible variants of some useful shell functions.
< m4_defun([_LT_PROG_XSI_SHELLFNS],
< [case $xsi_shell in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
---
> # _LT_PROG_FUNCTION_REPLACE (FUNCNAME, REPLACEMENT-BODY)
> # ------------------------------------------------------
> # In `$cfgfile', look for function FUNCNAME delimited by `^FUNCNAME ()$' and
> # '^} FUNCNAME ', and replace its body with REPLACEMENT-BODY.
> m4_defun([_LT_PROG_FUNCTION_REPLACE],
> [dnl {
> sed -e '/^$1 ()$/,/^} # $1 /c\
> $1 ()\
> {\
> m4_bpatsubsts([$2], [$], [\\], [^\([	 ]\)], [\\\1])
> } # Extended-shell $1 implementation' "$cfgfile" > $cfgfile.tmp \
>   && mv -f "$cfgfile.tmp" "$cfgfile" \
>     || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
> test 0 -eq $? || _lt_function_replace_fail=:
> ])
7164,7168c7689,7696
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
---
> 
> # _LT_PROG_REPLACE_SHELLFNS
> # -------------------------
> # Replace existing portable implementations of several shell functions with
> # equivalent extended shell implementations where those features are available..
> m4_defun([_LT_PROG_REPLACE_SHELLFNS],
> [if test x"$xsi_shell" = xyes; then
>   _LT_PROG_FUNCTION_REPLACE([func_dirname], [dnl
7172,7173c7700
<   esac
< }
---
>     esac])
7175,7179c7702,7703
< # func_basename file
< func_basename ()
< {
<   func_basename_result="${1##*/}"
< }
---
>   _LT_PROG_FUNCTION_REPLACE([func_basename], [dnl
>     func_basename_result="${1##*/}"])
7181,7194c7705
< # func_dirname_and_basename file append nondir_replacement
< # perform func_basename and func_dirname in a single function
< # call:
< #   dirname:  Compute the dirname of FILE.  If nonempty,
< #             add APPEND to the result, otherwise set result
< #             to NONDIR_REPLACEMENT.
< #             value returned in "$func_dirname_result"
< #   basename: Compute filename of FILE.
< #             value retuned in "$func_basename_result"
< # Implementation must be kept synchronized with func_dirname
< # and func_basename. For efficiency, we do not delegate to
< # those functions but instead duplicate the functionality here.
< func_dirname_and_basename ()
< {
---
>   _LT_PROG_FUNCTION_REPLACE([func_dirname_and_basename], [dnl
7199,7200c7710
<   func_basename_result="${1##*/}"
< }
---
>     func_basename_result="${1##*/}"])
7202,7208c7712
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< func_stripname ()
< {
---
>   _LT_PROG_FUNCTION_REPLACE([func_stripname], [dnl
7213,7214c7717
<   func_stripname_result=${func_stripname_result%"${2}"}
< }
---
>     func_stripname_result=${func_stripname_result%"${2}"}])
7216,7221c7719,7721
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=${1%%=*}
<   func_opt_split_arg=${1#*=}
< }
---
>   _LT_PROG_FUNCTION_REPLACE([func_split_long_opt], [dnl
>     func_split_long_opt_name=${1%%=*}
>     func_split_long_opt_arg=${1#*=}])
7223,7225c7723,7727
< # func_lo2o object
< func_lo2o ()
< {
---
>   _LT_PROG_FUNCTION_REPLACE([func_split_short_opt], [dnl
>     func_split_short_opt_arg=${1#??}
>     func_split_short_opt_name=${1%"$func_split_short_opt_arg"}])
> 
>   _LT_PROG_FUNCTION_REPLACE([func_lo2o], [dnl
7229,7230c7731
<   esac
< }
---
>     esac])
7232,7236c7733
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=${1%.*}.lo
< }
---
>   _LT_PROG_FUNCTION_REPLACE([func_xform], [    func_xform_result=${1%.*}.lo])
7238,7242c7735
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=$(( $[*] ))
< }
---
>   _LT_PROG_FUNCTION_REPLACE([func_arith], [    func_arith_result=$(( $[*] ))])
7244,7249c7737,7738
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=${#1}
< }
---
>   _LT_PROG_FUNCTION_REPLACE([func_len], [    func_len_result=${#1}])
> fi
7251,7254c7740,7741
< _LT_EOF
<     ;;
<   *) # Bourne compatible functions.
<     cat << \_LT_EOF >> "$cfgfile"
---
> if test x"$lt_shell_append" = xyes; then
>   _LT_PROG_FUNCTION_REPLACE([func_append], [    eval "${1}+=\\${2}"])
7256,7264c7743,7752
< # func_dirname file append nondir_replacement
< # Compute the dirname of FILE.  If nonempty, add APPEND to the result,
< # otherwise set result to NONDIR_REPLACEMENT.
< func_dirname ()
< {
<   # Extract subdirectory from the argument.
<   func_dirname_result=`$ECHO "X${1}" | $Xsed -e "$dirname"`
<   if test "X$func_dirname_result" = "X${1}"; then
<     func_dirname_result="${3}"
---
>   _LT_PROG_FUNCTION_REPLACE([func_append_quoted], [dnl
>     func_quote_for_eval "${2}"
> dnl m4 expansion turns \\\\ into \\, and then the shell eval turns that into \
>     eval "${1}+=\\\\ \\$func_quote_for_eval_result"])
> 
>   # Save a `func_append' function call where possible by direct use of '+='
>   sed -e 's%func_append \([[a-zA-Z_]]\{1,\}\) "%\1+="%g' $cfgfile > $cfgfile.tmp \
>     && mv -f "$cfgfile.tmp" "$cfgfile" \
>       || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
>   test 0 -eq $? || _lt_function_replace_fail=:
7266c7754,7758
<     func_dirname_result="$func_dirname_result${2}"
---
>   # Save a `func_append' function call even when '+=' is not available
>   sed -e 's%func_append \([[a-zA-Z_]]\{1,\}\) "%\1="$\1%g' $cfgfile > $cfgfile.tmp \
>     && mv -f "$cfgfile.tmp" "$cfgfile" \
>       || (rm -f "$cfgfile" && cp "$cfgfile.tmp" "$cfgfile" && rm -f "$cfgfile.tmp")
>   test 0 -eq $? || _lt_function_replace_fail=:
7268,7274d7759
< }
< 
< # func_basename file
< func_basename ()
< {
<   func_basename_result=`$ECHO "X${1}" | $Xsed -e "$basename"`
< }
7276,7278c7761,7764
< dnl func_dirname_and_basename
< dnl A portable version of this function is already defined in general.m4sh
< dnl so there is no need for it here.
---
> if test x"$_lt_function_replace_fail" = x":"; then
>   AC_MSG_WARN([Unable to substitute extended shell functions in $ofile])
> fi
> ])
7280,7292c7766,7787
< # func_stripname prefix suffix name
< # strip PREFIX and SUFFIX off of NAME.
< # PREFIX and SUFFIX must not contain globbing or regex special
< # characters, hashes, percent signs, but SUFFIX may contain a leading
< # dot (in which case that matches only a dot).
< # func_strip_suffix prefix name
< func_stripname ()
< {
<   case ${2} in
<     .*) func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%\\\\${2}\$%%"`;;
<     *)  func_stripname_result=`$ECHO "X${3}" \
<            | $Xsed -e "s%^${1}%%" -e "s%${2}\$%%"`;;
---
> # _LT_PATH_CONVERSION_FUNCTIONS
> # -----------------------------
> # Determine which file name conversion functions should be used by
> # func_to_host_file (and, implicitly, by func_to_host_path).  These are needed
> # for certain cross-compile configurations and native mingw.
> m4_defun([_LT_PATH_CONVERSION_FUNCTIONS],
> [AC_REQUIRE([AC_CANONICAL_HOST])dnl
> AC_REQUIRE([AC_CANONICAL_BUILD])dnl
> AC_MSG_CHECKING([how to convert $build file names to $host format])
> AC_CACHE_VAL(lt_cv_to_host_file_cmd,
> [case $host in
>   *-*-mingw* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_host_file_cmd=func_convert_file_msys_to_w32
>         ;;
>       *-*-cygwin* )
>         lt_cv_to_host_file_cmd=func_convert_file_cygwin_to_w32
>         ;;
>       * ) # otherwise, assume *nix
>         lt_cv_to_host_file_cmd=func_convert_file_nix_to_w32
>         ;;
7294,7332c7789,7800
< }
< 
< # sed scripts:
< my_sed_long_opt='1s/^\(-[[^=]]*\)=.*/\1/;q'
< my_sed_long_arg='1s/^-[[^=]]*=//'
< 
< # func_opt_split
< func_opt_split ()
< {
<   func_opt_split_opt=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_opt"`
<   func_opt_split_arg=`$ECHO "X${1}" | $Xsed -e "$my_sed_long_arg"`
< }
< 
< # func_lo2o object
< func_lo2o ()
< {
<   func_lo2o_result=`$ECHO "X${1}" | $Xsed -e "$lo2o"`
< }
< 
< # func_xform libobj-or-source
< func_xform ()
< {
<   func_xform_result=`$ECHO "X${1}" | $Xsed -e 's/\.[[^.]]*$/.lo/'`
< }
< 
< # func_arith arithmetic-term...
< func_arith ()
< {
<   func_arith_result=`expr "$[@]"`
< }
< 
< # func_len string
< # STRING may not start with a hyphen.
< func_len ()
< {
<   func_len_result=`expr "$[1]" : ".*" 2>/dev/null || echo $max_cmd_len`
< }
< 
< _LT_EOF
---
>     ;;
>   *-*-cygwin* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_host_file_cmd=func_convert_file_msys_to_cygwin
>         ;;
>       *-*-cygwin* )
>         lt_cv_to_host_file_cmd=func_convert_file_noop
>         ;;
>       * ) # otherwise, assume *nix
>         lt_cv_to_host_file_cmd=func_convert_file_nix_to_cygwin
>         ;;
7334,7345d7801
< 
< case $lt_shell_append in
<   yes)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$[1]+=\$[2]"
< }
< _LT_EOF
7347,7357c7803,7823
<   *)
<     cat << \_LT_EOF >> "$cfgfile"
< 
< # func_append var value
< # Append VALUE to the end of shell variable VAR.
< func_append ()
< {
<   eval "$[1]=\$$[1]\$[2]"
< }
< 
< _LT_EOF
---
>   * ) # unhandled hosts (and "normal" native builds)
>     lt_cv_to_host_file_cmd=func_convert_file_noop
>     ;;
> esac
> ])
> to_host_file_cmd=$lt_cv_to_host_file_cmd
> AC_MSG_RESULT([$lt_cv_to_host_file_cmd])
> _LT_DECL([to_host_file_cmd], [lt_cv_to_host_file_cmd],
>          [0], [convert $build file names to $host format])dnl
> 
> AC_MSG_CHECKING([how to convert $build file names to toolchain format])
> AC_CACHE_VAL(lt_cv_to_tool_file_cmd,
> [#assume ordinary cross tools, or native build.
> lt_cv_to_tool_file_cmd=func_convert_file_noop
> case $host in
>   *-*-mingw* )
>     case $build in
>       *-*-mingw* ) # actually msys
>         lt_cv_to_tool_file_cmd=func_convert_file_msys_to_w32
>         ;;
>     esac
7360a7827,7831
> to_tool_file_cmd=$lt_cv_to_tool_file_cmd
> AC_MSG_RESULT([$lt_cv_to_tool_file_cmd])
> _LT_DECL([to_tool_file_cmd], [lt_cv_to_tool_file_cmd],
>          [0], [convert $build files to toolchain format])dnl
> ])# _LT_PATH_CONVERSION_FUNCTIONS
diff -rbw libffi.old/m4/ltoptions.m4 libffi/m4/ltoptions.m4
3c3,4
< #   Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.
---
> #   Copyright (C) 2004, 2005, 2007, 2008, 2009 Free Software Foundation,
> #   Inc.
10c11
< # serial 6 ltoptions.m4
---
> # serial 7 ltoptions.m4
128c129
< *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-cegcc*)
---
> *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-cegcc*)
136c137
< _LT_DECL([], [AS],      [0], [Assembler program])dnl
---
> _LT_DECL([], [AS],      [1], [Assembler program])dnl
139c140
< _LT_DECL([], [DLLTOOL], [0], [DLL creation program])dnl
---
> _LT_DECL([], [DLLTOOL], [1], [DLL creation program])dnl
142c143
< _LT_DECL([], [OBJDUMP], [0], [Object dumper program])dnl
---
> _LT_DECL([], [OBJDUMP], [1], [Object dumper program])dnl
diff -rbw libffi.old/m4/ltversion.m4 libffi/m4/ltversion.m4
10c10
< # Generated from ltversion.in.
---
> # @configure_input@
12c12
< # serial 3012 ltversion.m4
---
> # serial 3293 ltversion.m4
15,16c15,16
< m4_define([LT_PACKAGE_VERSION], [2.2.6])
< m4_define([LT_PACKAGE_REVISION], [1.3012])
---
> m4_define([LT_PACKAGE_VERSION], [2.4])
> m4_define([LT_PACKAGE_REVISION], [1.3293])
19,20c19,20
< [macro_version='2.2.6'
< macro_revision='1.3012'
---
> [macro_version='2.4'
> macro_revision='1.3293'
diff -rbw libffi.old/m4/lt~obsolete.m4 libffi/m4/lt~obsolete.m4
3c3
< #   Copyright (C) 2004, 2005, 2007 Free Software Foundation, Inc.
---
> #   Copyright (C) 2004, 2005, 2007, 2009 Free Software Foundation, Inc.
10c10
< # serial 4 lt~obsolete.m4
---
> # serial 5 lt~obsolete.m4
80d79
< m4_ifndef([AC_LIBTOOL_RC],		[AC_DEFUN([AC_LIBTOOL_RC])])
92a92,98
> m4_ifndef([_LT_REQUIRED_DARWIN_CHECKS],	[AC_DEFUN([_LT_REQUIRED_DARWIN_CHECKS])])
> m4_ifndef([_LT_AC_PROG_CXXCPP],		[AC_DEFUN([_LT_AC_PROG_CXXCPP])])
> m4_ifndef([_LT_PREPARE_SED_QUOTE_VARS],	[AC_DEFUN([_LT_PREPARE_SED_QUOTE_VARS])])
> m4_ifndef([_LT_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_PROG_ECHO_BACKSLASH])])
> m4_ifndef([_LT_PROG_F77],		[AC_DEFUN([_LT_PROG_F77])])
> m4_ifndef([_LT_PROG_FC],		[AC_DEFUN([_LT_PROG_FC])])
> m4_ifndef([_LT_PROG_CXX],		[AC_DEFUN([_LT_PROG_CXX])])
Only in libffi.old/man: .svn
diff -rbw libffi.old/man/Makefile.in libffi/man/Makefile.in
40c40,50
< am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
---
> am__aclocal_m4_deps = $(top_srcdir)/m4/ax_cc_maxopt.m4 \
> 	$(top_srcdir)/m4/ax_cflags_warn_all.m4 \
> 	$(top_srcdir)/m4/ax_check_compiler_flags.m4 \
> 	$(top_srcdir)/m4/ax_compiler_vendor.m4 \
> 	$(top_srcdir)/m4/ax_configure_args.m4 \
> 	$(top_srcdir)/m4/ax_enable_builddir.m4 \
> 	$(top_srcdir)/m4/ax_gcc_archflag.m4 \
> 	$(top_srcdir)/m4/ax_gcc_x86_cpuid.m4 \
> 	$(top_srcdir)/m4/libtool.m4 $(top_srcdir)/m4/ltoptions.m4 \
> 	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
> 	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/acinclude.m4 \
96a107
> DLLTOOL = @DLLTOOL@
103a115
> FFI_EXEC_TRAMPOLINE_TABLE = @FFI_EXEC_TRAMPOLINE_TABLE@
121a134
> MANIFEST_TOOL = @MANIFEST_TOOL@
133a147
> PACKAGE_URL = @PACKAGE_URL@
135a150
> PRTDIAG = @PRTDIAG@
147a163
> ac_ct_AR = @ac_ct_AR@
154a171
> ax_enable_builddir_sed = @ax_enable_builddir_sed@
180d196
< lt_ECHO = @lt_ECHO@
190a207
> sys_symbol_underscore = @sys_symbol_underscore@
Only in libffi.old: mkinstalldirs
diff -rbw libffi.old/msvcc.sh libffi/msvcc.sh
45,48c45
< # Disable specific warnings, and enable warnings-as-errors so we catch any
< # mistranslated args.
< nowarn="-wd4127 -wd4820 -wd4706 -wd4100 -wd4255 -wd4668 -wd4053 -wd4324"
< args="-nologo -W3 -WX $nowarn"
---
> args="-nologo -W3"
51a49
> safeseh="-safeseh"
68a67,71
>       safeseh=
>       shift 1
>     ;;
>     -O0)
>       args="$args -Od"
72c75,77
<       args="$args $1"
---
>       # If we're optimizing, make sure we explicitly turn on some optimizations
>       # that are implicitly disabled by debug symbols (-Zi).
>       args="$args $1 -OPT:REF -OPT:ICF -INCREMENTAL:NO"
76,77c81,88
<       # Can't specify -RTC1 or -Zi in opt. -Gy is ok. Use -OPT:REF?
<       args="$args -D_DEBUG -RTC1 -Zi"
---
>       # Enable debug symbol generation.
>       args="$args -Zi -DEBUG"
>       shift 1
>     ;;
>     -DFFI_DEBUG)
>       # Link against debug CRT and enable runtime error checks.
>       args="$args -RTC1"
>       defines="$defines $1"
114c125,126
<       args="$args -Wall"
---
>       # -Wall on MSVC is overzealous, and we already build with -W3. Nothing
>       # to do here.
169c181
<     args="-nologo -safeseh $single $output $ppsrc"
---
>     args="-nologo $safeseh $single $output $ppsrc"
Only in libffi.old: patches
Only in libffi.old/src: .svn
Only in libffi.old/src/alpha: .svn
Only in libffi.old/src/arm: .svn
diff -rbw libffi.old/src/arm/ffi.c libffi/src/arm/ffi.c
2c2,5
<    ffi.c - Copyright (c) 1998, 2008  Red Hat, Inc.
---
>    ffi.c - Copyright (c) 2011 Plausible Labs Cooperative, Inc.
>            Copyright (c) 2011 Anthony Green
> 	   Copyright (c) 2011 Free Software Foundation
>            Copyright (c) 1998, 2008, 2011  Red Hat, Inc.
31a35,38
> /* Forward declares. */
> static int vfp_type_p (ffi_type *);
> static void layout_vfp_args (ffi_cif *);
> 
33c40
<    has been allocated for the function's arguments */
---
>    has been allocated for the function's arguments
35c42,46
< void ffi_prep_args(char *stack, extended_cif *ecif)
---
>    The vfp_space parameter is the load area for VFP regs, the return
>    value is cif->vfp_used (word bitset of VFP regs used for passing
>    arguments). These are only used for the VFP hard-float ABI.
> */
> int ffi_prep_args(char *stack, extended_cif *ecif, float *vfp_space)
37c48
<   register unsigned int i;
---
>   register unsigned int i, vi = 0;
56a68,82
>       /* Allocated in VFP registers. */
>       if (ecif->cif->abi == FFI_VFP
> 	  && vi < ecif->cif->vfp_nargs && vfp_type_p (*p_arg))
> 	{
> 	  float* vfp_slot = vfp_space + ecif->cif->vfp_args[vi++];
> 	  if ((*p_arg)->type == FFI_TYPE_FLOAT)
> 	    *((float*)vfp_slot) = *((float*)*p_argv);
> 	  else if ((*p_arg)->type == FFI_TYPE_DOUBLE)
> 	    *((double*)vfp_slot) = *((double*)*p_argv);
> 	  else
> 	    memcpy(vfp_slot, *p_argv, (*p_arg)->size);
> 	  p_argv++;
> 	  continue;
> 	}
> 
107c133,134
<   return;
---
>   /* Indicate the VFP registers used. */
>   return ecif->cif->vfp_used;
112a140
>   int type_code;
133c161,168
<       if (cif->rtype->size <= 4)
---
>       if (cif->abi == FFI_VFP
> 	  && (type_code = vfp_type_p (cif->rtype)) != 0)
> 	{
> 	  /* A Composite Type passed in VFP registers, either
> 	     FFI_TYPE_STRUCT_VFP_FLOAT or FFI_TYPE_STRUCT_VFP_DOUBLE. */
> 	  cif->flags = (unsigned) type_code;
> 	}
>       else if (cif->rtype->size <= 4)
147a183,188
>   /* Map out the register placements of VFP register args.
>      The VFP hard-float calling conventions are slightly more sophisticated than
>      the base calling conventions, so we do it here instead of in ffi_prep_args(). */
>   if (cif->abi == FFI_VFP)
>     layout_vfp_args (cif);
> 
151,152c192,194
< extern void ffi_call_SYSV(void (*)(char *, extended_cif *), extended_cif *,
< 			  unsigned, unsigned, unsigned *, void (*fn)(void));
---
> /* Prototypes for assembly functions, in sysv.S */
> extern void ffi_call_SYSV (void (*fn)(void), extended_cif *, unsigned, unsigned, unsigned *);
> extern void ffi_call_VFP (void (*fn)(void), extended_cif *, unsigned, unsigned, unsigned *);
159a202,203
>   int vfp_struct = (cif->flags == FFI_TYPE_STRUCT_VFP_FLOAT
> 		    || cif->flags == FFI_TYPE_STRUCT_VFP_DOUBLE);
175a220,224
>   else if (vfp_struct)
>     {
>       /* Largest case is double x 4. */
>       ecif.rvalue = alloca(32);
>     }
182,183c231,232
<       ffi_call_SYSV(ffi_prep_args, &ecif, cif->bytes, cif->flags, ecif.rvalue,
< 		    fn);
---
>       ffi_call_SYSV (fn, &ecif, cif->bytes, cif->flags, ecif.rvalue);
>       break;
184a234,235
>     case FFI_VFP:
>       ffi_call_VFP (fn, &ecif, cif->bytes, cif->flags, ecif.rvalue);
185a237
> 
191a244,245
>   else if (vfp_struct)
>     memcpy (rvalue, ecif.rvalue, cif->rtype->size);
197c251
< 					 void** args, ffi_cif* cif);
---
> 					 void** args, ffi_cif* cif, float *vfp_stack);
200a255,256
> void ffi_closure_VFP (ffi_closure *);
> 
204c260
< ffi_closure_SYSV_inner (closure, respp, args)
---
> ffi_closure_SYSV_inner (closure, respp, args, vfp_args)
207a264
>      void *vfp_args;
222c279
<   ffi_prep_incoming_args_SYSV(args, respp, arg_area, cif);
---
>   ffi_prep_incoming_args_SYSV(args, respp, arg_area, cif, vfp_args);
232c289,291
< 			    void **avalue, ffi_cif *cif)
---
> 			    void **avalue, ffi_cif *cif,
> 			    /* Used only under VFP hard-float ABI. */
> 			    float *vfp_stack)
235c294
<   register unsigned int i;
---
>   register unsigned int i, vi = 0;
251a311,318
>       size_t alignment;
>   
>       if (cif->abi == FFI_VFP
> 	  && vi < cif->vfp_nargs && vfp_type_p (*p_arg))
> 	{
> 	  *p_argv++ = (void*)(vfp_stack + cif->vfp_args[vi++]);
> 	  continue;
> 	}
253c320
<       size_t alignment = (*p_arg)->alignment;
---
>       alignment = (*p_arg)->alignment;
275a343,556
> #if FFI_EXEC_TRAMPOLINE_TABLE
> 
> #include <mach/mach.h>
> #include <pthread.h>
> #include <stdio.h>
> #include <stdlib.h>
> 
> extern void *ffi_closure_trampoline_table_page;
> 
> typedef struct ffi_trampoline_table ffi_trampoline_table;
> typedef struct ffi_trampoline_table_entry ffi_trampoline_table_entry;
> 
> struct ffi_trampoline_table {
>   /* contigious writable and executable pages */
>   vm_address_t config_page;
>   vm_address_t trampoline_page;
> 
>   /* free list tracking */
>   uint16_t free_count;
>   ffi_trampoline_table_entry *free_list;
>   ffi_trampoline_table_entry *free_list_pool;
> 
>   ffi_trampoline_table *prev;
>   ffi_trampoline_table *next;
> };
> 
> struct ffi_trampoline_table_entry {
>   void *(*trampoline)();
>   ffi_trampoline_table_entry *next;
> };
> 
> /* Override the standard architecture trampoline size */
> // XXX TODO - Fix
> #undef FFI_TRAMPOLINE_SIZE
> #define FFI_TRAMPOLINE_SIZE 12
> 
> /* The trampoline configuration is placed at 4080 bytes prior to the trampoline's entry point */
> #define FFI_TRAMPOLINE_CODELOC_CONFIG(codeloc) ((void **) (((uint8_t *) codeloc) - 4080));
> 
> /* The first 16 bytes of the config page are unused, as they are unaddressable from the trampoline page. */
> #define FFI_TRAMPOLINE_CONFIG_PAGE_OFFSET 16
> 
> /* Total number of trampolines that fit in one trampoline table */
> #define FFI_TRAMPOLINE_COUNT ((PAGE_SIZE - FFI_TRAMPOLINE_CONFIG_PAGE_OFFSET) / FFI_TRAMPOLINE_SIZE)
> 
> static pthread_mutex_t ffi_trampoline_lock = PTHREAD_MUTEX_INITIALIZER;
> static ffi_trampoline_table *ffi_trampoline_tables = NULL;
> 
> static ffi_trampoline_table *
> ffi_trampoline_table_alloc ()
> {
>   ffi_trampoline_table *table = NULL;
> 
>   /* Loop until we can allocate two contigious pages */
>   while (table == NULL) {
>     vm_address_t config_page = 0x0;
>     kern_return_t kt;
> 
>     /* Try to allocate two pages */
>     kt = vm_allocate (mach_task_self (), &config_page, PAGE_SIZE*2, VM_FLAGS_ANYWHERE);
>     if (kt != KERN_SUCCESS) {
>       fprintf(stderr, "vm_allocate() failure: %d at %s:%d\n", kt, __FILE__, __LINE__);
>       break;
>     }
> 
>     /* Now drop the second half of the allocation to make room for the trampoline table */
>     vm_address_t trampoline_page = config_page+PAGE_SIZE;
>     kt = vm_deallocate (mach_task_self (), trampoline_page, PAGE_SIZE);
>     if (kt != KERN_SUCCESS) {
>       fprintf(stderr, "vm_deallocate() failure: %d at %s:%d\n", kt, __FILE__, __LINE__);
>       break;
>     }
> 
>     /* Remap the trampoline table to directly follow the config page */
>     vm_prot_t cur_prot;
>     vm_prot_t max_prot;
> 
>     kt = vm_remap (mach_task_self (), &trampoline_page, PAGE_SIZE, 0x0, FALSE, mach_task_self (), (vm_address_t) &ffi_closure_trampoline_table_page, FALSE, &cur_prot, &max_prot, VM_INHERIT_SHARE);
> 
>     /* If we lost access to the destination trampoline page, drop our config allocation mapping and retry */
>     if (kt != KERN_SUCCESS) {
>       /* Log unexpected failures */
>       if (kt != KERN_NO_SPACE) {
>         fprintf(stderr, "vm_remap() failure: %d at %s:%d\n", kt, __FILE__, __LINE__);
>       }
> 
>       vm_deallocate (mach_task_self (), config_page, PAGE_SIZE);
>       continue;
>     }
> 
>     /* We have valid trampoline and config pages */
>     table = calloc (1, sizeof(ffi_trampoline_table));
>     table->free_count = FFI_TRAMPOLINE_COUNT;
>     table->config_page = config_page;
>     table->trampoline_page = trampoline_page;
> 
>     /* Create and initialize the free list */
>     table->free_list_pool = calloc(FFI_TRAMPOLINE_COUNT, sizeof(ffi_trampoline_table_entry));
> 
>     uint16_t i;
>     for (i = 0; i < table->free_count; i++) {
>       ffi_trampoline_table_entry *entry = &table->free_list_pool[i];
>       entry->trampoline = (void *) (table->trampoline_page + (i * FFI_TRAMPOLINE_SIZE));
> 
>       if (i < table->free_count - 1)
>         entry->next = &table->free_list_pool[i+1];
>     }
> 
>     table->free_list = table->free_list_pool;
>   }
> 
>   return table;
> }
> 
> void *
> ffi_closure_alloc (size_t size, void **code)
> {
>   /* Create the closure */
>   ffi_closure *closure = malloc(size);
>   if (closure == NULL)
>     return NULL;
> 
>   pthread_mutex_lock(&ffi_trampoline_lock);
> 
>   /* Check for an active trampoline table with available entries. */
>   ffi_trampoline_table *table = ffi_trampoline_tables;
>   if (table == NULL || table->free_list == NULL) {
>     table = ffi_trampoline_table_alloc ();
>     if (table == NULL) {
>       free(closure);
>       return NULL;
>     }
> 
>     /* Insert the new table at the top of the list */
>     table->next = ffi_trampoline_tables;
>     if (table->next != NULL)
>         table->next->prev = table;
> 
>     ffi_trampoline_tables = table;
>   }
> 
>   /* Claim the free entry */
>   ffi_trampoline_table_entry *entry = ffi_trampoline_tables->free_list;
>   ffi_trampoline_tables->free_list = entry->next;
>   ffi_trampoline_tables->free_count--;
>   entry->next = NULL;
> 
>   pthread_mutex_unlock(&ffi_trampoline_lock);
> 
>   /* Initialize the return values */
>   *code = entry->trampoline;
>   closure->trampoline_table = table;
>   closure->trampoline_table_entry = entry;
> 
>   return closure;
> }
> 
> void
> ffi_closure_free (void *ptr)
> {
>   ffi_closure *closure = ptr;
> 
>   pthread_mutex_lock(&ffi_trampoline_lock);
> 
>   /* Fetch the table and entry references */
>   ffi_trampoline_table *table = closure->trampoline_table;
>   ffi_trampoline_table_entry *entry = closure->trampoline_table_entry;
> 
>   /* Return the entry to the free list */
>   entry->next = table->free_list;
>   table->free_list = entry;
>   table->free_count++;
> 
>   /* If all trampolines within this table are free, and at least one other table exists, deallocate
>    * the table */
>   if (table->free_count == FFI_TRAMPOLINE_COUNT && ffi_trampoline_tables != table) {
>     /* Remove from the list */
>     if (table->prev != NULL)
>       table->prev->next = table->next;
> 
>     if (table->next != NULL)
>       table->next->prev = table->prev;
> 
>     /* Deallocate pages */
>     kern_return_t kt;
>     kt = vm_deallocate (mach_task_self (), table->config_page, PAGE_SIZE);
>     if (kt != KERN_SUCCESS)
>       fprintf(stderr, "vm_deallocate() failure: %d at %s:%d\n", kt, __FILE__, __LINE__);
> 
>     kt = vm_deallocate (mach_task_self (), table->trampoline_page, PAGE_SIZE);
>     if (kt != KERN_SUCCESS)
>       fprintf(stderr, "vm_deallocate() failure: %d at %s:%d\n", kt, __FILE__, __LINE__);
> 
>     /* Deallocate free list */
>     free (table->free_list_pool);
>     free (table);
>   } else if (ffi_trampoline_tables != table) {
>     /* Otherwise, bump this table to the top of the list */
>     table->prev = NULL;
>     table->next = ffi_trampoline_tables;
>     if (ffi_trampoline_tables != NULL)
>       ffi_trampoline_tables->prev = table;
> 
>     ffi_trampoline_tables = table;
>   }
> 
>   pthread_mutex_unlock (&ffi_trampoline_lock);
> 
>   /* Free the closure */
>   free (closure);
> }
> 
> #else
> 
287a569
> #endif
298c580
<   FFI_ASSERT (cif->abi == FFI_SYSV);
---
>   void (*closure_func)(ffi_closure*) = NULL;
299a582,593
>   if (cif->abi == FFI_SYSV)
>     closure_func = &ffi_closure_SYSV;
>   else if (cif->abi == FFI_VFP)
>     closure_func = &ffi_closure_VFP;
>   else
>     return FFI_BAD_ABI;
>     
> #if FFI_EXEC_TRAMPOLINE_TABLE
>   void **config = FFI_TRAMPOLINE_CODELOC_CONFIG(codeloc);
>   config[0] = closure;
>   config[1] = closure_func;
> #else
301c595
< 		       &ffi_closure_SYSV,  \
---
> 		       closure_func,  \
302a597
> #endif
309a605,724
> 
> /* Below are routines for VFP hard-float support. */
> 
> static int rec_vfp_type_p (ffi_type *t, int *elt, int *elnum)
> {
>   switch (t->type)
>     {
>     case FFI_TYPE_FLOAT:
>     case FFI_TYPE_DOUBLE:
>       *elt = (int) t->type;
>       *elnum = 1;
>       return 1;
> 
>     case FFI_TYPE_STRUCT_VFP_FLOAT:
>       *elt = FFI_TYPE_FLOAT;
>       *elnum = t->size / sizeof (float);
>       return 1;
> 
>     case FFI_TYPE_STRUCT_VFP_DOUBLE:
>       *elt = FFI_TYPE_DOUBLE;
>       *elnum = t->size / sizeof (double);
>       return 1;
> 
>     case FFI_TYPE_STRUCT:;
>       {
> 	int base_elt = 0, total_elnum = 0;
> 	ffi_type **el = t->elements;
> 	while (*el)
> 	  {
> 	    int el_elt = 0, el_elnum = 0;
> 	    if (! rec_vfp_type_p (*el, &el_elt, &el_elnum)
> 		|| (base_elt && base_elt != el_elt)
> 		|| total_elnum + el_elnum > 4)
> 	      return 0;
> 	    base_elt = el_elt;
> 	    total_elnum += el_elnum;
> 	    el++;
> 	  }
> 	*elnum = total_elnum;
> 	*elt = base_elt;
> 	return 1;
>       }
>     default: ;
>     }
>   return 0;
> }
> 
> static int vfp_type_p (ffi_type *t)
> {
>   int elt, elnum;
>   if (rec_vfp_type_p (t, &elt, &elnum))
>     {
>       if (t->type == FFI_TYPE_STRUCT)
> 	{
> 	  if (elnum == 1)
> 	    t->type = elt;
> 	  else
> 	    t->type = (elt == FFI_TYPE_FLOAT
> 		       ? FFI_TYPE_STRUCT_VFP_FLOAT
> 		       : FFI_TYPE_STRUCT_VFP_DOUBLE);
> 	}
>       return (int) t->type;
>     }
>   return 0;
> }
> 
> static void place_vfp_arg (ffi_cif *cif, ffi_type *t)
> {
>   int reg = cif->vfp_reg_free;
>   int nregs = t->size / sizeof (float);
>   int align = ((t->type == FFI_TYPE_STRUCT_VFP_FLOAT
> 		|| t->type == FFI_TYPE_FLOAT) ? 1 : 2);
>   /* Align register number. */
>   if ((reg & 1) && align == 2)
>     reg++;
>   while (reg + nregs <= 16)
>     {
>       int s, new_used = 0;
>       for (s = reg; s < reg + nregs; s++)
> 	{
> 	  new_used |= (1 << s);
> 	  if (cif->vfp_used & (1 << s))
> 	    {
> 	      reg += align;
> 	      goto next_reg;
> 	    }
> 	}
>       /* Found regs to allocate. */
>       cif->vfp_used |= new_used;
>       cif->vfp_args[cif->vfp_nargs++] = reg;
> 
>       /* Update vfp_reg_free. */
>       if (cif->vfp_used & (1 << cif->vfp_reg_free))
> 	{
> 	  reg += nregs;
> 	  while (cif->vfp_used & (1 << reg))
> 	    reg += 1;
> 	  cif->vfp_reg_free = reg;
> 	}
>       return;
>     next_reg: ;
>     }
> }
> 
> static void layout_vfp_args (ffi_cif *cif)
> {
>   int i;
>   /* Init VFP fields */
>   cif->vfp_used = 0;
>   cif->vfp_nargs = 0;
>   cif->vfp_reg_free = 0;
>   memset (cif->vfp_args, -1, 16); /* Init to -1. */
> 
>   for (i = 0; i < cif->nargs; i++)
>     {
>       ffi_type *t = cif->arg_types[i];
>       if (vfp_type_p (t))
> 	place_vfp_arg (cif, t);
>     }
> }
diff -rbw libffi.old/src/arm/ffitarget.h libffi/src/arm/ffitarget.h
2a3,4
>                  Copyright (c) 2010 CodeSourcery
> 
36a39,43
>   FFI_VFP,
>   FFI_LAST_ABI,
> #ifdef __ARM_PCS_VFP
>   FFI_DEFAULT_ABI = FFI_VFP,
> #else
38c45
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
> #endif
41a49,57
> #define FFI_EXTRA_CIF_FIELDS			\
>   int vfp_used;					\
>   short vfp_reg_free, vfp_nargs;		\
>   signed char vfp_args[16]			\
> 
> /* Internally used. */
> #define FFI_TYPE_STRUCT_VFP_FLOAT  (FFI_TYPE_LAST + 1)
> #define FFI_TYPE_STRUCT_VFP_DOUBLE (FFI_TYPE_LAST + 2)
> 
Only in libffi/src/arm: gentramp.sh
diff -rbw libffi.old/src/arm/sysv.S libffi/src/arm/sysv.S
2c2,3
<    sysv.S - Copyright (c) 1998, 2008 Red Hat, Inc.
---
>    sysv.S - Copyright (c) 1998, 2008, 2011 Red Hat, Inc.
> 	    Copyright (c) 2011 Plausible Labs Cooperative, Inc.
41a43,45
> #ifdef __APPLE__
> #define ENTRY(x) .globl CNAME(x); CNAME(x):
> #else
42a47
> #endif /* __APPLE__ */
50a56,61
> /* Use the SOFTFP return value ABI on Mac OS X, as per the iOS ABI
>   Function Call Guide */
> #ifdef __APPLE__
> #define __SOFTFP__
> #endif
> 
77c88,89
<         || defined(__ARM_ARCH_7R__) || defined(__ARM_ARCH_7M__)
---
>         || defined(__ARM_ARCH_7R__) || defined(__ARM_ARCH_7M__) \
> 	|| defined(__ARM_ARCH_7EM__)
106a119,121
> #ifdef __APPLE__
> 	ENTRY($0)
> #else
107a123
> #endif
113a130,132
> #ifdef __APPLE__
> _L__$0:
> #else
114a134
> #endif
120a141,143
> #ifdef __APPLE__
> 	ENTRY($0)
> #else
121a145
> #endif
143d166
< 
149d171
< 	@ sp+4: fn
164d185
< 	mov	ip, r0
169c190
< 	call_reg(ip)
---
> 	bl	ffi_prep_args
175,178c196,200
< 	ldr	ip, [fp, #8]
<         cmp	ip, #16
< 	movhs	ip, #16
<         add	sp, sp, ip
---
> 	sub	lr, fp, sp	@ cif->bytes == fp - sp
> 	ldr	ip, [fp]	@ load fn() in advance
> 	cmp	lr, #16
> 	movhs	lr, #16
> 	add	sp, sp, lr
181d202
< 	ldr	ip, [fp, #28]
226c247,252
< 	RETLDM	"r0-r3,fp"
---
> #if defined (__INTERWORKING__)
> 	ldmia   sp!, {r0-r3,fp, lr}
> 	bx	lr
> #else
> 	ldmia   sp!, {r0-r3,fp, pc}
> #endif
229a256
> #ifdef __ELF__
230a258,259
> #endif
> 
246c275
< 	.pad #16
---
> 	UNWIND .pad #16
250c279
< 	bl	ffi_closure_SYSV_inner
---
> 	bl	CNAME(ffi_closure_SYSV_inner)
301a331
> #ifdef __ELF__
302a333,493
> #endif
> 
> 
> /* Below are VFP hard-float ABI call and closure implementations.
>    Add VFP FPU directive here. */
> 	.fpu	vfp
> 
> 	@ r0:   fn
> 	@ r1:   &ecif
> 	@ r2:   cif->bytes
> 	@ r3:   fig->flags
> 	@ sp+0: ecif.rvalue
> 
> ARM_FUNC_START ffi_call_VFP
> 	@ Save registers
>         stmfd	sp!, {r0-r3, fp, lr}
> 	UNWIND .save	{r0-r3, fp, lr}
> 	mov	fp, sp
> 	UNWIND .setfp	fp, sp
> 
> 	@ Make room for all of the new args.
> 	sub	sp, sp, r2
> 
> 	@ Make room for loading VFP args
> 	sub	sp, sp, #64
> 
> 	@ Place all of the ffi_prep_args in position
> 	mov	r0, sp
> 	@     r1 already set
> 	sub	r2, fp, #64   @ VFP scratch space
> 
> 	@ Call ffi_prep_args(stack, &ecif, vfp_space)
> 	bl	ffi_prep_args
> 
> 	@ Load VFP register args if needed
> 	cmp	r0, #0
> 	beq	LSYM(Lbase_args)
> 
> 	@ Load only d0 if possible
> 	cmp	r0, #3
> 	sub	ip, fp, #64
> 	flddle	d0, [ip]
> 	fldmiadgt	ip, {d0-d7}
> 
> LSYM(Lbase_args):
> 	@ move first 4 parameters in registers
> 	ldmia	sp, {r0-r3}
> 
> 	@ and adjust stack
> 	sub	lr, ip, sp	@ cif->bytes == (fp - 64) - sp
> 	ldr	ip, [fp]	@ load fn() in advance
>         cmp	lr, #16
> 	movhs	lr, #16
>         add	sp, sp, lr
> 
> 	@ call (fn) (...)
> 	call_reg(ip)
> 
> 	@ Remove the space we pushed for the args
> 	mov	sp, fp
> 
> 	@ Load r2 with the pointer to storage for
> 	@ the return value
> 	ldr	r2, [sp, #24]
> 
> 	@ Load r3 with the return type code 
> 	ldr	r3, [sp, #12]
> 
> 	@ If the return value pointer is NULL,
> 	@ assume no return value.
> 	cmp	r2, #0
> 	beq	LSYM(Lepilogue_vfp)
> 
> 	cmp	r3, #FFI_TYPE_INT
> 	streq	r0, [r2]
> 	beq	LSYM(Lepilogue_vfp)
> 
> 	cmp	r3, #FFI_TYPE_SINT64
> 	stmeqia	r2, {r0, r1}
> 	beq	LSYM(Lepilogue_vfp)
> 
> 	cmp	r3, #FFI_TYPE_FLOAT
> 	fstseq	s0, [r2]
> 	beq	LSYM(Lepilogue_vfp)
> 	
> 	cmp	r3, #FFI_TYPE_DOUBLE
> 	fstdeq	d0, [r2]
> 	beq	LSYM(Lepilogue_vfp)
> 
> 	cmp	r3, #FFI_TYPE_STRUCT_VFP_FLOAT
> 	cmpne	r3, #FFI_TYPE_STRUCT_VFP_DOUBLE
> 	fstmiadeq	r2, {d0-d3}
> 
> LSYM(Lepilogue_vfp):
> 	RETLDM	"r0-r3,fp"
> 
> .ffi_call_VFP_end:
> 	UNWIND .fnend
>         .size    CNAME(ffi_call_VFP),.ffi_call_VFP_end-CNAME(ffi_call_VFP)
> 
> 
> ARM_FUNC_START ffi_closure_VFP
> 	fstmfdd	sp!, {d0-d7}
> 	@ r0-r3, then d0-d7
> 	UNWIND .pad #80
> 	add	ip, sp, #80
> 	stmfd	sp!, {ip, lr}
> 	UNWIND .save	{r0, lr}
> 	add	r2, sp, #72
> 	add	r3, sp, #8
> 	UNWIND .pad #72
> 	sub	sp, sp, #72
> 	str	sp, [sp, #64]
> 	add	r1, sp, #64
> 	bl	ffi_closure_SYSV_inner
> 
> 	cmp	r0, #FFI_TYPE_INT
> 	beq	.Lretint_vfp
> 
> 	cmp	r0, #FFI_TYPE_FLOAT
> 	beq	.Lretfloat_vfp
> 
> 	cmp	r0, #FFI_TYPE_DOUBLE
> 	cmpne	r0, #FFI_TYPE_LONGDOUBLE
> 	beq	.Lretdouble_vfp
> 
> 	cmp	r0, #FFI_TYPE_SINT64
> 	beq	.Lretlonglong_vfp
> 
> 	cmp	r0, #FFI_TYPE_STRUCT_VFP_FLOAT
> 	beq	.Lretfloat_struct_vfp
> 
> 	cmp	r0, #FFI_TYPE_STRUCT_VFP_DOUBLE
> 	beq	.Lretdouble_struct_vfp
> 	
> .Lclosure_epilogue_vfp:
> 	add	sp, sp, #72
> 	ldmfd	sp, {sp, pc}
> 
> .Lretfloat_vfp:
> 	flds	s0, [sp]
> 	b	.Lclosure_epilogue_vfp
> .Lretdouble_vfp:
> 	fldd	d0, [sp]
> 	b	.Lclosure_epilogue_vfp
> .Lretint_vfp:
> 	ldr	r0, [sp]
> 	b	.Lclosure_epilogue_vfp
> .Lretlonglong_vfp:
> 	ldmia	sp, {r0, r1}
> 	b	.Lclosure_epilogue_vfp
> .Lretfloat_struct_vfp:
> 	fldmiad	sp, {d0-d1}
> 	b	.Lclosure_epilogue_vfp
> .Lretdouble_struct_vfp:
> 	fldmiad	sp, {d0-d3}
> 	b	.Lclosure_epilogue_vfp
> 
> .ffi_closure_VFP_end:
> 	UNWIND .fnend
>         .size    CNAME(ffi_closure_VFP),.ffi_closure_VFP_end-CNAME(ffi_closure_VFP)
Only in libffi/src/arm: trampoline.S
Only in libffi.old/src/avr32: .svn
diff -rbw libffi.old/src/avr32/ffi.c libffi/src/avr32/ffi.c
2c2,3
<    ffi.c - Copyright (c) 2009  Bradley Smith <brad@brad-smith.co.uk>
---
>    ffi.c - Copyright (c) 2011  Anthony Green
>            Copyright (c) 2009  Bradley Smith <brad@brad-smith.co.uk>
397c398,399
<     FFI_ASSERT(cif->abi == FFI_SYSV);
---
>     if (cif->abi != FFI_SYSV)
>       return FFI_BAD_ABI;
diff -rbw libffi.old/src/avr32/ffitarget.h libffi/src/avr32/ffitarget.h
37,38c37,38
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
diff -rbw libffi.old/src/closures.c libffi/src/closures.c
2,3c2,4
<    closures.c - Copyright (c) 2007  Red Hat, Inc.
<    Copyright (C) 2007, 2009 Free Software Foundation, Inc
---
>    closures.c - Copyright (c) 2007, 2009, 2010  Red Hat, Inc.
>                 Copyright (C) 2007, 2009, 2010 Free Software Foundation, Inc
>                 Copyright (c) 2011 Plausible Labs Cooperative, Inc.
35c36
< #ifndef FFI_MMAP_EXEC_WRIT
---
> #if !FFI_MMAP_EXEC_WRIT && !FFI_EXEC_TRAMPOLINE_TABLE
47c48
< # if defined(X86_WIN32) || defined(X86_WIN64)
---
> # if defined(X86_WIN32) || defined(X86_WIN64) || defined(__OS2__)
66c67,71
< # if FFI_MMAP_EXEC_WRIT
---
> # if FFI_EXEC_TRAMPOLINE_TABLE
> 
> // Per-target implementation; It's unclear what can reasonable be shared between two OS/architecture implementations.
> 
> # elif FFI_MMAP_EXEC_WRIT /* !FFI_EXEC_TRAMPOLINE_TABLE */
149c154
<       if (strncmp (p + 1, "selinuxfs ", 10) != 0)
---
>       if (strncmp (p + 1, "selinuxfs ", 10) == 0)
196c201
< #if !(defined(X86_WIN32) || defined(X86_WIN64)) || defined (__CYGWIN__)
---
> #if !(defined(X86_WIN32) || defined(X86_WIN64) || defined(__OS2__)) || defined (__CYGWIN__) || defined(__INTERIX)
200c205
< #endif /* !(defined(X86_WIN32) || defined(X86_WIN64)) || defined (__CYGWIN__) */
---
> #endif /* !(defined(X86_WIN32) || defined(X86_WIN64) || defined(__OS2__)) || defined (__CYGWIN__) || defined(__INTERIX) */
210c215
< #if !(defined(X86_WIN32) || defined(X86_WIN64)) || defined (__CYGWIN__)
---
> #if !(defined(X86_WIN32) || defined(X86_WIN64) || defined(__OS2__)) || defined (__CYGWIN__) || defined(__INTERIX)
297c302
<       if (getmntent_r (last_mntent, &mnt, buf, sizeof (buf)))
---
>       if (getmntent_r (last_mntent, &mnt, buf, sizeof (buf)) == NULL)
525c530
< #endif /* !(defined(X86_WIN32) || defined(X86_WIN64)) || defined (__CYGWIN__) */
---
> #endif /* !(defined(X86_WIN32) || defined(X86_WIN64) || defined(__OS2__)) || defined (__CYGWIN__) || defined(__INTERIX) */
Only in libffi.old/src/cris: .svn
diff -rbw libffi.old/src/cris/ffi.c libffi/src/cris/ffi.c
166c166
<   FFI_ASSERT ((abi > FFI_FIRST_ABI) && (abi <= FFI_DEFAULT_ABI));
---
>   FFI_ASSERT (abi > FFI_FIRST_ABI && abi < FFI_LAST_ABI);
diff -rbw libffi.old/src/cris/ffitarget.h libffi/src/cris/ffitarget.h
37,38c37,38
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
diff -rbw libffi.old/src/dlmalloc.c libffi/src/dlmalloc.c
461a462,469
> #ifdef __OS2__
> #define INCL_DOS
> #include <os2.h>
> #define HAVE_MMAP 1
> #define HAVE_MORECORE 0
> #define LACKS_SYS_MMAN_H
> #endif  /* __OS2__ */
> 
616a625,627
> /* HP-UX's stdlib.h redefines mallinfo unless _STRUCT_MALLINFO is defined */
> #define _STRUCT_MALLINFO
> 
1291c1302
< #ifndef WIN32
---
> #if !defined(WIN32) && !defined (__OS2__)
1313a1325,1360
> 
> #elif defined(__OS2__)
> 
> /* OS/2 MMAP via DosAllocMem */
> static void* os2mmap(size_t size) {
>   void* ptr;
>   if (DosAllocMem(&ptr, size, OBJ_ANY|PAG_COMMIT|PAG_READ|PAG_WRITE) &&
>       DosAllocMem(&ptr, size, PAG_COMMIT|PAG_READ|PAG_WRITE))
>     return MFAIL;
>   return ptr;
> }
> 
> #define os2direct_mmap(n)     os2mmap(n)
> 
> /* This function supports releasing coalesed segments */
> static int os2munmap(void* ptr, size_t size) {
>   while (size) {
>     ULONG ulSize = size;
>     ULONG ulFlags = 0;
>     if (DosQueryMem(ptr, &ulSize, &ulFlags) != 0)
>       return -1;
>     if ((ulFlags & PAG_BASE) == 0 ||(ulFlags & PAG_COMMIT) == 0 ||
>         ulSize > size)
>       return -1;
>     if (DosFreeMem(ptr) != 0)
>       return -1;
>     ptr = ( void * ) ( ( char * ) ptr + ulSize );
>     size -= ulSize;
>   }
>   return 0;
> }
> 
> #define CALL_MMAP(s)         os2mmap(s)
> #define CALL_MUNMAP(a, s)    os2munmap((a), (s))
> #define DIRECT_MMAP(s)       os2direct_mmap(s)
> 
1390c1437
< #ifndef WIN32
---
> #if !defined(WIN32) && !defined(__OS2__)
1403a1451,1460
> #elif defined(__OS2__)
> #define MLOCK_T HMTX
> #define INITIAL_LOCK(l)      DosCreateMutexSem(0, l, 0, FALSE)
> #define ACQUIRE_LOCK(l)      DosRequestMutexSem(*l, SEM_INDEFINITE_WAIT)
> #define RELEASE_LOCK(l)      DosReleaseMutexSem(*l)
> #if HAVE_MORECORE
> static MLOCK_T morecore_mutex;
> #endif /* HAVE_MORECORE */
> static MLOCK_T magic_init_mutex;
> 
2495c2552
< #ifndef WIN32
---
> #if !defined(WIN32) && !defined(__OS2__)
2498a2556,2560
> #elif defined (__OS2__)
>  /* if low-memory is used, os2munmap() would break
>     if it were anything other than 64k */
>     mparams.page_size = 4096u;
>     mparams.granularity = 65536u;
4195c4257
<      Consolidate freed chunks with preceeding or succeeding bordering
---
>      Consolidate freed chunks with preceding or succeeding bordering
Only in libffi.old/src: ffitest.c
Only in libffi.old/src/frv: .svn
diff -rbw libffi.old/src/frv/ffitarget.h libffi/src/frv/ffitarget.h
38,39d37
< 
< #ifdef FRV
41,44c39,40
<   FFI_DEFAULT_ABI = FFI_EABI,
< #endif
< 
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_EABI
Only in libffi.old/src/ia64: .svn
diff -rbw libffi.old/src/ia64/ffi.c libffi/src/ia64/ffi.c
2c2
<    ffi.c - Copyright (c) 1998, 2007, 2008 Red Hat, Inc.
---
>    ffi.c - Copyright (c) 2011 Anthony Green
3a4
>            Copyright (c) 1998, 2007, 2008 Red Hat, Inc.
228c229
<      that preceeds the integer register portion.  The estimate that the 
---
>      that precedes the integer register portion.  The estimate that the
428c429,430
<   FFI_ASSERT (cif->abi == FFI_UNIX);
---
>   if (cif->abi != FFI_UNIX)
>     return FFI_BAD_ABI;
diff -rbw libffi.old/src/ia64/ffitarget.h libffi/src/ia64/ffitarget.h
37,38c37,38
<   FFI_DEFAULT_ABI = FFI_UNIX,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_UNIX
diff -rbw libffi.old/src/java_raw_api.c libffi/src/java_raw_api.c
314c314
<   (*cl->fun) (cif, rvalue, raw, cl->user_data);
---
>   (*cl->fun) (cif, rvalue, (ffi_raw*)raw, cl->user_data);
Only in libffi.old/src/m32r: .svn
diff -rbw libffi.old/src/m32r/ffitarget.h libffi/src/m32r/ffitarget.h
39,40c39,40
<     FFI_DEFAULT_ABI = FFI_SYSV,
<     FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>     FFI_LAST_ABI,
>     FFI_DEFAULT_ABI = FFI_SYSV
Only in libffi.old/src/m68k: .svn
diff -rbw libffi.old/src/m68k/ffi.c libffi/src/m68k/ffi.c
11a12,14
> #ifdef __rtems__
> void rtems_cache_flush_multiple_data_lines( const void *, size_t );
> #else
13a17
> #endif
146a151
> #if (FFI_TYPE_LONGDOUBLE != FFI_TYPE_DOUBLE)
149a155
> #endif
268a275,277
> #ifdef __rtems__
>   rtems_cache_flush_multiple_data_lines( codeloc, FFI_TRAMPOLINE_SIZE );
> #else
270a280
> #endif
diff -rbw libffi.old/src/m68k/ffitarget.h libffi/src/m68k/ffitarget.h
37,38c37,38
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
diff -rbw libffi.old/src/m68k/sysv.S libffi/src/m68k/sysv.S
1a2
> 	
87a89,92
> 	| NOTE: On the mc68000, tst on an address register is not supported.
> #if defined(__mc68000__) && !defined(__mcoldfire__)
> 	cmp.w	#0, %a1
> #else
88a94
> #endif
105a112
> #if defined(__MC68881__)
106a114,116
> #else
> 	move.l	%d0,(%a1)
> #endif
111a122
> #if defined(__MC68881__)
112a124,127
> #else
> 	move.l	%d0,(%a1)+
> 	move.l	%d1,(%a1)
> #endif
117a133
> #if defined(__MC68881__)
118a135,139
> #else
> 	move.l	%d0,(%a1)+
> 	move.l	%d1,(%a1)+
> 	move.l	%d2,(%a1)
> #endif
180a202
> #if defined(__MC68881__)
181a204,206
> #else
> 	move.l	(%a0),%d0
> #endif
186a212
> #if defined(__MC68881__)
187a214,217
> #else
> 	move.l	(%a0)+,%d0
> 	move.l	(%a0),%d1
> #endif
189a220
> #if defined(__MC68881__)
190a222,226
> #else
> 	move.l	(%a0)+,%d0
> 	move.l	(%a0)+,%d1
> 	move.l	(%a0),%d2
> #endif
Only in libffi.old/src/mips: .svn
diff -rbw libffi.old/src/mips/ffi.c libffi/src/mips/ffi.c
2c2
<    ffi.c - Copyright (c) 1996, 2007, 2008  Red Hat, Inc.
---
>    ffi.c - Copyright (c) 2011  Anthony Green
3a4
>            Copyright (c) 1996, 2007, 2008, 2011  Red Hat, Inc.
665c666,667
<   FFI_ASSERT(cif->abi == FFI_O32 || cif->abi == FFI_O32_SOFT_FLOAT);
---
>   if (cif->abi != FFI_O32 && cif->abi != FFI_O32_SOFT_FLOAT)
>     return FFI_BAD_ABI;
668c670,671
<   FFI_ASSERT(cif->abi == FFI_N32 || cif->abi == FFI_N64);
---
>   if (cif->abi != FFI_N32 && cif->abi != FFI_N64)
>     return FFI_BAD_ABI;
diff -rbw libffi.old/src/mips/ffitarget.h libffi/src/mips/ffitarget.h
31a32,38
> #elif defined(__rtems__)
> /*
>  * Subprogram calling convention - copied from sgidefs.h
>  */
> #define _MIPS_SIM_ABI32		1
> #define _MIPS_SIM_NABI32	2
> #define _MIPS_SIM_ABI64		3
34a42
> 
46c54
< -- something is very wrong --
---
> # error -- something is very wrong --
54c62
< -- this is an unsupported platform --
---
> #     error -- this is an unsupported platform --
188a197
>   FFI_LAST_ABI,
192c201
<   FFI_DEFAULT_ABI = FFI_O32_SOFT_FLOAT,
---
>   FFI_DEFAULT_ABI = FFI_O32_SOFT_FLOAT
194c203
<   FFI_DEFAULT_ABI = FFI_O32,
---
>   FFI_DEFAULT_ABI = FFI_O32
199c208
<   FFI_DEFAULT_ABI = FFI_N64_SOFT_FLOAT,
---
>   FFI_DEFAULT_ABI = FFI_N64_SOFT_FLOAT
201c210
<   FFI_DEFAULT_ABI = FFI_N64,
---
>   FFI_DEFAULT_ABI = FFI_N64
205c214
<   FFI_DEFAULT_ABI = FFI_N32_SOFT_FLOAT,
---
>   FFI_DEFAULT_ABI = FFI_N32_SOFT_FLOAT
207c216
<   FFI_DEFAULT_ABI = FFI_N32,
---
>   FFI_DEFAULT_ABI = FFI_N32
211,212d219
< 
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
Only in libffi.old/src/moxie: .svn
Only in libffi.old/src/moxie: ffitarget.h
Only in libffi.old/src/pa: .svn
diff -rbw libffi.old/src/pa/ffi.c libffi/src/pa/ffi.c
2c2
<    ffi.c - (c) 2003-2004 Randolph Chung <tausq@debian.org>
---
>    ffi.c - (c) 2011 Anthony Green
3a4,5
> 	   (c) 2006 Free Software Foundation, Inc.
>            (c) 2003-2004 Randolph Chung <tausq@debian.org>
6c8
<    HP-UX PA ABI support (c) 2006 Free Software Foundation, Inc.
---
>    HP-UX PA ABI support 
636c638,639
<   FFI_ASSERT (cif->abi == FFI_PA32);
---
>   if (cif->abi != FFI_PA32)
>     return FFI_BAD_ABI;
diff -rbw libffi.old/src/pa/ffitarget.h libffi/src/pa/ffitarget.h
41c41,42
<   FFI_DEFAULT_ABI = FFI_PA32,
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_PA32
46c47,48
<   FFI_DEFAULT_ABI = FFI_PA32,
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_PA32
52c54,55
<   FFI_DEFAULT_ABI = FFI_PA64,
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_PA64
54,55d56
< 
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
Only in libffi.old/src/powerpc: .svn
diff -rbw libffi.old/src/powerpc/aix.S libffi/src/powerpc/aix.S
81a82,83
> 	.extern .ffi_prep_args
> 
127a130
> 	nop
228a232
> 	nop
diff -rbw libffi.old/src/powerpc/aix_closure.S libffi/src/powerpc/aix_closure.S
81a82,83
> 	.extern .ffi_closure_helper_DARWIN
> 
Only in libffi/src/powerpc: apple-darwin.S
Only in libffi/src/powerpc: apple-darwin_closure.S
diff -rbw libffi.old/src/powerpc/asm.h libffi/src/powerpc/asm.h
45c45
< /* The mcount code relies on a the return address being on the stack
---
> /* The mcount code relies on the return address being on the stack
diff -rbw libffi.old/src/powerpc/darwin.S libffi/src/powerpc/darwin.S
3c3
< 	      Copyright (c) 2004 Free Software Foundation, Inc.
---
> 	      Copyright (c) 2004, 2010 Free Software Foundation, Inc.
26a27
> #define LIBFFI_ASM
33c34
< #define g_long  MODE_CHOICE(long, quad)         /* usage is ".g_long" */
---
> #define machine_choice	MODE_CHOICE(ppc7400,ppc64)
34a36,44
> ; Define some pseudo-opcodes for size-independent load & store of GPRs ...
> #define lgu		MODE_CHOICE(lwzu, ldu)
> #define lg		MODE_CHOICE(lwz,ld)
> #define sg		MODE_CHOICE(stw,std)
> #define sgu		MODE_CHOICE(stwu,stdu)
> #define sgux		MODE_CHOICE(stwux,stdux)
> 
> ; ... and the size of GPRs and their storage indicator.
> #define GPR_BYTES	MODE_CHOICE(4,8)
35a46,60
> #define g_long		MODE_CHOICE(long, quad)	/* usage is ".g_long" */
> 
> ; From the ABI doc: "Mac OS X ABI Function Call Guide" Version 2009-02-04.
> #define LINKAGE_SIZE	MODE_CHOICE(24,48)
> #define PARAM_AREA	MODE_CHOICE(32,64)
> #define SAVED_LR_OFFSET	MODE_CHOICE(8,16)	/* save position for lr */
> 
> /* If there is any FP stuff we make space for all of the regs.  */
> #define SAVED_FPR_COUNT 13
> #define FPR_SIZE	8
> #define RESULT_BYTES	16
> 
> /* This should be kept in step with the same value in ffi_darwin.c.  */
> #define ASM_NEEDS_REGISTERS 4
> #define SAVE_REGS_SIZE (ASM_NEEDS_REGISTERS * GPR_BYTES)
37d61
< #define LIBFFI_ASM
39a64
> 
41a67
> 
46d71
< .text
49,50c74,83
< .text
< 	.align 2
---
> 
> 	/* We arrive here with:
> 	   r3 = ptr to extended cif.
> 	   r4 = -bytes.
> 	   r5 = cif flags.
> 	   r6 = ptr to return value.
> 	   r7 = fn pointer (user func).
> 	   r8 = fn pointer (ffi_prep_args).
> 	   r9 = ffi_type* for the ret val.  */
> 
52c85
< LFB0:
---
> Lstartcode:
54c87
< 			   so it doesn't have to be saved.  */
---
> 			   so it does not have to be saved.  */
58a92,95
> 	
> 	/* Save the retval type in parents frame.  */
> 	sg	r9,(LINKAGE_SIZE+6*GPR_BYTES)(r8)
> 
60c97
< 	stwux	r1,r1,r4
---
> 	sgux	r1,r1,r4
63a101
> 	sg	r9,SAVED_LR_OFFSET(r8)
65,68c103,111
< 	stw	r28,-16(r8)	
< 	stw	r29,-12(r8)
< 	stw	r30,-8(r8)
< 	stw	r31,-4(r8)
---
> 	sg	r28,-(4 * GPR_BYTES)(r8)	
> 	sg	r29,-(3 * GPR_BYTES)(r8)
> 	sg	r30,-(2 * GPR_BYTES)(r8)
> 	sg	r31,-(    GPR_BYTES)(r8)
> 
> #if !defined(POWERPC_DARWIN)
> 	/* The TOC slot is reserved in the Darwin ABI and r2 is volatile.  */
> 	sg	r2,(5 * GPR_BYTES)(r1)
> #endif
70,71d112
< 	stw	r9,8(r8)
< 	stw	r2,20(r1)
80c121
< 	/* Call ffi_prep_args.  */
---
> 	/* Call ffi_prep_args. r3 = extended cif, r4 = stack ptr copy.  */
86d126
< 	lwz     r2,20(r1)
87a128,131
> #if !defined(POWERPC_DARWIN)
> 	/* The TOC slot is reserved in the Darwin ABI and r2 is volatile.  */
> 	lg     r2,(5 * GPR_BYTES)(r1)
> #endif
95,103c139,147
< 	lwz     r3,20+(1*4)(r1)
< 	lwz     r4,20+(2*4)(r1)
< 	lwz     r5,20+(3*4)(r1)
< 	lwz     r6,20+(4*4)(r1)
< 	nop
< 	lwz     r7,20+(5*4)(r1)
< 	lwz     r8,20+(6*4)(r1)
< 	lwz     r9,20+(7*4)(r1)
< 	lwz     r10,20+(8*4)(r1)
---
> 	lg     r3, (LINKAGE_SIZE                )(r1)
> 	lg     r4, (LINKAGE_SIZE +     GPR_BYTES)(r1)
> 	lg     r5, (LINKAGE_SIZE + 2 * GPR_BYTES)(r1)
> 	lg     r6, (LINKAGE_SIZE + 3 * GPR_BYTES)(r1)
> 	nop
> 	lg     r7, (LINKAGE_SIZE + 4 * GPR_BYTES)(r1)
> 	lg     r8, (LINKAGE_SIZE + 5 * GPR_BYTES)(r1)
> 	lg     r9, (LINKAGE_SIZE + 6 * GPR_BYTES)(r1)
> 	lg     r10,(LINKAGE_SIZE + 7 * GPR_BYTES)(r1)
106c150
< 	/* Load all the FP registers.  */
---
> 	/* ... Load all the FP registers.  */
108,121c152,160
< 	lfd	f1,-16-(13*8)(r28)
< 	lfd	f2,-16-(12*8)(r28)
< 	lfd	f3,-16-(11*8)(r28)
< 	lfd	f4,-16-(10*8)(r28)
< 	nop
< 	lfd	f5,-16-(9*8)(r28)
< 	lfd	f6,-16-(8*8)(r28)
< 	lfd	f7,-16-(7*8)(r28)
< 	lfd	f8,-16-(6*8)(r28)
< 	nop
< 	lfd     f9,-16-(5*8)(r28)
< 	lfd     f10,-16-(4*8)(r28)
< 	lfd     f11,-16-(3*8)(r28)
< 	lfd     f12,-16-(2*8)(r28)
---
> 	lfd	f1, -SAVE_REGS_SIZE-(13*FPR_SIZE)(r28)
> 	lfd	f2, -SAVE_REGS_SIZE-(12*FPR_SIZE)(r28)
> 	lfd	f3, -SAVE_REGS_SIZE-(11*FPR_SIZE)(r28)
> 	lfd	f4, -SAVE_REGS_SIZE-(10*FPR_SIZE)(r28)
> 	nop
> 	lfd	f5, -SAVE_REGS_SIZE-( 9*FPR_SIZE)(r28)
> 	lfd	f6, -SAVE_REGS_SIZE-( 8*FPR_SIZE)(r28)
> 	lfd	f7, -SAVE_REGS_SIZE-( 7*FPR_SIZE)(r28)
> 	lfd	f8, -SAVE_REGS_SIZE-( 6*FPR_SIZE)(r28)
123c162,167
< 	lfd     f13,-16-(1*8)(r28)
---
> 	lfd     f9, -SAVE_REGS_SIZE-( 5*FPR_SIZE)(r28)
> 	lfd     f10,-SAVE_REGS_SIZE-( 4*FPR_SIZE)(r28)
> 	lfd     f11,-SAVE_REGS_SIZE-( 3*FPR_SIZE)(r28)
> 	lfd     f12,-SAVE_REGS_SIZE-( 2*FPR_SIZE)(r28)
> 	nop
> 	lfd     f13,-SAVE_REGS_SIZE-( 1*FPR_SIZE)(r28)
129a174
> 
134d178
< 	mtcrf	0x01,r31
136,140c180,188
< 	bt	30,L(done_return_value)
< 	bt	29,L(fp_return_value)
< 	stw	r3,0(r30)
< 	bf	28,L(done_return_value)
< 	stw	r4,4(r30)
---
> 	/* m64 structure returns can occupy the same set of registers as
> 	   would be used to pass such a structure as arg0 - so take care 
> 	   not to step on any possibly hot regs.  */
> 
> 	/* Get the flags.. */
> 	mtcrf	0x03,r31 ; we need c6 & cr7 now.
> 	; FLAG_RETURNS_NOTHING also covers struct ret-by-ref.
> 	bt	30,L(done_return_value)	  ; FLAG_RETURNS_NOTHING
> 	bf	27,L(scalar_return_value) ; not FLAG_RETURNS_STRUCT
142c190,192
< 	/* Fall through.  */
---
> 	/* OK, so we have a struct.  */
> #if defined(__ppc64__)
> 	bt	31,L(maybe_return_128) ; FLAG_RETURNS_128BITS, special case 
144,153c194,256
< L(done_return_value):
< 	/* Restore the registers we used and return.  */
< 	lwz	r9,8(r28)
< 	lwz	r31,-4(r28)
< 	mtlr	r9
< 	lwz	r30,-8(r28)
< 	lwz	r29,-12(r28)
< 	lwz	r28,-16(r28)
< 	lwz	r1,0(r1)
< 	blr
---
> 	/* OK, we have to map the return back to a mem struct.
> 	   We are about to trample the parents param area, so recover the
> 	   return type.  r29 is free, since the call is done.  */
> 	lg	r29,(LINKAGE_SIZE + 6 * GPR_BYTES)(r28)
> 
> 	sg	r3, (LINKAGE_SIZE                )(r28)
> 	sg	r4, (LINKAGE_SIZE +     GPR_BYTES)(r28)
> 	sg	r5, (LINKAGE_SIZE + 2 * GPR_BYTES)(r28)
> 	sg	r6, (LINKAGE_SIZE + 3 * GPR_BYTES)(r28)
> 	nop
> 	sg	r7, (LINKAGE_SIZE + 4 * GPR_BYTES)(r28)
> 	sg	r8, (LINKAGE_SIZE + 5 * GPR_BYTES)(r28)
> 	sg	r9, (LINKAGE_SIZE + 6 * GPR_BYTES)(r28)
> 	sg	r10,(LINKAGE_SIZE + 7 * GPR_BYTES)(r28)
> 	/* OK, so do the block move - we trust that memcpy will not trample
> 	   the fprs...  */
> 	mr 	r3,r30 ; dest
> 	addi	r4,r28,LINKAGE_SIZE ; source
> 	/* The size is a size_t, should be long.  */
> 	lg	r5,0(r29)
> 	/* Figure out small structs */
> 	cmpi	0,r5,4
> 	bgt	L3	; 1, 2 and 4 bytes have special rules.
> 	cmpi	0,r5,3
> 	beq	L3	; not 3
> 	addi	r4,r4,8
> 	subf	r4,r5,r4
> L3:
> 	bl	_memcpy
> 	
> 	/* ... do we need the FP registers? - recover the flags.. */
> 	mtcrf	0x03,r31 ; we need c6 & cr7 now.
> 	bf	29,L(done_return_value)	/* No floats in the struct.  */
> 	stfd	f1, -SAVE_REGS_SIZE-(13*FPR_SIZE)(r28)
> 	stfd	f2, -SAVE_REGS_SIZE-(12*FPR_SIZE)(r28)
> 	stfd	f3, -SAVE_REGS_SIZE-(11*FPR_SIZE)(r28)
> 	stfd	f4, -SAVE_REGS_SIZE-(10*FPR_SIZE)(r28)
> 	nop
> 	stfd	f5, -SAVE_REGS_SIZE-( 9*FPR_SIZE)(r28)
> 	stfd	f6, -SAVE_REGS_SIZE-( 8*FPR_SIZE)(r28)
> 	stfd	f7, -SAVE_REGS_SIZE-( 7*FPR_SIZE)(r28)
> 	stfd	f8, -SAVE_REGS_SIZE-( 6*FPR_SIZE)(r28)
> 	nop
> 	stfd	f9, -SAVE_REGS_SIZE-( 5*FPR_SIZE)(r28)
> 	stfd	f10,-SAVE_REGS_SIZE-( 4*FPR_SIZE)(r28)
> 	stfd	f11,-SAVE_REGS_SIZE-( 3*FPR_SIZE)(r28)
> 	stfd	f12,-SAVE_REGS_SIZE-( 2*FPR_SIZE)(r28)
> 	nop
> 	stfd	f13,-SAVE_REGS_SIZE-( 1*FPR_SIZE)(r28)
> 
> 	mr	r3,r29	; ffi_type *
> 	mr	r4,r30	; dest
> 	addi	r5,r28,-SAVE_REGS_SIZE-(13*FPR_SIZE) ; fprs
> 	xor	r6,r6,r6
> 	sg	r6,(LINKAGE_SIZE + 7 * GPR_BYTES)(r28)
> 	addi	r6,r28,(LINKAGE_SIZE + 7 * GPR_BYTES) ; point to a zeroed counter.
> 	bl 	_darwin64_struct_floats_to_mem
> 
> 	b L(done_return_value)
> #else
> 	stw	r3,0(r30) ; m32 the only struct return in reg is 4 bytes.
> #endif
> 	b L(done_return_value)
157c260
< 	bf	31,L(fd_return_value)
---
> 	bf	31,L(fd_return_value) ; FLAG_RETURNS_128BITS
159c262
< 	stfd	f2,8(r30)
---
> 	stfd	f2,FPR_SIZE(r30)
172a276,304
> L(scalar_return_value):
> 	bt	29,L(fp_return_value)	; FLAG_RETURNS_FP
> 	; ffi_arg is defined as unsigned long. 
> 	sg	r3,0(r30)		; Save the reg.
> 	bf	28,L(done_return_value) ; not FLAG_RETURNS_64BITS 
> 
> #if defined(__ppc64__)
> L(maybe_return_128):
> 	std	r3,0(r30)
> 	bf	31,L(done_return_value) ; not FLAG_RETURNS_128BITS 
> 	std	r4,8(r30)
> #else
> 	stw	r4,4(r30)
> #endif
> 
> 	/* Fall through.  */
> 	/* We want this at the end to simplify eh epilog computation.  */
> 
> L(done_return_value):
> 	/* Restore the registers we used and return.  */
> 	lg	r29,SAVED_LR_OFFSET(r28)
> 	; epilog
> 	lg	r31,-(1 * GPR_BYTES)(r28)
> 	mtlr	r29
> 	lg	r30,-(2 * GPR_BYTES)(r28)
> 	lg	r29,-(3 * GPR_BYTES)(r28)
> 	lg	r28,-(4 * GPR_BYTES)(r28)
> 	lg	r1,0(r1)
> 	blr
173a306
> 	.align	1
178d310
< 	.align 2
180d311
< .text
186,187c317,326
< .data
< .section __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms
---
> /* EH stuff.  */
> 
> #define EH_DATA_ALIGN_FACT MODE_CHOICE(0x7c,0x78)
> 
> 	.static_data
> 	.align LOG2_GPR_BYTES
> LLFB0$non_lazy_ptr:
> 	.g_long Lstartcode
> 
> 	.section __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
196c335
< 	.byte	0x7c	; sleb128 -4; CIE Data Alignment Factor
---
> 	.byte	EH_DATA_ALIGN_FACT ; sleb128 -4; CIE Data Alignment Factor
204a344
> 
213c353
< 	.set	L$set$3,LFE1-LFB0
---
> 	.set	L$set$3,LFE1-Lstartcode
217c357
< 	.set	L$set$4,LCFI0-LFB1
---
> 	.set	L$set$4,LCFI0-Lstartcode
242,245c382,383
< .data
< 	.align LOG2_GPR_BYTES
< LLFB0$non_lazy_ptr:
< 	.g_long LFB0
---
> 	.align 1
> 
Only in libffi/src/powerpc: darwin.S~
diff -rbw libffi.old/src/powerpc/darwin_closure.S libffi/src/powerpc/darwin_closure.S
2,3c2,4
<    darwin_closure.S - Copyright (c) 2002, 2003, 2004, Free Software Foundation,
<    Inc. based on ppc_closure.S
---
>    darwin_closure.S - Copyright (c) 2002, 2003, 2004, 2010, 
>    Free Software Foundation, Inc. 
>    based on ppc_closure.S
35a37,39
> #define machine_choice	MODE_CHOICE(ppc7400,ppc64)
> 
> ; Define some pseudo-opcodes for size-independent load & store of GPRs ...
36a41,43
> #define lg		MODE_CHOICE(lwz,ld)
> #define sg		MODE_CHOICE(stw,std)
> #define sgu		MODE_CHOICE(stwu,stdu)
37a45,47
> ; ... and the size of GPRs and their storage indicator.
> #define GPR_BYTES	MODE_CHOICE(4,8)
> #define LOG2_GPR_BYTES	MODE_CHOICE(2,3)	/* log2(GPR_BYTES) */
40c50,125
< #define LOG2_GPR_BYTES  MODE_CHOICE(2,3)        /* log2(GPR_BYTES) */
---
> ; From the ABI doc: "Mac OS X ABI Function Call Guide" Version 2009-02-04.
> #define LINKAGE_SIZE	MODE_CHOICE(24,48)
> #define PARAM_AREA	MODE_CHOICE(32,64)
> 
> #define SAVED_CR_OFFSET	MODE_CHOICE(4,8)	/* save position for CR */
> #define SAVED_LR_OFFSET	MODE_CHOICE(8,16)	/* save position for lr */
> 
> /* WARNING: if ffi_type is changed... here be monsters.  
>    Offsets of items within the result type.  */
> #define FFI_TYPE_TYPE	MODE_CHOICE(6,10)
> #define FFI_TYPE_ELEM	MODE_CHOICE(8,16)
> 
> #define SAVED_FPR_COUNT 13
> #define FPR_SIZE	8
> /* biggest m64 struct ret is 8GPRS + 13FPRS = 168 bytes - rounded to 16bytes = 176. */
> #define RESULT_BYTES	MODE_CHOICE(16,176)
> 
> ; The whole stack frame **MUST** be 16byte-aligned.
> #define SAVE_SIZE (((LINKAGE_SIZE+PARAM_AREA+SAVED_FPR_COUNT*FPR_SIZE+RESULT_BYTES)+15) & -16LL)
> #define PAD_SIZE (SAVE_SIZE-(LINKAGE_SIZE+PARAM_AREA+SAVED_FPR_COUNT*FPR_SIZE+RESULT_BYTES))
> 
> #define PARENT_PARM_BASE (SAVE_SIZE+LINKAGE_SIZE)
> #define FP_SAVE_BASE (LINKAGE_SIZE+PARAM_AREA)
> 
> #if defined(__ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__ >= 1050
> ; We no longer need the pic symbol stub for Darwin >= 9.
> #define BLCLS_HELP _ffi_closure_helper_DARWIN
> #define STRUCT_RETVALUE_P _darwin64_struct_ret_by_value_p
> #define PASS_STR_FLOATS _darwin64_pass_struct_floats
> #undef WANT_STUB
> #else
> #define BLCLS_HELP L_ffi_closure_helper_DARWIN$stub
> #define STRUCT_RETVALUE_P L_darwin64_struct_ret_by_value_p$stub
> #define PASS_STR_FLOATS L_darwin64_pass_struct_floats$stub
> #define WANT_STUB
> #endif
> 
> /* m32/m64
> 
>    The stack layout looks like this:
> 
>    |   Additional params...			| |     Higher address
>    ~						~ ~
>    |   Parameters      (at least 8*4/8=32/64)	| | NUM_GPR_ARG_REGISTERS
>    |--------------------------------------------| |
>    |   TOC=R2 (AIX) Reserved (Darwin)   4/8	| |
>    |--------------------------------------------| |
>    |   Reserved                       2*4/8	| |
>    |--------------------------------------------| |
>    |   Space for callee`s LR		4/8	| |
>    |--------------------------------------------| |
>    |   Saved CR [low word for m64]      4/8	| |
>    |--------------------------------------------| |
>    |   Current backchain pointer	4/8	|-/ Parent`s frame.
>    |--------------------------------------------| <+ <<< on entry to
>    |   Result Bytes		       16/176	| |
>    |--------------------------------------------| |
>    ~   padding to 16-byte alignment		~ ~
>    |--------------------------------------------| |
>    |   NUM_FPR_ARG_REGISTERS slots		| |
>    |   here fp13 .. fp1		       13*8	| |
>    |--------------------------------------------| |
>    |   R3..R10			  8*4/8=32/64	| | NUM_GPR_ARG_REGISTERS
>    |--------------------------------------------| |
>    |   TOC=R2 (AIX) Reserved (Darwin)   4/8	| |
>    |--------------------------------------------| |	stack	|
>    |   Reserved [compiler,binder]     2*4/8	| |	grows	|
>    |--------------------------------------------| |	down	V
>    |   Space for callees LR		4/8	| |
>    |--------------------------------------------| |	lower addresses
>    |   Saved CR [low word for m64]      4/8	| |
>    |--------------------------------------------| |     stack pointer here
>    |   Current backchain pointer	4/8	|-/	during
>    |--------------------------------------------|   <<<	call.
> 
> */
43,45c128,129
< .text
< 	.align LOG2_GPR_BYTES
< .globl _ffi_closure_ASM
---
> 
> 	.machine machine_choice
47a132
> 	.globl _ffi_closure_ASM
50a136
> Lstartcode:
52c138
< 	stw	r0,8(r1)	/* save the return address  */
---
> 	sg	r0,SAVED_LR_OFFSET(r1)	/* save the return address  */
54,60c140
< 	/* 24 Bytes (Linkage Area)
< 	   32 Bytes (outgoing parameter area, always reserved)
< 	   104 Bytes (13*8 from FPR)
< 	   16 Bytes (result)
< 	   176 Bytes  */
< 
< 	stwu	r1,-176(r1)	/* skip over caller save area
---
> 	sgu	r1,-SAVE_SIZE(r1)	/* skip over caller save area
66,90c146,171
< 	/* We store gpr 3 to gpr 10 (aligned to 4)
< 	   in the parents outgoing area.  */
< 	stw   r3,200(r1)
< 	stw   r4,204(r1)
< 	stw   r5,208(r1)
< 	stw   r6,212(r1)
< 	stw   r7,216(r1)
< 	stw   r8,220(r1)
< 	stw   r9,224(r1)
< 	stw   r10,228(r1)
< 
< 	/* We save fpr 1 to fpr 13. (aligned to 8)  */
< 	stfd  f1,56(r1)
< 	stfd  f2,64(r1)
< 	stfd  f3,72(r1)
< 	stfd  f4,80(r1)
< 	stfd  f5,88(r1)
< 	stfd  f6,96(r1)
< 	stfd  f7,104(r1)
< 	stfd  f8,112(r1)
< 	stfd  f9,120(r1)
< 	stfd  f10,128(r1)
< 	stfd  f11,136(r1)
< 	stfd  f12,144(r1)
< 	stfd  f13,152(r1)
---
> 	/* Put gpr 3 to gpr 10 in the parents outgoing area...
> 	   ... the remainder of any params that overflowed the regs will
> 	   follow here.  */
> 	sg	r3, (PARENT_PARM_BASE                )(r1)
> 	sg	r4, (PARENT_PARM_BASE + GPR_BYTES    )(r1)
> 	sg	r5, (PARENT_PARM_BASE + GPR_BYTES * 2)(r1)
> 	sg	r6, (PARENT_PARM_BASE + GPR_BYTES * 3)(r1)
> 	sg	r7, (PARENT_PARM_BASE + GPR_BYTES * 4)(r1)
> 	sg	r8, (PARENT_PARM_BASE + GPR_BYTES * 5)(r1)
> 	sg	r9, (PARENT_PARM_BASE + GPR_BYTES * 6)(r1)
> 	sg	r10,(PARENT_PARM_BASE + GPR_BYTES * 7)(r1)
> 
> 	/* We save fpr 1 to fpr 14 in our own save frame.  */
> 	stfd	f1, (FP_SAVE_BASE                 )(r1)
> 	stfd	f2, (FP_SAVE_BASE +  FPR_SIZE     )(r1)
> 	stfd	f3, (FP_SAVE_BASE +  FPR_SIZE * 2 )(r1)
> 	stfd	f4, (FP_SAVE_BASE +  FPR_SIZE * 3 )(r1)
> 	stfd	f5, (FP_SAVE_BASE +  FPR_SIZE * 4 )(r1)
> 	stfd	f6, (FP_SAVE_BASE +  FPR_SIZE * 5 )(r1)
> 	stfd	f7, (FP_SAVE_BASE +  FPR_SIZE * 6 )(r1)
> 	stfd	f8, (FP_SAVE_BASE +  FPR_SIZE * 7 )(r1)
> 	stfd	f9, (FP_SAVE_BASE +  FPR_SIZE * 8 )(r1)
> 	stfd	f10,(FP_SAVE_BASE +  FPR_SIZE * 9 )(r1)
> 	stfd	f11,(FP_SAVE_BASE +  FPR_SIZE * 10)(r1)
> 	stfd	f12,(FP_SAVE_BASE +  FPR_SIZE * 11)(r1)
> 	stfd	f13,(FP_SAVE_BASE +  FPR_SIZE * 12)(r1)
97c178
< 	addi r4,r1,160
---
> 	addi	r4,r1,(SAVE_SIZE-RESULT_BYTES)
100c181
< 	addi r5,r1,200
---
> 	addi	r5,r1,PARENT_PARM_BASE
103c184
< 	addi r6,r1,56
---
> 	addi	r6,r1,FP_SAVE_BASE
106c187,193
< 	bl	Lffi_closure_helper_DARWIN$stub
---
> 	bl	BLCLS_HELP
> 
> 	/* r3 contains the rtype pointer... save it since we will need
> 	   it later.  */
> 	sg	r3,LINKAGE_SIZE(r1)	; ffi_type * result_type
> 	lg	r0,0(r3)		; size => r0
> 	lhz	r3,FFI_TYPE_TYPE(r3)	; type => r3
108,109c195,198
< 	/* Now r3 contains the return type
< 	   so use it to look up in a table
---
> 	/* The helper will have intercepted struture returns and inserted
> 	   the caller`s destination address for structs returned by ref.  */
> 
> 	/* r3 contains the return type  so use it to look up in a table
112,114c201
< 	/* Look up the proper starting point in table
< 	   by using return type as offset.  */
< 	addi  r5,r1,160		  /* Get pointer to results area.  */
---
> 	addi	r5,r1,(SAVE_SIZE-RESULT_BYTES) /* Otherwise, our return is here.  */
143c230
< 	lwz	r3,0(r5)
---
> 	lg	r3,0(r5)
170a258,260
> #if defined(__ppc64__)
> 	lbz	r3,7(r5)
> #else
171a262
> #endif
177a269,271
> #if defined(__ppc64__)
> 	lbz	r3,7(r5)
> #else
178a273
> #endif
184a280,282
> #if defined(__ppc64__)
> 	lhz	r3,6(r5)
> #else
185a284
> #endif
191a291,293
> #if defined(__ppc64__)
> 	lha	r3,6(r5)
> #else
192a295
> #endif
198a302,304
> #if defined(__ppc64__)
> 	lwz	r3,4(r5)
> #else
199a306
> #endif
205a313,315
> #if defined(__ppc64__)
> 	lwz	r3,4(r5)
> #else
206a317
> #endif
212a324,328
> #if defined(__ppc64__)
> 	lg	r3,0(r5)
> 	b	Lfinish
> 	nop
> #else
215a332
> #endif
219a337,341
> #if defined(__ppc64__)
> 	lg	r3,0(r5)
> 	b	Lfinish
> 	nop
> #else
222a345
> #endif
226a350,358
> #if defined(__ppc64__)
> 	lg	r3,0(r5)		; we need at least this...
> 	cmpi	0,r0,4
> 	bgt	Lstructend		; not a special small case
> 	b	Lsmallstruct		; see if we need more.
> #else
> 	cmpi	0,r0,4
> 	bgt	Lfinish		; not by value
> 	lg	r3,0(r5)
228,231c360
< 	nop
< 	nop
< 	nop
< 
---
> #endif
234c363
< 	lwz	r3,0(r5)
---
> 	lg	r3,0(r5)
238a368,452
> #if defined(__ppc64__)
> Lsmallstruct:
> 	beq	Lfour			; continuation of Lret13.
> 	cmpi	0,r0,3
> 	beq	Lfinish			; don`t adjust this - can`t be any floats here...
> 	srdi	r3,r3,48
> 	cmpi	0,r0,2
> 	beq	Lfinish			; .. or here ..
> 	srdi	r3,r3,8
> 	b 	Lfinish			; .. or here.
> 
> Lfour:
> 	lg	r6,LINKAGE_SIZE(r1)	; get the result type
> 	lg	r6,FFI_TYPE_ELEM(r6)	; elements array pointer
> 	lg	r6,0(r6)		; first element
> 	lhz	r0,FFI_TYPE_TYPE(r6)	; OK go the type
> 	cmpi	0,r0,2			; FFI_TYPE_FLOAT
> 	bne	Lfourint
> 	lfs	f1,0(r5)		; just one float in the struct.
> 	b 	Lfinish
> 
> Lfourint:
> 	srdi	r3,r3,32		; four bytes.
> 	b 	Lfinish
> 
> Lstructend:
> 	lg	r3,LINKAGE_SIZE(r1)	; get the result type
> 	bl	STRUCT_RETVALUE_P
> 	cmpi	0,r3,0
> 	beq	Lfinish			; nope.
> 	/* Recover a pointer to the results.  */
> 	addi	r11,r1,(SAVE_SIZE-RESULT_BYTES)
> 	lg	r3,0(r11)		; we need at least this...
> 	lg	r4,8(r11)
> 	cmpi	0,r0,16
> 	beq	Lfinish		; special case 16 bytes we don't consider floats.
> 
> 	/* OK, frustratingly, the process of saving the struct to mem might have
> 	   messed with the FPRs, so we have to re-load them :(.
> 	   We`ll use our FPRs space again - calling: 
> 	   void darwin64_pass_struct_floats (ffi_type *s, char *src, 
> 					     unsigned *nfpr, double **fprs) 
> 	   We`ll temporarily pinch the first two slots of the param area for local
> 	   vars used by the routine.  */
> 	xor	r6,r6,r6
> 	addi	r5,r1,PARENT_PARM_BASE		; some space
> 	sg	r6,0(r5)			; *nfpr zeroed.
> 	addi	r6,r5,8				; **fprs
> 	addi	r3,r1,FP_SAVE_BASE		; pointer to FPRs space
> 	sg	r3,0(r6)
> 	mr	r4,r11				; the struct is here...
> 	lg	r3,LINKAGE_SIZE(r1)		; ffi_type * result_type.
> 	bl	PASS_STR_FLOATS			; get struct floats into FPR save space.
> 	/* See if we used any floats  */
> 	lwz	r0,(SAVE_SIZE-RESULT_BYTES)(r1)	
> 	cmpi	0,r0,0
> 	beq	Lstructints			; nope.
> 	/* OK load `em up... */
> 	lfd	f1, (FP_SAVE_BASE                 )(r1)
> 	lfd	f2, (FP_SAVE_BASE +  FPR_SIZE     )(r1)
> 	lfd	f3, (FP_SAVE_BASE +  FPR_SIZE * 2 )(r1)
> 	lfd	f4, (FP_SAVE_BASE +  FPR_SIZE * 3 )(r1)
> 	lfd	f5, (FP_SAVE_BASE +  FPR_SIZE * 4 )(r1)
> 	lfd	f6, (FP_SAVE_BASE +  FPR_SIZE * 5 )(r1)
> 	lfd	f7, (FP_SAVE_BASE +  FPR_SIZE * 6 )(r1)
> 	lfd	f8, (FP_SAVE_BASE +  FPR_SIZE * 7 )(r1)
> 	lfd	f9, (FP_SAVE_BASE +  FPR_SIZE * 8 )(r1)
> 	lfd	f10,(FP_SAVE_BASE +  FPR_SIZE * 9 )(r1)
> 	lfd	f11,(FP_SAVE_BASE +  FPR_SIZE * 10)(r1)
> 	lfd	f12,(FP_SAVE_BASE +  FPR_SIZE * 11)(r1)
> 	lfd	f13,(FP_SAVE_BASE +  FPR_SIZE * 12)(r1)
> 
> 	/* point back at our saved struct.  */
> Lstructints:
> 	addi	r11,r1,(SAVE_SIZE-RESULT_BYTES)
> 	lg	r3,0(r11)			; we end up picking the
> 	lg	r4,8(r11)			; first two again.
> 	lg	r5,16(r11)
> 	lg	r6,24(r11)
> 	lg	r7,32(r11)
> 	lg	r8,40(r11)
> 	lg	r9,48(r11)
> 	lg	r10,56(r11)
> #endif
> 
241,242c455,456
< 	addi	r1,r1,176	/* Restore stack pointer.  */
< 	lwz	r0,8(r1)	/* Get return address.  */
---
> 	addi	r1,r1,SAVE_SIZE		/* Restore stack pointer.  */
> 	lg	r0,SAVED_LR_OFFSET(r1)	/* Get return address.  */
244a459,460
> Lendcode:
> 	.align 1
248c464,474
< .data
---
> /* EH frame stuff.  */
> #define EH_DATA_ALIGN_FACT MODE_CHOICE(0x7c,0x78)
> /* 176, 400 */
> #define EH_FRAME_OFFSETA MODE_CHOICE(176,0x90)
> #define EH_FRAME_OFFSETB MODE_CHOICE(1,3)
> 
> 	.static_data
> 	.align LOG2_GPR_BYTES
> LLFB1$non_lazy_ptr:
> 	.g_long Lstartcode
> 
258c484
< 	.byte	0x7c	; sleb128 -4; CIE Data Alignment Factor
---
> 	.byte	EH_DATA_ALIGN_FACT ; sleb128 -4; CIE Data Alignment Factor
276c502
< 	.set	L$set$3,LFE1-LFB1
---
> 	.set	L$set$3,LFE1-Lstartcode
283c509
< 	.byte	176,1	; uleb128 176
---
> 	.byte	EH_FRAME_OFFSETA,EH_FRAME_OFFSETB	; uleb128 176,1/190,3
285c511
< 	.set	L$set$4,LCFI0-LFB1
---
> 	.set	L$set$4,LCFI0-Lstartcode
292,294c518,520
< .data
< 	.align	LOG2_GPR_BYTES
< LDFCM0:
---
> 	.align 	1
> 
> #ifdef WANT_STUB
296,298c522,523
< 	.align	LOG2_GPR_BYTES
< Lffi_closure_helper_DARWIN$stub:
< #if 1
---
> 	.align 5
> L_ffi_closure_helper_DARWIN$stub:
301,302c526,527
< 	bcl	20,31,LO$ffi_closure_helper_DARWIN
< LO$ffi_closure_helper_DARWIN:
---
> 	bcl 20,31,"L00000000001$spb"
> "L00000000001$spb":
304c529
< 	addis	r11,r11,ha16(L_ffi_closure_helper_DARWIN$lazy_ptr - LO$ffi_closure_helper_DARWIN)
---
> 	addis r11,r11,ha16(L_ffi_closure_helper_DARWIN$lazy_ptr-"L00000000001$spb")
306c531
< 	lgu	r12,lo16(L_ffi_closure_helper_DARWIN$lazy_ptr - LO$ffi_closure_helper_DARWIN)(r11)
---
> 	lwzu r12,lo16(L_ffi_closure_helper_DARWIN$lazy_ptr-"L00000000001$spb")(r11)
312c537,574
< 	.g_long dyld_stub_binding_helper
---
> 	.long	dyld_stub_binding_helper
> 
> #if defined(__ppc64__)
> 	.section __TEXT,__picsymbolstub1,symbol_stubs,pure_instructions,32
> 	.align 5
> L_darwin64_struct_ret_by_value_p$stub:
> 	.indirect_symbol _darwin64_struct_ret_by_value_p
> 	mflr r0
> 	bcl 20,31,"L00000000002$spb"
> "L00000000002$spb":
> 	mflr r11
> 	addis r11,r11,ha16(L_darwin64_struct_ret_by_value_p$lazy_ptr-"L00000000002$spb")
> 	mtlr r0
> 	lwzu r12,lo16(L_darwin64_struct_ret_by_value_p$lazy_ptr-"L00000000002$spb")(r11)
> 	mtctr r12
> 	bctr
> 	.lazy_symbol_pointer
> L_darwin64_struct_ret_by_value_p$lazy_ptr:
> 	.indirect_symbol _darwin64_struct_ret_by_value_p
> 	.long	dyld_stub_binding_helper
> 	.section __TEXT,__picsymbolstub1,symbol_stubs,pure_instructions,32
> 	.align 5
> L_darwin64_pass_struct_floats$stub:
> 	.indirect_symbol _darwin64_pass_struct_floats
> 	mflr r0
> 	bcl 20,31,"L00000000003$spb"
> "L00000000003$spb":
> 	mflr r11
> 	addis r11,r11,ha16(L_darwin64_pass_struct_floats$lazy_ptr-"L00000000003$spb")
> 	mtlr r0
> 	lwzu r12,lo16(L_darwin64_pass_struct_floats$lazy_ptr-"L00000000003$spb")(r11)
> 	mtctr r12
> 	bctr
> 	.lazy_symbol_pointer
> L_darwin64_pass_struct_floats$lazy_ptr:
> 	.indirect_symbol _darwin64_pass_struct_floats
> 	.long	dyld_stub_binding_helper
> #  endif
314,317d575
< .data
< 	.align LOG2_GPR_BYTES
< LLFB1$non_lazy_ptr:
< 	.g_long LFB1
Only in libffi/src/powerpc: darwin_closure.S~
diff -rbw libffi.old/src/powerpc/ffi.c libffi/src/powerpc/ffi.c
2,3c2
<    ffi.c - Copyright (c) 1998 Geoffrey Keating
<    Copyright (C) 2007, 2008 Free Software Foundation, Inc
---
>    ffi.c - Copyright (C) 2011 Anthony Green
4a4,5
>            Copyright (C) 2007, 2008 Free Software Foundation, Inc
> 	   Copyright (c) 1998 Geoffrey Keating
952c953,954
<   FFI_ASSERT (cif->abi == FFI_LINUX64);
---
>   if (cif->abi != FFI_LINUX64)
>     return FFI_BAD_ABI;
959c961,965
<   FFI_ASSERT (cif->abi == FFI_GCC_SYSV || cif->abi == FFI_SYSV);
---
>   if (! (cif->abi == FFI_GCC_SYSV 
> 	 || cif->abi == FFI_SYSV
> 	 || cif->abi == FFI_LINUX
> 	 || cif->abi == FFI_LINUX_SOFT_FLOAT))
>     return FFI_BAD_ABI;
diff -rbw libffi.old/src/powerpc/ffi_darwin.c libffi/src/powerpc/ffi_darwin.c
6c6
<    Copyright (C) 2002, 2006, 2007, 2009 Free Software Foundation, Inc.
---
>    Copyright (C) 2002, 2006, 2007, 2009, 2010 Free Software Foundation, Inc.
38,39c38,44
<   /* The assembly depends on these exact flags.  */
<   FLAG_RETURNS_NOTHING  = 1 << (31-30), /* These go in cr7  */
---
>   /* The assembly depends on these exact flags.  
>      For Darwin64 (when FLAG_RETURNS_STRUCT is set):
>        FLAG_RETURNS_FP indicates that the structure embeds FP data.
>        FLAG_RETURNS_128BITS signals a special struct size that is not
>        expanded for float content.  */
>   FLAG_RETURNS_128BITS	= 1 << (31-31), /* These go in cr7  */
>   FLAG_RETURNS_NOTHING	= 1 << (31-30),
42c47,48
<   FLAG_RETURNS_128BITS  = 1 << (31-31),
---
> 
>   FLAG_RETURNS_STRUCT	= 1 << (31-27), /* This goes in cr6  */
53c59,60
<   NUM_FPR_ARG_REGISTERS = 13
---
>   NUM_FPR_ARG_REGISTERS = 13,
>   LINKAGE_AREA_GPRS = 6
55c62,63
< enum { ASM_NEEDS_REGISTERS = 4 };
---
> 
> enum { ASM_NEEDS_REGISTERS = 4 }; /* r28-r31 */
59a68,69
>    m32/m64
> 
64c74
<    |   Previous backchain pointer	4	|	stack pointer here
---
>    |   Previous backchain pointer	4/8	|	stack pointer here
66c76
<    |   Saved r28-r31			4*4	| |	ffi_call_DARWIN
---
>    |   ASM_NEEDS_REGISTERS=r28-r31   4*(4/8)	| |	ffi_call_DARWIN
68c78,82
<    |   Parameters             (at least 8*4=32) | |
---
>    |   When we have any FP activity... the	| |
>    |   FPRs occupy NUM_FPR_ARG_REGISTERS slots	| |
>    |   here fp13 .. fp1 from high to low addr.	| |
>    ~						~ ~
>    |   Parameters      (at least 8*4/8=32/64)	| | NUM_GPR_ARG_REGISTERS
70c84
<    |   Space for GPR2                   4       | |
---
>    |   TOC=R2 (AIX) Reserved (Darwin)   4/8	| |
72c86
<    |   Reserved                       2*4       | |	grows	|
---
>    |   Reserved                       2*4/8	| |	grows	|
74c88
<    |   Space for callee's LR		4	| |
---
>    |   Space for callee's LR		4/8	| |
76c90
<    |   Saved CR                         4       | |
---
>    |   Saved CR [low word for m64]      4/8	| |
78c92
<    |   Current backchain pointer	4	|-/	during
---
>    |   Current backchain pointer	4/8	|-/	during
82a97,104
> #if defined(POWERPC_DARWIN64)
> static void
> darwin64_pass_struct_by_value 
>   (ffi_type *, char *, unsigned, unsigned *, double **, unsigned long **);
> #endif
> 
> /* This depends on GPR_SIZE = sizeof (unsigned long) */
> 
88a111
> #if !defined(POWERPC_DARWIN64) 
89a113
> #endif
97,98c121
<   int fparg_count = 0;
< 
---
>   int gp_count = 0, fparg_count = 0;
101c124
<   unsigned long *next_arg = stack + 6; /* 6 reserved positions.  */
---
>   unsigned long *next_arg = stack + LINKAGE_AREA_GPRS; /* 6 reserved positions.  */
107a131
> #if !defined(POWERPC_DARWIN64) 
108a133
> #endif
133,135c158
< 	  if (fparg_count >= NUM_FPR_ARG_REGISTERS)
< 	    *(double *)next_arg = double_tmp;
< 	  else
---
> 	  if (fparg_count < NUM_FPR_ARG_REGISTERS)
136a160,164
> #if defined(POWERPC_DARWIN)
> 	  *(float *)next_arg = *(float *) *p_argv;
> #else
> 	  *(double *)next_arg = double_tmp;
> #endif
137a166
> 	  gp_count++;
144,146c173
< 	  if (fparg_count >= NUM_FPR_ARG_REGISTERS)
< 	    *(double *)next_arg = double_tmp;
< 	  else
---
> 	  if (fparg_count < NUM_FPR_ARG_REGISTERS)
147a175
> 	  *(double *)next_arg = double_tmp;
149a178
> 	  gp_count++;
151a181
> 	  gp_count += 2;
160c190,192
< #ifdef POWERPC64
---
> #  if defined(POWERPC64) && !defined(POWERPC_DARWIN64)
> 	  /* ??? This will exceed the regs count when the value starts at fp13
> 	     and it will not put the extra bit on the stack.  */
171d202
< 	  else
172a204,207
> #    if defined(POWERPC_DARWIN64)
> 	  next_arg++;
> 	  gp_count++;
> #    else
173a209,210
> 	  gp_count += 2;
> #    endif
175d211
< 
179d214
< 	  else
180a216,219
> #    if defined(POWERPC_DARWIN64)
> 	  next_arg++;
> 	  gp_count++;
> #    else
181a221,222
> 	  gp_count += 2;
> #    endif
194a236
> 	  gp_count += 2;
214,215d255
< #ifdef POWERPC64
< 	  dest_cpy = (char *) next_arg;
217c257,268
< 	  if ((*ptr)->elements[0]->type == 3)
---
> #if defined(POWERPC_DARWIN64)
> 	  next_arg = (unsigned long *)ALIGN((char *)next_arg, (*ptr)->alignment);
> 	  darwin64_pass_struct_by_value (*ptr, (char *) *p_argv, 
> 					 (unsigned) size_al,
> 					 (unsigned int *) &fparg_count,
> 					 &fpr_base, &next_arg);
> #else
> 	  dest_cpy = (char *) next_arg;
> 
> 	  /* If the first member of the struct is a double, then include enough
> 	     padding in the struct size to align it to double-word.  */
> 	  if ((*ptr)->elements[0]->type == FFI_TYPE_DOUBLE)
219,220d269
< 	  if (size_al < 3 && abi == FFI_DARWIN)
< 	    dest_cpy += 4 - size_al;
221a271,272
> #  if defined(POWERPC64) 
> 	  FFI_ASSERT (abi != FFI_DARWIN);
225,226d275
< 	  dest_cpy = (char *) next_arg;
< 
230,234d278
< 	  size_al = (*ptr)->size;
< 	  /* If the first member of the struct is a double, then align
< 	     the struct to double-word.  */
< 	  if ((*ptr)->elements[0]->type == FFI_TYPE_DOUBLE)
< 	    size_al = ALIGN((*ptr)->size, 8);
240a285
> #endif
251a297
> 	  gp_count++;
264a311,570
> #if defined(POWERPC_DARWIN64)
> 
> /* See if we can put some of the struct into fprs.
>    This should not be called for structures of size 16 bytes, since these are not
>    broken out this way.  */
> static void
> darwin64_scan_struct_for_floats (ffi_type *s, unsigned *nfpr)
> {
>   int i;
> 
>   FFI_ASSERT (s->type == FFI_TYPE_STRUCT)
> 
>   for (i = 0; s->elements[i] != NULL; i++)
>     {
>       ffi_type *p = s->elements[i];
>       switch (p->type)
> 	{
> 	  case FFI_TYPE_STRUCT:
> 	    darwin64_scan_struct_for_floats (p, nfpr);
> 	    break;
> 	  case FFI_TYPE_LONGDOUBLE:
> 	    (*nfpr) += 2;
> 	    break;
> 	  case FFI_TYPE_DOUBLE:
> 	  case FFI_TYPE_FLOAT:
> 	    (*nfpr) += 1;
> 	    break;
> 	  default:
> 	    break;    
> 	}
>     }
> }
> 
> static int
> darwin64_struct_size_exceeds_gprs_p (ffi_type *s, char *src, unsigned *nfpr)
> {
>   unsigned struct_offset=0, i;
> 
>   for (i = 0; s->elements[i] != NULL; i++)
>     {
>       char *item_base;
>       ffi_type *p = s->elements[i];
>       /* Find the start of this item (0 for the first one).  */
>       if (i > 0)
>         struct_offset = ALIGN(struct_offset, p->alignment);
> 
>       item_base = src + struct_offset;
> 
>       switch (p->type)
> 	{
> 	  case FFI_TYPE_STRUCT:
> 	    if (darwin64_struct_size_exceeds_gprs_p (p, item_base, nfpr))
> 	      return 1;
> 	    break;
> 	  case FFI_TYPE_LONGDOUBLE:
> 	    if (*nfpr >= NUM_FPR_ARG_REGISTERS)
> 	      return 1;
> 	    (*nfpr) += 1;
> 	    item_base += 8;
> 	  /* FALL THROUGH */
> 	  case FFI_TYPE_DOUBLE:
> 	    if (*nfpr >= NUM_FPR_ARG_REGISTERS)
> 	      return 1;
> 	    (*nfpr) += 1;
> 	    break;
> 	  case FFI_TYPE_FLOAT:
> 	    if (*nfpr >= NUM_FPR_ARG_REGISTERS)
> 	      return 1;
> 	    (*nfpr) += 1;
> 	    break;
> 	  default:
> 	    /* If we try and place any item, that is non-float, once we've
> 	       exceeded the 8 GPR mark, then we can't fit the struct.  */
> 	    if ((unsigned long)item_base >= 8*8) 
> 	      return 1;
> 	    break;    
> 	}
>       /* now count the size of what we just used.  */
>       struct_offset += p->size;
>     }
>   return 0;
> }
> 
> /* Can this struct be returned by value?  */
> int 
> darwin64_struct_ret_by_value_p (ffi_type *s)
> {
>   unsigned nfp = 0;
> 
>   FFI_ASSERT (s && s->type == FFI_TYPE_STRUCT);
>   
>   /* The largest structure we can return is 8long + 13 doubles.  */
>   if (s->size > 168)
>     return 0;
>   
>   /* We can't pass more than 13 floats.  */
>   darwin64_scan_struct_for_floats (s, &nfp);
>   if (nfp > 13)
>     return 0;
>   
>   /* If there are not too many floats, and the struct is
>      small enough to accommodate in the GPRs, then it must be OK.  */
>   if (s->size <= 64)
>     return 1;
>   
>   /* Well, we have to look harder.  */
>   nfp = 0;
>   if (darwin64_struct_size_exceeds_gprs_p (s, NULL, &nfp))
>     return 0;
>   
>   return 1;
> }
> 
> void
> darwin64_pass_struct_floats (ffi_type *s, char *src, 
> 			     unsigned *nfpr, double **fprs)
> {
>   int i;
>   double *fpr_base = *fprs;
>   unsigned struct_offset = 0;
> 
>   /* We don't assume anything about the alignment of the source.  */
>   for (i = 0; s->elements[i] != NULL; i++)
>     {
>       char *item_base;
>       ffi_type *p = s->elements[i];
>       /* Find the start of this item (0 for the first one).  */
>       if (i > 0)
>         struct_offset = ALIGN(struct_offset, p->alignment);
>       item_base = src + struct_offset;
> 
>       switch (p->type)
> 	{
> 	  case FFI_TYPE_STRUCT:
> 	    darwin64_pass_struct_floats (p, item_base, nfpr,
> 					   &fpr_base);
> 	    break;
> 	  case FFI_TYPE_LONGDOUBLE:
> 	    if (*nfpr < NUM_FPR_ARG_REGISTERS)
> 	      *fpr_base++ = *(double *)item_base;
> 	    (*nfpr) += 1;
> 	    item_base += 8;
> 	  /* FALL THROUGH */
> 	  case FFI_TYPE_DOUBLE:
> 	    if (*nfpr < NUM_FPR_ARG_REGISTERS)
> 	      *fpr_base++ = *(double *)item_base;
> 	    (*nfpr) += 1;
> 	    break;
> 	  case FFI_TYPE_FLOAT:
> 	    if (*nfpr < NUM_FPR_ARG_REGISTERS)
> 	      *fpr_base++ = (double) *(float *)item_base;
> 	    (*nfpr) += 1;
> 	    break;
> 	  default:
> 	    break;    
> 	}
>       /* now count the size of what we just used.  */
>       struct_offset += p->size;
>     }
>   /* Update the scores.  */
>   *fprs = fpr_base;
> }
> 
> /* Darwin64 special rules.
>    Break out a struct into params and float registers.  */
> static void
> darwin64_pass_struct_by_value (ffi_type *s, char *src, unsigned size,
> 			       unsigned *nfpr, double **fprs, unsigned long **arg)
> {
>   unsigned long *next_arg = *arg;
>   char *dest_cpy = (char *)next_arg;
> 
>   FFI_ASSERT (s->type == FFI_TYPE_STRUCT)
> 
>   if (!size)
>     return;
> 
>   /* First... special cases.  */
>   if (size < 3
>       || (size == 4 
> 	  && s->elements[0] 
> 	  && s->elements[0]->type != FFI_TYPE_FLOAT))
>     {
>       /* Must be at least one GPR, padding is unspecified in value, 
> 	 let's make it zero.  */
>       *next_arg = 0UL; 
>       dest_cpy += 8 - size;
>       memcpy ((char *) dest_cpy, src, size);
>       next_arg++;
>     }
>   else if (size == 16)
>     {
>       memcpy ((char *) dest_cpy, src, size);
>       next_arg += 2;
>     }
>   else
>     {
>       /* now the general case, we consider embedded floats.  */
>       memcpy ((char *) dest_cpy, src, size);
>       darwin64_pass_struct_floats (s, src, nfpr, fprs);
>       next_arg += (size+7)/8;
>     }
>     
>   *arg = next_arg;
> }
> 
> double *
> darwin64_struct_floats_to_mem (ffi_type *s, char *dest, double *fprs, unsigned *nf)
> {
>   int i;
>   unsigned struct_offset = 0;
> 
>   /* We don't assume anything about the alignment of the source.  */
>   for (i = 0; s->elements[i] != NULL; i++)
>     {
>       char *item_base;
>       ffi_type *p = s->elements[i];
>       /* Find the start of this item (0 for the first one).  */
>       if (i > 0)
>         struct_offset = ALIGN(struct_offset, p->alignment);
>       item_base = dest + struct_offset;
> 
>       switch (p->type)
> 	{
> 	  case FFI_TYPE_STRUCT:
> 	    fprs = darwin64_struct_floats_to_mem (p, item_base, fprs, nf);
> 	    break;
> 	  case FFI_TYPE_LONGDOUBLE:
> 	    if (*nf < NUM_FPR_ARG_REGISTERS)
> 	      {
> 		*(double *)item_base = *fprs++ ;
> 		(*nf) += 1;
> 	      }
> 	    item_base += 8;
> 	  /* FALL THROUGH */
> 	  case FFI_TYPE_DOUBLE:
> 	    if (*nf < NUM_FPR_ARG_REGISTERS)
> 	      {
> 		*(double *)item_base = *fprs++ ;
> 		(*nf) += 1;
> 	      }
> 	    break;
> 	  case FFI_TYPE_FLOAT:
> 	    if (*nf < NUM_FPR_ARG_REGISTERS)
> 	      {
> 		*(float *)item_base = (float) *fprs++ ;
> 		(*nf) += 1;
> 	      }
> 	    break;
> 	  default:
> 	    break;    
> 	}
>       /* now count the size of what we just used.  */
>       struct_offset += p->size;
>     }
>   return fprs;
> }
> 
> #endif
> 
266c572,573
<    On Darwin, the first field of a structure has natural alignment.  */
---
>    On Darwin m32, the first field of a structure has natural alignment.  
>    On Darwin m64, all fields have natural alignment.  */
282a590
>       if (p->type == FFI_TYPE_STRUCT)
284,289c592,598
<       if (i == 0
< 	  && (p->type == FFI_TYPE_UINT64
< 	      || p->type == FFI_TYPE_SINT64
< 	      || p->type == FFI_TYPE_DOUBLE
< 	      || p->alignment == 8))
< 	align = 8;
---
> #if defined(POWERPC_DARWIN64)
>       /* Natural alignment for all items.  */
>       align = p->alignment;
> #else
>       /* Natrual alignment for the first item... */
>       if (i == 0)
> 	align = p->alignment;
290a600
> 	/* .. subsequent items with vector or align < 4 have natural align.  */
292a603
> 	/* .. or align is 4.  */
293a605,606
> #endif
>       /* Pad, if necessary, before adding the current item.  */
298a612
>   /* This should not be necessary on m64, but harmless.  */
347c661
<   int i;
---
>   unsigned i;
350c664
<   int fparg_count = 0, intarg_count = 0;
---
>   unsigned fparg_count = 0, intarg_count = 0;
375c689
<   bytes = (6 + ASM_NEEDS_REGISTERS) * sizeof(long);
---
>   bytes = (LINKAGE_AREA_GPRS + ASM_NEEDS_REGISTERS) * sizeof(unsigned long);
377c691,692
<   /* Return value handling.  The rules are as follows:
---
>   /* Return value handling.  
>     The rules m32 are as follows:
379,381c694,696
<      - Structures of size <= 4 bytes also returned in gpr3;
<      - 64-bit integer values and structures between 5 and 8 bytes are returned
<        in gpr3 and gpr4;
---
>      - structures of size <= 4 bytes also returned in gpr3;
>      - 64-bit integer values [??? and structures between 5 and 8 bytes] are
>        returned in gpr3 and gpr4;
384a700,707
>      m64:
>      - 64-bit or smaller integral values are returned in GPR3
>      - Single/double FP values are returned in fpr1;
>      - Long double FP values are returned in fpr1 and fpr2;
>      m64 Structures:
>      - If the structure could be accommodated in registers were it to be the
>        first argument to a routine, then it is returned in those registers.
>      m32/m64 structures otherwise:
412a736,767
> #if defined(POWERPC_DARWIN64)
>       {
> 	/* Can we fit the struct into regs?  */
> 	if (darwin64_struct_ret_by_value_p (cif->rtype))
> 	  {
> 	    unsigned nfpr = 0;
> 	    flags |= FLAG_RETURNS_STRUCT;
> 	    if (cif->rtype->size != 16)
> 	      darwin64_scan_struct_for_floats (cif->rtype, &nfpr) ;
> 	    else
> 	      flags |= FLAG_RETURNS_128BITS;
> 	    /* Will be 0 for 16byte struct.  */
> 	    if (nfpr)
> 	      flags |= FLAG_RETURNS_FP;
> 	  }
> 	else /* By ref. */
> 	  {
> 	    flags |= FLAG_RETVAL_REFERENCE;
> 	    flags |= FLAG_RETURNS_NOTHING;
> 	    intarg_count++;
> 	  }
>       }
> #elif defined(DARWIN_PPC)
>       if (cif->rtype->size <= 4)
> 	flags |= FLAG_RETURNS_STRUCT;
>       else /* else by reference.  */
> 	{
> 	  flags |= FLAG_RETVAL_REFERENCE;
> 	  flags |= FLAG_RETURNS_NOTHING;
> 	  intarg_count++;
> 	}
> #else /* assume we pass by ref.  */
415a771
> #endif
428,429c784,787
<      goes on the stack.  Structures are passed as a pointer to a copy of
<      the structure. Stuff on the stack needs to keep proper alignment.  */
---
>      goes on the stack.  
>      ??? Structures are passed as a pointer to a copy of the structure. 
>      Stuff on the stack needs to keep proper alignment.  
>      For m64 the count is effectively of half-GPRs.  */
431a790
>       unsigned align_words;
436a796
> #if !defined(POWERPC_DARWIN64)
440c800
< 	      && intarg_count%2 != 0)
---
> 	      && (intarg_count & 0x01) != 0)
441a802
> #endif
445d805
< 
449,453c809,815
< 	     8-byte-aligned.  */
< 	  if (fparg_count > NUM_FPR_ARG_REGISTERS
< 	      && intarg_count%2 != 0)
< 	    intarg_count++;
< 	  intarg_count +=2;
---
> 	     16-byte-aligned.  */
> 	  if (fparg_count >= NUM_FPR_ARG_REGISTERS)
> #if defined (POWERPC64)
> 	    intarg_count = ALIGN(intarg_count, 2);
> #else
> 	    intarg_count = ALIGN(intarg_count, 4);
> #endif
458a821,823
> #if defined(POWERPC64)
> 	  intarg_count++;
> #else
464c829,830
< 	      || (intarg_count >= NUM_GPR_ARG_REGISTERS && intarg_count%2 != 0))
---
> 	      || (intarg_count >= NUM_GPR_ARG_REGISTERS 
> 	          && (intarg_count & 0x01) != 0))
466a833
> #endif
470a838,851
> #if defined(POWERPC_DARWIN64)
> 	  align_words = (*ptr)->alignment >> 3;
> 	  if (align_words)
> 	    intarg_count = ALIGN(intarg_count, align_words);
> 	  /* Base size of the struct.  */
> 	  intarg_count += (size_al + 7) / 8;
> 	  /* If 16 bytes then don't worry about floats.  */
> 	  if (size_al != 16)
> 	    /* Scan through for floats to be placed in regs.  */
> 	    darwin64_scan_struct_for_floats (*ptr, &fparg_count) ;
> #else
> 	  align_words = (*ptr)->alignment >> 2;
> 	  if (align_words)
> 	    intarg_count = ALIGN(intarg_count, align_words);
472c853
< 	     the struct to double-word.  */
---
> 	     the struct to double-word. 
474c855
< 	    size_al = ALIGN((*ptr)->size, 8);
---
> 	    size_al = ALIGN((*ptr)->size, 8); */
479a861
> #endif
492a875,882
> #if defined(POWERPC_DARWIN64)
>   /* Space to image the FPR registers, if needed - which includes when they might be
>      used in a struct return.  */
>   if (fparg_count != 0 
>       || ((flags & FLAG_RETURNS_STRUCT)
> 	   && (flags & FLAG_RETURNS_FP)))
>     bytes += NUM_FPR_ARG_REGISTERS * sizeof(double);
> #else
495a886
> #endif
509c900
<   bytes = (bytes + 15) & ~0xF;
---
>   bytes = ALIGN(bytes, 16) ;
518a910
> 
520c912
< 			    void (*fn)(void), void (*fn2)(void));
---
> 			    void (*fn)(void), void (*fn2)(void), ffi_type*);
545c937
< 		   ffi_prep_args);
---
> 		   FFI_FN(ffi_prep_args));
549c941
< 		      ffi_prep_args);
---
> 		      FFI_FN(ffi_prep_args), cif->rtype);
569c961
<    and aix_clsoure.S
---
>    and aix_closure.S
571,618c963,999
<    SP previous -> +---------------------------------------+ <--- child frame
< 		  | back chain to caller 4                |
< 		  +---------------------------------------+ 4
< 		  | saved CR 4                            |
< 		  +---------------------------------------+ 8
< 		  | saved LR 4                            |
< 		  +---------------------------------------+ 12
< 		  | reserved for compilers 4              |
< 		  +---------------------------------------+ 16
< 		  | reserved for binders 4                |
< 		  +---------------------------------------+ 20
< 		  | saved TOC pointer 4                   |
< 		  +---------------------------------------+ 24
< 		  | always reserved 8*4=32 (previous GPRs)|
< 		  | according to the linkage convention   |
< 		  | from AIX                              |
< 		  +---------------------------------------+ 56
< 		  | our FPR area 13*8=104                 |
< 		  | f1                                    |
< 		  | .                                     |
< 		  | f13                                   |
< 		  +---------------------------------------+ 160
< 		  | result area 8                         |
< 		  +---------------------------------------+ 168
< 		  | alignement to the next multiple of 16 |
< SP current -->    +---------------------------------------+ 176 <- parent frame
< 		  | back chain to caller 4                |
< 		  +---------------------------------------+ 180
< 		  | saved CR 4                            |
< 		  +---------------------------------------+ 184
< 		  | saved LR 4                            |
< 		  +---------------------------------------+ 188
< 		  | reserved for compilers 4              |
< 		  +---------------------------------------+ 192
< 		  | reserved for binders 4                |
< 		  +---------------------------------------+ 196
< 		  | saved TOC pointer 4                   |
< 		  +---------------------------------------+ 200
< 		  | always reserved 8*4=32  we store our  |
< 		  | GPRs here                             |
< 		  | r3                                    |
< 		  | .                                     |
< 		  | r10                                   |
< 		  +---------------------------------------+ 232
< 		  | overflow part                         |
< 		  +---------------------------------------+ xxx
< 		  | ????                                  |
< 		  +---------------------------------------+ xxx
---
>    m32/m64
> 
>    The stack layout looks like this:
> 
>    |   Additional params...			| |     Higher address
>    ~						~ ~
>    |   Parameters      (at least 8*4/8=32/64)	| | NUM_GPR_ARG_REGISTERS
>    |--------------------------------------------| |
>    |   TOC=R2 (AIX) Reserved (Darwin)   4/8	| |
>    |--------------------------------------------| |
>    |   Reserved                       2*4/8	| |
>    |--------------------------------------------| |
>    |   Space for callee's LR		4/8	| |
>    |--------------------------------------------| |
>    |   Saved CR [low word for m64]      4/8	| |
>    |--------------------------------------------| |
>    |   Current backchain pointer	4/8	|-/ Parent's frame.
>    |--------------------------------------------| <+ <<< on entry to ffi_closure_ASM
>    |   Result Bytes			16	| |
>    |--------------------------------------------| |
>    ~   padding to 16-byte alignment		~ ~
>    |--------------------------------------------| |
>    |   NUM_FPR_ARG_REGISTERS slots		| |
>    |   here fp13 .. fp1		       13*8	| |
>    |--------------------------------------------| |
>    |   R3..R10			  8*4/8=32/64	| | NUM_GPR_ARG_REGISTERS
>    |--------------------------------------------| |
>    |   TOC=R2 (AIX) Reserved (Darwin)   4/8	| |
>    |--------------------------------------------| |	stack	|
>    |   Reserved [compiler,binder]     2*4/8	| |	grows	|
>    |--------------------------------------------| |	down	V
>    |   Space for callee's LR		4/8	| |
>    |--------------------------------------------| |	lower addresses
>    |   Saved CR [low word for m64]      4/8	| |
>    |--------------------------------------------| |     stack pointer here
>    |   Current backchain pointer	4/8	|-/	during
>    |--------------------------------------------|   <<<	ffi_closure_ASM.
620a1002
> 
638a1021,1034
> #if defined(POWERPC_DARWIN64)
> 	tramp[0] = 0x7c0802a6;  /*   mflr    r0  */
> 	tramp[1] = 0x429f0015;  /*   bcl-    20,4*cr7+so,  +0x18 (L1)  */
> 	/* We put the addresses here.  */
> 	tramp[6] = 0x7d6802a6;  /*L1:   mflr    r11  */
> 	tramp[7] = 0xe98b0000;  /*   ld     r12,0(r11) function address  */
> 	tramp[8] = 0x7c0803a6;  /*   mtlr    r0   */
> 	tramp[9] = 0x7d8903a6;  /*   mtctr   r12  */
> 	tramp[10] = 0xe96b0008;  /*   lwz     r11,8(r11) static chain  */
> 	tramp[11] = 0x4e800420;  /*   bctr  */
> 
> 	*((unsigned long *)&tramp[2]) = (unsigned long) ffi_closure_ASM; /* function  */
> 	*((unsigned long *)&tramp[4]) = (unsigned long) codeloc; /* context  */
> #else
649c1045
< 
---
> #endif
711c1107
< int
---
> ffi_type *
722c1118
< int
---
> ffi_type *
743a1140,1142
> #if defined(POWERPC_DARWIN64)
>   unsigned 	   fpsused = 0;
> #endif
748,749d1146
<   /* Copy the caller's structure return value address so that the closure
<      returns the data directly to the caller.  */
751a1149,1152
> #if defined(POWERPC_DARWIN64)
>       if (!darwin64_struct_ret_by_value_p (cif->rtype))
> 	{
>     	  /* Won't fit into the regs - return by ref.  */
754a1156,1166
> #elif defined(DARWIN_PPC)
>       if (cif->rtype->size > 4)
> 	{
> 	  rvalue = (void *) *pgr;
> 	  pgr++;
> 	}
> #else /* assume we return by ref.  */
>       rvalue = (void *) *pgr;
>       pgr++;
> #endif
>     }
767c1179
< #ifdef POWERPC64
---
> #if  defined(POWERPC64)
777c1189
< #ifdef POWERPC64
---
> #if  defined(POWERPC64)
787c1199
< #ifdef POWERPC64
---
> #if  defined(POWERPC64)
797d1208
< #ifdef POWERPC64
799,802c1210,1222
< 	  if (arg_types[i]->elements[0]->type == FFI_TYPE_DOUBLE)
< 	    size_al = ALIGN (arg_types[i]->size, 8);
< 	  if (size_al < 3 && cif->abi == FFI_DARWIN)
< 	    avalue[i] = (void *) pgr + 8 - size_al;
---
> #if defined(POWERPC_DARWIN64)
> 	  pgr = (unsigned long *)ALIGN((char *)pgr, arg_types[i]->alignment);
> 	  if (size_al < 3 || size_al == 4)
> 	    {
> 	      avalue[i] = ((char *)pgr)+8-size_al;
> 	      if (arg_types[i]->elements[0]->type == FFI_TYPE_FLOAT
> 		  && fpsused < NUM_FPR_ARG_REGISTERS)
> 		{
> 		  *(float *)pgr = (float) *(double *)pfr;
> 		  pfr++;
> 		  fpsused++;
> 		}
> 	    }
804c1224,1230
< 	    avalue[i] = (void *) pgr;
---
> 	    {
> 	      if (size_al != 16)
> 		pfr = (ffi_dblfl *) 
> 		    darwin64_struct_floats_to_mem (arg_types[i], (char *)pgr,
> 						   (double *)pfr, &fpsused);
> 	      avalue[i] = pgr;
> 	    }
807,809d1232
< 	  /* Structures that match the basic modes (QI 1 byte, HI 2 bytes,
< 	     SI 4 bytes) are aligned as if they were those modes.  */
< 	  size_al = arg_types[i]->size;
813a1237,1243
> #  if defined(POWERPC64)
> 	  FFI_ASSERT (cif->abi != FFI_DARWIN)
> 	  avalue[i] = pgr;
> 	  pgr += (size_al + 7) / 8;
> #  else
> 	  /* Structures that match the basic modes (QI 1 byte, HI 2 bytes,
> 	     SI 4 bytes) are aligned as if they were those modes.  */
815c1245
< 	    avalue[i] = (void*) pgr + 4 - size_al;
---
> 	    avalue[i] = (char*) pgr + 4 - size_al;
817c1247
< 	    avalue[i] = (void*) pgr;
---
> 	    avalue[i] = pgr;
819a1250
> #endif
824c1255
< #ifdef POWERPC64
---
> #if  defined(POWERPC64)
927c1358
<   return cif->rtype->type;
---
>   return cif->rtype;
diff -rbw libffi.old/src/powerpc/ffitarget.h libffi/src/powerpc/ffitarget.h
3c3
<    Copyright (C) 2007, 2008 Free Software Foundation, Inc
---
>    Copyright (C) 2007, 2008, 2010 Free Software Foundation, Inc
33a34
> #ifndef POWERPC64
35c36,38
< #elif defined (POWERPC_DARWIN) && defined (__ppc64__)	/* Darwin */
---
> #endif
> #elif defined (POWERPC_DARWIN) && defined (__ppc64__)	/* Darwin64 */
> #ifndef POWERPC64
36a40,43
> #endif
> #ifndef POWERPC_DARWIN64
> #define POWERPC_DARWIN64
> #endif
37a45
> #ifndef POWERPC64
39a48
> #endif
110a120,122
> #  if defined(POWERPC_DARWIN64)
> #    define FFI_TRAMPOLINE_SIZE 48
> #  else
111a124
> #  endif
diff -rbw libffi.old/src/prep_cif.c libffi/src/prep_cif.c
2c2,3
<    prep_cif.c - Copyright (c) 1996, 1998, 2007  Red Hat, Inc.
---
>    prep_cif.c - Copyright (c) 2011  Anthony Green
>                 Copyright (c) 1996, 1998, 2007  Red Hat, Inc.
40c41,42
<   FFI_ASSERT(arg != NULL);
---
>   if (UNLIKELY(arg == NULL || arg->elements == NULL))
>     return FFI_BAD_TYPEDEF;
42,44c44,45
<   FFI_ASSERT(arg->elements != NULL);
<   FFI_ASSERT(arg->size == 0);
<   FFI_ASSERT(arg->alignment == 0);
---
>   arg->size = 0;
>   arg->alignment = 0;
47a49,51
>   if (UNLIKELY(ptr == 0))
>     return FFI_BAD_TYPEDEF;
> 
50c54,55
<       if (((*ptr)->size == 0) && (initialize_aggregate((*ptr)) != FFI_OK))
---
>       if (UNLIKELY(((*ptr)->size == 0)
> 		    && (initialize_aggregate((*ptr)) != FFI_OK)))
96c101,102
<   FFI_ASSERT((abi > FFI_FIRST_ABI) && (abi <= FFI_DEFAULT_ABI));
---
>   if (! (abi > FFI_FIRST_ABI && abi < FFI_LAST_ABI))
>     return FFI_BAD_ABI;
113c119
< #if !defined M68K && !defined __i386__ && !defined __x86_64__ && !defined S390 && !defined PA
---
> #if !defined M68K && !defined X86_ANY && !defined S390 && !defined PA
134c140
< #if !defined __i386__ && !defined __x86_64__ && !defined S390 && !defined PA
---
> #if !defined X86_ANY && !defined S390 && !defined PA
Only in libffi.old/src/s390: .svn
diff -rbw libffi.old/src/s390/ffitarget.h libffi/src/s390/ffitarget.h
30a31
> #ifndef S390X
32a34
> #endif
43,44c45,46
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
Only in libffi.old/src/sh: .svn
diff -rbw libffi.old/src/sh/ffitarget.h libffi/src/sh/ffitarget.h
39,40c39,40
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
Only in libffi.old/src/sh64: .svn
diff -rbw libffi.old/src/sh64/ffitarget.h libffi/src/sh64/ffitarget.h
39,40c39,40
<   FFI_DEFAULT_ABI = FFI_SYSV,
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_SYSV
Only in libffi.old/src/sparc: .svn
diff -rbw libffi.old/src/sparc/ffi.c libffi/src/sparc/ffi.c
2c2,3
<    ffi.c - Copyright (c) 1996, 2003, 2004, 2007, 2008 Red Hat, Inc.
---
>    ffi.c - Copyright (c) 2011 Anthony Green
>            Copyright (c) 1996, 2003-2004, 2007-2008 Red Hat, Inc.
408a410,440
>       if (rvalue && (cif->rtype->type == FFI_TYPE_STRUCT
> #if FFI_TYPE_LONGDOUBLE != FFI_TYPE_DOUBLE
> 	  || cif->flags == FFI_TYPE_LONGDOUBLE
> #endif
> 	  ))
> 	{
> 	  /* For v8, we need an "unimp" with size of returning struct */
> 	  /* behind "call", so we alloc some executable space for it. */
> 	  /* l7 is used, we need to make sure v8.S doesn't use %l7.   */
> 	  unsigned int *call_struct = NULL;
> 	  ffi_closure_alloc(32, &call_struct);
> 	  if (call_struct)
> 	    {
> 	      unsigned long f = (unsigned long)fn;
> 	      call_struct[0] = 0xae10001f;		 /* mov   %i7, %l7	 */
> 	      call_struct[1] = 0xbe10000f;		 /* mov   %o7, %i7	 */
> 	      call_struct[2] = 0x03000000 | f >> 10;     /* sethi %hi(fn), %g1	 */
> 	      call_struct[3] = 0x9fc06000 | (f & 0x3ff); /* jmp %g1+%lo(fn), %o7 */
> 	      call_struct[4] = 0x01000000;		 /* nop			 */
> 	      if (cif->rtype->size < 0x7f)
> 		call_struct[5] = cif->rtype->size;	 /* unimp		 */
> 	      else
> 		call_struct[5] = 0x01000000;	     	 /* nop			 */
> 	      call_struct[6] = 0x81c7e008;		 /* ret			 */
> 	      call_struct[7] = 0xbe100017;		 /* mov   %l7, %i7	 */
> 	      ffi_call_v8(ffi_prep_args_v8, &ecif, cif->bytes,
> 			  cif->flags, rvalue, call_struct);
> 	      ffi_closure_free(call_struct);
> 	    }
> 	  else
> 	    {
410a443,449
> 	    }
> 	}
>       else
> 	{
> 	  ffi_call_v8(ffi_prep_args_v8, &ecif, cif->bytes,
> 		      cif->flags, rvalue, fn);
> 	}
450c489,490
<   FFI_ASSERT (cif->abi == FFI_V9);
---
>   if (cif->abi != FFI_V9)
>     return FFI_BAD_ABI;
459c499,500
<   FFI_ASSERT (cif->abi == FFI_V8);
---
>   if (cif->abi != FFI_V8)
>     return FFI_BAD_ABI;
diff -rbw libffi.old/src/sparc/ffitarget.h libffi/src/sparc/ffitarget.h
32a33
> #ifndef SPARC64
34a36
> #endif
44a47
>   FFI_LAST_ABI,
46c49
<   FFI_DEFAULT_ABI = FFI_V9,
---
>   FFI_DEFAULT_ABI = FFI_V9
48c51
<   FFI_DEFAULT_ABI = FFI_V8,
---
>   FFI_DEFAULT_ABI = FFI_V8
50d52
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
Only in libffi.old/src/x86: .svn
diff -rbw libffi.old/src/x86/ffi.c libffi/src/x86/ffi.c
6c6
<            Copyright (C) 2008  Free Software Foundation, Inc.
---
>            Copyright (C) 2008, 2010  Free Software Foundation, Inc.
158d157
< #if defined(X86) || defined (X86_WIN32) || defined(X86_FREEBSD) || defined(X86_DARWIN) || defined(X86_WIN64)
163d161
< #endif
212c210
<           // allocate space for return value pointer
---
>           /* allocate space for return value pointer */
237c235
<   // ensure space for storing four registers
---
>   /* ensure space for storing four registers */
294,311d291
<       {
<         // Make copies of all struct arguments
<         // NOTE: not sure if responsibility should be here or in caller
<         unsigned int i;
<         for (i=0; i < cif->nargs;i++) {
<           size_t size = cif->arg_types[i]->size;
<           if ((cif->arg_types[i]->type == FFI_TYPE_STRUCT
<                && (size != 1 && size != 2 && size != 4 && size != 8))
< #if FFI_TYPE_LONGDOUBLE != FFI_TYPE_DOUBLE
<               || cif->arg_types[i]->type == FFI_TYPE_LONGDOUBLE
< #endif
<               )
<             {
<               void *local = alloca(size);
<               memcpy(local, avalue[i], size);
<               avalue[i] = local;
<             }
<         }
314d293
<       }
diff -rbw libffi.old/src/x86/ffi64.c libffi/src/x86/ffi64.c
2,3c2,4
<    ffi64.c - Copyright (c) 2002, 2007  Bo Thorsen <bo@suse.de>
<              Copyright (c) 2008  Red Hat, Inc.
---
>    ffi64.c - Copyright (c) 20011  Anthony Green
>              Copyright (c) 2008, 2010  Red Hat, Inc.
>              Copyright (c) 2002, 2007  Bo Thorsen <bo@suse.de>
393c394
<   cif->bytes = bytes;
---
>   cif->bytes = ALIGN (bytes, 8);
500a502,508
>   /* Sanity check on the cif ABI.  */
>   {
>     int abi = cif->abi;
>     if (UNLIKELY (! (abi > FFI_FIRST_ABI && abi < FFI_LAST_ABI)))
>       return FFI_BAD_ABI;
>   }
> 
diff -rbw libffi.old/src/x86/ffitarget.h libffi/src/x86/ffitarget.h
33a34,36
> /* For code common to all platforms on x86 and x86_64. */
> #define X86_ANY
> 
41c44
< #define USE_BUILTIN_FFS 0 // not yet implemented in mingw-64 
---
> #define USE_BUILTIN_FFS 0 /* not yet implemented in mingw-64 */
66a70
>   FFI_LAST_ABI,
68,69c72
<   FFI_DEFAULT_ABI = FFI_SYSV,
< #endif
---
>   FFI_DEFAULT_ABI = FFI_SYSV
71c74
< #ifdef X86_WIN64
---
> #elif defined(X86_WIN64)
73,74c76,77
<   FFI_DEFAULT_ABI = FFI_WIN64,
< #else
---
>   FFI_LAST_ABI,
>   FFI_DEFAULT_ABI = FFI_WIN64
75a79
> #else
77d80
< #if !defined(X86_WIN32) && (defined(__i386__) || defined(__x86_64__) || defined(__i386) || defined(__amd64))
79a83
>   FFI_LAST_ABI,
81c85
<   FFI_DEFAULT_ABI = FFI_SYSV,
---
>   FFI_DEFAULT_ABI = FFI_SYSV
83c87
<   FFI_DEFAULT_ABI = FFI_UNIX64,
---
>   FFI_DEFAULT_ABI = FFI_UNIX64
86,88d89
< #endif /* X86_WIN64 */
< 
<   FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
diff -rbw libffi.old/src/x86/sysv.S libffi/src/x86/sysv.S
2c2
<    sysv.S - Copyright (c) 1996, 1998, 2001-2003, 2005, 2008  Red Hat, Inc.
---
>    sysv.S - Copyright (c) 1996, 1998, 2001-2003, 2005, 2008, 2010  Red Hat, Inc.
50a51,53
>         /* Align the stack pointer to 16-bytes */
>         andl  $0xfffffff0, %esp
> 
327a331,349
> #if defined __PIC__
> # if defined __sun__ && defined __svr4__
> /* 32-bit Solaris 2/x86 uses datarel encoding for PIC.  GNU ld before 2.22
>    doesn't correctly sort .eh_frame_hdr with mixed encodings, so match this.  */
> #  define FDE_ENCODING		0x30	/* datarel */
> #  define FDE_ENCODE(X)		X@GOTOFF
> # else
> #  define FDE_ENCODING		0x1b	/* pcrel sdata4 */
> #  if defined HAVE_AS_X86_PCREL
> #   define FDE_ENCODE(X)	X-.
> #  else
> #   define FDE_ENCODE(X)	X@rel
> #  endif
> # endif
> #else
> # define FDE_ENCODING		0	/* absolute */
> # define FDE_ENCODE(X)		X
> #endif
> 
333a356
> #ifdef HAVE_AS_ASCII_PSEUDO_OP
338a362,370
> #elif defined HAVE_AS_STRING_PSEUDO_OP
> #ifdef __PIC__
> 	.string "zR"	/* CIE Augmentation */
> #else
> 	.string ""	/* CIE Augmentation */
> #endif
> #else
> #error missing .ascii/.string
> #endif
344c376
< 	.byte	0x1b	/* FDE Encoding (pcrel sdata4) */
---
> 	.byte	FDE_ENCODING
357,363c389
< #if defined __PIC__ && defined HAVE_AS_X86_PCREL
< 	.long	.LFB1-.	/* FDE initial location */
< #elif defined __PIC__
< 	.long	.LFB1@rel
< #else
< 	.long	.LFB1
< #endif
---
> 	.long	FDE_ENCODE(.LFB1)	/* FDE initial location */
384,390c410
< #if defined __PIC__ && defined HAVE_AS_X86_PCREL
< 	.long	.LFB2-.	/* FDE initial location */
< #elif defined __PIC__
< 	.long	.LFB2@rel
< #else
< 	.long	.LFB2
< #endif
---
> 	.long	FDE_ENCODE(.LFB2)	/* FDE initial location */
420,426c440
< #if defined __PIC__ && defined HAVE_AS_X86_PCREL
< 	.long	.LFB3-.	/* FDE initial location */
< #elif defined __PIC__
< 	.long	.LFB3@rel
< #else
< 	.long	.LFB3
< #endif
---
> 	.long	FDE_ENCODE(.LFB3)	/* FDE initial location */
diff -rbw libffi.old/src/x86/unix64.S libffi/src/x86/unix64.S
326a327,329
> #ifdef HAVE_AS_X86_64_UNWIND_SECTION_TYPE
> 	.section	.eh_frame,"a",@unwind
> #else
327a331
> #endif
diff -rbw libffi.old/src/x86/win32.S libffi/src/x86/win32.S
397a398
> #ifndef __OS2__
398a400
> #endif
549a552
> #ifndef __OS2__
550a554
> #endif
670a675
> #ifndef __OS2__
671a677
> #endif
786a793
> #ifndef __OS2__
787a795
> #endif
892a901
> #ifndef __OS2__
893a903
> #endif
diff -rbw libffi.old/src/x86/win64.S libffi/src/x86/win64.S
234a235,239
> 
> #else
> 
> #ifdef SYMBOL_UNDERSCORE
> #define SYMBOL_NAME(name) _##name
235a241,243
> #define SYMBOL_NAME(name) name
> #endif
> 
238c246
< .extern _ffi_closure_win64_inner
---
> .extern SYMBOL_NAME(ffi_closure_win64_inner)
249,250c257,258
<         .globl _ffi_closure_win64	
< _ffi_closure_win64:     
---
>         .globl SYMBOL_NAME(ffi_closure_win64)
> SYMBOL_NAME(ffi_closure_win64):
290c298
< 	mov	$_ffi_closure_win64_inner, %rax
---
> 	mov	$SYMBOL_NAME(ffi_closure_win64_inner), %rax
299,300c307,308
<         .globl	_ffi_call_win64
< _ffi_call_win64:        
---
>         .globl	SYMBOL_NAME(ffi_call_win64)
> SYMBOL_NAME(ffi_call_win64):
Only in libffi.old: stamp-h.in
Only in libffi.old/testsuite: .svn
diff -rbw libffi.old/testsuite/Makefile.am libffi/testsuite/Makefile.am
21c21
< lib/libffi-dg.exp lib/wrapper.exp libffi.call/float.c \
---
> lib/libffi.exp lib/wrapper.exp libffi.call/float.c \
diff -rbw libffi.old/testsuite/Makefile.in libffi/testsuite/Makefile.in
40c40,50
< am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
---
> am__aclocal_m4_deps = $(top_srcdir)/m4/ax_cc_maxopt.m4 \
> 	$(top_srcdir)/m4/ax_cflags_warn_all.m4 \
> 	$(top_srcdir)/m4/ax_check_compiler_flags.m4 \
> 	$(top_srcdir)/m4/ax_compiler_vendor.m4 \
> 	$(top_srcdir)/m4/ax_configure_args.m4 \
> 	$(top_srcdir)/m4/ax_enable_builddir.m4 \
> 	$(top_srcdir)/m4/ax_gcc_archflag.m4 \
> 	$(top_srcdir)/m4/ax_gcc_x86_cpuid.m4 \
> 	$(top_srcdir)/m4/libtool.m4 $(top_srcdir)/m4/ltoptions.m4 \
> 	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
> 	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/acinclude.m4 \
73a84
> DLLTOOL = @DLLTOOL@
80a92
> FFI_EXEC_TRAMPOLINE_TABLE = @FFI_EXEC_TRAMPOLINE_TABLE@
98a111
> MANIFEST_TOOL = @MANIFEST_TOOL@
110a124
> PACKAGE_URL = @PACKAGE_URL@
112a127
> PRTDIAG = @PRTDIAG@
124a140
> ac_ct_AR = @ac_ct_AR@
131a148
> ax_enable_builddir_sed = @ax_enable_builddir_sed@
157d173
< lt_ECHO = @lt_ECHO@
167a184
> sys_symbol_underscore = @sys_symbol_underscore@
194c211
< lib/libffi-dg.exp lib/wrapper.exp libffi.call/float.c \
---
> lib/libffi.exp lib/wrapper.exp libffi.call/float.c \
Only in libffi.old/testsuite/config: .svn
Only in libffi.old/testsuite/lib: .svn
Only in libffi.old/testsuite/lib: libffi-dg.exp
Only in libffi/testsuite/lib: libffi.exp
Only in libffi.old/testsuite/libffi.call: .svn
diff -rbw libffi.old/testsuite/libffi.call/call.exp libffi/testsuite/libffi.call/call.exp
1c1
< # Copyright (C) 2003, 2006, 2009 Free Software Foundation, Inc.
---
> # Copyright (C) 2003, 2006, 2009, 2010 Free Software Foundation, Inc.
17,20d16
< # libffi testsuite that uses the 'dg.exp' driver.
< 
< load_lib libffi-dg.exp
< 
diff -rbw libffi.old/testsuite/libffi.call/cls_align_longdouble_split.c libffi/testsuite/libffi.call/cls_align_longdouble_split.c
9c9
< /* { dg-options -mlong-double-128 { target powerpc64*-*-* } } */
---
> /* { dg-options -mlong-double-128 { target powerpc64*-*-linux* } } */
diff -rbw libffi.old/testsuite/libffi.call/cls_align_longdouble_split2.c libffi/testsuite/libffi.call/cls_align_longdouble_split2.c
10c10
< /* { dg-options -mlong-double-128 { target powerpc64*-*-* } } */
---
> /* { dg-options -mlong-double-128 { target powerpc64*-*-linux* } } */
diff -rbw libffi.old/testsuite/libffi.call/cls_double_va.c libffi/testsuite/libffi.call/cls_double_va.c
8a9,10
> /* { dg-skip-if "" arm*-*-* { "-mfloat-abi=hard" } { "" } } */
> 
diff -rbw libffi.old/testsuite/libffi.call/cls_longdouble.c libffi/testsuite/libffi.call/cls_longdouble.c
9c9
< /* { dg-options -mlong-double-128 { target powerpc64*-*-* } } */
---
> /* { dg-options -mlong-double-128 { target powerpc64*-*-linux* } } */
diff -rbw libffi.old/testsuite/libffi.call/cls_longdouble_va.c libffi/testsuite/libffi.call/cls_longdouble_va.c
8a9,10
> /* { dg-skip-if "" arm*-*-* { "-mfloat-abi=hard" } { "" } } */
> 
diff -rbw libffi.old/testsuite/libffi.call/err_bad_abi.c libffi/testsuite/libffi.call/err_bad_abi.c
7c7,8
< /* { dg-do run { xfail *-*-* } } */
---
> /* { dg-do run } */
> 
20d20
< 	void* args[1];
24d23
< 	args[0] = NULL;
diff -rbw libffi.old/testsuite/libffi.call/err_bad_typedef.c libffi/testsuite/libffi.call/err_bad_typedef.c
7c7,8
< /* { dg-do run { xfail *-*-* } } */
---
> /* { dg-do run } */
> 
diff -rbw libffi.old/testsuite/libffi.call/ffitest.h libffi/testsuite/libffi.call/ffitest.h
79a80,99
> /* IRIX kludge.  */
> #if defined(__sgi)
> /* IRIX 6.5 <inttypes.h> provides all definitions, but only for C99
>    compilations.  */
> #if (_MIPS_SZLONG == 32)
> #define PRId64 "lld"
> #define PRIu64 "llu"
> #endif
> /* This doesn't match <inttypes.h>, which always has "lld" here, but the
>    arguments are uint64_t, int64_t, which are unsigned long, long for
>    64-bit in <sgidefs.h>.  */
> #if (_MIPS_SZLONG == 64)
> #define PRId64 "ld"
> #define PRIu64 "lu"
> #endif
> /* This doesn't match <inttypes.h>, which has "u" here, but the arguments
>    are uintptr_t, which is always unsigned long.  */
> #define PRIuPTR "lu"
> #endif
> 
diff -rbw libffi.old/testsuite/libffi.call/huge_struct.c libffi/testsuite/libffi.call/huge_struct.c
10c10
< /* { dg-options -mlong-double-128 { target powerpc64*-*-* } } */
---
> /* { dg-options -mlong-double-128 { target powerpc64*-*-linux* } } */
Only in libffi.old/testsuite/libffi.special: .svn
diff -rbw libffi.old/testsuite/libffi.special/special.exp libffi/testsuite/libffi.special/special.exp
1c1
< # Copyright (C) 2003, 2006, 2009 Free Software Foundation, Inc.
---
> # Copyright (C) 2003, 2006, 2009, 2010 Free Software Foundation, Inc.
17,18d16
< load_lib libffi-dg.exp
< 
